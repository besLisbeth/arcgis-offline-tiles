(function(){(this||window).webpackJsonp.registerAbsMids({"esri/layers/graphics/data/QueryEngineCapabilities":"4/qq","esri/layers/graphics/sources/support/clientSideDefaults":"DaHD","esri/layers/graphics/sources/support/MemorySourceWorker":"fhRm","esri/geometry/support/quantizationUtils":"u90+"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{"4/qq":function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.queryCapabilities={supportsStatistics:!0,supportsCentroid:!0,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0}}.apply(null,n))||(e.exports=i)},DaHD:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("2Atf"),r("H1tY"),r("rg9i")],void 0===(i=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0});var a={type:"esriSMS",style:"esriSMSCircle",size:6,color:[252,146,31,255],outline:{width:.75,color:[153,153,153,255]}},s={type:"esriSLS",style:"esriSLSSolid",width:1,color:[252,146,31,255]},u={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{width:.75,color:[255,255,255,191]}};t.createDrawingInfo=function(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?a:"esriGeometryPolyline"===e?s:u}}},t.createDefaultAttributesFunction=function(e,t){if(n("csp-restrictions"))return function(){var n;return r(((n={})[t]=null,n),e)};try{var i="this."+t+" = null;";for(var a in e)i+="this."+a+" = "+JSON.stringify(e[a])+";";var s=new Function(i);return function(){return new s}}catch(n){return function(){var n;return r(((n={})[t]=null,n),e)}}},t.createDefaultTemplate=function(e){return void 0===e&&(e={}),[{name:"New Feature",description:"",prototype:{attributes:i.clone(e)}}]}}.apply(null,n))||(e.exports=i)},fhRm:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("Q2wQ"),r("2Atf"),r("ma1f"),r("qMld"),r("Lzvl"),r("nrlZ"),r("+6sX"),r("rfv1"),r("Q2Em"),r("ZooB"),r("DaHD"),r("Q3lp"),r("k7g7")],void 0===(i=function(e,t,r,n,i,a,s,u,o,l,d,p,c,f,y){function h(e){return s.isPoint(e)?null!=e.z:!!e.hasZ}function m(e){return s.isPoint(e)?null!=e.m:!!e.hasM}Object.defineProperty(t,"__esModule",{value:!0});var g=u.WGS84,v={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:u.WGS84},b={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}},I=function(){this.code=null,this.description=null},x=function(e){this.error=new I,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e},F=function(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e},_=function(){function e(){this._queryEngine=null,this._nextObjectId=null,this._fieldsMap=new Map}return e.prototype.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._requiredFieldNames=this._fieldsMap=this._createDefaultAttributes=null},e.prototype.load=function(e){var t=this,r=[],s=e.features,u=this._inferLayerProperties(s,e.fields),o=e.fields||[],h=null!=e.hasM?e.hasM:u.hasM,m=null!=e.hasZ?e.hasZ:u.hasZ,I=!e.spatialReference&&!u.spatialReference,x=I?g:e.spatialReference||u.spatialReference,F=I?v:null,_=e.geometryType||u.geometryType,E=e.objectIdField||u.objectIdField,T=e.timeInfo;if(I&&r.push({type:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),!_)return a.reject(new i("feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features"));if(!E)return a.reject(new i("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields"));if(u.objectIdField&&E!==u.objectIdField&&(r.push({type:"feature-layer:duplicated-oid-field",message:'Provided objectIdField "'+E+'" doesn\'t match the field name "'+u.objectIdField+'", found in the provided fields'}),E=u.objectIdField),E&&!u.objectIdField){var j=null;o.some(function(e){return e.name===E&&(j=e,!0)})?(j.type="esriFieldTypeOID",j.editable=!1,j.nullable=!1):o.unshift({alias:E,name:E,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(var q=0,M=o;q<M.length;q++){if(null==(P=M[q]).name&&(P.name=P.alias),null==P.alias&&(P.alias=P.name),!P.name)return a.reject(new i("feature-layer:invalid-field-name","field name is missing",{field:P}));if(P.name===E&&(P.type="esriFieldTypeOID"),-1===f.kebabDict.jsonValues.indexOf(P.type))return a.reject(new i("feature-layer:invalid-field-type",'invalid type for field "'+P.name+'"',{field:P}))}var w={};this._requiredFieldNames=[];for(var z=0,S=o;z<S.length;z++){var P;if("esriFieldTypeOID"!==(P=S[z]).type&&"esriFieldTypeGlobalID"!==P.type){P.editable=null==P.editable||!!P.editable,P.nullable=null==P.nullable||!!P.nullable;var D=y.getFieldDefaultValue(P);P.nullable||void 0!==D?w[P.name]=D:this._requiredFieldNames.push(P.name)}this._fieldsMap.set(P.name.trim(),P),this._fieldsMap.set(P.name.trim().toLowerCase(),P)}if(this._createDefaultAttributes=c.createDefaultAttributesFunction(w,E),T){if(T.startTimeField){var R=this._fieldsMap.get(T.startTimeField.toLowerCase());R?(T.startTimeField=R.name,R.type="esriFieldTypeDate"):T.startTimeField=null}if(T.endTimeField){var O=this._fieldsMap.get(T.endTimeField.toLowerCase());O?(T.endTimeField=O.name,O.type="esriFieldTypeDate"):T.endTimeField=null}if(T.trackIdField){var N=this._fieldsMap.get(T.trackIdField.toLowerCase());N?T.trackIdField=N.name:(T.trackIdField=null,r.push({type:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:T}}))}T.startTimeField||T.endTimeField||(r.push({type:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:T}}),T=null)}var A={warnings:r,featureErrors:[],layerDefinition:n({},b,{drawingInfo:c.createDrawingInfo(_),templates:c.createDefaultTemplate(w),extent:F,geometryType:_,objectIdField:E,fields:o,hasZ:!!m,hasM:!!h,timeInfo:T}),assignedObjectIds:{}};if(this._queryEngine=new p.default({fields:o,geometryType:_,hasM:h,hasZ:m,objectIdField:E,spatialReference:x,featureStore:new l.default({geometryType:_,hasM:h,hasZ:m}),timeInfo:T}),!s||!s.length)return this._nextObjectId=1,a.resolve(A);var Q=s.reduce(function(e,t){var r=t.attributes&&t.attributes[E];return null==r||isNaN(r)||!isFinite(r)?e:Math.max(e,r)},0);return this._nextObjectId=1+Q,d.checkProjectionSupport(s,x).then(function(){return t._loadInitialFeatures(A,s)})},e.prototype.applyEdits=function(e){var t=this,r=this._queryEngine.spatialReference;return d.checkProjectionSupport(e.adds,r).then(function(){return d.checkProjectionSupport(e.updates,r)}).then(function(){return t._applyEdits(e)})},e.prototype.queryFeatures=function(e){return this._queryEngine.executeQuery(e)},e.prototype.queryFeatureCount=function(e){return this._queryEngine.executeQueryForCount(e)},e.prototype.queryObjectIds=function(e){return this._queryEngine.executeQueryForIds(e)},e.prototype.queryExtent=function(e){return this._queryEngine.executeQueryForExtent(e)},e.prototype._inferLayerProperties=function(e,t){for(var r=void 0,n=void 0,i=null,a=null,u=null,o=0,l=e;o<l.length;o++){var d=l[o].geometry;if(d&&(i||(i=s.getJsonType(d)),a||(a=d.spatialReference),null==r&&(r=h(d)),null==n&&(n=m(d)),i&&a&&null!=r&&null!=n))break}if(t&&t.length){var p=null;t.some(function(e){var t="esriFieldTypeOID"===e.type,r=!e.type&&e.name&&"objectid"===e.name.toLowerCase();return p=e,t||r})&&(u=p.name)}return{geometryType:i,spatialReference:a,objectIdField:u,hasM:n,hasZ:r}},e.prototype._loadInitialFeatures=function(e,t){for(var r=this._queryEngine,n=r.geometryType,i=r.hasM,a=r.hasZ,u=r.objectIdField,l=r.spatialReference,p=r.featureStore,c=[],f=0,y=t;f<y.length;f++){var h=y[f];if(null!=h.uid&&(e.assignedObjectIds[h.uid]=-1),h.geometry&&n!==s.getJsonType(h.geometry))e.featureErrors.push(new x("Incorrect geometry type."));else{var m=this._createDefaultAttributes(),g=this._mixAttributes(m,h.attributes,!0);g?e.featureErrors.push(g):(this._assignObjectId(m,h.attributes,!0),h.attributes=m,null!=h.uid&&(e.assignedObjectIds[h.uid]=h.attributes[u]),h.geometry&&(h.geometry=d.project(h.geometry,h.geometry.spatialReference,l)),c.push(h))}}if(p.addMany(o.convertFromFeatures([],c,n,a,i,u)),e.layerDefinition.extent=this._queryEngine.fullExtent,e.layerDefinition.timeInfo){var v=this._queryEngine.timeExtent,b=v.start,I=v.end;e.layerDefinition.timeInfo.timeExtent=[b,I]}return e},e.prototype._applyEdits=function(e){var t=e.adds,r=e.updates,n=e.deletes,i={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(i,t),r&&r.length&&this._applyUpdateEdits(i,r),n&&n.length){for(var a=0,s=n;a<s.length;a++){var u=s[a];i.deleteResults.push(new F(u))}this._queryEngine.featureStore.removeManyById(n)}return{fullExtent:this._queryEngine.fullExtent,featureEditResults:i}},e.prototype._applyAddEdits=function(e,t){for(var r=e.addResults,n=this._queryEngine,i=n.geometryType,a=n.hasM,u=n.hasZ,l=n.objectIdField,p=n.spatialReference,c=n.featureStore,f=[],y=0,h=t;y<h.length;y++){var m=h[y];if(m.geometry&&i!==s.getJsonType(m.geometry))r.push(new x("Incorrect geometry type."));else{var g=this._createDefaultAttributes(),v=this._mixAttributes(g,m.attributes);if(v)r.push(v);else{if(this._assignObjectId(g,m.attributes),m.attributes=g,null!=m.uid){var b=m.attributes[l];e.uidToObjectId[m.uid]=b}m.geometry&&(m.geometry=d.project(m.geometry,m.geometry.spatialReference,p)),f.push(m),r.push(new F(m.attributes[l]))}}}c.addMany(o.convertFromFeatures([],f,i,u,a,l))},e.prototype._applyUpdateEdits=function(e,t){for(var r=e.updateResults,n=this._queryEngine,i=n.geometryType,a=n.hasM,u=n.hasZ,l=n.objectIdField,p=n.spatialReference,c=n.featureStore,f=0,y=t;f<y.length;f++){var h=y[f],m=h.attributes,g=h.geometry,v=m&&m[l];if(null!=v)if(c.has(v)){var b=o.convertToFeature(c.getFeature(v),i,u,a);if(g){if(i!==s.getJsonType(g)){r.push(new x("Incorrect geometry type."));continue}b.geometry=d.project(g,g.spatialReference,p)}if(m){var I=this._mixAttributes(b.attributes,m);if(I){r.push(I);continue}}c.add(o.convertFromFeature(b,i,u,a,l)),r.push(new F(v))}else r.push(new x("Feature with object id "+v+" missing"));else r.push(new x("Identifier field "+l+" missing"))}},e.prototype._assignObjectId=function(e,t,r){void 0===r&&(r=!1);var n=this._queryEngine.objectIdField;r&&t&&isFinite(t[n])?e[n]=t[n]:e[n]=this._nextObjectId++},e.prototype._mixAttributes=function(e,t,r){for(var n in void 0===r&&(r=!1),t){var i=y.sanitizeNullFieldValue(t[n]),a=this._fieldsMap.get(n)||this._fieldsMap.get(n.toLowerCase());if(a&&(r||a.editable)){var s=y.validateFieldValue(a,i);if(s)return new x(y.validationErrorToString(s,a,i));e[a.name]=i}}for(var u=0,o=this._requiredFieldNames;u<o.length;u++){var l=o[u];if(void 0===e[l])return new x('missing required field "'+l+'"')}return null},e}();t.default=_}.apply(null,n))||(e.exports=i)},"u90+":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("Lzvl")],void 0===(i=function(e,t,r){function n(e){return e&&"upperLeft"===e.originPosition}function i(e,t){var r=e.scale,n=e.translate;return Math.round((t-n[0])/r[0])}function a(e,t){var r=e.scale,n=e.translate;return Math.round((n[1]-t)/r[1])}function s(e,t,r){for(var n,s,u,o,l=[],d=0;d<r.length;d++){var p=r[d];d>0?(u=i(e,p[0]),o=a(e,p[1]),u===n&&o===s||(l.push(t(p,u-n,o-s)),n=u,s=o)):(n=i(e,p[0]),s=a(e,p[1]),l.push(t(p,n,s)))}return l.length>0?l:null}function u(e,t,r,n){return s(e,r?n?j:T:n?T:E,t)}function o(e,t,r,n){for(var i=[],a=r?n?j:T:n?T:E,u=0;u<t.length;u++){var o=s(e,a,t[u]);o&&o.length>=3&&i.push(o)}return i.length?i:null}function l(e,t,r,n){for(var i=[],a=r?n?j:T:n?T:E,u=0;u<t.length;u++){var o=s(e,a,t[u]);o&&o.length>=2&&i.push(o)}return i.length?i:null}function d(e,t){var r=e.scale,n=e.translate;return t*r[0]+n[0]}function p(e,t){var r=e.scale;return e.translate[1]-t*r[1]}function c(e,t,r){var n=new Array(r.length);if(!r.length)return n;var i=e.scale,a=i[0],s=i[1],u=d(e,r[0][0]),o=p(e,r[0][1]);n[0]=t(r[0],u,o);for(var l=1;l<r.length;l++){var c=r[l];u+=c[0]*a,o-=c[1]*s,n[l]=t(c,u,o)}return n}function f(e,t,r){for(var n=new Array(r.length),i=0;i<r.length;i++)n[i]=c(e,t,r[i]);return n}function y(e,t,r,n){return c(e,r?n?j:T:n?T:E,t)}function h(e,t,r,n){return f(e,r?n?j:T:n?T:E,t)}function m(e,t,r,n){return f(e,r?n?j:T:n?T:E,t)}function g(e,t,r){for(var n=r[0],i=n[0],a=n[1],s=Math.min(i,t[0]),u=Math.min(a,t[1]),o=Math.max(i,t[2]),l=Math.max(a,t[3]),d=1;d<r.length;d++){var p=r[d],c=p[0],f=p[1];i+=c,a+=f,c<0&&(s=Math.min(s,i)),c>0&&(o=Math.max(o,i)),f<0?u=Math.min(u,a):f>0&&(l=Math.max(l,a))}return e[0]=s,e[1]=u,e[2]=o,e[3]=l,e}function v(e,t){if(!t.length)return null;e[0]=e[1]=Number.POSITIVE_INFINITY,e[2]=e[3]=Number.NEGATIVE_INFINITY;for(var r=0;r<t.length;r++)g(e,e,t[r]);return e}function b(e,t,r,n,s){return t.xmin=i(e,r.xmin),t.ymin=a(e,r.ymin),t.xmax=i(e,r.xmax),t.ymax=a(e,r.ymax),t!==r&&(n&&(t.zmin=r.zmin,t.zmax=r.zmax),s&&(t.mmin=r.mmin,t.mmax=r.mmax)),t}function I(e,t,r,n,i){return t.points=u(e,r.points,n,i),t}function x(e,t,r,n,s){return t.x=i(e,r.x),t.y=a(e,r.y),t!==r&&(n&&(t.z=r.z),s&&(t.m=r.m)),t}function F(e,t,r,n,i){var a=o(e,r.rings,n,i);return a?(t.rings=a,t):null}function _(e,t,r,n,i){var a=l(e,r.paths,n,i);return a?(t.paths=a,t):null}Object.defineProperty(t,"__esModule",{value:!0});var E=function(e,t,r){return[t,r]},T=function(e,t,r){return[t,r,e[2]]},j=function(e,t,r){return[t,r,e[2],e[3]]};t.toQuantizationTransform=function(e){return e?{originPosition:"upperLeft",scale:[e.tolerance,e.tolerance],translate:[e.extent.xmin,e.extent.ymax]}:null},t.equals=function(e,t){return e===t||null==e&&null==t||null!=e&&null!=t&&(n(e)?(r=e.translate[0],i=e.translate[1],a=e.scale[0]):(r=e.extent.xmin,i=e.extent.ymax,a=e.tolerance),n(t)?(s=t.translate[0],u=t.translate[1],o=t.scale[0]):(s=t.extent.xmin,u=t.extent.ymax,o=t.tolerance),r===s&&i===u&&a===o);var r,i,a,s,u,o},t.quantizeX=i,t.quantizeY=a,t.quantizeBounds=function(e,t,r){return t[0]=i(e,r[0]),t[3]=a(e,r[1]),t[2]=i(e,r[2]),t[1]=a(e,r[3]),t},t.quantizePoints=u,t.quantizeRings=o,t.quantizePaths=l,t.hydrateX=d,t.hydrateY=p,t.hydrateCoordsArray=c,t.hydrateCoordsArrayArray=f,t.hydrateBounds=function(e,t,r){return r?(t[0]=d(e,r[0]),t[1]=p(e,r[3]),t[2]=d(e,r[2]),t[3]=p(e,r[1]),t):[d(e,t[0]),p(e,t[3]),d(e,t[2]),p(e,t[1])]},t.hydratePoints=y,t.hydratePaths=h,t.hydrateRings=m,t.getQuantizedBoundsCoordsArray=g,t.getQuantizedBoundsCoordsArrayArray=v,t.getQuantizedBoundsPoints=function(e){var t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return g(t,t,e)},t.getQuantizedBoundsPaths=function(e){return v([0,0,0,0],e)},t.getQuantizedBoundsRings=function(e){return v([0,0,0,0],e)},t.quantizeExtent=b,t.quantizeMultipoint=I,t.quantizePoint=x,t.quantizePolygon=F,t.quantizePolyline=_,t.quantizeGeometry=function(e,t){return e&&t?r.isPoint(t)?x(e,{},t,!1,!1):r.isPolyline(t)?_(e,{},t,!1,!1):r.isPolygon(t)?F(e,{},t,!1,!1):r.isMultipoint(t)?I(e,{},t,!1,!1):r.isExtent(t)?b(e,{},t,!1,!1):null:null},t.hydrateExtent=function(e,t,r,n,i){return t.xmin=d(e,r.xmin),t.ymin=p(e,r.ymin),t.xmax=d(e,r.xmax),t.ymax=p(e,r.ymax),t!==r&&(n&&(t.zmin=r.zmin,t.zmax=r.zmax),i&&(t.mmin=r.mmin,t.mmax=r.mmax)),t},t.hydrateMultipoint=function(e,t,r,n,i){return t.points=y(e,r.points,n,i),t},t.hydratePoint=function(e,t,r,n,i){return t.x=d(e,r.x),t.y=p(e,r.y),t!==r&&(n&&(t.z=r.z),i&&(t.m=r.m)),t},t.hydratePolygon=function(e,t,r,n,i){return t.rings=m(e,r.rings,n,i),t},t.hydratePolyline=function(e,t,r,n,i){return t.paths=h(e,r.paths,n,i),t}}.apply(null,n))||(e.exports=i)}}]);
!function(e){function t(t){for(var r,a,l=t[0],c=t[1],u=t[2],s=0,p=[];s<l.length;s++)a=l[s],o[a]&&p.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(f&&f(t);p.length;)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=l(l.s=n[0]))}return e}var r={},o={39:0},i=[];function a(e){return l.p+"scripts/"+({}[e]||e)+"/"+({}[e]||e)+"."+{0:"0b0d3891e20654c10935",1:"d344338f1c2806dfd2d2",2:"9e9ccef12f3f5e0cd4d0",3:"6519bf4f78e05e6e12c3",4:"061fda8ce54bbf2a320c",5:"5ab677e559491ff55756",6:"d339bd6d9665175b8ec9",7:"a5f64224ada6115363a8",8:"e95d1e7ce89be1bd802e",9:"b83a578cb6a635a4bbb1",10:"c7f705f8f59eeb190310",11:"fd234bc0280258e72c86",12:"f70532dbc76aefa9aa97",13:"74b5d3450a3a1bbaefe3",14:"9cb2e4f393b02baf727e",15:"c33d2ee53f6a8653c22c",16:"b49a3325f8edf8b784d9",17:"2830270260175a20a49c",18:"9aca6f44f20477da63f7",19:"b83b06b714bb0cf31a7b",20:"b77659e9b146604e19d3",21:"a6b286973bd2175cb7f1",22:"2f0146bd713fa111ede7",23:"d5978c855fe6d197acdf",24:"41b922b8184cbcb2be55",25:"f5dbc71b714a56172c02",26:"2146f39c2bf36ffd796d",27:"2ba6ad96d7c1071186d9",28:"d92f00fdb7d87ac7f242",29:"11a6fc8cabcc50dbebd9",30:"451737c79a78708c2104",31:"79e63fd7ef0ddd42302e",32:"051ec75a8f1619e441c9",33:"4dc1075ac0088c6e2e74",34:"02064a22c9946c1acc5e",35:"dd8f6f661d1a21565543",36:"419ae621a80f05bf1412",37:"a2f335661e81f8e3e57b",38:"93dfe02cb97fa5cd636d",41:"f6ed3b96629b2437e1d6",42:"bfd2eaa91a1cd34fb2f8",43:"c85e54f44e5ec70d8a9c",44:"4cef3f4cf30620d71b91",45:"9e053357b2c230f24e1e",46:"9660f14e654e14c1d933",47:"3c207298e771f1092d7b",48:"e8601af8e26b3de849cd",49:"d997a68f5159bb6c96b8",50:"966990bb7d389d488f06",51:"8ad31fc3149050af1d82",52:"2dd2516fc975314d8ed1",53:"172f89bda2b0dd25c10f",54:"ffc210c8b328cf9b3aa6",55:"9b98f793dc888284b522",56:"2698533a9331f23df006",57:"6eb898900bdf398ace25",58:"142447f4086962323679",59:"b4eb825b5ca366bcf277",60:"948e70b96d168a85ea4b",61:"36306682f9d9fca1e061",62:"c34bb54c04b1aa4151f8",63:"494aa101a42994e0aec5",64:"0d8767332b4ce0da0d9b",65:"001e888b514016bab97e",66:"74eec4581fdc74f8a300",67:"09033a89cab2928339a9",68:"3602cee7b4dc4b98ac8b",69:"1d4b912d53d034e59b80",70:"ad883fccec104c379bfe",71:"00f986c776dea5d66abd",72:"6bd80748d56034838834",73:"7ec990006530ffb0d879",74:"7d0fbb5bef36bda38e2d",75:"6deb806e94f0c403175c",76:"0d315d5536f531165170",77:"59def4cf9c1b9e3bc6bd",78:"74e05ffeaf2a55d99975",79:"eae379a7e73857888929",80:"016c49060b0ba4664485",81:"0fd96ee16bc5becdc9a8",82:"7a8dc9b61327bc28b181",83:"7012efdbb3b254a50def",84:"eb0c71ab334eef42e794",85:"67142b04f6a1e64fc2da",86:"cfec8bd781f528fe3a42",87:"ba370608471a87265167",88:"eb81ef27fe08dc138a83",89:"6c4458820e375d89fff2",90:"71c181259acfe60014c5",91:"6306bab38d889e57d5f2",92:"effb93004e445ec84ba1",93:"64190b5ae28cc9d1d66f",94:"2ddcd846ea617f40359c",95:"73c1c7b8231c48cb3fac"}[e]+".bundle.js"}function l(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise(function(t,r){n=o[e]=[t,r]});t.push(n[2]=r);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,l.nc&&c.setAttribute("nonce",l.nc),c.src=a(e);var u=new Error;i=function(t){c.onerror=c.onload=null,clearTimeout(s);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",u.name="ChunkLoadError",u.type=r,u.request=i,n[1](u)}o[e]=void 0}};var s=setTimeout(function(){i({type:"timeout",target:c})},12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(t)},l.m=e,l.c=r,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(n,r,function(t){return e[t]}.bind(null,r));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l.oe=function(e){throw e};var c=window.webpackJsonp=window.webpackJsonp||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var f=u;(function(){function e(e,t){return u.require.toUrl(e,t)}function t(e,t){return u.require.toAbsMid(e,t)}function n(e,t,r){return a(e,t,r,0,n)}function o(e){for(var t in e)n.absMids[t]=e[t],n.absMidsById[e[t]]||(n.absMidsById[e[t]]=t)}function i(e,o,i,a){var c;if((e=e.split("!").map(function(e){return"."===e.charAt(0)&&!o?e:t(e,o?{mid:o}:null)}).join("!"))in n.absMids&&l.m[n.absMids[e]])if(i){var u=r[n.absMids[e]];c=u&&u.l&&(a?u:u.exports)}else c=l(n.absMids[e]);if(!c)throw new Error("Module not found: "+e);return c}function a(e,t,n,r,o){var a={}.toString.call(e);if("[object String]"===a){var l=i(e,r,!(!1===n));if("object"==typeof l&&l.__DOJO_WEBPACK_DEFINE_PROMISE__)throw new Error("Module not found: "+e);return l}if("[object Object]"===a)throw new Error("Require config is not supported by WebPack");if("[object Array]"===a){var c=[],u=t,s=[];if(e.forEach(function(e){try{c.push(i(e,r))}catch(t){s.push({mid:e,error:t})}}),0===s.length)u&&u.apply(this,c);else{var f=new Error("findModules");f.src="dojo-webpack-plugin",f.info=s,o.signal("error",f)}return o}throw new Error("Unsupported require call")}n.toUrl=e,n.toAbsMid=t,n.absMids={},n.absMidsById=[],n.async=1;var c=this||window;if(o({}),c.require=n,(this||window).webpackJsonp.registerAbsMids=o,l.dj)throw new Error("__webpack_require__.dj name collision.");l.dj={r:n,c:function(r){if(n.absMidsById[r]&&(r=n.absMidsById[r]),!r)return n;var o=function(e,t,o){return a(e,t,o,r,n)};for(var i in n)n.hasOwnProperty(i)&&(o[i]=n[i]);return o.toUrl=function(t){return e(t,r?{mid:r}:null)},o.toAbsMid=function(e){return t(e,r?{mid:r}:null)},n.undef&&(o.undef=function(e){n.undef(e,r)}),o},m:function(e){var t={i:e.i},r=n.absMidsById[e.i];return r&&(t.id=r),Object.defineProperty(t,"exports",{get:function(){return e.exports},set:function(t){e.exports=t},enumerable:!0,configurable:!0}),t},h:function(e){var t=i("dojo/has",null,!1).normalize(e,function(e){return e});return t&&l(t)||void 0}};var u={document:c.document};u.global=u.window=u,c.dojoConfig=c.dojoConfig||{};var s=function(e,t){for(var n in t)e[n]=t[n];return e}(c.dojoConfig,{baseUrl:".",map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}},async:!0,has:{"dojo-config-api":0,"esri-promise-compatibility":1,"esri-webpack":1}}),f={hasCache:{webpack:1,"host-browser":1,dom:1,"dojo-loader":1,"dojo-has-api":1,"dojo-dom-ready-api":1,"dojo-sniff":1,"dojo-test-sniff":1,"config-deferredInstrumentation":1,"config-tlmSiblingOfDojo":1},paths:{},pathsMapProg:[],packs:{dojo:{main:"main",name:"dojo",location:"./dojo",lib:"."},dijit:{main:"main",name:"dijit",location:"./dijit",lib:"."},dojox:{main:"main",name:"dojox",location:"./dojox",lib:"."},esri:{main:"kernel",name:"esri",location:"./arcgis-js-api"},"@dojo":{main:"main",name:"@dojo",location:"./@dojo",lib:"."},cldrjs:{main:"dist/cldr",name:"cldrjs",location:"./cldrjs"},globalize:{main:"dist/globalize",name:"globalize",location:"./globalize"},tslib:{main:"tslib",name:"tslib",location:"./tslib"},moment:{main:"main",name:"moment",location:"./moment",lib:"."},dstore:{main:"main",name:"dstore",location:"./dojo-dstore",lib:"."},maquette:{main:"dist/maquette.umd",name:"maquette",location:"./maquette",resourceTags:{miniExclude:function(e,t){return t.indexOf("/polyfills/")>-1||t.indexOf("/dist/")>-1&&-1===e.indexOf(".umd.js")}}},"maquette-css-transitions":{main:"dist/maquette-css-transitions.umd",name:"maquette-css-transitions",location:"./maquette-css-transitions",resourceTags:{miniExclude:function(e,t){return t.indexOf("/dist/")>-1&&-1===e.indexOf(".umd.js")}}},"maquette-jsx":{main:"dist/maquette-jsx.umd",name:"maquette-jsx",location:"./maquette-jsx",resourceTags:{miniExclude:function(e,t){return t.indexOf("/dist/")>-1&&-1===e.indexOf(".umd.js")}}}},aliases:[],mapProgs:[["globalize",[["cldr/supplemental","cldrjs/dist/cldr/supplemental",/^cldr\/supplemental(\/|$)/,17],["cldr/unresolved","cldrjs/dist/cldr/unresolved",/^cldr\/unresolved(\/|$)/,15],["cldr/event","cldrjs/dist/cldr/event",/^cldr\/event(\/|$)/,10],["cldr","cldrjs/dist/cldr",/^cldr(\/|$)/,4]],/^globalize(\/|$)/,9]],cacheBust:void 0,modules:{},cache:{}};function t(e,t){var n=u.require.originalToAbsMid(e,t);if(n.indexOf("/")===n.length-1){var r=n.substring(0,n.length-1),o=u.require.packs[r];o&&o.realMain&&(n=r)}return n}function e(e,t){var n=u.require.originalToUrl(e,t),r=u.require.packs[e];if(r&&r.realMain){var o=n.split("?");/(^\/)|(\:)/.test(r.realMain)?o[0]=r.realMain:o[0]=o[0]+"/"+r.realMain,n=o.join("?")}return n}l("RT0o").call(u,s,f,u,u),u.require.baseUrl="./",Object.keys(u.require.packs).forEach(function(e){var t=u.require.packs[e];(/(^\/)|(\:)/.test(t.main)||t.main.split("/").reduce(function(e,t){return e<0||"."===t?e:".."===t?--e:++e},0)<=0)&&void 0===t.realMain&&(t.realMain=t.main,t.main="")}),u.require.originalToAbsMid=u.require.toAbsMid,u.require.originalToUrl=u.require.toUrl,u.require.toAbsMid=t,u.require.toUrl=e,["baseUrl","has","rawConfig","on","signal"].forEach(function(e){n[e]=u.require[e]})})(),i.push(["7RL8",40]),n()}({"2yfh":function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE__2yfh__},"7RL8":function(e,t,n){var r,o;r=[n("q1tI"),n("qWSy"),n("0cfB"),n("FZF3"),n("vOnD"),n("kMSe"),n("CNNV")],void 0===(o=function(e,t,n,r,o,i,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function c(){var e=u(["\n  html, body {\n    height: 100%;\n    width: 100%;\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n  };\n"]);return c=function(){return e},e}function u(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}e=l(e),t=l(t),r=l(r),a=l(a);var s,f=(0,o.createGlobalStyle)(c()),p=document.getElementById("root"),d={mapStore:new a.default};s=r.default,t.default.render(e.default.createElement(e.default.Fragment,null,e.default.createElement(f,null),e.default.createElement(i.Provider,d,e.default.createElement(n.AppContainer,null,e.default.createElement(s,null)))),p)}.apply(null,r))||(e.exports=o)},"8kYt":function(e,t,n){var r,o;r=[t,n("q1tI"),n("p4l/"),n("Mqoi")],void 0===(o=function(e,t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return t.default.createElement(r.NavBar,null,t.default.createElement(r.Brand,{href:"/"},"arcgis offline tiles demo"),t.default.createElement(r.ButtonSection,null,t.default.createElement(r.NavButton,{href:"https://twitter.com/beslisbeth"},t.default.createElement(n.default,{name:"twitter"})),t.default.createElement(r.NavButton,{href:"https://github.com/besLisbeth/arcgis-offline-tiles"},t.default.createElement(n.default,{name:"github"}))))},t=o(t),n=o(n)}.apply(null,r))||(e.exports=o)},Alzm:function(e,t,n){var r,o;r=[t,n("o0o1"),n("q1tI"),n("kMSe"),n("2vnA"),n("hC82"),n("TcoO"),n("p4l/")],void 0===(o=function(e,t,n,r,o,i,a,l){"use strict";var c,u,s,f;function p(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function m(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){h(i,r,o,a,l,"next",e)}function l(e){h(i,r,o,a,l,"throw",e)}a(void 0)})}}function v(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?w(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=p(t),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n),l=p(l);var E=(0,r.inject)("mapStore")(c=(0,r.observer)((s=j((u=function(e){function r(){var e,t;b(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return v(t=g(this,(e=A(r)).call.apply(e,[this].concat(o))),"isLayerInIndexedDB",s,w(t)),v(t,"isOnline",f,w(t)),t.disposer=void 0,t.handleSetActiveBasemap=function(){t.props.mapStore.setCurrentBasemapTitle(t.props.basemapTitle)},t.handleSettingsClick=function(e,n){e.stopPropagation(),t.props.mapStore.setModifiedBasemapTitle(n)},t.handleToggleOnline=function(){t.basemap.isOnline?t.basemap.goOffline():t.basemap.goOnline(),t.isOnline=t.basemap.isOnline},t}var c,u,p,d,h;return x(r,n.Component),c=r,(u=[{key:"componentDidMount",value:(h=m(t.default.mark(function e(){var n=this;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.basemap){e.next=5;break}return e.next=3,this.setInitialState();case 3:e.next=6;break;case 5:(0,o.reaction)(function(){return n.basemap},function(){var e=m(t.default.mark(function e(r,o){return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.IndexedDBHelpers.isIndexedDBSupported()){e.next=4;break}return e.next=3,n.setInitialState();case 3:n.disposer=o;case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}},e,this)})),function(){return h.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){this.disposer&&this.disposer.dispose()}},{key:"setInitialState",value:(d=m(t.default.mark(function e(){return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.basemap.isSavedToIndexedDB();case 2:this.isLayerInIndexedDB=e.sent,this.isOnline=this.basemap.isOnline;case 4:case"end":return e.stop()}},e,this)})),function(){return d.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.props,r=t.basemapTitle,o=t.mapStore.currentBasemapTitle;return n.default.createElement(a.ListItem,{active:r===o,onClick:this.handleSetActiveBasemap},n.default.createElement(a.ListTitle,null,r),this.isLayerInIndexedDB&&n.default.createElement(a.IconWrapper,{title:this.isOnline?"Go offline":"Go online",onClick:this.handleToggleOnline},n.default.createElement(l.default,{name:this.isOnline?"offline":"online",noPointerEvents:!0})),n.default.createElement(a.IconWrapper,{onClick:function(t){return e.handleSettingsClick(t,r)}},n.default.createElement(l.default,{name:"settings"})))}},{key:"basemap",get:function(){if(this.props.mapStore.basemapsModels)return this.props.mapStore.basemapsModels.get(this.props.basemapTitle)}}])&&y(c.prototype,u),p&&y(c,p),r}()).prototype,"isLayerInIndexedDB",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=j(u.prototype,"isOnline",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),j(u.prototype,"basemap",[o.computed],Object.getOwnPropertyDescriptor(u.prototype,"basemap"),u.prototype),c=u))||c)||c;e.default=E}.apply(null,r))||(e.exports=o)},BZCx:function(e,t,n){var r;void 0===(r=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.formatBytes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e||isNaN(e))return"-";var n=t<0?0:t,r=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,r)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]}}.apply(null,[t]))||(e.exports=r)},CNNV:function(e,t,n){var r,o;r=[t,n("o0o1"),n("2vnA"),n("+Jfr"),n("8Mj5"),n("WiXY"),n("8MXS"),n("hC82")],void 0===(o=function(e,t,n,r,o,i,a,l){"use strict";var c,u,s,f,p,d,h,m,v,b,y,g,A,w,x,O;function j(e){return e&&e.__esModule?e:{default:e}}function E(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function C(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=j(t),r=j(r),o=j(o),i=j(i),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(a);var T=(c=n.action.bound,u=n.action.bound,s=n.action.bound,f=n.action.bound,p=n.action.bound,d=n.action.bound,h=n.action.bound,m=n.action.bound,b=S((v=function(){function e(){var t=this;B(this,e),this.basemaps=[{title:"dark-gray",url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer"},{title:"topo",url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"},{title:"streets",url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"},{title:"satellite",url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{title:"gray",url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},{title:"hybrid",url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}],C(this,"basemapsModels",b,this),C(this,"map",y,this),C(this,"view",g,this),C(this,"currentZoom",A,this),C(this,"currentBasemapTitle",w,this),C(this,"modifiedBasemapTitle",x,this),C(this,"loadingProgressMap",O,this),this.basemaps.forEach(function(e){t.loadingProgressMap.set(e,{percent:0,done:!0,type:""})})}var n,c,u,s,f;return n=e,(c=[{key:"createMap",value:(s=t.default.mark(function e(){var n=this;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.map=new r.default({basemap:this.currentBasemapTitle}),e.next=3,(0,l.initOfflineFeatures)({dbName:"demo-test"});case 3:this.basemaps.forEach(function(e){var t=e.title,r=e.url,o=(0,l.OfflineLayer)(i.default,{title:t,url:r,visible:t===n.basemaps[0].title});n.map.layers.add(o),n.basemapsModels.set(t,o)});case 4:case"end":return e.stop()}},e,this)}),f=function(){var e=this,t=arguments;return new Promise(function(n,r){var o=s.apply(e,t);function i(e){E(o,n,r,i,a,"next",e)}function a(e){E(o,n,r,i,a,"throw",e)}i(void 0)})},function(){return f.apply(this,arguments)})},{key:"toggleBasemap",value:function(e){this.map.layers.find(function(e){return!0===e.visible}).visible=!1,this.getBasemapByTitle(e).visible=!0}},{key:"getBasemapByTitle",value:function(e){return this.map.layers.find(function(t){return t.title===e})}},{key:"createView",value:function(e){this.view=new o.default({container:e,map:this.map,zoom:4,center:[31.9,48.3],constraints:{rotationEnabled:!1}})}},{key:"addZoomChangeListener",value:function(){var e=this;a.whenTrue(this.view,"stationary",function(){e.setCurrentZoom(e.view.zoom)})}},{key:"setCurrentZoom",value:function(e){this.currentZoom=e}},{key:"setCurrentBasemapTitle",value:function(e){this.currentBasemapTitle=e}},{key:"setModifiedBasemapTitle",value:function(e){this.modifiedBasemapTitle=e}},{key:"clearModifiedBasemap",value:function(){this.modifiedBasemapTitle=null}},{key:"setLoadingBasemapProgress",value:function(e,t){this.loadingProgressMap.set(e,t)}}])&&k(n.prototype,c),u&&k(n,u),e}()).prototype,"basemapsModels",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new n.ObservableMap}}),y=S(v.prototype,"map",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=S(v.prototype,"view",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=S(v.prototype,"currentZoom",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),w=S(v.prototype,"currentBasemapTitle",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.basemaps[0].title}}),x=S(v.prototype,"modifiedBasemapTitle",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=S(v.prototype,"loadingProgressMap",[n.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new n.ObservableMap}}),S(v.prototype,"createMap",[c],Object.getOwnPropertyDescriptor(v.prototype,"createMap"),v.prototype),S(v.prototype,"toggleBasemap",[u],Object.getOwnPropertyDescriptor(v.prototype,"toggleBasemap"),v.prototype),S(v.prototype,"createView",[s],Object.getOwnPropertyDescriptor(v.prototype,"createView"),v.prototype),S(v.prototype,"setCurrentZoom",[f],Object.getOwnPropertyDescriptor(v.prototype,"setCurrentZoom"),v.prototype),S(v.prototype,"setCurrentBasemapTitle",[p],Object.getOwnPropertyDescriptor(v.prototype,"setCurrentBasemapTitle"),v.prototype),S(v.prototype,"setModifiedBasemapTitle",[d],Object.getOwnPropertyDescriptor(v.prototype,"setModifiedBasemapTitle"),v.prototype),S(v.prototype,"clearModifiedBasemap",[h],Object.getOwnPropertyDescriptor(v.prototype,"clearModifiedBasemap"),v.prototype),S(v.prototype,"setLoadingBasemapProgress",[m],Object.getOwnPropertyDescriptor(v.prototype,"setLoadingBasemapProgress"),v.prototype),v);e.default=T}.apply(null,r))||(e.exports=o)},FZF3:function(e,t,n){var r,o;r=[t,n("q1tI"),n("vOnD"),n("8kYt"),n("rGK3"),n("SWv7")],void 0===(o=function(e,t,n,r,o,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return t.default.createElement(l,null,t.default.createElement(r.default,null),t.default.createElement(o.default,null),t.default.createElement(i.default,null))},t=a(t),n=a(n),r=a(r),o=a(o),i=a(i);var l=n.default.div.withConfig({displayName:"App__AppWrapper",componentId:"sc-1kt5skv-0"})(["display:flex;flex-direction:column;width:100%;height:100%;overflow:hidden;"])}.apply(null,r))||(e.exports=o)},Mqoi:function(e,t,n){var r,o;r=[t,n("vOnD"),n("qUWS")],void 0===(o=function(e,t,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.NavButton=e.ButtonSection=e.Brand=e.NavBar=void 0;var o=(t=(r=t)&&r.__esModule?r:{default:r}).default.nav.withConfig({displayName:"elements__NavBar",componentId:"wddvee-0"})(["z-index:5;height:",";flex-shrink:0;display:flex;justify-content:space-between;min-width:100%;background-color:",";box-shadow:",";"],n.navBarHeight,n.navBarBackgroundColor,n.shadow);e.NavBar=o;var i=t.default.a.withConfig({displayName:"elements__Brand",componentId:"wddvee-1"})(["cursor:pointer;float:left;padding:15px;font-size:18px;line-height:20px;letter-spacing:5px;color:",";text-decoration:none;text-transform:uppercase;"],n.fontColor);e.Brand=i;var a=t.default.section.withConfig({displayName:"elements__ButtonSection",componentId:"wddvee-2"})(["display:flex;"]);e.ButtonSection=a;var l=t.default.a.withConfig({displayName:"elements__NavButton",componentId:"wddvee-3"})(["height:",";width:",";display:flex;justify-content:center;align-items:center;svg{height:18px;width:18px;}"],n.navBarHeight,n.navBarHeight);e.NavButton=l}.apply(null,r))||(e.exports=o)},RT0o:function(e,t,n){e.exports=function(e,t,n,r){this.loaderVersion="1.14.2",function(e,t){var n=function(){return void 0!==p&&"function"!=typeof p?p:void 0!==r?r:"undefined"!=typeof self?self:this}(),o=function(){},i={}.toString,a=function(e){return"[object Function]"==i.call(e)},l=function(e,t){if(e)for(var n=0;n<e.length;)t(e[n++])},c=function(e,t){for(var n in t)e[n]=t[n];return e},u=function(e,t){return c(new Error(e),{src:"dojoLoader",info:t})},s=1,f=function(e,t,n){return(void 0)(e,t,n,0,f)},p=n,d=p.document,h=d&&d.createElement("DiV"),m=f.has=function(e){return a(v[e])?v[e]=v[e](p,d,h):v[e]},v=m.cache=t.hasCache;for(var b in a(e)&&(e=e(n)),m.add=function(e,t,n,r){return(void 0===v[e]||r)&&(v[e]=t),n&&m(e)},e.has)m.add(b,e.has[b],0,1);f.async=1;var y=function(){};f.eval=function(e,t){return y(e+"\r\n//# sourceURL="+t)};var g,A={},w=(f.signal=function(e,t){var n=A[e];l(n&&n.slice(0),function(e){var n;e.apply(null,(n=t,"[object Array]"==i.call(n)?t:[t]))})},f.on=function(e,t){var n=A[e]||(A[e]=[]);return n.push(t),{remove:function(){for(var e=0;e<n.length;e++)if(n[e]===t)return void n.splice(e,1)}}}),x=[],O=[],j={},E=(f.map={},[]),C={},B="",k={};t.paths,O=t.pathsMapProg,j=t.packs,x=t.aliases,E=t.mapProgs,C=t.modules,k=t.cache,B=t.cacheBust,f.rawConfig=t;var S=function(e,t){if(t)for(var n=0;n<t.length;n++)if(t[n][2].test(e))return t[n];return 0},T=function(e){var t,n,r=[];for(e=e.replace(/\\/g,"/").split("/");e.length;)".."==(t=e.shift())&&r.length&&".."!=n?(r.pop(),n=r[r.length-1]):"."!=t&&r.push(n=t);return r.join("/")},I=function(e,t,n,r){return{pid:e,mid:t,pack:n,url:r,executed:0,def:0}},P=function(e,t,n,r,o,i,c,s,f,p){var d,h,m,v,b,y,A;if(e,A=/^\./.test(e),/(^\/)|(\:)|(\.js$)/.test(e)||A&&!t)return I(0,e,0,e);if(e=T(A?t.mid+"/../"+e:e),/^\./.test(e))throw u("irrationalPath",e);p||A||!i.star||(v=S(e,i.star[1])),!v&&t&&(v=(v=S(t.mid,i))&&S(e,v[1])),v&&(e=v[1]+e.substring(v[3])),(h=n[d=(g=e.match(/^([^\/]+)(\/(.+))?$/))?g[1]:""])?e=d+"/"+(m=g[3]||h.main):d="";var w=0;return l(s,function(t){var n=e.match(t[0]);n&&n.length>0&&(w=a(t[1])?e.replace(t[0],t[1]):t[1])}),w?P(w,0,n,r,o,i,c,s,f):(y=r[e])?f?I(y.pid,y.mid,y.pack,y.url):r[e]:(b=(v=S(e,c))?v[1]+e.substring(v[3]):d?("/"===h.location.slice(-1)?h.location.slice(0,-1):h.location)+"/"+m:e,/(^\/)|(\:)/.test(b)||(b=o+b),I(d,e,h,T(b+=".js")))},M=function(e,t,n){return P(e,t,j,C,f.baseUrl,E,O,x,void 0,n)},L=(f.toAbsMid=function(e,t){return M(e,t).mid},f.toUrl=function(e,t){var n=M(e+"/x",t),r=n.url;return L(0===n.pid?e:r.substring(0,r.length-5))},"function"==typeof e.fixupUrl?e.fixupUrl:function(e){return(e+="")+(B?(/\?/.test(e)?"&":"?")+B:"")});f.log=o,f.trace=o;var _=o;(c(c(f,t.loaderPatch),e.loaderPatch),w("error",function(e){try{if(e instanceof Error)for(var t in e);}catch(e){}}),c(f,{uid:function(){return"_"+s++},cache:k,packs:j}),p.define)||(p.define=_,p.require=f)}.call(this,e,t)}},SWv7:function(e,t,n){var r,o;r=[t,n("q1tI"),n("TcoO"),n("kMSe"),n("mAY+"),n("Alzm")],void 0===(o=function(e,t,n,r,o,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=a(t),o=a(o),i=a(i);var l=(0,r.inject)("mapStore")((0,r.observer)(function(e){var r=e.mapStore,a=r.basemaps;return r.modifiedBasemapTitle?t.default.createElement(o.default,null):t.default.createElement(n.PanelWrapper,null,t.default.createElement(n.PanelTitle,null,"Layers"),a.map(function(e){var n=e.title;return t.default.createElement(i.default,{key:n,basemapTitle:n})}))}));e.default=l}.apply(null,r))||(e.exports=o)},TcoO:function(e,t,n){var r,o;r=[t,n("vOnD"),n("qUWS")],void 0===(o=function(e,t,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.DescriptionPanelWrapper=e.ErrorString=e.IconWrapper=e.ListTitle=e.ListItem=e.PanelTitle=e.PanelWrapper=void 0;var o=(t=(r=t)&&r.__esModule?r:{default:r}).default.div.withConfig({displayName:"elements__PanelWrapper",componentId:"angjj3-0"})(["background-color:",";position:absolute;top:50px;left:0;width:300px;"],n.panelBackgroundColor);e.PanelWrapper=o;var i=t.default.div.withConfig({displayName:"elements__PanelTitle",componentId:"angjj3-1"})(["background-color:",";height:42px;color:",";padding:5px;font-size:0.75em;display:flex;justify-content:space-around;text-transform:uppercase;align-items:center;"],n.panelBackgroundColor,n.fontColor);e.PanelTitle=i;var a=t.default.div.withConfig({displayName:"elements__ListItem",componentId:"angjj3-2"})(["margin:0;height:32px;cursor:pointer;display:flex;align-items:center;text-align:left;justify-content:space-between;padding:5px;color:",";background-color:",";"],n.fontColor,function(e){return e.active?n.activeColor:n.panelBackgroundColor});e.ListItem=a;var l=t.default.p.withConfig({displayName:"elements__ListTitle",componentId:"angjj3-3"})(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:",";text-transform:capitalize;margin:0 0 0 5px;flex:1;"],n.fontColor);e.ListTitle=l;var c=t.default.div.withConfig({displayName:"elements__IconWrapper",componentId:"angjj3-4"})(["height:32px;width:32px;display:flex;align-items:center;flex-direction:column;justify-content:center;:hover{svg{cursor:pointer;fill:white;}}"]);e.IconWrapper=c;var u=t.default.p.withConfig({displayName:"elements__ErrorString",componentId:"angjj3-5"})(["font-size:0.714em;color:red;"]);e.ErrorString=u;var s=t.default.div.withConfig({displayName:"elements__DescriptionPanelWrapper",componentId:"angjj3-6"})(["background-color:",";color:",";height:calc(100% - 50px);position:absolute;right:0;width:150px;top:50px;padding:15px;"],n.panelBackgroundColor,n.fontColor);e.DescriptionPanelWrapper=s}.apply(null,r))||(e.exports=o)},ZXZG:function(e,t,n){var r,o;r=[t,n("q1tI"),n("17x9"),n("vOnD"),n("qUWS")],void 0===(o=function(e,t,n,r,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=i(t),n=i(n);var a=(r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(r)).default.button.withConfig({displayName:"Button",componentId:"sc-117x2x5-0"})(["font-size:0.857em;cursor:pointer;padding:3px;height:24px;width:49%;border-radius:0;border:black;background-color:",";color:",";",""],function(e){return"danger"===e.type?o.dangerColor:o.buttonStandardColor},o.fontColor,function(e){return e.disabled&&(0,r.css)(["background-color:",";color:",";cursor:default;"],o.disabledButtonColor,o.disabledFontColor)});a.propTypes={disabled:n.default.bool,type:n.default.oneOf(["danger","standard"])},a.defaultProps={borderRadius:0,disabled:!1,type:"standard"};var l=a;e.default=l}.apply(null,r))||(e.exports=o)},aL2x:function(e,t,n){var r,o;r=[t,n("q1tI"),n("vOnD"),n("qUWS")],void 0===(o=function(e,t,n,r){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var n=e.title,r=void 0===n?"Select a file":n,o=e.multiple,l=void 0!==o&&o,c=e.onUpload,u=e.disabled,s=void 0!==u&&u;return t.default.createElement(a,{disabled:s},t.default.createElement(i,{htmlFor:"file"},r),t.default.createElement("input",{id:"file",disabled:s,multiple:l,name:"file",onChange:function(){c&&c(document.getElementById("file").files)},type:"file",accept:".csv"}))},t=(o=t)&&o.__esModule?o:{default:o};var i=(n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n)).default.label.withConfig({displayName:"FileUpload__Caption",componentId:"agwp6o-0"})(["line-height:42px;font-size:1em;;width:100%;height:100%;cursor:pointer;"]),a=n.default.div.withConfig({displayName:"FileUpload__UploadContainer",componentId:"agwp6o-1"})(["width:100%;height:42px;overflow:hidden;background-color:",";color:",';border-radius:0;text-align:center;display:flex;input[type="file"]{display:none;}',""],r.buttonStandardColor,r.fontColor,function(e){return e.disabled&&(0,n.css)(["background-color:",";color:",";","{cursor:default;}"],r.disabledButtonColor,r.disabledFontColor,i)})}.apply(null,r))||(e.exports=o)},hC82:function(e,t,n){var r,o;r=[n("o0o1")],void 0===(o=function(t){"use strict";var i;function a(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t=(i=t)&&i.__esModule?i:{default:i},r=[n("r2fF"),n("oxlp"),n("Z4y+"),n("a2fw"),n("WiXY"),n("zp6E"),n("qMld"),n("pMLx"),n("N7S/")],void 0===(o=function(e,n,r,o,i,c,u,s,f){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==l(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=12)}([function(e,t,n){e.exports=n(13)},function(t,n){t.exports=e},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t,n){var r,o=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function o(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var i={compressToBase64:function(e){if(null==e)return"";var n=i._compress(e,6,function(e){return t.charAt(e)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:i._decompress(e.length,32,function(n){return o(t,e.charAt(n))})},compressToUTF16:function(t){return null==t?"":i._compress(t,15,function(t){return e(t+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:i._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=i.compress(e),n=new Uint8Array(2*t.length),r=0,o=t.length;r<o;r++){var a=t.charCodeAt(r);n[2*r]=a>>>8,n[2*r+1]=a%256}return n},decompressFromUint8Array:function(t){if(null==t)return i.decompress(t);for(var n=new Array(t.length/2),r=0,o=n.length;r<o;r++)n[r]=256*t[2*r]+t[2*r+1];var a=[];return n.forEach(function(t){a.push(e(t))}),i.decompress(a.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,function(e){return n.charAt(e)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),i._decompress(e.length,32,function(t){return o(n,e.charAt(t))}))},compress:function(t){return i._compress(t,16,function(t){return e(t)})},_compress:function(e,t,n){if(null==e)return"";var r,o,i,a={},l={},c="",u="",s="",f=2,p=3,d=2,h=[],m=0,v=0;for(i=0;i<e.length;i+=1)if(c=e.charAt(i),Object.prototype.hasOwnProperty.call(a,c)||(a[c]=p++,l[c]=!0),u=s+c,Object.prototype.hasOwnProperty.call(a,u))s=u;else{if(Object.prototype.hasOwnProperty.call(l,s)){if(s.charCodeAt(0)<256){for(r=0;r<d;r++)m<<=1,v==t-1?(v=0,h.push(n(m)),m=0):v++;for(o=s.charCodeAt(0),r=0;r<8;r++)m=m<<1|1&o,v==t-1?(v=0,h.push(n(m)),m=0):v++,o>>=1}else{for(o=1,r=0;r<d;r++)m=m<<1|o,v==t-1?(v=0,h.push(n(m)),m=0):v++,o=0;for(o=s.charCodeAt(0),r=0;r<16;r++)m=m<<1|1&o,v==t-1?(v=0,h.push(n(m)),m=0):v++,o>>=1}0==--f&&(f=Math.pow(2,d),d++),delete l[s]}else for(o=a[s],r=0;r<d;r++)m=m<<1|1&o,v==t-1?(v=0,h.push(n(m)),m=0):v++,o>>=1;0==--f&&(f=Math.pow(2,d),d++),a[u]=p++,s=String(c)}if(""!==s){if(Object.prototype.hasOwnProperty.call(l,s)){if(s.charCodeAt(0)<256){for(r=0;r<d;r++)m<<=1,v==t-1?(v=0,h.push(n(m)),m=0):v++;for(o=s.charCodeAt(0),r=0;r<8;r++)m=m<<1|1&o,v==t-1?(v=0,h.push(n(m)),m=0):v++,o>>=1}else{for(o=1,r=0;r<d;r++)m=m<<1|o,v==t-1?(v=0,h.push(n(m)),m=0):v++,o=0;for(o=s.charCodeAt(0),r=0;r<16;r++)m=m<<1|1&o,v==t-1?(v=0,h.push(n(m)),m=0):v++,o>>=1}0==--f&&(f=Math.pow(2,d),d++),delete l[s]}else for(o=a[s],r=0;r<d;r++)m=m<<1|1&o,v==t-1?(v=0,h.push(n(m)),m=0):v++,o>>=1;0==--f&&(f=Math.pow(2,d),d++)}for(o=2,r=0;r<d;r++)m=m<<1|1&o,v==t-1?(v=0,h.push(n(m)),m=0):v++,o>>=1;for(;;){if(m<<=1,v==t-1){h.push(n(m));break}v++}return h.join("")},decompress:function(e){return null==e?"":""==e?null:i._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,n,r){var o,i,a,l,c,u,s,f=[],p=4,d=4,h=3,m="",v=[],b={val:r(0),position:n,index:1};for(o=0;o<3;o+=1)f[o]=o;for(a=0,c=Math.pow(2,2),u=1;u!=c;)l=b.val&b.position,b.position>>=1,0==b.position&&(b.position=n,b.val=r(b.index++)),a|=(l>0?1:0)*u,u<<=1;switch(a){case 0:for(a=0,c=Math.pow(2,8),u=1;u!=c;)l=b.val&b.position,b.position>>=1,0==b.position&&(b.position=n,b.val=r(b.index++)),a|=(l>0?1:0)*u,u<<=1;s=e(a);break;case 1:for(a=0,c=Math.pow(2,16),u=1;u!=c;)l=b.val&b.position,b.position>>=1,0==b.position&&(b.position=n,b.val=r(b.index++)),a|=(l>0?1:0)*u,u<<=1;s=e(a);break;case 2:return""}for(f[3]=s,i=s,v.push(s);;){if(b.index>t)return"";for(a=0,c=Math.pow(2,h),u=1;u!=c;)l=b.val&b.position,b.position>>=1,0==b.position&&(b.position=n,b.val=r(b.index++)),a|=(l>0?1:0)*u,u<<=1;switch(s=a){case 0:for(a=0,c=Math.pow(2,8),u=1;u!=c;)l=b.val&b.position,b.position>>=1,0==b.position&&(b.position=n,b.val=r(b.index++)),a|=(l>0?1:0)*u,u<<=1;f[d++]=e(a),s=d-1,p--;break;case 1:for(a=0,c=Math.pow(2,16),u=1;u!=c;)l=b.val&b.position,b.position>>=1,0==b.position&&(b.position=n,b.val=r(b.index++)),a|=(l>0?1:0)*u,u<<=1;f[d++]=e(a),s=d-1,p--;break;case 2:return v.join("")}if(0==p&&(p=Math.pow(2,h),h++),f[s])m=f[s];else{if(s!==d)return null;m=i+i.charAt(0)}v.push(m),f[d++]=i+m.charAt(0),i=m,0==--p&&(p=Math.pow(2,h),h++)}}};return i}();void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)},function(e,t){e.exports=o},function(e,t){e.exports=i},function(e,t){e.exports=c},function(e,t){e.exports=u},function(e,t,n){(function(n){var r,o;void 0===(o="function"==typeof(r=function(){function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){a(r.response,t,n)},r.onerror=function(){},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==("undefined"==typeof window?"undefined":l(window))&&window.window===window?window:"object"==("undefined"==typeof self?"undefined":l(self))&&self.self===self?self:"object"==l(n)&&n.global===n?n:void 0,a=i.saveAs||("object"!=("undefined"==typeof window?"undefined":l(window))||window!==i?function(){}:"download"in HTMLAnchorElement.prototype?function(e,n,a){var l=i.URL||i.webkitURL,c=document.createElement("a");n=n||e.name||"download",c.download=n,c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?o(c):r(c.href)?t(e,n,a):o(c,c.target="_blank")):(c.href=l.createObjectURL(e),setTimeout(function(){l.revokeObjectURL(c.href)},4e4),setTimeout(function(){o(c)},0))}:"msSaveOrOpenBlob"in navigator?function(e,n,i){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=l(t)&&(t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,i),n);else if(r(e))t(e,n,i);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){o(a)})}}:function(e,n,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var a="application/octet-stream"===e.type,c=/constructor/i.test(i.HTMLElement)||i.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&c)&&"object"==("undefined"==typeof FileReader?"undefined":l(FileReader))){var s=new FileReader;s.onloadend=function(){var e=s.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},s.readAsDataURL(e)}else{var f=i.URL||i.webkitURL,p=f.createObjectURL(e);o?o.location=p:location.href=p,o=null,setTimeout(function(){f.revokeObjectURL(p)},4e4)}});i.saveAs=a.saveAs=a,e.exports=a})?r.apply(t,[]):r)||(e.exports=o)}).call(this,n(14))},function(e,t){e.exports=s},function(e,t){e.exports=f},function(e,t,n){e.exports=n(15)},function(e,t,n){var r=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,i=Object.create(o.prototype),a=new k(r||[]);return i._invoke=function(e,t,n){var r=f;return function(o,i){if(r===d)throw new Error("Generator is already running");if(r===h){if("throw"===o)throw i;return T()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=E(a,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var c=s(e,t,n);if("normal"===c.type){if(r=n.done?h:p,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}(e,n,a),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f="suspendedStart",p="suspendedYield",d="executing",h="completed",m={};function v(){}function b(){}function y(){}var g={};g[i]=function(){return this};var A=Object.getPrototypeOf,w=A&&A(A(S([])));w&&w!==n&&r.call(w,i)&&(g=w);var x=y.prototype=v.prototype=Object.create(g);function O(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function j(e){var t;this._invoke=function(n,o){function i(){return new Promise(function(t,i){!function t(n,o,i,a){var c=s(e[n],e,o);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==l(f)&&r.call(f,"__await")?Promise.resolve(f.__await).then(function(e){t("next",e,i,a)},function(e){t("throw",e,i,a)}):Promise.resolve(f).then(function(e){u.value=e,i(u)},function(e){return t("throw",e,i,a)})}a(c.arg)}(n,o,t,i)})}return t=t?t.then(i,i):i()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=s(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function S(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:T}}function T(){return{value:t,done:!0}}return b.prototype=x.constructor=y,y.constructor=b,y[c]=b.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},O(j.prototype),j.prototype[a]=function(){return this},e.AsyncIterator=j,e.async=function(t,n,r,o){var i=new j(u(t,n,r,o));return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},O(x),x[c]="Generator",x[i]=function(){return this},x.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(B),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return l.type="throw",l.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;B(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:S(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==("undefined"==typeof window?"undefined":l(window))&&(n=window)}e.exports=n},function(e,n,r){r.r(n);var o={};r.r(o),r.d(o,"isIndexedDBSupported",function(){return pe}),r.d(o,"getAvailableStorageSpace",function(){return de});var i=r(0),c=r.n(i),u=r(5),s=r.n(u),f=r(6),p=r.n(f),d=r(7),h=r.n(d),m=r(2),v=r.n(m),b=r(8),y=r(9),g=r.n(y),A=r(4),w=r.n(A),x={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decompress:function(e){for(var t,n,r,o,i,a,l,c=[],u=1,s=e.charCodeAt(0)>>8;u<2*e.length&&(u<2*e.length-1||0===s);)u%2==0?(t=e.charCodeAt(u/2)>>8,n=255&e.charCodeAt(u/2),r=u/2+1<e.length?e.charCodeAt(u/2+1)>>8:NaN):(t=255&e.charCodeAt((u-1)/2),(u+1)/2<e.length?(n=e.charCodeAt((u+1)/2)>>8,r=255&e.charCodeAt((u+1)/2)):n=r=NaN),u+=3,o=t>>2,i=(3&t)<<4|n>>4,a=(15&n)<<2|r>>6,l=63&r,isNaN(n)||u===2*e.length+1&&s?a=l=64:(isNaN(r)||u===2*e.length&&s)&&(l=64),c.push(x._keyStr.charAt(o)),c.push(x._keyStr.charAt(i)),c.push(x._keyStr.charAt(a)),c.push(x._keyStr.charAt(l));return c.join("")},compress:function(e){var t,n,r,o,i,a,l,c=[],u=1,s=0,f=!1;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");s<e.length;)n=x._keyStr.indexOf(e.charAt(s++))<<2|(i=x._keyStr.indexOf(e.charAt(s++)))>>4,r=(15&i)<<4|(a=x._keyStr.indexOf(e.charAt(s++)))>>2,o=(3&a)<<6|(l=x._keyStr.indexOf(e.charAt(s++))),u%2==0?(t=n<<8,f=!0,64!==a&&(c.push(String.fromCharCode(t|r)),f=!1),64!==l&&(t=o<<8,f=!0)):(c.push(String.fromCharCode(t|n)),f=!1,64!==a&&(t=r<<8,f=!0),64!==l&&(c.push(String.fromCharCode(t|o)),f=!1)),u+=3;return f?(c.push(String.fromCharCode(t)),c=c.join(""),c=String.fromCharCode(256|c.charCodeAt(0))+c.substring(1)):c=c.join(""),c},stringToWord:function(e){for(var t=[],n=0,r=8*e.length;n<r;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t},wordToBase64:function(e){for(var t=[],n=0,r=4*e.length;n<r;n+=3)for(var o=(e[n>>2]>>n%4*8&255)<<16|(e[n+1>>2]>>(n+1)%4*8&255)<<8|e[n+2>>2]>>(n+2)%4*8&255,i=0;i<4;i++)8*n+6*i>32*e.length?t.push("="):t.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>6*(3-i)&63));return t.join("")}};function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var j,E,C={getTileSizeInBytes:function(e){return new Promise(function(t,n){if(e){var r=new XMLHttpRequest;r.open("GET",e,!0),r.overrideMimeType("text/plain; charset=x-user-defined"),r.onload=function(){200===r.status&&""!==r.responseText?t(x.wordToBase64(x.stringToWord(r.responseText)).length+e.length):n("xhr failed for",e)},r.send(null)}else t(NaN)})},parseNum:function(e){return e.match(/[\/]\d+/g).map(function(e){return e.replace("/","")})},getLevelRowColFromURL:function(e,t){if("tile"===e){var n=O(this.parseNum(t),3),r=n[0],o=void 0===r?0:r,i=n[1],a=void 0===i?0:i,l=n[2];return{level:o,row:a,col:void 0===l?0:l}}var c=O(this.parseNum(t),3),u=c[0],s=void 0===u?0:u,f=c[1],p=void 0===f?0:f,d=c[2];return{level:s,row:void 0===d?0:d,col:p}},getTileSizeFromMinMaxLevels:function(e,t,n,r){var o=this;return this.getTileSizeInBytes(e.lastTileUrl).then(function(i){for(var a=0,l=0,c=n;c<=r;c++)l+=(a+=o.getCellsInExtent(e.tileInfo,t,c).length)*i;return{tileCount:a,sizeBytes:l}})},getCellsInExtent:function(e,t,n){for(var r=this.getCellFromXy(e,t.xmin,t.ymin,n),o=this.getCellFromXy(e,t.xmax,t.ymax,n),i=Math.max(Math.min(r[0],o[0]),e.lods[n].startTileCol),a=Math.min(Math.max(r[0],o[0]),e.lods[n].endTileCol),l=Math.max(Math.min(r[1],o[1]),e.lods[n].startTileRow),c=Math.min(Math.max(r[1],o[1]),e.lods[n].endTileRow),u=[],s=i;s<=a;s++)for(var f=l;f<=c;f++)u.push([s,f]);return u},getCellFromXy:function(e,t,n,r){return[Math.floor((t-e.origin.x)/(e.lods[r].cols*e.lods[r].resolution)),Math.floor((e.origin.y-n)/(e.lods[r].rows*e.lods[r].resolution))]}},B=function(e,t){return t.some(function(t){return e instanceof t})},k=new WeakMap,S=new WeakMap,T=new WeakMap,I=new WeakMap,P=new WeakMap,M={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return S.get(e);if("objectStoreNames"===t)return e.objectStoreNames||T.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return D(e[t])},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function L(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(E||(E=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(N(this),n),D(k.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return D(e.apply(N(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=e.call.apply(e,[N(this),t].concat(r));return T.set(i,t.sort?t.sort():[t]),D(i)}}function _(e){return"function"==typeof e?L(e):(e instanceof IDBTransaction&&function(e){if(!S.has(e)){var t=new Promise(function(t,n){var r=function(){e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=function(){t(),r()},i=function(){n(e.error),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)});S.set(e,t)}}(e),B(e,j||(j=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,M):e)}function D(e){if(e instanceof IDBRequest)return function(e){var t=new Promise(function(t,n){var r=function(){e.removeEventListener("success",o),e.removeEventListener("error",i)},o=function(){t(D(e.result)),r()},i=function(){n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)});return t.then(function(t){t instanceof IDBCursor&&k.set(t,e)}),P.set(t,e),t}(e);if(I.has(e))return I.get(e);var t=_(e);return t!==e&&(I.set(e,t),P.set(t,e)),t}var N=function(e){return P.get(e)};function z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,o=n.upgrade,i=n.blocking,a=indexedDB.open(e,t),l=D(a);return o&&a.addEventListener("upgradeneeded",function(e){o(D(a.result),e.oldVersion,e.newVersion,D(a.transaction))}),r&&a.addEventListener("blocked",function(){return r()}),i&&l.then(function(e){return e.addEventListener("versionchange",i)}),l}var R=["get","getKey","getAll","getAllKeys","count"],q=["put","add","delete","clear"],F=new Map;function U(e,n){if(e instanceof IDBDatabase&&!(n in e)&&"string"==typeof n){if(F.get(n))return F.get(n);var r=n.replace(/FromIndex$/,""),o=n!==r,i=q.includes(r);if(r in(o?IDBIndex:IDBObjectStore).prototype&&(i||R.includes(r))){var l=function(){var e,n=(e=t.default.mark(function e(n){var a,l,c,u,s,f,p,d=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(l=this.transaction(n,i?"readwrite":"readonly"),c=l.store,u=d.length,s=new Array(u>1?u-1:0),f=1;f<u;f++)s[f-1]=d[f];if(o&&(c=c.index(s.shift())),p=(a=c)[r].apply(a,s),e.t0=i,!e.t0){e.next=9;break}return e.next=9,l.done;case 9:return e.abrupt("return",p);case 10:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function l(e){a(i,r,o,l,c,"next",e)}function c(e){a(i,r,o,l,c,"throw",e)}l(void 0)})});return function(e){return n.apply(this,arguments)}}();return F.set(n,l),l}}}function Q(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Z(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Q(i,r,o,a,l,"next",e)}function l(e){Q(i,r,o,a,l,"throw",e)}a(void 0)})}}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}M=function(e){return{get:function(t,n,r){return U(t,n)||e.get(t,n,r)},has:function(t,n){return!!U(t,n)||e.has(t,n)}}}(M);var W=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"db";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.indexedDb=null,this.dbName=void 0,this.version=1,this.dbName=t}var t,n,r,o,i;return t=e,(n=[{key:"getObjectStore",value:function(e){return this.indexedDb.transaction(e).objectStore(e)}},{key:"createObjectStore",value:(i=Z(c.a.mark(function e(t){var n=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.version=++this.version,e.prev=1,e.next=4,z(this.dbName,this.version,{upgrade:function(e){e.objectStoreNames.contains(t)||e.createObjectStore(t)},blocking:function(){n.indexedDb.close()}});case 4:this.indexedDb=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1);case 10:return e.abrupt("return",this.indexedDb);case 11:case"end":return e.stop()}},e,this,[[1,7]])})),function(e){return i.apply(this,arguments)})},{key:"addRecord",value:function(e,t,n){return this.indexedDb.put(e,t,n)}},{key:"getRecord",value:(o=Z(c.a.mark(function e(t,n){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.indexedDb.get(t,n);case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",Promise.reject("Record with key ".concat(n," is not existing")));case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)})),function(e,t){return o.apply(this,arguments)})},{key:"removeAll",value:function(e){return this.indexedDb.clear(e)}},{key:"removeRecord",value:function(e,t){return this.indexedDb.delete(e,t)}},{key:"getAllRecords",value:(r=Z(c.a.mark(function e(t){var n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getObjectStore(t).openCursor();case 2:n=e.sent,r=[];case 4:if(!n){e.next=11;break}return r.push([n.key,n.value]),e.next=8,n.continue();case 8:n=e.sent,e.next=4;break;case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})}])&&V(t.prototype,n),e}(),K=r(10),G=r.n(K),X=r(1),H=r.n(X),Y=r(11),J=r.n(Y),$=r(3),ee=r.n($),te=new J.a(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,ee.a.WebMercator),ne=new G.a({size:256,dpi:96,format:"PNG8",compressionQuality:0,origin:new v.a({x:-20037508.342787,y:20037508.342787,spatialReference:ee.a.WebMercator}),spatialReference:ee.a.WebMercator,lods:[new H.a({level:0,scale:591657527.591555,resolution:156543.033928}),new H.a({level:1,scale:295828763.795777,resolution:78271.5169639999}),new H.a({level:2,scale:147914381.897889,resolution:39135.7584820001}),new H.a({level:3,scale:73957190.948944,resolution:19567.8792409999}),new H.a({level:4,scale:36978595.474472,resolution:9783.93962049996}),new H.a({level:5,scale:18489297.737236,resolution:4891.96981024998}),new H.a({level:6,scale:9244648.868618,resolution:2445.98490512499}),new H.a({level:7,scale:4622324.434309,resolution:1222.99245256249}),new H.a({level:8,scale:2311162.217155,resolution:611.49622628138}),new H.a({level:9,scale:1155581.108577,resolution:305.748113140558}),new H.a({level:10,scale:577790.554289,resolution:152.874056570411}),new H.a({level:11,scale:288895.277144,resolution:76.4370282850732}),new H.a({level:12,scale:144447.638572,resolution:38.2185141425366}),new H.a({level:13,scale:72223.819286,resolution:19.1092570712683}),new H.a({level:14,scale:36111.909643,resolution:9.55462853563415}),new H.a({level:15,scale:18055.954822,resolution:4.77731426794937}),new H.a({level:16,scale:9027.977411,resolution:2.38865713397468}),new H.a({level:17,scale:4513.988705,resolution:1.19432856685505}),new H.a({level:18,scale:2256.994353,resolution:.597164283559817}),new H.a({level:19,scale:1128.497176,resolution:.298582141647617})]});function re(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function oe(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){re(i,r,o,a,l,"next",e)}function l(e){re(i,r,o,a,l,"throw",e)}a(void 0)})}}var ie,ae,le,ce,ue,se={init:(ue=oe(c.a.mark(function e(t,n){var r,o=this,i=arguments;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:"tiles",this.indexedDbService=n,this.objectStoreName=r,e.next=5,this.getAllTiles(t).catch(oe(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.createRecord(t);case 2:case"end":return e.stop()}},e)})));case 5:case"end":return e.stop()}},e,this)})),function(e,t){return ue.apply(this,arguments)}),createRecord:(ce=oe(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.indexedDbService.addRecord(this.objectStoreName,[],t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return ce.apply(this,arguments)}),addTile:(le=oe(c.a.mark(function e(t,n){var r,o,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.url,o=n.img,e.next=3,this.getAllTiles(t);case 3:return(i=e.sent).push({url:r,img:o}),e.next=7,this.indexedDbService.addRecord(this.objectStoreName,i,t);case 7:return e.abrupt("return",i);case 8:case"end":return e.stop()}},e,this)})),function(e,t){return le.apply(this,arguments)}),getTileImg:(ae=oe(c.a.mark(function e(t,n){var r,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllTiles(t);case 2:if(!(r=e.sent)){e.next=8;break}if(!(o=r.find(function(e){return e.url===n}))){e.next=7;break}return e.abrupt("return",o.img);case 7:return e.abrupt("return",Promise.reject("Not Found"));case 8:case"end":return e.stop()}},e,this)})),function(e,t){return ae.apply(this,arguments)}),removeAllTiles:(ie=oe(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.createRecord(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return ie.apply(this,arguments)}),getAllTiles:function(e){return this.indexedDbService.getRecord(this.objectStoreName,e)}};function fe(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function pe(){return!!window.indexedDB}function de(){return he.apply(this,arguments)}function he(){var e;return e=c.a.mark(function e(){var t,n,r,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("storage"in navigator&&"estimate"in navigator.storage)){e.next=8;break}return e.next=3,navigator.storage.estimate();case 3:return t=e.sent,n=t.usage,r=t.quota,o=Math.round(n/r*100),e.abrupt("return",{percent:o,usage:n,quota:r,left:r-n});case 8:return e.abrupt("return",{usage:NaN,quota:NaN,left:NaN});case 9:case"end":return e.stop()}},e)}),(he=function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){fe(i,r,o,a,l,"next",e)}function l(e){fe(i,r,o,a,l,"throw",e)}a(void 0)})}).apply(this,arguments)}function me(e){return(me="function"==typeof Symbol&&"symbol"==l(Symbol.iterator)?function(e){return l(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":l(e)})(e)}function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function we(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function xe(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){we(i,r,o,a,l,"next",e)}function l(e){we(i,r,o,a,l,"throw",e)}a(void 0)})}}function Oe(e){return new Ce(e)}function je(e){return function(){return new Ee(e.apply(this,arguments))}}function Ee(e){var t,n;function r(t,n){try{var i=e[t](n),a=i.value,l=a instanceof Ce;Promise.resolve(l?a.wrapped:a).then(function(e){l?r("next",e):o(i.done?"return":"normal",e)},function(e){r("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,o){return new Promise(function(i,a){var l={key:e,arg:o,resolve:i,reject:a,next:null};n?n=n.next=l:(t=n=l,r(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function Ce(e){this.wrapped=e}"function"==typeof Symbol&&Symbol.asyncIterator&&(Ee.prototype[Symbol.asyncIterator]=function(){return this}),Ee.prototype.next=function(e){return this._invoke("next",e)},Ee.prototype.throw=function(e){return this._invoke("throw",e)},Ee.prototype.return=function(e){return this._invoke("return",e)};var Be,ke={dbName:"offline-layers",objectStoreName:"tiles",showNoTile:!0,noTileIcon:"data:image/png;base64,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pmk0TROPj48Hn3l4eIimaSJN06O3A4NJwDMxm82ibdtXo4D5fB6r1Sp+//4dz8/Pw5H+6ekpdrtdJEkS8/n8S/9f713ie3vaceo9x557QAB451Sgfyin34HKshweunk5HzAej2MymXz5+f9nbjJyI9L39Wu5XP55+XQZ39uxR4Z3u90wSXjqEV0wAjhjx47oaZq63Me/ZhIQBAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEAAbAJQAAAAQAEABAAQAAAAQAEABAAQAAAAQAEABAAQAAAAQAEABAAQAAAAQAEABAAQAAAAQAEABAAQAAAAQAEABAAQAAAAQAEABAAQAAAAQAEABAAEABAAAABAAQAEABAAAABAAQAEABAAAABAAQAEABAAAABAAQAEABAAAABAAQAEABAAAABAAQAEABAAAABAAQAEABAAAABAAQAEABAAAABAAQAEAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEABAAQAEAAAAEAvqe/BwCeKjUweoA8pQAAAABJRU5ErkJggg=="};function Se(){return Te.apply(this,arguments)}function Te(){return(Te=xe(c.a.mark(function e(){var t,n,r,o,i,a,l,u,s,f=arguments;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:ke,n=t.dbName,r=void 0===n?ke.dbName:n,o=t.objectStoreName,i=void 0===o?ke.objectStoreName:o,a=t.showNoTile,l=void 0===a?ke.showNoTile:a,u=t.noTileIcon,s=void 0===u?ke.noTileIcon:u,Be=new W((ke={dbName:r,objectStoreName:i,showNoTile:l,noTileIcon:s}).dbName),e.next=5,Be.createObjectStore(ke.objectStoreName);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ie(e,t){if(!pe())return new e(t);if(e===p.a||e===s.a){if(!Be)throw new Error("Init offline features once with 'initOfflineFeatures' function before creating OfflineLayer");return new(Pe(e))(t,Be)}throw new Error("Layer is not TileLayer or WebTileLayer")}var Pe=function(e){return function(t){function n(e,t){var r;return function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),(r=ye(this,ge(n).call(this,e))).lastTileUrl="",r.isOnline=!0,r.fullExtent=te,r.tileInfo=ne,r.offlineKey="",r.goOffline=function(){r.isOnline=!1,r.refresh()},r.goOnline=function(){r.isOnline=!0,r.refresh()},r.deleteAllTiles=function(){return se.removeAllTiles(r.offlineKey)},r.extendTileLOD(),pe()&&(r.offlineKey=r.title||r.id,se.init(r.offlineKey,t,ke.objectStoreName)),r}var r,o,i,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(n,e),r=n,(o=[{key:"fetchTile",value:function(e,t,n,r){var o=this;if(this.lastTileUrl=this.getTileUrl(e,t,n).split("?")[0],this.isOnline)return h()(this.lastTileUrl,{responseType:"image"}).then(function(e){return o.createCanvasImage(e.data,o.tileInfo.size[0])},function(e){return o.createCanvasImage(null,o.tileInfo.size[0])});var i=document.createElement("img");return b.create(function(e){i.onload=function(){return e(i)},se.getTileImg(o.offlineKey,w.a.compressToUTF16(o.lastTileUrl)).then(function(e){return i.src="data:image/"+o.tileInfo.format.toLowerCase()+";base64,"+x.decompress(e)}).catch(function(){ke.showNoTile&&(i.src=ke.noTileIcon)})}).then(function(e){return o.createCanvasImage(e,o.tileInfo.size[0])})}},{key:"createCanvasImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;!e&&ke.showNoTile&&((e=document.createElement("img")).src=ke.noTileIcon);var n=document.createElement("canvas"),r=n.getContext("2d");return n.width=t,n.height=t,r.drawImage(e,0,0,t,t),n}},{key:"isSavedToIndexedDB",value:(l=xe(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.getAllTiles(this.offlineKey).catch(function(){});case 2:return t=e.sent,e.abrupt("return",!(!t||!t.length));case 4:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"saveToFile",value:(a=xe(c.a.mark(function e(t){var n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.getAllTiles(this.offlineKey);case 2:n=e.sent,(r=[]).push("url,img"),n.forEach(function(e){var t=e.url,n=e.img;return r.push(t+","+x.decompress(n))}),g.a.saveAs(new Blob([r.join("\r\n")],{type:"text/plain;charset=utf-16"}),t);case 7:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"loadFromFile",value:(i=xe(c.a.mark(function e(t,n){var r=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,o){if(!(window.File&&window.FileReader&&window.FileList&&window.Blob))return o("The File APIs are not fully supported in this browser.");var i=new FileReader,a=r.offlineKey;i.onload=function(r){return e(je(c.a.mark(function e(){var o,i,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("url,img"===(o=r.target.result.split("\r\n"))[0]){e.next=3;break}return e.abrupt("return",Promise.reject("File "+t.name+" doesn't contain tiles that can be loaded"));case 3:return e.next=5,Oe(se.removeAllTiles(a));case 5:o.shift(),i=c.a.mark(function e(t){var r,i,l,u;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o[t].split(","),i=ve(r,2),l=i[0],u=i[1],e.next=3,se.addTile(a,{url:l,img:x.compress(u)}).catch(function(){}).finally(function(){n({percent:Math.round(o.length?t/o.length*100:0).toFixed(1)+"%",done:t===o.length-1})});case 3:case"end":return e.stop()}},e)}),l=0;case 8:if(!(l<o.length)){e.next=13;break}return e.delegateYield(i(l),"t0",10);case 10:l++,e.next=8;break;case 13:case"end":return e.stop()}},e)}))())},i.readAsText(t[0])}));case 1:case"end":return e.stop()}},e)})),function(e,t){return i.apply(this,arguments)})},{key:"uploadTile",value:function(e){var t=e.level,n=e.row,r=e.col;return this.saveTileToDB(this.getTileUrl(t,n,r))}},{key:"uploadTilesToIndexedDb",value:function(e,t,n,r){var o=this;return je(c.a.mark(function i(){var a,l,u,s,f;return c.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:for(a=[],l=function(e){C.getCellsInExtent(o.tileInfo,n,e).forEach(function(t){a.push({level:e,row:t[1],col:t[0]})})},u=e;u<=t;u++)l(u);return i.next=5,Oe(se.removeAllTiles(o.offlineKey));case 5:s=c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.uploadTile(a[t]).catch(function(){}).finally(function(){r({percent:Math.round(a.length?t/a.length*100:0).toFixed(1)+"%",done:t===a.length-1})});case 2:case"end":return e.stop()}},e)}),f=0;case 7:if(!(f<a.length)){i.next=12;break}return i.delegateYield(s(f),"t0",9);case 9:f++,i.next=7;break;case 12:case"end":return i.stop()}},i)}))()}},{key:"getContainingTileCoords",value:function(e,t,n){return{row:Math.floor((e.origin.y-t.y)/(e.size[0]*n)),col:Math.floor((t.x-e.origin.x)/(e.size[1]*n))}}},{key:"extendTileLOD",value:function(){var e=this,t=new v.a({x:this.fullExtent.xmin,y:this.fullExtent.ymax,spatialReference:this.spatialReference}),n=new v.a({x:this.fullExtent.xmax,y:this.fullExtent.ymin,spatialReference:this.spatialReference});return this.tileInfo.lods.forEach(function(r){var o=e.getContainingTileCoords(e.tileInfo,t,r.resolution);r.startTileRow=0>o.row?0:o.row,r.startTileCol=0>o.col?0:o.col;var i=e.getContainingTileCoords(e.tileInfo,n,r.resolution);r.endTileRow=i.row,r.endTileCol=i.col,r.rows=256,r.cols=256}),this.tileInfo.lods}},{key:"saveTileToDB",value:function(e){var t=this;return new Promise(function(n,r){var o=e.split("?")[0],i=new XMLHttpRequest;i.open("GET",o,!0),i.overrideMimeType("text/plain; charset=x-user-defined"),i.onload=xe(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==i.status||""===i.responseText){e.next=6;break}return e.next=3,se.addTile(t.offlineKey,{url:w.a.compressToUTF16(o),img:x.compress(x.wordToBase64(x.stringToWord(i.responseText)))});case 3:n(),e.next=8;break;case 6:r(i.status+" "+i.statusText+": "+i.response+" when downloading "+o);case 8:case"end":return e.stop()}},e)})),i.onerror=function(e){r(e)},i.send(null)})}}])&&be(r.prototype,o),n}()};r.d(n,"initOfflineFeatures",function(){return Se}),r.d(n,"OfflineLayer",function(){return Ie}),r.d(n,"TileHelpers",function(){return C}),r.d(n,"IndexedDBHelpers",function(){return o})}])}.apply(null,r))||(e.exports=o)}.apply(null,r))||(e.exports=o)},jiIK:function(e,t,n){var r;void 0===(r=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.callDisposer=function(e){e&&("function"==typeof e?e():"function"==typeof e.dispose&&e.dispose())}}.apply(null,[t]))||(e.exports=r)},"mAY+":function(e,t,n){var r,o;r=[t,n("o0o1"),n("q1tI"),n("2vnA"),n("kMSe"),n("vOnD"),n("ZXZG"),n("aL2x"),n("hC82"),n("BZCx"),n("jiIK"),n("TcoO"),n("qUWS"),n("p4l/")],void 0===(o=function(e,t,n,r,o,i,a,l,c,u,s,f,p,d){"use strict";var h,m,v,b,y,g,A,w;function x(e){return e&&e.__esModule?e:{default:e}}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach(function(t){C(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function k(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){B(i,r,o,a,l,"next",e)}function l(e){B(i,r,o,a,l,"throw",e)}a(void 0)})}}function S(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?L(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=x(t),n=x(n),i=x(i),a=x(a),l=x(l),d=x(d);var z={FILE:Symbol("file"),DB:Symbol("db")},R=(0,o.inject)("mapStore")(h=(0,o.observer)((v=N((m=function(e){function o(e){var n;return T(this,o),S(n=P(this,M(o).call(this,e)),"minLevel",v,L(n)),S(n,"maxLevel",b,L(n)),S(n,"tilesSize",y,L(n)),S(n,"leftSpace",g,L(n)),S(n,"stopRequest",A,L(n)),S(n,"isLayerInIndexedDB",w,L(n)),n.disposer=void 0,n.cancelRequest=function(){n.stopRequest=!0},n.handleUploadToIndexedDB=k(t.default.mark(function e(){var r,o,i;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.basemap.title,n.updateTileCountEstimation(),o=n.basemap.uploadTilesToIndexedDb(n.minLevel,n.maxLevel,n.props.mapStore.view.extent,function(e){return n.props.mapStore.setLoadingBasemapProgress(r,E({},e,{type:z.DB}))}),e.next=5,o.next();case 5:i=e.sent;case 6:if(n.stopRequest||i.done){e.next=12;break}return e.next=9,o.next();case 9:i=e.sent,e.next=6;break;case 12:return i.done&&(n.isLayerInIndexedDB=!0),e.next=15,n.setInitialStopRequest();case 15:case"end":return e.stop()}},e)})),n.handleChangeMinLevel=function(e){var t=parseInt(e.target.value);t<=n.maxLevel&&(n.minLevel=t,n.updateTileCountEstimation())},n.handleChangeMaxLevel=function(e){parseInt(e.target.value)>=n.minLevel&&(n.maxLevel=parseInt(e.target.value),n.updateTileCountEstimation())},n.handleRemoveSavedTiles=k(t.default.mark(function e(){return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.basemap.deleteAllTiles();case 2:n.isLayerInIndexedDB=!1,n.basemap.goOnline();case 4:case"end":return e.stop()}},e)})),n.updateTileCountEstimation=k(t.default.mark(function e(){return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.basemap.lastTileUrl||n.basemap.title===n.props.mapStore.currentBaseMap||n.setBasemapLastTileUrl(),c.TileHelpers.getTileSizeFromMinMaxLevels(n.basemap,n.props.mapStore.view.extent,n.minLevel,n.maxLevel).then(function(){var e=k(t.default.mark(function e(r){var o;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.sizeBytes,n.tilesSize=o,e.next=4,c.IndexedDBHelpers.getAvailableStorageSpace();case 4:n.leftSpace=e.sent;case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e)})),n.saveToFile=function(){n.basemap.saveToFile("".concat(n.basemap.title,".csv"))},n.loadFromFile=function(){var e=k(t.default.mark(function e(r){var o,i,a;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.basemap.title,e.next=3,n.basemap.loadFromFile(r,function(e){return n.props.mapStore.setLoadingBasemapProgress(o,E({},e,{type:z.FILE}))});case 3:return i=e.sent,e.next=6,i.next();case 6:a=e.sent;case 7:if(n.stopRequest||a.done){e.next=13;break}return e.next=10,i.next();case 10:a=e.sent,e.next=7;break;case 13:return a.done&&(n.isLayerInIndexedDB=!0),e.next=16,n.setInitialStopRequest();case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.setInitialZoomSettings(),n.updateTileCountEstimation(),n}var i,a,p,h,m;return _(o,n["default"].Component),i=o,(a=[{key:"setInitialZoomSettings",value:function(){this.props.mapStore.currentZoom-3>=this.basemapMinZoom?this.minLevel=this.props.mapStore.currentZoom-3:this.minLevel=this.basemapMinZoom,this.props.mapStore.currentZoom+3<=this.basemapMaxZoom?this.maxLevel=this.props.mapStore.currentZoom+3:this.maxLevel=this.basemapMaxZoom}},{key:"componentDidMount",value:(m=k(t.default.mark(function e(){var n=this;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.basemap.isSavedToIndexedDB();case 2:this.isLayerInIndexedDB=e.sent,(0,r.reaction)(function(){return n.props.mapStore.currentZoom},function(e,t){n.props.mapStore.modifiedBasemapTitle&&(n.disposer=t,n.updateTileCountEstimation())});case 4:case"end":return e.stop()}},e,this)})),function(){return m.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){(0,s.callDisposer)(this.disposer),this.disposer=null,this.props.mapStore.clearModifiedBasemap()}},{key:"setInitialStopRequest",value:(h=k(t.default.mark(function e(){return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.stopRequest){e.next=5;break}return e.next=3,this.basemap.deleteAllTiles();case 3:this.props.mapStore.setLoadingBasemapProgress(this.basemap.title,{percent:0,done:!0}),this.stopRequest=!1;case 5:case"end":return e.stop()}},e,this)})),function(){return h.apply(this,arguments)})},{key:"getUploadPercentFromIndexedDb",value:function(){return this.getUploadPercentByType(z.DB)}},{key:"getUploadPercentFromFile",value:function(){return this.getUploadPercentByType(z.FILE)}},{key:"getUploadPercentByType",value:function(e){var t=this.props.mapStore.loadingProgressMap.get(this.basemap.title);return t&&!t.done&&t.type===e?t.percent:0}},{key:"setBasemapLastTileUrl",value:function(){var e=this,t=this.props.mapStore.map.layers.find(function(t){return t.title===e.props.mapStore.currentBasemapTitle}),n=c.TileHelpers.getLevelRowColFromURL(t.type,t.lastTileUrl),r=n.level,o=n.col,i=n.row;r&&o&&i&&(this.basemap.lastTileUrl=this.basemap.getTileUrl(r,i,o).split("?")[0])}},{key:"render",value:function(){var e=this.props.mapStore,t=this.getUploadPercentFromIndexedDb(),r=this.getUploadPercentFromFile(),o=!(!t&&!r),i=t?"Downloading... ".concat(t):"Download",a=r?"Downloading... ".concat(r):"Select a file";return n.default.createElement(f.PanelWrapper,null,n.default.createElement(f.PanelTitle,null,n.default.createElement(f.IconWrapper,{onClick:e.clearModifiedBasemap},n.default.createElement(d.default,{name:"arrow_left"})),'Offline mode of map "'.concat(this.basemap.title,'"')),n.default.createElement(Q,null,n.default.createElement(F,null,"Min. zoom:"),n.default.createElement(q,{type:"number",title:"max",min:this.basemapMinZoom,max:this.basemapMaxZoom,value:this.minLevel,onChange:this.handleChangeMinLevel,onKeyPress:function(e){return e.preventDefault()}})),n.default.createElement(Q,null,n.default.createElement(F,null,"Current zoom:"),n.default.createElement(U,null,e.currentZoom)),n.default.createElement(Q,null,n.default.createElement(F,null,"Max. zoom:"),n.default.createElement(q,{type:"number",min:this.basemapMinZoom,max:this.basemapMaxZoom,value:this.maxLevel,onChange:this.handleChangeMaxLevel,onKeyPress:function(e){return e.preventDefault()}})),n.default.createElement(Q,null,n.default.createElement(F,null,"Size: "),n.default.createElement(F,{align:"end"},(0,u.formatBytes)(this.tilesSize))),!this.isEnoughLeftSpace&&n.default.createElement(Q,null,n.default.createElement(f.ErrorString,null,"There is not enough free space to save offline maps. Left space: ".concat((0,u.formatBytes)(this.leftSpace.left)))),n.default.createElement(Q,null,n.default.createElement(V,{onClick:this.handleUploadToIndexedDB,disabled:!this.isEnoughLeftSpace||o,type:"standard"},i),n.default.createElement(V,{onClick:this.saveToFile,disabled:!this.isLayerInIndexedDB||o,type:"standard"},"Save to file")),n.default.createElement(Q,null,n.default.createElement(l.default,{onUpload:this.loadFromFile,title:a,disabled:o})),o&&n.default.createElement(Q,null,n.default.createElement(V,{wide:!0,onClick:this.cancelRequest,type:"danger"},"Cancel downloading")),this.isLayerInIndexedDB&&!o&&n.default.createElement(Z,null,n.default.createElement(V,{type:"danger",onClick:this.handleRemoveSavedTiles,wide:!0},"Remove saved map")))}},{key:"isEnoughLeftSpace",get:function(){return!(this.leftSpace&&!isNaN(this.leftSpace.left))||this.leftSpace.left-this.tilesSize>0}},{key:"basemap",get:function(){var e=this;return this.props.mapStore.map.layers.find(function(t){return t.title===e.props.mapStore.modifiedBasemapTitle})}},{key:"basemapMinZoom",get:function(){return this.basemap.tileInfo.lods[0].level}},{key:"basemapMaxZoom",get:function(){return this.basemap.tileInfo.lods[this.basemap.tileInfo.lods.length-1].level}}])&&I(i.prototype,a),p&&I(i,p),o}()).prototype,"minLevel",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=N(m.prototype,"maxLevel",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=N(m.prototype,"tilesSize",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=N(m.prototype,"leftSpace",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=N(m.prototype,"stopRequest",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=N(m.prototype,"isLayerInIndexedDB",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N(m.prototype,"isEnoughLeftSpace",[r.computed],Object.getOwnPropertyDescriptor(m.prototype,"isEnoughLeftSpace"),m.prototype),N(m.prototype,"basemap",[r.computed],Object.getOwnPropertyDescriptor(m.prototype,"basemap"),m.prototype),h=m))||h)||h,q=i.default.input.withConfig({displayName:"OfflinePanel__Input",componentId:"nbv9na-0"})(["font-size:14px;padding:0 10px;background:black;border:none;height:24px;color:",";"],p.fontColor),F=i.default.label.withConfig({displayName:"OfflinePanel__Label",componentId:"nbv9na-1"})(["color:",";flex:1;text-align:",";"],p.fontColor,function(e){return"end"===e.align?"end":"start"}),U=(0,i.default)(q.withComponent("label")).withConfig({displayName:"OfflinePanel__ZoomLabel",componentId:"nbv9na-2"})(["width:60px;text-align:start;line-height:24px;"]),Q=i.default.div.withConfig({displayName:"OfflinePanel__Block",componentId:"nbv9na-3"})(["background-color:",";display:flex;flex-shrink:0;align-items:center;justify-content:space-between;padding:5px 10px;","{margin:5px 2px;}"],p.panelBackgroundColor,a.default),Z=(0,i.default)(Q).withConfig({displayName:"OfflinePanel__EndBlock",componentId:"nbv9na-4"})(["flex-grow:1;align-items:flex-end;"]),V=(0,i.default)(a.default).withConfig({displayName:"OfflinePanel__OfflineButton",componentId:"nbv9na-5"})(["width:",";height:42px;"],function(e){return e.wide?"100%":"49%"}),W=R;e.default=W}.apply(null,r))||(e.exports=o)},"p4l/":function(e,t,n){var r,o;r=[t,n("q1tI"),n("vOnD")],void 0===(o=function(e,t,n){"use strict";var r;function o(e,t){if(null==e)return{};var n,r,o=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function i(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var n=e.name,r=o(e,["name"]);return t.default.createElement(l,r,a[n])},t=(r=t)&&r.__esModule?r:{default:r},n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n);var a={settings:t.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},t.default.createElement("path",{d:"M15.95 10.78c.03-.25.05-.51.05-.78s-.02-.53-.06-.78l1.69-1.32c.15-.12.19-.34.1-.51l-1.6-2.77c-.1-.18-.31-.24-.49-.18l-1.99.8c-.42-.32-.86-.58-1.35-.78L12 2.34c-.03-.2-.2-.34-.4-.34H8.4c-.2 0-.36.14-.39.34l-.3 2.12c-.49.2-.94.47-1.35.78l-1.99-.8c-.18-.07-.39 0-.49.18l-1.6 2.77c-.1.18-.06.39.1.51l1.69 1.32c-.04.25-.07.52-.07.78s.02.53.06.78L2.37 12.1c-.15.12-.19.34-.1.51l1.6 2.77c.1.18.31.24.49.18l1.99-.8c.42.32.86.58 1.35.78l.3 2.12c.04.2.2.34.4.34h3.2c.2 0 .37-.14.39-.34l.3-2.12c.49-.2.94-.47 1.35-.78l1.99.8c.18.07.39 0 .49-.18l1.6-2.77c.1-.18.06-.39-.1-.51l-1.67-1.32zM10 13c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z"})),arrow_left:t.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 492 492",xmlSpace:"preserve"},t.default.createElement("g",null,t.default.createElement("g",null,t.default.createElement("path",{d:"M198.608,246.104L382.664,62.04c5.068-5.056,7.856-11.816,7.856-19.024c0-7.212-2.788-13.968-7.856-19.032l-16.128-16.12    C361.476,2.792,354.712,0,347.504,0s-13.964,2.792-19.028,7.864L109.328,227.008c-5.084,5.08-7.868,11.868-7.848,19.084    c-0.02,7.248,2.76,14.028,7.848,19.112l218.944,218.932c5.064,5.072,11.82,7.864,19.032,7.864c7.208,0,13.964-2.792,19.032-7.864    l16.124-16.12c10.492-10.492,10.492-27.572,0-38.06L198.608,246.104z"})))),online:t.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512.001 512.001",xmlSpace:"preserve"},t.default.createElement("g",null,t.default.createElement("g",null,t.default.createElement("circle",{cx:"255.001",cy:"433.5",r:"33"}))),t.default.createElement("g",null,t.default.createElement("g",null,t.default.createElement("path",{d:"M506.632,154.864C440.902,84.341,351.895,45.501,255.997,45.5C160.107,45.501,71.1,84.341,5.369,154.864    c-7.53,8.08-7.085,20.736,0.995,28.267c8.081,7.53,20.736,7.086,28.267-0.995C92.711,119.82,171.327,85.501,256.004,85.5    c84.67,0.001,163.286,34.32,221.366,96.636c3.939,4.226,9.28,6.364,14.635,6.364c4.883,0,9.778-1.778,13.632-5.369    C513.717,175.599,514.163,162.944,506.632,154.864z"}))),t.default.createElement("g",null,t.default.createElement("g",null,t.default.createElement("path",{d:"M433.194,237.458c-48.587-48.954-111.516-75.913-177.196-75.911c-65.695,0.001-128.625,26.961-177.197,75.913    c-7.78,7.841-7.731,20.504,0.11,28.284c7.841,7.78,20.504,7.731,28.284-0.11c41.005-41.326,93.851-64.086,148.803-64.087    c54.938-0.002,107.784,22.759,148.804,64.089c3.91,3.939,9.052,5.911,14.196,5.911c5.092,0,10.188-1.934,14.09-5.805    C440.927,257.961,440.975,245.298,433.194,237.458z"}))),t.default.createElement("g",null,t.default.createElement("g",null,t.default.createElement("path",{d:"M353.151,320.292c-26.02-25.779-63.317-41.792-97.339-41.792c-0.004,0-0.011,0-0.015,0h-1.441c-0.006,0-0.009,0-0.015,0    c-34.023,0-71.323,16.014-97.342,41.792c-7.846,7.774-7.905,20.437-0.131,28.284c3.911,3.947,9.059,5.924,14.208,5.924    c5.087,0,10.176-1.929,14.075-5.792c18.523-18.352,45.68-30.208,69.192-30.208c0.003,0,0.007,0,0.01,0h1.447    c0.004,0,0.005,0,0.009,0c23.509,0,50.668,11.857,69.189,30.208c7.846,7.773,20.511,7.717,28.284-0.132    C361.057,340.73,360.998,328.066,353.151,320.292z"})))),offline:t.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15 15"},t.default.createElement("path",{d:"M6.88 8.87c-.5.13-.98.4-1.37.83a.49.49 0 0 1-.74 0 .61.61 0 0 1 0-.8c.35-.4.76-.7 1.19-.9l.92.87zM8.54 6.1L7.23 4.84c1.8-.07 3.61.64 4.98 2.13.2.23.2.59 0 .81a.5.5 0 0 1-.37.17.5.5 0 0 1-.37-.17 5.45 5.45 0 0 0-2.93-1.7zm-3.85.7c-.42.27-.81.6-1.17 1a.49.49 0 0 1-.74 0 .61.61 0 0 1 0-.82c.34-.36.7-.68 1.08-.96l.83.79zm.98-3.43l-.95-.9C5.61 2.16 6.54 2 7.5 2a9.04 9.04 0 0 1 6.85 3.27c.2.22.2.58 0 .8a.47.47 0 0 1-.35.17.46.46 0 0 1-.35-.16A8.11 8.11 0 0 0 7.5 3.14c-.62 0-1.24.08-1.83.22zM2.64 4.85a9.2 9.2 0 0 0-1.3 1.23c-.19.22-.5.22-.7 0a.63.63 0 0 1 0-.81c.38-.43.78-.82 1.2-1.17l.8.75zm4.86 8.09c-.6 0-1.09-.48-1.09-1.06 0-.58.49-1.05 1.09-1.05.6 0 1.08.47 1.08 1.05 0 .58-.48 1.06-1.08 1.06zm3.08-2.02L2.27 3.04a.51.51 0 1 1 .7-.75l8.31 7.88a.51.51 0 1 1-.7.75z"})),github:t.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 438.549 438.549",xmlSpace:"preserve"},t.default.createElement("g",null,t.default.createElement("path",{d:"M409.132,114.573c-19.608-33.596-46.205-60.194-79.798-79.8C295.736,15.166,259.057,5.365,219.271,5.365   c-39.781,0-76.472,9.804-110.063,29.408c-33.596,19.605-60.192,46.204-79.8,79.8C9.803,148.168,0,184.854,0,224.63   c0,47.78,13.94,90.745,41.827,128.906c27.884,38.164,63.906,64.572,108.063,79.227c5.14,0.954,8.945,0.283,11.419-1.996   c2.475-2.282,3.711-5.14,3.711-8.562c0-0.571-0.049-5.708-0.144-15.417c-0.098-9.709-0.144-18.179-0.144-25.406l-6.567,1.136   c-4.187,0.767-9.469,1.092-15.846,1c-6.374-0.089-12.991-0.757-19.842-1.999c-6.854-1.231-13.229-4.086-19.13-8.559   c-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559   c-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-0.951-2.568-2.098-3.711-3.429c-1.142-1.331-1.997-2.663-2.568-3.997   c-0.572-1.335-0.098-2.43,1.427-3.289c1.525-0.859,4.281-1.276,8.28-1.276l5.708,0.853c3.807,0.763,8.516,3.042,14.133,6.851   c5.614,3.806,10.229,8.754,13.846,14.842c4.38,7.806,9.657,13.754,15.846,17.847c6.184,4.093,12.419,6.136,18.699,6.136   c6.28,0,11.704-0.476,16.274-1.423c4.565-0.952,8.848-2.383,12.847-4.285c1.713-12.758,6.377-22.559,13.988-29.41   c-10.848-1.14-20.601-2.857-29.264-5.14c-8.658-2.286-17.605-5.996-26.835-11.14c-9.235-5.137-16.896-11.516-22.985-19.126   c-6.09-7.614-11.088-17.61-14.987-29.979c-3.901-12.374-5.852-26.648-5.852-42.826c0-23.035,7.52-42.637,22.557-58.817   c-7.044-17.318-6.379-36.732,1.997-58.24c5.52-1.715,13.706-0.428,24.554,3.853c10.85,4.283,18.794,7.952,23.84,10.994   c5.046,3.041,9.089,5.618,12.135,7.708c17.705-4.947,35.976-7.421,54.818-7.421s37.117,2.474,54.823,7.421l10.849-6.849   c7.419-4.57,16.18-8.758,26.262-12.565c10.088-3.805,17.802-4.853,23.134-3.138c8.562,21.509,9.325,40.922,2.279,58.24   c15.036,16.18,22.559,35.787,22.559,58.817c0,16.178-1.958,30.497-5.853,42.966c-3.9,12.471-8.941,22.457-15.125,29.979   c-6.191,7.521-13.901,13.85-23.131,18.986c-9.232,5.14-18.182,8.85-26.84,11.136c-8.662,2.286-18.415,4.004-29.263,5.146   c9.894,8.562,14.842,22.077,14.842,40.539v60.237c0,3.422,1.19,6.279,3.572,8.562c2.379,2.279,6.136,2.95,11.276,1.995   c44.163-14.653,80.185-41.062,108.068-79.226c27.88-38.161,41.825-81.126,41.825-128.906   C438.536,184.851,428.728,148.168,409.132,114.573z"}))),twitter:t.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 49.652 49.652",xmlSpace:"preserve"},t.default.createElement("g",null,t.default.createElement("g",null,t.default.createElement("path",{d:"M24.826,0C11.137,0,0,11.137,0,24.826c0,13.688,11.137,24.826,24.826,24.826c13.688,0,24.826-11.138,24.826-24.826    C49.652,11.137,38.516,0,24.826,0z M35.901,19.144c0.011,0.246,0.017,0.494,0.017,0.742c0,7.551-5.746,16.255-16.259,16.255    c-3.227,0-6.231-0.943-8.759-2.565c0.447,0.053,0.902,0.08,1.363,0.08c2.678,0,5.141-0.914,7.097-2.446    c-2.5-0.046-4.611-1.698-5.338-3.969c0.348,0.066,0.707,0.103,1.074,0.103c0.521,0,1.027-0.068,1.506-0.199    c-2.614-0.524-4.583-2.833-4.583-5.603c0-0.024,0-0.049,0.001-0.072c0.77,0.427,1.651,0.685,2.587,0.714    c-1.532-1.023-2.541-2.773-2.541-4.755c0-1.048,0.281-2.03,0.773-2.874c2.817,3.458,7.029,5.732,11.777,5.972    c-0.098-0.419-0.147-0.854-0.147-1.303c0-3.155,2.558-5.714,5.713-5.714c1.644,0,3.127,0.694,4.171,1.804    c1.303-0.256,2.523-0.73,3.63-1.387c-0.43,1.335-1.333,2.454-2.516,3.162c1.157-0.138,2.261-0.444,3.282-0.899    C37.987,17.334,37.018,18.341,35.901,19.144z"}))))};var l=n.default.span.withConfig({displayName:"Icon__IconWrapper",componentId:"cwj86n-0"})([""," svg{fill:darkgray;height:14px;width:14px;}"],function(e){return e.noPointerEvents&&(0,n.css)(["pointer-events:none;"])})}.apply(null,r))||(e.exports=o)},qUWS:function(e,t,n){var r;void 0===(r=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shadow=e.disabledFontColor=e.disabledButtonColor=e.dangerColor=e.buttonStandardColor=e.activeColor=e.navBarBackgroundColor=e.panelBackgroundColor=e.fontColor=e.backgroundColor=e.navBarHeight=void 0;e.navBarHeight="50px";e.backgroundColor="black";e.fontColor="lightgrey";e.panelBackgroundColor="#32374d";e.navBarBackgroundColor="#2d2e33";e.activeColor="rgb(90, 120, 255)";e.buttonStandardColor="rgb(90, 120, 255)";e.dangerColor="red";e.disabledButtonColor="rgba(0,0,0,0.2)";e.disabledFontColor="rgba(0,0,0,0.5)";e.shadow="rgba(0, 0, 0, 0.16) 0 3px 6px"}.apply(null,[t]))||(e.exports=r)},rGK3:function(e,t,n){var r,o;r=[t,n("o0o1"),n("q1tI"),n("kMSe"),n("2vnA"),n("vOnD"),n("jiIK")],void 0===(o=function(e,t,n,r,o,i,a){"use strict";var l;function c(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=c(t),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n),i=c(i);var y=(0,r.inject)("mapStore")(l=(0,r.observer)(l=function(e){function r(e){var t;return f(this,r),(t=d(this,m(r).call(this,e))).disposers=[],t}var i,l,c,u,h;return v(r,n.Component),i=r,(l=[{key:"componentDidMount",value:(u=t.default.mark(function e(){var n;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.mapStore,e.next=3,n.createMap();case 3:n.createView("map"),this.observeBasemapChange(),n.addZoomChangeListener();case 6:case"end":return e.stop()}},e,this)}),h=function(){var e=this,t=arguments;return new Promise(function(n,r){var o=u.apply(e,t);function i(e){s(o,n,r,i,a,"next",e)}function a(e){s(o,n,r,i,a,"throw",e)}i(void 0)})},function(){return h.apply(this,arguments)})},{key:"observeBasemapChange",value:function(){var e=this,t=this.props.mapStore;(0,o.reaction)(function(){return t.currentBasemapTitle},function(n,r){t.toggleBasemap(n),e.disposers.push(r)})}},{key:"componentWillUnmount",value:function(){this.disposers.forEach(function(e){return(0,a.callDisposer)(e)})}},{key:"render",value:function(){return n.default.createElement(g,null,n.default.createElement("div",{id:"map"}))}}])&&p(i.prototype,l),c&&p(i,c),r}())||l)||l;e.default=y;var g=i.default.div.withConfig({displayName:"Map__MapWrapper",componentId:"f4mltk-0"})(["height:100%;width:100%;overflow:hidden;display:flex;flex-direction:column;flex:1;background-color:black;position:relative;z-index:0;#map{height:100%;width:100%;}"])}.apply(null,r))||(e.exports=o)}});
(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/2d/engine/Container":"1Mg+","esri/views/vectorTiles/VectorTileContainer":"3atH","esri/views/2d/layers/LayerView2D":"6i4F","esri/core/libs/gl-matrix-2/mat4":"FXVB","esri/views/2d/engine/webgl/enums":"JNkf","esri/core/libs/gl-matrix-2/math/mat4":"Jl7l","esri/views/layers/LayerView":"WsO6","esri/views/2d/tiling/TileInfoViewPOT":"YOjP","esri/views/2d/layers/VectorTileLayerView2D":"xkJJ"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{"1Mg+":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("xhoE"),i("Brhx")],void 0===(n=function(e,t,i,r){function n(e,t){e.delete(t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._childrenSet=new Set,t._childrenToAttach=[],t._childrenToDetach=[],t._renderPhase=3,t.children=[],t}return i(t,e),Object.defineProperty(t.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0}),t.prototype.detach=function(){for(var e=0,t=this.children.concat(this._childrenToDetach);e<t.length;e++){var i=t[e];i.attached&&(this.detachChild(i),i.attached=!1,i.parent=null)}},t.prototype.doRender=function(e){var t=e.globalOpacity;e.globalOpacity*=this.opacity,this._renderPhase=0,this.attachChildren(),this._renderPhase=1;for(var i=this._childrenToDetach;i.length>0;){var r=i.shift();this.detachChild(r),r.attached=!1,r.parent=null,r.stage=null}this._renderPhase=2,this.renderChildren(e),this._renderPhase=3,e.globalOpacity=t},t.prototype.addChild=function(e){return this.addChildAt(e,this.children.length)},t.prototype.addChildAt=function(e,t){if(void 0===t&&(t=this.numChildren),!e)return e;if(this.contains(e))return e;var i=e.parent;i&&i!==this&&i.removeChild(e),t>=this.numChildren?this.children.push(e):this.children.splice(t,0,e),this._childrenSet.add(e);var r=this._childrenToDetach.indexOf(e);return r>-1&&this._childrenToDetach.splice(r,1),this._childrenToAttach.push(e),this._renderPhase>=2&&this.requestRender(),e},t.prototype.contains=function(e){return this._childrenSet.has(e)},t.prototype.getChildIndex=function(e){return this.children.indexOf(e)},t.prototype.getChildAt=function(e){return e<0||e>this.children.length?null:this.children[e]},t.prototype.removeAllChildren=function(){for(var e=this.numChildren;e--;)this.removeChildAt(0)},t.prototype.removeChild=function(e){return this.contains(e)?this.removeChildAt(this.getChildIndex(e)):e},t.prototype.removeChildAt=function(e){var t;if(e<0||e>=this.children.length)return null;if(t=this.children.splice(e,1)[0],n(this._childrenSet,t),t.attached)this._childrenToDetach.push(t),this._renderPhase>=2&&this.requestRender();else{var i=this._childrenToAttach.indexOf(t);i>-1&&this._childrenToAttach.splice(i,1)}return t},t.prototype.requestChildRender=function(e){e&&e.parent===this&&this._renderPhase>=2&&this.requestRender()},t.prototype.setChildIndex=function(e,t){var i=this.getChildIndex(e);i>-1&&(this.children.splice(i,1),this.children.splice(t,0,e),this._renderPhase>=2&&this.requestRender())},t.prototype.sortChildren=function(e){return this._renderPhase>2&&this.requestRender(),this.children.sort(e)},t.prototype.attachChildren=function(){var e=this._childrenToAttach;if(0!==e.length)for(var t=0,i=!1;!i;){var r=e[t];r.parent=this,r.stage=this.stage,this.attachChild(r)?(r.attached=!0,e.splice(t,1)):++t,i=e.length===t}},t.prototype.renderChildren=function(e){for(var t=this.children,i=t.length,r=0;r<i;r++)t[r].processRender(e)},t.prototype.attachChild=function(e){return e.attach()},t.prototype.detachChild=function(e){e.detach()},t}(r.DisplayObject);t.Container=a}.apply(null,r))||(e.exports=n)},"3atH":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("xhoE"),i("H1tY"),i("qMld"),i("FXVB"),i("oZZu"),i("vlC2"),i("1Mg+"),i("JNkf"),i("BEeJ"),i("5iPT")],void 0===(n=function(e,t,i,r,n,a,o,s,l,h,d,u){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderer=new u,t._tileCoordinateScale=s.vec3f32.create(),t._orientationVec=s.vec3f32.fromValues(0,0,1),t._displayScale=s.vec3f32.create(),t._defaultTransform=o.mat4f32.create(),t._displayWidth=0,t._displayHeight=0,t._pointToCallbacks=new Map,t}return i(t,e),t.prototype.initialize=function(e,t,i,r){this._renderer.initialize(e,t),this._tileInfoView=r,this._tileInfo=i},t.prototype.dispose=function(){this._renderer&&this._renderer.dispose(),e.prototype.dispose.call(this)},t.prototype.hitTest=function(e,t){var i=this,r=[e,t];return n.create(function(e,t){i._pointToCallbacks.set(r,{resolve:e,reject:t}),i.requestRender()},function(){i._pointToCallbacks.has(r)&&i._pointToCallbacks.delete(r)})},t.prototype.renderChildren=function(t){var i=this;if(0!==this.children.length&&this._tileInfoView&&t&&t.state&&(t.drawPhase===h.WGLDrawPhase.MAP||t.drawPhase===h.WGLDrawPhase.HITTEST)){var n=t.state,a=this.stage.context,o=this._renderer;o.initializeProgramCache(this.stage.context),o.setGlobalOpacity(a,t,this.opacity),a.setDepthWriteEnabled(!0),a.setStencilWriteMask(255),a.setClearDepth(1),a.setClearStencil(0),a.clear(a.gl.DEPTH_BUFFER_BIT|a.gl.STENCIL_BUFFER_BIT),a.setDepthWriteEnabled(!1);var s=t;s.displayLevel=this._tileInfoView.scaleToLevel(n.scale),s.requiredLevel=this._tileInfoView.getSmallestInfoForScale(n.scale).level,s.renderer=this._renderer,this.sortChildren(function(e,t){return e.key.level-t.key.level});for(var l=this.children.length,d=1;d<=l;d++){var u=this.children[d-1];u.attached&&u.visible&&(u.stencilData.reference=d,u.stencilData.mask=255)}if(this._updateTilesTransform(s.state,s.requiredLevel,this.children),a.setDepthWriteEnabled(!0),this._renderer.setStateParams(s.state,s.pixelRatio,s.displayLevel),this._renderer.drawClippingMasks(a,this.children),a.setStencilWriteMask(0),a.setBlendFunctionSeparate(1,771,1,771),a.setStencilOp(7680,7680,7681),a.setDepthFunction(515),a.setBlendingEnabled(!1),a.setStencilTestEnabled(!0),a.setDepthTestEnabled(!0),a.setDepthWriteEnabled(!0),s.drawphase=0,e.prototype.renderChildren.call(this,s),a.setDepthWriteEnabled(!1),a.setBlendingEnabled(!0),s.drawphase=1,e.prototype.renderChildren.call(this,s),s.drawphase=2,e.prototype.renderChildren.call(this,s),a.setStencilTestEnabled(!1),a.setDepthTestEnabled(!1),o.applyGlobalOpacity(a,t,this.opacity),r("esri-vector-tiles-debug"))for(var c=0,p=this.children;c<p.length;c++){var f=p[c];f.attached&&f.visible&&this._renderer.renderTileInfo(a,f)}this._pointToCallbacks.size>0&&(this._pointToCallbacks.forEach(function(e,t){e.resolve(i._hitTest(s,t[0],t[1]))}),this._pointToCallbacks.clear()),this._renderer.needsRedraw()&&this.requestRender()}},t.prototype.removeAllChildren=function(){for(var t=0;t<this.children.length;t++)this.children[t].dispose();e.prototype.removeAllChildren.call(this)},t.prototype._hitTest=function(e,t,i){var r=this._tileInfoView.getSmallestInfoForScale(e.state.scale).level,n=[0,0];e.state.toMap(n,[t,i]);var a=e.state.clone(),o=a.viewpoint.clone(),s=o.targetGeometry;s.x=n[0],s.y=n[1],o.targetGeometry=s,a.viewpoint=o,a.size=[3,3],this._renderer.setStateParams(a,e.pixelRatio,e.displayLevel);var l={context:this.stage.context,drawPhase:0,pixelRatio:e.pixelRatio,stationary:e.stationary,globalOpacity:e.globalOpacity,displayLevel:e.displayLevel,requiredLevel:e.requiredLevel,renderer:e.renderer,layerOpacity:e.layerOpacity,state:a,drawphase:3},h=this._renderer.hitTest(l,t,i,this.children,r,3,this._updateTilesTransform.bind(this));return h&&0!==h.length?h[0]:null},t.prototype._updateTilesTransform=function(e,t,i){var r=1/e.size[0],n=1/e.size[1],a=[0,0];this._calculateRelativeViewProjMat(this._tileInfo.lodAt(t).resolution,e.resolution,e.rotation,this._tileInfo.size[1],4096,e.size[0],e.size[1],this._defaultTransform);for(var o=0,s=i;o<s.length;o++){var l=s[o];e.toScreen(a,l.coords),a[1]=e.size[1]-a[1],l.tileTransform.displayCoord[0]=2*a[0]*r-1,l.tileTransform.displayCoord[1]=2*a[1]*n-1,l.key.level===t&&4096===l.coordRange?l.tileTransform.transform.set(this._defaultTransform):this._calculateRelativeViewProjMat(this._tileInfo.lodAt(l.key.level).resolution,e.resolution,e.rotation,this._tileInfo.size[1],l.coordRange,e.size[0],e.size[1],l.tileTransform.transform)}},t.prototype._calculateRelativeViewProjMat=function(e,t,i,r,n,o,s,l){var h=.125;512!==r&&4096!==n&&(h=r/n);var u=h*(e/t);this._tileCoordinateScale.set([u,u,1]),o===this._displayWidth&&s===this._displayHeight||(this._displayScale.set([2/o,-2/s,1]),this._displayWidth=o,this._displayHeight=s),a.mat4.identity(l),a.mat4.scale(l,l,this._tileCoordinateScale),a.mat4.rotate(l,l,-i*d.C_DEG_TO_RAD,this._orientationVec),a.mat4.scale(l,l,this._displayScale),a.mat4.transpose(l,l)},t}(l.Container)}.apply(null,r))||(e.exports=n)},"6i4F":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("9opi"),i("qKT0"),i("8MXS"),i("Vx27"),i("WsO6")],void 0===(n=function(e,t,i,r,n,a,o){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.attached=!1,t.lastUpdateId=-1,t.moving=!1,t.updateRequested=!1,t}return i(t,e),t.prototype.initialize=function(){var e=this;this.when(function(){e.requestUpdate()});var t=function(){return e.notifyChange("rendering")};this.handles.add([n.init(this,"suspended",function(t){e.container&&(e.container.visible=!t),e.view&&!t&&e.updateRequested&&e.view.requestLayerViewUpdate(e)},!0),n.init(this,"fullOpacity",function(t){e.container&&(e.container.opacity=t)},!0),n.on(this,"container","post-render",t),n.on(this,"container","will-render",t)])},t.prototype.destroy=function(){this.attached&&(this.attached=!1,this.detach()),this.handles.remove("initialize"),this.updateRequested=!1,this.layer=null},Object.defineProperty(t.prototype,"rendering",{get:function(){return this.attached&&!this.suspended&&(this.moving||this.container.renderRequested||this.isRendering())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!this.suspended&&(!this.attached||this.updateRequested||this.isUpdating())},enumerable:!0,configurable:!0}),t.prototype.isVisibleAtScale=function(e){var t=!0,i=this.layer,r=i.minScale,n=i.maxScale;if(null!=r&&null!=n){var a=!r,o=!n;!a&&e<=r&&(a=!0),!o&&e>=n&&(o=!0),t=a&&o}return t},t.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestLayerViewUpdate(this))},t.prototype.processUpdate=function(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1},t.prototype.isUpdating=function(){return!1},t.prototype.isRendering=function(){return!1},t.prototype.canResume=function(){var e=this.inherited(arguments);return e&&(e=this.isVisibleAtScale(this.view.scale)),e},r([a.property()],t.prototype,"attached",void 0),r([a.property()],t.prototype,"container",void 0),r([a.property()],t.prototype,"moving",void 0),r([a.property({dependsOn:["attached","suspended","moving"]})],t.prototype,"rendering",null),r([a.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],t.prototype,"suspended",void 0),r([a.property({readOnly:!0})],t.prototype,"updateParameters",void 0),r([a.property()],t.prototype,"updateRequested",void 0),r([a.property({dependsOn:["updateRequested","attached"]})],t.prototype,"updating",null),r([a.property()],t.prototype,"view",void 0),r([a.subclass("esri.views.2d.layers.LayerView2D")],t)}(a.declared(o))}.apply(null,r))||(e.exports=n)},FXVB:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("Jl7l")],void 0===(n=function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.mat4=i}.apply(null,r))||(e.exports=n)},JNkf:function(e,t,i){var r,n;r=[i.dj.c(e.i),t],void 0===(n=function(e,t){var i,r,n,a,o,s,l,h,d,u;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.WGLGeometryType||(t.WGLGeometryType={}))[i.FILL=0]="FILL",i[i.LINE=1]="LINE",i[i.MARKER=2]="MARKER",i[i.TEXT=3]="TEXT",i[i.LABEL=4]="LABEL",(r=t.WGLGeometryTransactionStatus||(t.WGLGeometryTransactionStatus={}))[r.SUCCEEDED=0]="SUCCEEDED",r[r.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY",(n=t.WGLDrawPhase||(t.WGLDrawPhase={}))[n.NONE=0]="NONE",n[n.MAP=1]="MAP",n[n.LABEL=2]="LABEL",n[n.LABEL_ALPHA=4]="LABEL_ALPHA",n[n.HITTEST=8]="HITTEST",n[n.HIGHLIGHT=16]="HIGHLIGHT",n[n.CLIP=32]="CLIP",n[n.DEBUG=64]="DEBUG",n[n.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES",(a=t.VVType||(t.VVType={}))[a.SIZE=0]="SIZE",a[a.COLOR=1]="COLOR",a[a.OPACITY=2]="OPACITY",a[a.ROTATION=3]="ROTATION",(o=t.WGLVVFlag||(t.WGLVVFlag={}))[o.NONE=0]="NONE",o[o.OPACITY=1]="OPACITY",o[o.COLOR=2]="COLOR",o[o.ROTATION=4]="ROTATION",o[o.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",o[o.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",o[o.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",o[o.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE",(s=t.WGLVVTarget||(t.WGLVVTarget={}))[s.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",s[s.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",s[s.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",s[s.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE",(l=t.CapType||(t.CapType={}))[l.UNKNOWN=0]="UNKNOWN",l[l.BUTT=1]="BUTT",l[l.ROUND=2]="ROUND",l[l.SQUARE=3]="SQUARE",(h=t.JoinType||(t.JoinType={}))[h.UNKNOWN=0]="UNKNOWN",h[h.MITER=1]="MITER",h[h.BEVEL=2]="BEVEL",h[h.ROUND=3]="ROUND",(d=t.Alignment||(t.Alignment={}))[d.SCREEN=0]="SCREEN",d[d.MAP=1]="MAP",(u=t.MosaicType||(t.MosaicType={}))[u.SPRITE=0]="SPRITE",u[u.GLYPH=1]="GLYPH"}.apply(null,r))||(e.exports=n)},Jl7l:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("jaBu"),i("qysZ")],void 0===(n=function(e,t,i,r){function n(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function a(e,t,i){var r=t[0],n=t[1],a=t[2],o=t[3],s=t[4],l=t[5],h=t[6],d=t[7],u=t[8],c=t[9],p=t[10],f=t[11],v=t[12],y=t[13],_=t[14],M=t[15],T=i[0],g=i[1],m=i[2],S=i[3];return e[0]=T*r+g*s+m*u+S*v,e[1]=T*n+g*l+m*c+S*y,e[2]=T*a+g*h+m*p+S*_,e[3]=T*o+g*d+m*f+S*M,T=i[4],g=i[5],m=i[6],S=i[7],e[4]=T*r+g*s+m*u+S*v,e[5]=T*n+g*l+m*c+S*y,e[6]=T*a+g*h+m*p+S*_,e[7]=T*o+g*d+m*f+S*M,T=i[8],g=i[9],m=i[10],S=i[11],e[8]=T*r+g*s+m*u+S*v,e[9]=T*n+g*l+m*c+S*y,e[10]=T*a+g*h+m*p+S*_,e[11]=T*o+g*d+m*f+S*M,T=i[12],g=i[13],m=i[14],S=i[15],e[12]=T*r+g*s+m*u+S*v,e[13]=T*n+g*l+m*c+S*y,e[14]=T*a+g*h+m*p+S*_,e[15]=T*o+g*d+m*f+S*M,e}function o(e,t,i){var r=t[0],n=t[1],a=t[2],o=t[3],s=r+r,l=n+n,h=a+a,d=r*s,u=r*l,c=r*h,p=n*l,f=n*h,v=a*h,y=o*s,_=o*l,M=o*h;return e[0]=1-(p+v),e[1]=u+M,e[2]=c-_,e[3]=0,e[4]=u-M,e[5]=1-(d+v),e[6]=f+y,e[7]=0,e[8]=c+_,e[9]=f-y,e[10]=1-(d+p),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function s(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}Object.defineProperty(t,"__esModule",{value:!0}),t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.set=function(e,t,i,r,n,a,o,s,l,h,d,u,c,p,f,v,y){return e[0]=t,e[1]=i,e[2]=r,e[3]=n,e[4]=a,e[5]=o,e[6]=s,e[7]=l,e[8]=h,e[9]=d,e[10]=u,e[11]=c,e[12]=p,e[13]=f,e[14]=v,e[15]=y,e},t.identity=n,t.transpose=function(e,t){if(e===t){var i=t[1],r=t[2],n=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=n,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},t.invert=function(e,t){var i=t[0],r=t[1],n=t[2],a=t[3],o=t[4],s=t[5],l=t[6],h=t[7],d=t[8],u=t[9],c=t[10],p=t[11],f=t[12],v=t[13],y=t[14],_=t[15],M=i*s-r*o,T=i*l-n*o,g=i*h-a*o,m=r*l-n*s,S=r*h-a*s,b=n*h-a*l,E=d*v-u*f,I=d*y-c*f,O=d*_-p*f,w=u*y-c*v,L=u*_-p*v,P=c*_-p*y,R=M*P-T*L+g*w+m*O-S*I+b*E;return R?(R=1/R,e[0]=(s*P-l*L+h*w)*R,e[1]=(n*L-r*P-a*w)*R,e[2]=(v*b-y*S+_*m)*R,e[3]=(c*S-u*b-p*m)*R,e[4]=(l*O-o*P-h*I)*R,e[5]=(i*P-n*O+a*I)*R,e[6]=(y*g-f*b-_*T)*R,e[7]=(d*b-c*g+p*T)*R,e[8]=(o*L-s*O+h*E)*R,e[9]=(r*O-i*L-a*E)*R,e[10]=(f*S-v*g+_*M)*R,e[11]=(u*g-d*S-p*M)*R,e[12]=(s*I-o*w-l*E)*R,e[13]=(i*w-r*I+n*E)*R,e[14]=(v*T-f*m-y*M)*R,e[15]=(d*m-u*T+c*M)*R,e):null},t.adjoint=function(e,t){var i=t[0],r=t[1],n=t[2],a=t[3],o=t[4],s=t[5],l=t[6],h=t[7],d=t[8],u=t[9],c=t[10],p=t[11],f=t[12],v=t[13],y=t[14],_=t[15];return e[0]=s*(c*_-p*y)-u*(l*_-h*y)+v*(l*p-h*c),e[1]=-(r*(c*_-p*y)-u*(n*_-a*y)+v*(n*p-a*c)),e[2]=r*(l*_-h*y)-s*(n*_-a*y)+v*(n*h-a*l),e[3]=-(r*(l*p-h*c)-s*(n*p-a*c)+u*(n*h-a*l)),e[4]=-(o*(c*_-p*y)-d*(l*_-h*y)+f*(l*p-h*c)),e[5]=i*(c*_-p*y)-d*(n*_-a*y)+f*(n*p-a*c),e[6]=-(i*(l*_-h*y)-o*(n*_-a*y)+f*(n*h-a*l)),e[7]=i*(l*p-h*c)-o*(n*p-a*c)+d*(n*h-a*l),e[8]=o*(u*_-p*v)-d*(s*_-h*v)+f*(s*p-h*u),e[9]=-(i*(u*_-p*v)-d*(r*_-a*v)+f*(r*p-a*u)),e[10]=i*(s*_-h*v)-o*(r*_-a*v)+f*(r*h-a*s),e[11]=-(i*(s*p-h*u)-o*(r*p-a*u)+d*(r*h-a*s)),e[12]=-(o*(u*y-c*v)-d*(s*y-l*v)+f*(s*c-l*u)),e[13]=i*(u*y-c*v)-d*(r*y-n*v)+f*(r*c-n*u),e[14]=-(i*(s*y-l*v)-o*(r*y-n*v)+f*(r*l-n*s)),e[15]=i*(s*c-l*u)-o*(r*c-n*u)+d*(r*l-n*s),e},t.determinant=function(e){var t=e[0],i=e[1],r=e[2],n=e[3],a=e[4],o=e[5],s=e[6],l=e[7],h=e[8],d=e[9],u=e[10],c=e[11],p=e[12],f=e[13],v=e[14],y=e[15];return(t*o-i*a)*(u*y-c*v)-(t*s-r*a)*(d*y-c*f)+(t*l-n*a)*(d*v-u*f)+(i*s-r*o)*(h*y-c*p)-(i*l-n*o)*(h*v-u*p)+(r*l-n*s)*(h*f-d*p)},t.multiply=a,t.translate=function(e,t,i){var r=i[0],n=i[1],a=i[2],o=void 0,s=void 0,l=void 0,h=void 0,d=void 0,u=void 0,c=void 0,p=void 0,f=void 0,v=void 0,y=void 0,_=void 0;return t===e?(e[12]=t[0]*r+t[4]*n+t[8]*a+t[12],e[13]=t[1]*r+t[5]*n+t[9]*a+t[13],e[14]=t[2]*r+t[6]*n+t[10]*a+t[14],e[15]=t[3]*r+t[7]*n+t[11]*a+t[15]):(o=t[0],s=t[1],l=t[2],h=t[3],d=t[4],u=t[5],c=t[6],p=t[7],f=t[8],v=t[9],y=t[10],_=t[11],e[0]=o,e[1]=s,e[2]=l,e[3]=h,e[4]=d,e[5]=u,e[6]=c,e[7]=p,e[8]=f,e[9]=v,e[10]=y,e[11]=_,e[12]=o*r+d*n+f*a+t[12],e[13]=s*r+u*n+v*a+t[13],e[14]=l*r+c*n+y*a+t[14],e[15]=h*r+p*n+_*a+t[15]),e},t.scale=function(e,t,i){var r=i[0],n=i[1],a=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.rotate=function(e,t,i,n){var a=n[0],o=n[1],s=n[2],l=Math.sqrt(a*a+o*o+s*s),h=void 0,d=void 0,u=void 0,c=void 0,p=void 0,f=void 0,v=void 0,y=void 0,_=void 0,M=void 0,T=void 0,g=void 0,m=void 0,S=void 0,b=void 0,E=void 0,I=void 0,O=void 0,w=void 0,L=void 0,P=void 0,R=void 0,C=void 0,A=void 0;return l<r.EPSILON?null:(a*=l=1/l,o*=l,s*=l,h=Math.sin(i),u=1-(d=Math.cos(i)),c=t[0],p=t[1],f=t[2],v=t[3],y=t[4],_=t[5],M=t[6],T=t[7],g=t[8],m=t[9],S=t[10],b=t[11],E=a*a*u+d,I=o*a*u+s*h,O=s*a*u-o*h,w=a*o*u-s*h,L=o*o*u+d,P=s*o*u+a*h,R=a*s*u+o*h,C=o*s*u-a*h,A=s*s*u+d,e[0]=c*E+y*I+g*O,e[1]=p*E+_*I+m*O,e[2]=f*E+M*I+S*O,e[3]=v*E+T*I+b*O,e[4]=c*w+y*L+g*P,e[5]=p*w+_*L+m*P,e[6]=f*w+M*L+S*P,e[7]=v*w+T*L+b*P,e[8]=c*R+y*C+g*A,e[9]=p*R+_*C+m*A,e[10]=f*R+M*C+S*A,e[11]=v*R+T*C+b*A,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},t.rotateX=function(e,t,i){var r=Math.sin(i),n=Math.cos(i),a=t[4],o=t[5],s=t[6],l=t[7],h=t[8],d=t[9],u=t[10],c=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*n+h*r,e[5]=o*n+d*r,e[6]=s*n+u*r,e[7]=l*n+c*r,e[8]=h*n-a*r,e[9]=d*n-o*r,e[10]=u*n-s*r,e[11]=c*n-l*r,e},t.rotateY=function(e,t,i){var r=Math.sin(i),n=Math.cos(i),a=t[0],o=t[1],s=t[2],l=t[3],h=t[8],d=t[9],u=t[10],c=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*n-h*r,e[1]=o*n-d*r,e[2]=s*n-u*r,e[3]=l*n-c*r,e[8]=a*r+h*n,e[9]=o*r+d*n,e[10]=s*r+u*n,e[11]=l*r+c*n,e},t.rotateZ=function(e,t,i){var r=Math.sin(i),n=Math.cos(i),a=t[0],o=t[1],s=t[2],l=t[3],h=t[4],d=t[5],u=t[6],c=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*n+h*r,e[1]=o*n+d*r,e[2]=s*n+u*r,e[3]=l*n+c*r,e[4]=h*n-a*r,e[5]=d*n-o*r,e[6]=u*n-s*r,e[7]=c*n-l*r,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotation=function(e,t,i){var n=i[0],a=i[1],o=i[2],s=Math.sqrt(n*n+a*a+o*o),l=void 0,h=void 0,d=void 0;return s<r.EPSILON?null:(n*=s=1/s,a*=s,o*=s,l=Math.sin(t),d=1-(h=Math.cos(t)),e[0]=n*n*d+h,e[1]=a*n*d+o*l,e[2]=o*n*d-a*l,e[3]=0,e[4]=n*a*d-o*l,e[5]=a*a*d+h,e[6]=o*a*d+n*l,e[7]=0,e[8]=n*o*d+a*l,e[9]=a*o*d-n*l,e[10]=o*o*d+h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},t.fromXRotation=function(e,t){var i=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromYRotation=function(e,t){var i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromZRotation=function(e,t){var i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotationTranslation=o,t.fromQuat2=function(e,t){var i=l,r=-t[0],n=-t[1],a=-t[2],s=t[3],h=t[4],d=t[5],u=t[6],c=t[7],p=r*r+n*n+a*a+s*s;return p>0?(i[0]=2*(h*s+c*r+d*a-u*n)/p,i[1]=2*(d*s+c*n+u*r-h*a)/p,i[2]=2*(u*s+c*a+h*n-d*r)/p):(i[0]=2*(h*s+c*r+d*a-u*n),i[1]=2*(d*s+c*n+u*r-h*a),i[2]=2*(u*s+c*a+h*n-d*r)),o(e,t,i),e};var l=i.create();t.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},t.getScaling=function(e,t){var i=t[0],r=t[1],n=t[2],a=t[4],o=t[5],s=t[6],l=t[8],h=t[9],d=t[10];return e[0]=Math.sqrt(i*i+r*r+n*n),e[1]=Math.sqrt(a*a+o*o+s*s),e[2]=Math.sqrt(l*l+h*h+d*d),e},t.getRotation=function(e,t){var i=t[0]+t[5]+t[10],r=0;return i>0?(r=2*Math.sqrt(i+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e},t.fromRotationTranslationScale=function(e,t,i,r){var n=t[0],a=t[1],o=t[2],s=t[3],l=n+n,h=a+a,d=o+o,u=n*l,c=n*h,p=n*d,f=a*h,v=a*d,y=o*d,_=s*l,M=s*h,T=s*d,g=r[0],m=r[1],S=r[2];return e[0]=(1-(f+y))*g,e[1]=(c+T)*g,e[2]=(p-M)*g,e[3]=0,e[4]=(c-T)*m,e[5]=(1-(u+y))*m,e[6]=(v+_)*m,e[7]=0,e[8]=(p+M)*S,e[9]=(v-_)*S,e[10]=(1-(u+f))*S,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e},t.fromRotationTranslationScaleOrigin=function(e,t,i,r,n){var a=t[0],o=t[1],s=t[2],l=t[3],h=a+a,d=o+o,u=s+s,c=a*h,p=a*d,f=a*u,v=o*d,y=o*u,_=s*u,M=l*h,T=l*d,g=l*u,m=r[0],S=r[1],b=r[2],E=n[0],I=n[1],O=n[2],w=(1-(v+_))*m,L=(p+g)*m,P=(f-T)*m,R=(p-g)*S,C=(1-(c+_))*S,A=(y+M)*S,N=(f+T)*b,q=(y-M)*b,x=(1-(c+v))*b;return e[0]=w,e[1]=L,e[2]=P,e[3]=0,e[4]=R,e[5]=C,e[6]=A,e[7]=0,e[8]=N,e[9]=q,e[10]=x,e[11]=0,e[12]=i[0]+E-(w*E+R*I+N*O),e[13]=i[1]+I-(L*E+C*I+q*O),e[14]=i[2]+O-(P*E+A*I+x*O),e[15]=1,e},t.fromQuat=function(e,t){var i=t[0],r=t[1],n=t[2],a=t[3],o=i+i,s=r+r,l=n+n,h=i*o,d=r*o,u=r*s,c=n*o,p=n*s,f=n*l,v=a*o,y=a*s,_=a*l;return e[0]=1-u-f,e[1]=d+_,e[2]=c-y,e[3]=0,e[4]=d-_,e[5]=1-h-f,e[6]=p+v,e[7]=0,e[8]=c+y,e[9]=p-v,e[10]=1-h-u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.frustum=function(e,t,i,r,n,a,o){var s=1/(i-t),l=1/(n-r),h=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*l,e[6]=0,e[7]=0,e[8]=(i+t)*s,e[9]=(n+r)*l,e[10]=(o+a)*h,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*h,e[15]=0,e},t.perspective=function(e,t,i,r,n){var a=1/Math.tan(t/2),o=void 0;return e[0]=a/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=n&&n!==1/0?(o=1/(r-n),e[10]=(n+r)*o,e[14]=2*n*r*o):(e[10]=-1,e[14]=-2*r),e},t.perspectiveFromFieldOfView=function(e,t,i,r){var n=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+s),h=2/(n+a);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=h,e[6]=0,e[7]=0,e[8]=-(o-s)*l*.5,e[9]=(n-a)*h*.5,e[10]=r/(i-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*i/(i-r),e[15]=0,e},t.ortho=function(e,t,i,r,n,a,o){var s=1/(t-i),l=1/(r-n),h=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*h,e[11]=0,e[12]=(t+i)*s,e[13]=(n+r)*l,e[14]=(o+a)*h,e[15]=1,e},t.lookAt=function(e,t,i,a){var o=void 0,s=void 0,l=void 0,h=void 0,d=void 0,u=void 0,c=void 0,p=void 0,f=void 0,v=void 0,y=t[0],_=t[1],M=t[2],T=a[0],g=a[1],m=a[2],S=i[0],b=i[1],E=i[2];return Math.abs(y-S)<r.EPSILON&&Math.abs(_-b)<r.EPSILON&&Math.abs(M-E)<r.EPSILON?n(e):(c=y-S,p=_-b,f=M-E,o=g*(f*=v=1/Math.sqrt(c*c+p*p+f*f))-m*(p*=v),s=m*(c*=v)-T*f,l=T*p-g*c,(v=Math.sqrt(o*o+s*s+l*l))?(o*=v=1/v,s*=v,l*=v):(o=0,s=0,l=0),h=p*l-f*s,d=f*o-c*l,u=c*s-p*o,(v=Math.sqrt(h*h+d*d+u*u))?(h*=v=1/v,d*=v,u*=v):(h=0,d=0,u=0),e[0]=o,e[1]=h,e[2]=c,e[3]=0,e[4]=s,e[5]=d,e[6]=p,e[7]=0,e[8]=l,e[9]=u,e[10]=f,e[11]=0,e[12]=-(o*y+s*_+l*M),e[13]=-(h*y+d*_+u*M),e[14]=-(c*y+p*_+f*M),e[15]=1,e)},t.targetTo=function(e,t,i,r){var n=t[0],a=t[1],o=t[2],s=r[0],l=r[1],h=r[2],d=n-i[0],u=a-i[1],c=o-i[2],p=d*d+u*u+c*c;p>0&&(d*=p=1/Math.sqrt(p),u*=p,c*=p);var f=l*c-h*u,v=h*d-s*c,y=s*u-l*d;return(p=f*f+v*v+y*y)>0&&(f*=p=1/Math.sqrt(p),v*=p,y*=p),e[0]=f,e[1]=v,e[2]=y,e[3]=0,e[4]=u*y-c*v,e[5]=c*f-d*y,e[6]=d*v-u*f,e[7]=0,e[8]=d,e[9]=u,e[10]=c,e[11]=0,e[12]=n,e[13]=a,e[14]=o,e[15]=1,e},t.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},t.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e},t.subtract=s,t.multiplyScalar=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e},t.multiplyScalarAndAdd=function(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e[9]=t[9]+i[9]*r,e[10]=t[10]+i[10]*r,e[11]=t[11]+i[11]*r,e[12]=t[12]+i[12]*r,e[13]=t[13]+i[13]*r,e[14]=t[14]+i[14]*r,e[15]=t[15]+i[15]*r,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},t.equals=function(e,t){var i=e[0],n=e[1],a=e[2],o=e[3],s=e[4],l=e[5],h=e[6],d=e[7],u=e[8],c=e[9],p=e[10],f=e[11],v=e[12],y=e[13],_=e[14],M=e[15],T=t[0],g=t[1],m=t[2],S=t[3],b=t[4],E=t[5],I=t[6],O=t[7],w=t[8],L=t[9],P=t[10],R=t[11],C=t[12],A=t[13],N=t[14],q=t[15];return Math.abs(i-T)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(n-g)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(a-m)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(o-S)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(s-b)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(l-E)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(h-I)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(d-O)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(u-w)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(c-L)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(L))&&Math.abs(p-P)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(f-R)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(v-C)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(C))&&Math.abs(y-A)<=r.EPSILON*Math.max(1,Math.abs(y),Math.abs(A))&&Math.abs(_-N)<=r.EPSILON*Math.max(1,Math.abs(_),Math.abs(N))&&Math.abs(M-q)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(q))},t.mul=a,t.sub=s}.apply(null,r))||(e.exports=n)},WsO6:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("9opi"),i("qKT0"),i("BcWh"),i("7MDj"),i("NfRO"),i("qsST"),i("SZNs"),i("qMld"),i("Vx27")],void 0===(n=function(e,t,i,r,n,a,o,s,l,h,d){return function(e){function t(t){var i=e.call(this)||this;return i.layer=null,i.parent=null,i.view=null,i}return i(t,e),t.prototype.initialize=function(){var e=this;this.addResolvingPromise(this.layer),this.when().catch(function(t){if("layerview:create-error"!==t.name){var i=e.layer&&e.layer.id||"no id",r=e.layer&&e.layer.title||"no title";return s.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+r+"', id: '"+i+"')",t),h.reject(t)}})},t.prototype.destroy=function(){this.layer=this.view=this.parent=null},Object.defineProperty(t.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!this.suspended&&this.isUpdating()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullOpacity",{get:function(){var e=function(e){return null==e?1:e};return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))},enumerable:!0,configurable:!0}),t.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},t.prototype.isUpdating=function(){return!1},r([d.property()],t.prototype,"layer",void 0),r([d.property()],t.prototype,"parent",void 0),r([d.property({readOnly:!0,dependsOn:["view","visible","layer.loaded","parent.suspended"]})],t.prototype,"suspended",null),r([d.property({type:Boolean,dependsOn:["suspended"],readOnly:!0})],t.prototype,"updating",null),r([d.property()],t.prototype,"view",void 0),r([d.property({dependsOn:["layer.visible"]})],t.prototype,"visible",null),r([d.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],t.prototype,"fullOpacity",null),r([d.subclass("esri.views.layers.LayerView")],t)}(d.declared(a,n,o.Identifiable,l))}.apply(null,r))||(e.exports=n)},YOjP:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("xhoE"),i("qKT0"),i("pMLx"),i("M3W5"),i("f3JK")],void 0===(n=function(e,t,i,r,n,a,o){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fullCacheLodInfos=null,t._levelByScale={},t}return i(t,e),t.prototype.getTileParentId=function(e){var t=o.pool.acquire(e),i=0===t.level?null:o.getId(t.level-1,t.row>>1,t.col>>1,t.world);return o.pool.release(t),i},t.prototype.getTileCoverage=function(t,i,r){var n=e.prototype.getTileCoverage.call(this,t,i,r);if(!n)return n;var a=1<<n.lodInfo.level;return n.spans=n.spans.filter(function(e){return e.row>=0&&e.row<a}),n},t.prototype.scaleToLevel=function(e){if(this._fullCacheLodInfos||this._initializeFullCacheLODs(this._lodInfos),this._levelByScale[e])return this._levelByScale[e];var t=this._fullCacheLodInfos;if(e>t[0].scale)return t[0].level;for(var i=void 0,r=void 0,n=0;n<t.length-1;n++)if(e>(r=t[n+1]).scale)return(i=t[n]).level+(i.scale-e)/(i.scale-r.scale);return t[t.length-1].level},t.prototype._initializeFullCacheLODs=function(e){var t;if(0===e[0].level)t=e.map(function(e){return{level:e.level,resolution:e.resolution,scale:e.scale}});else{var i=this.tileInfo.size[0],r=this.tileInfo.spatialReference;t=n.create({size:i,spatialReference:r}).lods.map(function(e){return{level:e.level,resolution:e.resolution,scale:e.scale}})}for(var a=0;a<t.length;a++)this._levelByScale[t[a].scale]=t[a].level;this._fullCacheLodInfos=t},t}(a)}.apply(null,r))||(e.exports=n)},xkJJ:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("9opi"),i("qKT0"),i("jZlN"),i("eIBl"),i("qMld"),i("Vx27"),i("6i4F"),i("YOjP"),i("f3JK"),i("EBSo"),i("ovos"),i("U6PA"),i("3atH"),i("AvrD")],void 0===(n=function(e,t,i,r,n,a,o,s,l,h,d,u,c,p,f,v){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._fetchQueue=null,t._tileRequests=new Map,t._handles=new a,t._invalidateStyle=!1,t.container=new f,t}return i(t,e),t.prototype.initialize=function(){var e=this;this._tileInfoView=new h(this.layer.tileInfo,this.layer.fullExtent),this._tileHandler=new p(this.layer,window.devicePixelRatio||1,!0,this.container),this.handles.add(this.watch("layer.currentStyleInfo",function(t){e._start()}))},t.prototype.destroy=function(){this._stop(),this.container.dispose(),this._tileHandler.destroy(),this._tileHandler=null},t.prototype.hitTest=function(e,t){var i=this;return this.suspended?o.resolve(null):this.container.hitTest(e,t).then(function(e){var t=i._tileHandler.getStyleRepository().layers;if(null===e||e<0||e>=t.length)return null;var r=t[e],a=new n({attributes:{layerId:e,layerName:r.id}});return a.layer=i.layer,a.sourceLayer=i.layer,a})},t.prototype.update=function(e){this.notifyChange("updating");var t=this._tileHandlerPromise;if(t&&t.isFulfilled()){if(e.pixelRatio!==this._tileHandler.devicePixelRatio)return this._start(),void(this._tileHandler.devicePixelRatio=e.pixelRatio);this._invalidateStyle&&(this._issueStyleInvalidation(e),this._invalidateStyle=!1),this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume();for(var i=0,r=this.container.children;i<r.length;i++){var n=r[i];this._tileHandler.updateTile(n,e)}}},t.prototype.attach=function(){var e=this;this._start(),this._handles.add(this.layer.on("paint-change",function(t){return e.container.requestRender()})),this._handles.add(this.layer.on("layout-change",function(t){e._invalidateStyle=!0,e.requestUpdate()}))},t.prototype.detach=function(){this._stop(),this._handles.removeAll()},t.prototype.moveStart=function(){this.requestUpdate()},t.prototype.viewChange=function(){this.requestUpdate()},t.prototype.moveEnd=function(){this.requestUpdate()},t.prototype.canResume=function(){var e=this.inherited(arguments),t=this.layer,i=t;if(e&&i.currentStyleInfo){var r=this.view.scale,n=i.currentStyleInfo;if(n&&n.layerDefinition){var a=n.layerDefinition;a.minScale&&a.minScale<r&&(e=!1),a.maxScale&&a.maxScale>r&&(e=!1)}}return e},t.prototype.isUpdating=function(){var e=!0;return this._tileRequests.forEach(function(t){e=e&&t.isFulfilled()}),!this._tileHandlerPromise||!this._tileHandlerPromise.isFulfilled()||!e},t.prototype.acquireTile=function(e){var t=this,i=d.pool.acquire();i.set(e.level,e.row,e.col,e.world);var r=this.updateParameters.state.rotation,n=this._tileHandler.getStyleRepository(),a=v.pool.acquire(i,this.layer.tileInfo,n,r),s=this.layer.sourceNameToSource;return Object.keys(s).length<1?(a.setData(null,null),a.once("attach",function(){return t.requestUpdate()}),void this.container.addChild(a)):(this._tileHandlerPromise.then(function(){var e=[],r=[];for(var n in s){var l=s[n].getRefKey(i);e.push(l),r.push(n)}var h=o.eachAlways(e).then(function(e){for(var i={},n=0;n<e.length;n++)e[n].value&&(i[r[n]]=e[n].value);return 0===Object.keys(i).length?(a.setData(null,null),a.once("attach",function(){return t.requestUpdate()}),void t.container.addChild(a)):t._fetchQueue.push(a.key).then(function(e){a.setData(e.tileData,e.client),a.once("attach",function(){return t.requestUpdate()}),t.container.addChild(a),t.notifyChange("updating")})});t._tileRequests.set(i.id,h),t.notifyChange("updating")}),a)},t.prototype.releaseTile=function(e){var t=e.key.id,i=this._tileRequests.get(t);i&&(i.isFulfilled()||i.cancel(),this._tileRequests.delete(t)),this.container.removeChild(e),this.requestUpdate(),e.once("detach",function(){return v.pool.release(e)}),this.notifyChange("updating")},t.prototype._start=function(){var e=this;if(this._stop(),this.layer.currentStyleInfo&&this.attached){var t=this._tileHandler.start().then(function(){e._tileHandlerPromise===t&&(e._tileStrategy=new c({cachePolicy:"keep",coveragePolicy:"smallest",acquireTile:function(t){return e.acquireTile(t)},releaseTile:function(t){return e.releaseTile(t)},tileInfoView:e._tileInfoView}),e._fetchQueue=new u({tileInfoView:e._tileInfoView,process:function(t){return e._getTileData(t)}}),e.container.initialize(e._tileHandler.spriteMosaic,e._tileHandler.glyphMosaic,e.layer.tileInfo,e._tileInfoView),e.requestUpdate())});this._tileHandlerPromise=t}},t.prototype._stop=function(){this._tileHandlerPromise&&(this._tileHandlerPromise.isFulfilled()?this._tileHandlerPromise.isResolved()&&(this._tileHandlerPromise=null,this._fetchQueue.destroy(),this._fetchQueue=null,this._tileStrategy.destroy(),this._tileStrategy=null,this.container.removeAllChildren(),this._tileHandler.stop(),v.pool.prune()):(this._tileHandlerPromise.cancel(),this._tileHandlerPromise=null))},t.prototype._getTileData=function(e){return this._tileHandler.getTileData(e,this.updateParameters.state.rotation)},t.prototype._issueStyleInvalidation=function(e){var t=this;this._tileHandler.updateStyle().then(function(){t._fetchQueue.pause(),t._fetchQueue.clear(),t._tileRequests.forEach(function(e,t){e.cancel()}),t._tileRequests.clear(),t._fetchQueue.resume(),t.requestUpdate()})},r([s.property({dependsOn:["view.scale","layer.currentStyleInfo"]})],t.prototype,"suspended",void 0),r([s.subclass("esri.views.2d.layers.VectorTileLayerView2D")],t)}(s.declared(l))}.apply(null,r))||(e.exports=n)}}]);
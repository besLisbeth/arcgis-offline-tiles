(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/2d/layers/features/processors/BaseProcessor":"68TM","esri/core/HandleOwner":"7MDj","esri/views/2d/engine/webgl/collisions/CollisionGrid":"Tauk","esri/views/2d/layers/features/processors/SymbolProcessor":"dh9Z","esri/views/2d/layers/features/support/pixelBuffering":"oWCy","esri/views/2d/engine/webgl/rendererInfoUtils":"tPaR","esri/layers/support/labelFormatUtils":"y/j/"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{"68TM":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("Gtr7"),r("BcWh"),r("7MDj"),r("Vx27")],void 0===(i=function(e,t,r,n,i,o,a,l){Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.initialize=function(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))])},t.prototype.destroy=function(){},Object.defineProperty(t.prototype,"supportsTileUpdates",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spatialReference",{get:function(){var e=this.get("tileStore.tileScheme.spatialReference");return e&&e.toJSON()||null},enumerable:!0,configurable:!0}),n([l.property({readOnly:!0})],t.prototype,"supportsTileUpdates",null),n([l.property({constructOnly:!0})],t.prototype,"remoteClient",void 0),n([l.property({constructOnly:!0})],t.prototype,"service",void 0),n([l.property({dependsOn:["tileStore.tileScheme.spatialReference"]})],t.prototype,"spatialReference",null),n([l.property({constructOnly:!0})],t.prototype,"tileInfo",void 0),n([l.property({constructOnly:!0})],t.prototype,"tileStore",void 0),n([l.subclass()],t)}(l.declared(i,a,o));t.default=s}.apply(null,n))||(e.exports=i)},"7MDj":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("Gtr7"),r("eIBl"),r("Vx27")],void 0===(i=function(e,t,r,n,i,o,a){return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=e.call(this)||this;return n.handles=new o,n}return r(t,e),t.prototype.destroy=function(){this.handles.destroy()},n([a.property({readOnly:!0})],t.prototype,"handles",void 0),n([a.subclass("esri.core.HandleOwner")],t)}(a.declared(i))}.apply(null,n))||(e.exports=i)},Tauk:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("tI6k")],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this._bucketSize=e,this._rowsLength=r.TILE_SIZE/e,this._colsLength=r.TILE_SIZE/e,this._grid=this._initGrid()}return e.prototype.checkOverlap=function(e,t){var r=Math.floor(e/this._bucketSize),n=Math.floor(t/this._bucketSize);return r<0||r>=this._rowsLength||n<0||n>=this._colsLength||!!this._grid[n][r]||!(this._grid[n][r]=!0)},e.prototype.reset=function(){this._grid=this._initGrid()},e.prototype._initGrid=function(){for(var e=[],t=0;t<this._rowsLength;t++)e.push(new Array(this._colsLength));return e},e}();t.default=n}.apply(null,n))||(e.exports=i)},dh9Z:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("2Atf"),r("B2KM"),r("ma1f"),r("qsST"),r("loiZ"),r("qMld"),r("Vx27"),r("Z4y+"),r("5WBt"),r("y/j/"),r("hz/Y"),r("tI6k"),r("tPaR"),r("apbF"),r("Tauk"),r("bLBh"),r("LCdb"),r("MGRT"),r("2Gaw"),r("68TM"),r("oWCy")],void 0===(i=function(e,t,r,n,i,o,a,l,s,u,c,p,f,d,y,h,m,v,g,b,S,x,_,w,I){function O(e){return e&&("unique-value"===e.type||"class-breaks"===e.type)&&null!==e.backgroundFillSymbol}function M(e){var t=e&&e.getSymbols();return O(e)||t.some(function(e){return"simple-fill"===e.type||"picture-fill"===e.type})}function F(e,t){switch(e){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryMultipoint":return!0;case"esriGeometryPolygon":return M(t);default:return P.error(new a("mapview-invalid-type",e+" is not supported")),!1}}function T(e,t,r){r.has(e)||r.set(e,new Set);for(var n=r.get(e),i=t.length,o=0;o<i;o++){var a=t.charCodeAt(o);n.add(a)}}Object.defineProperty(t,"__esModule",{value:!0});var P=l.getLogger("esri.views.2d.layers.features.processors.SymbolProcessor"),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._symbolToMosaicItemMap=new Map,t._visualSetPromises=new Map,t.type="symbol",t}return r(t,e),t.prototype.destroy=function(){this._visualSetPromises.forEach(function(e,t){e.cancel()}),this._visualSetPromises.clear(),this._symbolToMosaicItemMap.clear(),this.notifyChange("updating")},Object.defineProperty(t.prototype,"supportsTileUpdates",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelingInfo",{get:function(){return this.configuration&&this.configuration.labelingInfo?this.configuration.labelingInfo.map(function(e){return f.fromJSON(e)}):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelClassInfos",{get:function(){var e=this;return this.labelingInfo?this.labelingInfo.map(function(t){return{labelOptions:d.getLabelingOptions(t,e.spatialReference),labelExpression:t.getLabelExpression(),labelClass:t}}):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hydrate",{get:function(){return v.createHydrateFactory(this.service.geometryType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"factory",{get:function(){var e=this;if(!this.configuration)return null;var t=this.service,r=t.geometryType,n=t.objectIdField,i=t.fields,o=this.configuration,a=o.devicePixelRatio,l=o.hasGeometryExpr,s=p.fromJSON(this.spatialReference),u={hasGeometryExpr:l,geometryType:r,fields:i,spatialReference:s},c=new x.default(function(t){return e.remoteClient.invoke("tileRenderer.getMaterialItems",t)});return this._matcher=b.createMatcher(this.renderer,c,u),new S.default(r,n,this.renderer,u,a,s,c,this.labelingInfo,this.tileStore.tileScheme.tileInfo)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"queryInfo",{get:function(){var e=this.configuration,t=e.renderer,r=e.definitionExpression,n=e.availableFields,i=e.gdbVersion,o=e.historicMoment,a=this.service.geometryType,l=this._getReturnCentroid(this.rendererInfo.renderer),s=F(a,this.rendererInfo.renderer),u=null,c=t.visualVariables;c&&c.some(function(e){if("size"===e.type&&e.field&&!e.normalizationField)return u=[e.field+" DESC"],!0});var p=I.computePxBuffer(this.rendererInfo.renderer);return{definitionExpression:r,orderByFields:u,outFields:n,pixelBuffer:p,returnCentroid:l,returnGeometry:s,gdbVersion:i,historicMoment:o}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{get:function(){return this.configuration?y.fromJSON(this.configuration.renderer):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rendererInfo",{get:function(){return this.configuration?m.createRendererInfo(y.fromJSON(this.configuration.renderer),this.tileStore.tileScheme.spatialReference,{fields:this.service.fields}):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return this._visualSetPromises.size>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fields",{get:function(){return this.service.fields},enumerable:!0,configurable:!0}),t.prototype.onTileData=function(e,t){var r=this,n=t.addOrUpdate,i=t.remove,o=t.clear,a=(n&&n.length?this._processFeatures(e,n,t.transformParams):u.resolve()).then(function(t){var n=t&&t.message||null,a=t&&t.transferList||null;return r.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:{addOrUpdate:n,remove:i,clear:o}},{transferList:a})}).catch(function(t){return r._handleError(e,t)});return this._visualSetPromises.set(e,a),a.then(function(){return r._cleanPromise(e)},function(){return r._cleanPromise(e)}),this.notifyChange("updating"),a},t.prototype.onTileError=function(e,t){var r=this,n=this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:e.id,error:t});return this._visualSetPromises.set(e,n),n.then(function(){return r._cleanPromise(e)},function(){return r._cleanPromise(e)}),this.notifyChange("updating"),n},t.prototype.onTileUpdate=function(e){for(var t=0,r=e.removed;t<r.length;t++){var n=r[t],i=this._visualSetPromises;if(!i.has(n))return;i.get(n).cancel(),i.delete(n),this.notifyChange("updating")}},t.prototype._cleanPromise=function(e){this._visualSetPromises.delete(e),this.notifyChange("updating")},t.prototype._processFeatures=function(e,t,r){var n=this;if(!t||!t.length)return u.resolve(null);var i=this.factory,o={viewingMode:"",scale:e.scale};return i.analyze(t,this._matcher,r,o).then(function(t){return n._getLabelMosaicItems(e,t,r).then(function(o){return n._writeFeatures(e,t,r,o,i)})})},t.prototype._writeFeatures=function(e,t,r,n,i){for(var o=i.createMeshData(t.length),a={viewingMode:"",scale:e.scale},l=this._symbolToMosaicItemMap,s=0,u=t;s<u.length;s++){var c=u[s];i.write(o,c,r,a,e.level,n,l)}return this._encodeDisplayData(o)},t.prototype._encodeDisplayData=function(e){var t={},r=new Array;return e.encode(t,r),{message:t,transferList:r}},t.prototype._handleError=function(e,t){if(t&&"cancel"!==t.dojoType)return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:e.id,error:t.message})},t.prototype._getReturnCentroid=function(e){function t(e){if(!e)return!1;var t=e.type;return"simple-marker"===t||"picture-marker"===t||"text"===t}if("esriGeometryPolygon"===this.service.geometryType&&this.labelingInfo)return!0;if("esriGeometryPolygon"!==this.service.geometryType)return!1;switch(e.type){case"simple":return t(e.symbol);case"unique-value":return t(e.defaultSymbol)||e.uniqueValueInfos.some(function(e){return t(e.symbol)});case"class-breaks":return t(e.defaultSymbol)||e.classBreakInfos.some(function(e){return t(e.symbol)});default:return!0}},t.prototype._getLabelMosaicItems=function(e,t,r){var n=s.acquire(),i=this._createLabelFeatures(e.scale,t,n,r),o=this._symbolToMosaicItemMap,a=s.acquire(),l=[],c=0;return n.forEach(function(e,t){if(o.has(t.id)){var r=o.get(t.id).glyphMosaicItems,n=[];e.forEach(function(e){(r&&r.length<e||!r[e])&&(n[e]=e)}),n.length>0&&(a.set(c,t),l.push({symbol:t.toJSON(),id:c,glyphIds:n}),c++)}else{a.set(c,t);var i=[];e.forEach(function(e){return i.push(e)}),l.push({symbol:t.toJSON(),id:c,glyphIds:i}),c++}}),l.length>0?this.remoteClient.invoke("tileRenderer.getMaterialItems",l).then(function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t],l=a.get(n.id);if(l)if(v.isTextSymbol(l))if(o.has(l.id)){var u=o.get(l.id).glyphMosaicItems,c=n.mosaicItem.glyphMosaicItems;if(c)for(var p=0;p<c.length;p++)null!=c[p]&&(u[p]=c[p])}else o.set(l.id,n.mosaicItem);else o.set(l.id,n.mosaicItem)}return s.release(a),i}):(s.release(n),u.resolve(i))},t.prototype._getLabelClassInfos=function(e){return this.labelClassInfos.map(function(e,t){return{id:t,labelClassInfo:e}}).filter(function(t){var r=t.labelClassInfo;return(!r.labelClass.minScale||r.labelClass.minScale>=e||0===r.labelClass.minScale)&&(!r.labelClass.maxScale||r.labelClass.maxScale<=e||0===r.labelClass.maxScale)})},t.prototype._createLabelFeatures=function(e,t,r,n){if(!this.labelingInfo||!t||0===t.length)return null;var a=new o({viewingMode:"",scale:e}),l=this._getLabelClassInfos(e);if(0===l.length)return null;for(var u=s.acquire(),c=new g.default(h.COLLISION_EARLY_REJECT_BUCKET_SIZE),f=0,d=t;f<d.length;f++){var y=d[f],m=this.service.geometryType,v=0,b=0;if("esriGeometryPoint"===m||"esriGeometryPolygon"===m){if("esriGeometryPoint"===m){var S=y.geometry;v=S.x,b=S.y}else v=y.centroid.x,b=y.centroid.y;if(c.checkOverlap(v,b))continue}for(var x=y.attributes[this.service.objectIdField],w=new Array,I=0;I<l.length;I++){var O=l[I],M=O.labelClassInfo,F=O.id,E=y;if(this.configuration.hasGeometryExpr){if(!n)return void P.error("mapview-labeling","Tried to evaluate geometry expression but no transformation found");var C=n.transform,L=n.hasZ,j=n.hasM,k=this.hydrate(y.geometry,C,L,j),R=i({},y,{geometry:k});k.spatialReference=p.fromJSON(this.spatialReference),E=R}var z=_.bidiText(this._evaluateLabelExpression(E,M,a)),V=z[0],G=z[1];if(h.DEBUG_LABELS){var q="-"+x;V=V.substring(0,V.length-q.length)+q}V&&V.length&&(T(M.labelClass.symbol,V,r),w.push({text:V,rtl:G,id:F}))}u.set(x,w)}return u},t.prototype._evaluateLabelExpression=function(e,t,r){if(!t.labelClass.symbol)return"";if(!f.evaluateWhere(t.labelClass.where,e.attributes))return"";if(!t.labelExpression.expression)return"";var n=i({view:r},t.labelOptions);return d.buildLabelText(t.labelExpression.expression,e,this.fields,n)},n([c.property({readOnly:!0})],t.prototype,"supportsTileUpdates",null),n([c.property()],t.prototype,"configuration",void 0),n([c.property({dependsOn:["configuration"]})],t.prototype,"labelingInfo",null),n([c.property({dependsOn:["labelingInfo"]})],t.prototype,"labelClassInfos",null),n([c.property({dependsOn:["service"]})],t.prototype,"hydrate",null),n([c.property({dependsOn:["configuration","service","fields","tileStore"]})],t.prototype,"factory",null),n([c.property({constructOnly:!0})],t.prototype,"queryInfo",null),n([c.property({dependsOn:["configuration"]})],t.prototype,"renderer",null),n([c.property({dependsOn:["configuration"]})],t.prototype,"rendererInfo",null),n([c.property({readOnly:!0})],t.prototype,"updating",null),n([c.property({dependsOn:["service"]})],t.prototype,"fields",null),n([c.subclass()],t)}(c.declared(w.default));t.default=E}.apply(null,n))||(e.exports=i)},oWCy:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("jBNx"),r("MYW0"),r("tI6k"),r("wjMf")],void 0===(i=function(e,t,r,n,i,o){function a(e){if(!("visualVariables"in e))return 0;if(!e.hasVisualVariables("size"))return 0;var t=e.getVisualVariablesForType("size");if(!t[0])return 0;var r=t[0];return"stops"===r.transformationType?r.stops.map(function(e){return e.size}).reduce(y,0):"clamped-linear"===r.transformationType?"number"==typeof r.maxSize?r.maxSize:r.maxSize.stops.map(function(e){return e.size}).reduce(y,0):"real-world-size"===r.transformationType?30:void 0}function l(e){return e.type in h}function s(e,t){return null==e?t:e}function u(e,t){return null==e.outline?t:s(e.outline.width,t)}function c(e,t){return null==e.font?t:s(e.font.size,t)}function p(e,t){if("simple-marker"===e.type){var r=Math.max(s(e.size,12),t);return d(e)+r*m}if("picture-marker"===e.type){var a=Math.max(s(e.height,12),t),l=s(e.width,12)*(a/s(e.height,12))/2,p=a/2;return d(e)+Math.sqrt(l*l+p*p)}if("text"===e.type){o.getTextSymbolEstimatedSize(v,e,i.AVERAGE_GLYPH_MOSAIC_ITEM);var f=v[2]*(s(e.horizontalAlignment,"top")in g?1:.5),y=v[3]*(s(e.horizontalAlignment,"center")in b?1:.5),h=c(e,9),S=Math.max(h,t)/h;return d(e)+Math.sqrt(f*f+y*y)*S}if("simple-line"===e.type)return Math.max(s(e.width,.75),t)/2;if("simple-fill"===e.type||"picture-fill"===e.type)return Math.max(u(e,.75),t)/2;if("cim"===e.type){var x=n.CIMSymbolHelper.getEnvelope(e);return Math.sqrt(x.width*x.width+x.height*x.height)}}function f(e,t){return l(e)?Math.min(Math.max(5,p(e,t)),75):0}function d(e){var t=s(e.xoffset,0),r=s(e.yoffset,0);return Math.sqrt(t*t+r*r)}function y(e,t){return Math.max(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var h={"simple-marker":1,"picture-marker":1,text:1,"simple-line":1,"simple-fill":1,"picture-fill":1,cim:1},m=.707;t.computePxBuffer=function(e){if("simple"!==e.type&&"class-breaks"!==e.type&&"unique-value"!==e.type)return 0;var t=e.getSymbols();return r.pt2px(t.map(function(t){return f(t,a(e))}).reduce(y,0))};var v=[0,0,0,0],g={left:1,right:1},b={top:1,bottom:1,baseline:1}}.apply(null,n))||(e.exports=i)},tPaR:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("2Atf"),r("jZlN"),r("T8lH"),r("3568"),r("JNkf"),r("G59t")],void 0===(i=function(e,t,r,n,i,o,a,l){Object.defineProperty(t,"__esModule",{value:!0});var s=new i;function u(e,t,r){if(!e)return null;var i=0,a={},l=e.clone(),u=l.visualVariables,c=null;if("simple"!==l.type&&"dot-density"!==l.type){var p=l.field,f=l.valueExpression;if(!p&&f){var d="$$fake"+i++,y=o.createFunction(f);a[d]=function(e,n){return s.repurposeFromGraphicLikeObject(e.geometry,e.attributes,r),o.executeFunction(y,{vars:{$feature:s,$view:o.getViewInfo(n)},spatialReference:t})},l.field=d,l.valueExpression=null,c=function(e,t){return t.attributes[d]=a[d](t),e.valueExpression?e.getSymbol(n.fromJSON(t)):e.getSymbol(t)}}}return u&&(l.visualVariables=u.map(function(e){var n="size"===e.type&&e.valueExpression&&"$view.scale"===e.valueExpression;if(e.normalizationField){var l=e.field,u=e.normalizationField,c="$$fake"+i++;return a[c]=function(e,t){return e.attributes[l]/e.attributes[u]},(p=e.clone()).field=c,p.normalizationField=null,p}if(!e.valueExpression||n)return e;var p,f=e.valueExpression,d=(c="$$fake"+i++,o.createFunction(f));return a[c]=function(e,n){return s.repurposeFromGraphicLikeObject(e.geometry,e.attributes,r),o.executeFunction(d,{vars:{$feature:s,$view:o.getViewInfo(n)},spatialReference:t})},(p=e.clone()).field=c,p.valueExpression=null,p})),{renderer:l,normalizingFunctions:a,getSymbolFunction:c}}t.createRendererInfo=function(e,t,r){var n=u(e,t,r)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null},i=n&&n.normalizingFunctions,o=n&&n.getSymbolFunction;e=n&&n.renderer||e;var a=l.convertVisualVariables(e.visualVariables);return{renderer:e,vvFields:a.vvFields,vvRanges:a.vvRanges,getValue:function(e,t){var r=i[t];return r?r(e):e.attributes[t]},getSymbol:function(e){return o?o(this.renderer,e):this.renderer.getSymbol?this.renderer.getSymbol.call(this.renderer,e):null}}},t.getNormalizedRenderer=function(e,t,r){var n=u(e,t,r)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null};return n&&n.renderer||e},t.getSymbol=function(e,t){return e.getSymbol(t)},t.isRendererWebGLCompatible=function(e){if(!e)return!1;if(-1===["simple","class-breaks","unique-value","heatmap"].indexOf(e.type))return!1;if("visualVariables"in e&&e.visualVariables)for(var t=0,r=e.visualVariables;t<r.length;t++){var n=r[t];switch(n.type){case"color":case"opacity":if(n.stops&&8<n.stops.length)return!1;break;case"size":if(l.getTypeOfSizeVisualVariable(n)===a.WGLVVFlag.SIZE_FIELD_STOPS&&n.stops&&6<n.stops.length)return!1}}return!0}}.apply(null,n))||(e.exports=i)},"y/j/":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("qKT0"),r("9opi"),r("Q2wQ"),r("HZ3d"),r("Xfn2"),r("T8lH"),r("2FSZ"),r("rg9i"),r("qMld"),r("k7g7"),r("3568")],void 0===(i=function(e,t,n,i,o,a,l,s,u,c,p,f,d){function y(){return a(this,void 0,void 0,function(){return o(this,function(e){return[2,p.create(function(e){Promise.resolve().then(function(){var t=[r("1eyA")];e.apply(null,t)}.bind(this)).catch(r.oe)})]})})}function h(){return a(this,void 0,void 0,function(){return o(this,function(e){return[2,p.create(function(e){Promise.resolve().then(function(){var t=[r("3568")];e.apply(null,t)}.bind(this)).catch(r.oe)})]})})}function m(e,t){var r={spatialReference:t},n=e.labelExpressionInfo;if(n){var i=n.expression;i&&!n.value&&(r.hasArcadeExpression=!0,r.compiledArcadeFunc=d.createFunction(i))}return r}function v(e,t,r,n){var i=f.getField(n,e);if(!i)return t;if(null==r[i.name])return"";var o=i.domain;if(o)if("codedValue"===o.type||"coded-value"===o.type)for(var a=r[i.name],s=0,p=o.codedValues;s<p.length;s++){var d=p[s];if(d.code===a)return d.name}else if("range"===o.type){var y=+r[i.name],h="range"in o?o.range[0]:o.minValue,m="range"in o?o.range[1]:o.maxValue;if(h<=y&&y<=m)return o.name}var v=r[i.name];if("date"===i.type||"esriFieldTypeDate"===i.type){var g=u.fromJSON("shortDate"),b="DateFormat"+u.getFormat(g);b&&(v=c.substitute({myKey:v},"{myKey:"+b+"}"))}else f.isNumericField(i)&&(v=l.format(+v));return v||""}Object.defineProperty(t,"__esModule",{value:!0});var g=new s,b=function(e){return null};t.createLabelFunction=function(e,t,r){return a(this,void 0,void 0,function(){var n,i,a,l,s,u,c,f,d,S,x;return o(this,function(o){switch(o.label){case 0:return e&&e.symbol?(n=e.where,i=e.getLabelExpression(),[4,p.all([n?y():null,"arcade"===i.type?h():null])]):[2,b];case 1:return a=o.sent(),l=a[0],s=a[1],"arcade"===i.type?(c=m(e,r),f=s.createFunction(i.expression),d={fields:t},S={vars:{$feature:g,$view:c.view},spatialReference:r},u=function(e){g.repurposeFromGraphicLikeObject(e.geometry,e.attributes,d);var t=s.executeFunction(f,S);return null!=t?t.toString():null}):u=function(e){var r=e&&e.attributes;return r?i.expression.replace(/{[^}]*}/g,function(e){return v(e.slice(1,-1),e,r,t)}):null},n?(x=l.create(n),[2,function(e){return x.testFeature(e)?u(e):null}]):[2,u]}})})},t.getLabelingOptions=m,t.buildLabelText=function(e,t,r,n){var i="";if(n&&n.hasArcadeExpression){if(n.compiledArcadeFunc){g.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:r});var o={vars:{$feature:g,$view:n.view},spatialReference:n.spatialReference},a=d.executeFunction(n.compiledArcadeFunc,o);return null!=a?a.toString():null}}else{var l=t&&t.attributes||{};i=e.replace(/{[^}]*}/g,function(e){return v(e.slice(1,-1),e,l,r)})}return i},t.formatField=v}.apply(null,n))||(e.exports=i)}}]);
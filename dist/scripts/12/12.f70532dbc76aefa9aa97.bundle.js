(function(){(this||window).webpackJsonp.registerAbsMids({"esri/core/libs/gl-matrix-2/mat4f64":"1m5D","esri/core/libs/gl-matrix-2/mat3f64":"51bw","esri/views/2d/engine/webgl/WGLTile":"AP+j","esri/views/2d/engine/webgl/MemoryRequirements":"AwqN","esri/core/libs/gl-matrix-2/factories/mat4f64":"CIzB","esri/views/2d/engine/webgl/WGLDisplayList":"Dikz","esri/views/2d/engine/webgl/util/Reader":"Ed/z","esri/views/2d/engine/webgl/TileBufferData":"PwbG","esri/views/2d/engine/webgl/DirtyMap":"SkDs","esri/views/2d/engine/webgl/DisplayRecordStore":"Sq9p","esri/views/2d/engine/webgl/FreeList":"Zry2","esri/views/2d/engine/webgl/WGLRendererInfo":"oDRR","esri/views/2d/engine/webgl/Fader":"qe2g","esri/views/2d/engine/webgl/TileData":"rYkQ","esri/views/2d/engine/webgl/TileDisplayData":"tTR7","esri/geometry/support/quantizationUtils":"u90+","esri/core/libs/gl-matrix-2/factories/mat3f64":"xf8T","esri/views/2d/engine/webgl/WGLBuffers":"xxo4"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"1m5D":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("CIzB")],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.mat4f64=r}.apply(null,i))||(e.exports=n)},"51bw":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("xf8T")],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.mat3f64=r}.apply(null,i))||(e.exports=n)},"AP+j":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("xhoE"),r("aMdW"),r("Zx0K"),r("YX1r"),r("lgZd"),r("W9tT"),r("ab6c"),r("Brhx"),r("tI6k"),r("SkDs"),r("Sq9p"),r("JNkf"),r("qe2g"),r("Dos2"),r("apbF"),r("xxo4"),r("Dikz"),r("f3JK")],void 0===(n=function(e,t,r,i,n,a,o,s,l,u,f,d,p,y,c,v,h,m,g,x){function _(e,t){return e.sortKey-t.sortKey}var b=new Set;return function(e){function t(t,r,i){void 0===i&&(i=!1);var a=e.call(this)||this;return a._data=null,a.hlDisplayList=null,a._displayList=null,a._wglBuffers=null,a._dirtyMap=new d.default,a.coords=[0,0],a.bounds=[0,0,0,0],a.dvsMat3=o.mat3f32.create(),a.tileMat3=o.mat3f32.create(),a.labelMat2d=n.mat2df32.create(),a._labelIndex=null,a._dirty=!0,a.fader=new c.default,a.key=x.pool.acquire(t),a.coords[0]=r[0],a.coords[1]=r[3],a.bounds=r,a._ensureCorrectZOrder=i,a}return r(t,e),Object.defineProperty(t.prototype,"displayObjects",{get:function(){return this._data.tileDisplayData.displayObjects},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canDisplay",{get:function(){return!!this.attached},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDirty",{get:function(){return this._dirty},set:function(e){(this._dirty=e)||this.isReady||this.ready(),this.requestRender()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasData",{get:function(){return!!this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelIndex",{get:function(){return this._labelIndex},enumerable:!0,configurable:!0}),t.prototype.getGeometry=function(e){return this._wglBuffers&&this._wglBuffers.has(e)?this._wglBuffers.get(e):null},t.prototype.getDisplayList=function(e){switch(e){case y.WGLDrawPhase.HIGHLIGHT:return this.hlDisplayList;default:return this._data&&this._displayList}},Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),t.prototype.setData=function(e,t,r){var i=e.addOrUpdate,n=e.remove;if(this.fader.reset(),(e.clear||!this.hasData)&&!e.addOrUpdate)return this.clear(),void this.ready();!e.clear&&this.hasData||!e.addOrUpdate?this.hasData&&this._doPatchData({addOrUpdate:i,remove:n},t,r):(i.tileDisplayData.computeDisplayList(this._ensureCorrectZOrder),this._dirtyMap=new d.default,this._dispRecStore=p.default.fromTileData(i,this._dirtyMap),this._data=i,this._readyTileIfNoLabels(t,r),this._dirtyMap.markAllDirty(),this._displayList||(this._displayList=i.tileDisplayData.displayList.clone()))},t.prototype.commitChanges=function(e){this.isDirty&&this._wglBuffers||(this._wglBuffers||(this._wglBuffers=new m.default(this.stage.context)),this._displayList=this._data.tileDisplayData.displayList.clone(),this._wglBuffers.upload(this._data.tileBufferData,this._dirtyMap),this._dirtyMap.markAllClean())},t.prototype.resetVisibility=function(e){var t=this,r=new Array(0),i=new Array(1);e.forEach(function(e){i[0]=e,t.setFilterFlag(0,r,i)})},t.prototype.setFilterFlag=function(e,t,r){if(this.hasData){for(var i=1<<e,n=this._data.tileBufferData.geometries.map(h.geometryToMappedGeometry),a=0,o=t;a<o.length;a++){var s=o[a];if(v=this._data.tileDisplayData.displayObjectRegistry.get(s)){v.setFilterFlag(e,!0);for(var l=0,u=v.displayRecords;l<u.length;l++)if(b=(B=n[(_=u[l]).geometryType]).geometry.vertexBuffer[h.C_VBO_VISIBILITY]){B.vertexFrom=null==B.vertexFrom?_.vertexFrom:Math.min(B.vertexFrom,_.vertexFrom),B.vertexTo=null==B.vertexTo?_.vertexFrom+_.vertexCount:Math.max(B.vertexTo,_.vertexFrom+_.vertexCount);for(var f=_.vertexFrom,d=_.vertexCount,p=0;p<d;++p)b.data[f+p]|=i}}}for(var y=0,c=r;y<c.length;y++){var v,m=c[y];if(v=this._data.tileDisplayData.displayObjectRegistry.get(m)){v.setFilterFlag(e,!1);for(var g=0,x=v.displayRecords;g<x.length;g++){var _,b;if(b=(B=n[(_=x[g]).geometryType]).geometry.vertexBuffer[h.C_VBO_VISIBILITY])for(B.vertexFrom=null==B.vertexFrom?_.vertexFrom:Math.min(B.vertexFrom,_.vertexFrom),B.vertexTo=null==B.vertexTo?_.vertexFrom+_.vertexCount:Math.max(B.vertexTo,_.vertexFrom+_.vertexCount),f=_.vertexFrom,d=_.vertexCount,p=0;p<d;++p)b.data[f+p]&=~i}}}for(var D=!1,L=0;L<n.length;++L){var B;if(null!=(B=n[L]).vertexFrom&&null!=B.vertexTo){var F=B.vertexTo?B.vertexTo-B.vertexFrom:0;this._dirtyMap.markDirtyVertices(L,h.C_VBO_VISIBILITY,B.vertexFrom,F),D=!0}}D&&this.requestRender()}},t.prototype.setVisibilityRange=function(e,t,r,i){for(var n=this._data.tileDisplayData.displayObjectRegistry.get(e),a=this._data.tileBufferData.geometries[y.WGLGeometryType.LABEL].vertexBuffer[h.C_VBO_VISIBILITY_RANGE],o=1/0,s=0,l=t;l<t+r;++l){for(var u=n.displayRecords[l],f=Math.max(u.minZoom,i),d=u.maxZoom,p=v.i8888to32(f,d,f,d),c=u.vertexFrom*a.stride/4,m=u.vertexCount*a.stride/4,g=c;g<c+m;++g)a.data[g]=p;o=Math.min(o,u.vertexFrom),s=Math.max(s,u.vertexFrom+u.vertexCount)}var x=s-o;this._dirtyMap.markDirtyVertices(y.WGLGeometryType.LABEL,h.C_VBO_VISIBILITY_RANGE,o,x)},t.prototype.setTransform=function(e,t){var r=this.tileMat3,i=e.toScreenNoRotation([0,0],this.coords),n=i[0],o=i[1],s=t;a.mat3.set(this.tileMat3,s,0,0,0,s,0,n,o,1),a.mat3.multiply(this.dvsMat3,e.displayViewMat3,r)},t.prototype.setLabelTransform=function(e,t){var r=this.labelMat2d,n=e.getScreenTransform(r,t),a=l.vec2f32.create();s.vec2.transformMat2d(a,this.coords,n),i.mat2d.identity(r),i.mat2d.translate(r,r,a),i.mat2d.multiply(r,e.viewMat2d,r)},t.prototype.clear=function(){this._data=null,this._displayList=null,this._dispRecStore=null,this._wglBuffers&&(this._wglBuffers.dispose(),this._wglBuffers=null),this.hlDisplayList&&(this.hlDisplayList=null)},t.prototype.attach=function(){return!0},t.prototype.dispose=function(){this.clear()},t.prototype.doRender=function(e){if(this.isReady&&this.hasData){if(this.commitChanges(e),this.stage.context.setStencilFunction(514,this.stencilRef,255),e.drawPhase===y.WGLDrawPhase.MAP||e.drawPhase===y.WGLDrawPhase.LABEL||e.drawPhase===y.WGLDrawPhase.LABEL_ALPHA)this._displayList.replay(e,this);else for(var t=0,r=this.stage.painter.getBrushes(e.drawPhase);t<r.length;t++)r[t].draw(e,this);this.fader.step()||this.requestRender()}},t.prototype.buildHLList=function(e){var t=this;this.hlDisplayList=new g,e.forEach(function(e){t._addToHLDisplayList(t.hlDisplayList,e)})},t.prototype._addToHLDisplayList=function(e,t){if(this._data){var r=this._data.tileDisplayData.displayObjectRegistry.get(t);if(r){for(var i=[],n=0,a=r.displayRecords;n<a.length;n++){var o=a[n].copy();o.meshData=null,o.symbolLevel=0,o.zOrder=0,i.push(o)}i.sort(_),e.addToList(i)}}},t.prototype._readyTileIfNoLabels=function(e,t){this.isDirty=!(!e||!t||(this._rebuildLabelIndex(),0))},t.prototype._doPatchData=function(e,t,r){this._patchData(e)||(this._dirtyMap.markAllDirty(),this._data.reshuffle(),this._dispRecStore=p.default.fromTileData(this._data,this._dirtyMap)),this._readyTileIfNoLabels(t,r),this.requestRender()},t.prototype._rebuildLabelIndex=function(){this._labelIndex=this._initLabelIndex();for(var e=0,t=this.displayObjects;e<t.length;e++)for(var r=0,i=t[e].metrics;r<i.length;r++){var n=i[r];this._insertIntoLabelIndex(n)}},t.prototype._insertIntoLabelIndex=function(e){-1!==e.xBucket&&this.labelIndex[e.yBucket][e.xBucket].push(e)},t.prototype._initLabelIndex=function(){for(var e=[],t=0;t<f.TILE_SIZE/f.COLLISION_BUCKET_SIZE;t++){e.push([]);for(var r=0;r<f.TILE_SIZE/f.COLLISION_BUCKET_SIZE;r++)e[t].push([])}return e},t.prototype._patchData=function(e){for(var t=!0,r=e.addOrUpdate&&e.addOrUpdate.tileDisplayData&&e.addOrUpdate.tileDisplayData.displayObjects||[],i=(e.remove||[]).slice(),n=0,a=r;n<a.length;n++)null!=(h=a[n]).insertAfter&&i.push(h.id);for(var o=0,s=i;o<s.length;o++){var l=s[o];if(v=this._data.tileDisplayData.displayObjectRegistry.get(l)){this._data.tileDisplayData.displayList.removeFromList(v.displayRecords);for(var u=0,f=v.displayRecords;u<f.length;u++){var d=f[u];this._dispRecStore.delete(d)}this._data.tileDisplayData.displayObjectRegistry.delete(l);var p=this._data.tileDisplayData.displayObjects.indexOf(v);this._data.tileDisplayData.displayObjects.splice(p,1)}}for(var y=0,c=r;y<c.length;y++){var v,h=c[y],m=void 0;if(v=this._data.tileDisplayData.displayObjectRegistry.get(h.id)){var g=v.displayRecords;v.set(h),v.displayRecords=g;for(var x=v.displayRecords.length,_=0;_<x;++_){var D=v.displayRecords[_],L=h.displayRecords[_];(_>=h.displayRecords.length||D.geometryType!==L.geometryType||D.symbolLevel!==L.symbolLevel||D.zOrder!==L.zOrder||D.materialKey!==L.materialKey)&&(this._dispRecStore.delete(v.displayRecords[_]),_<h.displayRecords.length&&(v.displayRecords[_]=void 0))}v.displayRecords.length=h.displayRecords.length,v.metrics=h.metrics}else{(v=h.copy()).displayRecords=[],this._data.tileDisplayData.displayObjectRegistry.set(h.id,v);var B=void 0,F=this._data.tileDisplayData.displayObjects;if(null!=v.insertAfter)if(m={},0<=v.insertAfter){var T=this._data.tileDisplayData.displayObjectRegistry.get(v.insertAfter);T&&(B=F.indexOf(T)+1)<F.length?F.splice(B,0,v):(F.push(v),B=F.length)}else F.unshift(v),B=0;else F.push(v),B=F.length;if(m){var w=void 0;if(this._data.tileDisplayData.displayList.unified)w=0<h.displayRecords.length?1:0;else{b.clear();for(var I=0,R=h.displayRecords;I<R.length;I++){var C=R[I],M=this._data.tileDisplayData.displayList.getDPInfoType(C.geometryType);b.add(M)}w=b.size}var z=0;for(_=B-1;0<=_&&z<w;--_)for(var O=F[_].displayRecords.length-1;0<=O&&z<w;--O){var P=F[_].displayRecords[O];m[M=this._data.tileDisplayData.displayList.getDPInfoType(P.geometryType)]||(m[M]=P,++z)}}}var A=h.displayRecords.length;for(_=0;_<A;++_){L=h.displayRecords[_],(D=v.displayRecords[_])?(D.meshData=L.meshData,D.materialKey=L.materialKey):((D=L.copy()).vertexFrom=void 0,D.indexFrom=void 0,v.displayRecords[_]=D);var j=L.geometryType,E=(M=this._data.tileDisplayData.displayList.getDPInfoType(j),e.addOrUpdate.tileBufferData.geometries[j]),S=E.vertexBuffer,G=E.indexBuffer,V=void 0;m&&(V=m[M]?this._data.tileDisplayData.displayList.splitAfter(m[M]):-1),t=this._dispRecStore.setMeshData(D,L,S,G,V)&&t,m&&null!=D.indexFrom&&null!=D.indexFrom&&(m[M]=D)}}return t},t}(u.DisplayObject)}.apply(null,i))||(e.exports=n)},AwqN:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._byGeometryType=null}return Object.defineProperty(e.prototype,"satisfied",{get:function(){return!this._byGeometryType},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._byGeometryType=null},e.prototype.verticesFor=function(e){return this._byGeometryType?this._byGeometryType[e].vertices:0},e.prototype.indicesFor=function(e){return this._byGeometryType?this._byGeometryType[e].indices:0},e.prototype.needMore=function(e,t,r){if(t||r){this._byGeometryType||(this._byGeometryType=[{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0}]);var i=this._byGeometryType[e];i.vertices+=t,i.indices+=r}},e}();t.default=r}.apply(null,i))||(e.exports=n)},CIzB:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},t.clone=function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},t.fromValues=function(e,t,r,i,n,a,o,s,l,u,f,d,p,y,c,v){return[e,t,r,i,n,a,o,s,l,u,f,d,p,y,c,v]},t.createView=function(e,t){return new Float64Array(e,t,16)}}.apply(null,i))||(e.exports=n)},Dikz:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("Q2wQ"),r("qsST"),r("JNkf")],void 0===(n=function(e,t,r,i,n){var a=i.getLogger("esri.views.2d.engine.webgl.WGLDisplayList");function o(e,t,r){for(var i=[],n=3;n<arguments.length;n++)i[n-3]=arguments[n];t<e.length?e.splice.apply(e,[t,r].concat(i)):e.push.apply(e,i)}var s=new Map;s.set(n.WGLDrawPhase.MAP,[n.WGLGeometryType.FILL,n.WGLGeometryType.LINE,n.WGLGeometryType.MARKER,n.WGLGeometryType.TEXT]),s.set(n.WGLDrawPhase.LABEL,[n.WGLGeometryType.LABEL]),s.set(n.WGLDrawPhase.LABEL_ALPHA,[n.WGLGeometryType.LABEL]);var l=function(){function e(e){void 0===e&&(e=!1),this.symbolLevels=[],this.unified=e}return e.prototype.replay=function(e,t){if(this.unified)for(var r=0,i=this.symbolLevels;r<i.length;r++)for(var n=0,a=i[r].zLevels;n<a.length;n++){var o=a[n].geometryDPInfo;for(var l in o)if(o[l])for(var u=0,f=o[l];u<f.length;u++){var d=f[u],p=e.painter.getGeometryBrush(d.geometryType),y=t.getGeometry(d.geometryType);p.drawGeometry(e,t,d,y)}}else for(var c=function(r){var i=e.painter.getGeometryBrush(r),n=t.getGeometry(r);v.byType(r,function(r){i.drawGeometry(e,t,r,n)})},v=this,h=0,m=s.get(e.drawPhase);h<m.length;h++)c(m[h])},Object.defineProperty(e.prototype,"empty",{get:function(){return!this.symbolLevels||0===this.symbolLevels.length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.symbolLevels.length=0},e.prototype.addToList=function(e,t){if(Array.isArray(e))for(var r=0,i=e;r<i.length;r++){var n=i[r];this._addToList(n,t)}else this._addToList(e,t)},e.prototype.removeFromList=function(e){Array.isArray(e)||(e=[e]);for(var t=null,r=0,i=e;r<i.length;r++){var n=i[r];t=this._removeFromList(n)}return t},e.prototype.byType=function(e,t){for(var r=0,i=this.symbolLevels;r<i.length;r++)for(var n=0,a=i[r].zLevels;n<a.length;n++){var o=a[n].geometryDPInfo,s=this.getDPInfoType(e);if(o[s])for(var l=0,u=o[s];l<u.length;l++)t(u[l])}},e.prototype.clone=function(){for(var t=new e(this.unified),r=0,i=this.symbolLevels;r<i.length;r++){var n=i[r];t.symbolLevels.push(n.clone())}return t},e.prototype.splitAfter=function(e){for(var t=this._getDisplayList(e.symbolLevel,e.zOrder,e.geometryType),r=t.length,i=e.indexFrom+e.indexCount,n=0;n<r;++n){var a=t[n];if(a.geometryType===e.geometryType&&i>a.indexFrom&&i<=a.indexFrom+a.indexCount){if(i<a.indexFrom+a.indexCount){var o=new u;o.geometryType=a.geometryType,o.materialKey=a.materialKey,o.indexFrom=i,o.indexCount=a.indexFrom+a.indexCount-i,t.splice(n+1,0,o),a.indexCount=i-a.indexFrom}return n}}},e.prototype._addToList=function(e,t){var r=e.symbolLevel,i=e.zOrder,n=this._getDisplayList(r,i,e.geometryType),a=null!=t?t:n.length-1,s=0<=a&&a<n.length?n[a]:null;if(null===s||s.materialKey!==e.materialKey||s.indexFrom+s.indexCount!==e.indexFrom||this.unified&&s.geometryType!==e.geometryType){var l=new u;l.indexFrom=e.indexFrom,l.indexCount=e.indexCount,l.materialKey=e.materialKey,l.geometryType=e.geometryType,o(n,a+1,0,l)}else s.indexCount+=e.indexCount},e.prototype._removeFromList=function(e){for(var t=e.symbolLevel,r=e.zOrder,i=this._getDisplayList(t,r,e.geometryType),n=i.length,a=void 0,s=0;s<n;++s){var l=i[s];if(e.indexFrom+e.indexCount>l.indexFrom&&e.indexFrom<l.indexFrom+l.indexCount&&(!this.unified||l.geometryType===e.geometryType)){a=s;break}}if(void 0===a)return null;if(l=i[a],e.indexFrom===l.indexFrom)return l.indexCount-=e.indexCount,l.indexFrom+=e.indexCount,0===l.indexCount&&o(i,a,1),a-1;if(e.indexFrom+e.indexCount===l.indexFrom+l.indexCount)return l.indexCount-=e.indexCount,0===l.indexCount?(o(i,a,1),a-1):a;var f=l.indexFrom,d=e.indexFrom-l.indexFrom,p=e.indexCount,y=l.indexFrom+l.indexCount-(e.indexFrom+e.indexCount);l.indexCount=d;var c=new u;return c.geometryType=l.geometryType,c.materialKey=l.materialKey,c.indexFrom=f+d+p,c.indexCount=y,o(i,a+1,0,c),a},e.prototype._getDisplayList=function(e,t,r){for(var i,a,o=this.symbolLevels.length,s=0;s<o;s++)if(this.symbolLevels[s].symbolLevel===e){i=this.symbolLevels[s];break}i||((i=new p).symbolLevel=e,this.symbolLevels.push(i));for(var l,u=i.zLevels.length,y=0;y<u;y++)if(i.zLevels[y].zLevel===t){a=i.zLevels[y];break}if(a||((a=new d).geometryDPInfo=new f,a.zLevel=t,i.zLevels.push(a)),this.unified)a.geometryDPInfo.unified||(a.geometryDPInfo.unified=[]),l=a.geometryDPInfo.unified;else switch(r){case n.WGLGeometryType.FILL:a.geometryDPInfo.fill||(a.geometryDPInfo.fill=[]),l=a.geometryDPInfo.fill;break;case n.WGLGeometryType.LINE:a.geometryDPInfo.line||(a.geometryDPInfo.line=[]),l=a.geometryDPInfo.line;break;case n.WGLGeometryType.MARKER:a.geometryDPInfo.marker||(a.geometryDPInfo.marker=[]),l=a.geometryDPInfo.marker;break;case n.WGLGeometryType.TEXT:a.geometryDPInfo.text||(a.geometryDPInfo.text=[]),l=a.geometryDPInfo.text;break;case n.WGLGeometryType.LABEL:a.geometryDPInfo.label||(a.geometryDPInfo.label=[]),l=a.geometryDPInfo.label}return l},e.prototype.getDPInfoType=function(e){if(this.unified)return"unified";switch(e){case n.WGLGeometryType.FILL:return"fill";case n.WGLGeometryType.LINE:return"line";case n.WGLGeometryType.MARKER:return"marker";case n.WGLGeometryType.TEXT:return"text";case n.WGLGeometryType.LABEL:return"label";default:a.error("DisplayList: Tried to convert unknown geometryType: "+e)}},e}(),u=function(){function e(){this.materialKey=null,this.indexFrom=0,this.indexCount=0}return e.prototype.clone=function(){var t=new e;return t.geometryType=this.geometryType,t.materialKey=this.materialKey,t.indexFrom=this.indexFrom,t.indexCount=this.indexCount,t},e}(),f=function(){function e(){this.fill=null,this.line=null,this.marker=null,this.text=null,this.label=null,this.unified=null}return e.prototype.clone=function(){var t=new e;return t.fill=this.fill&&this.fill.map(function(e){return e.clone()}),t.line=this.line&&this.line.map(function(e){return e.clone()}),t.marker=this.marker&&this.marker.map(function(e){return e.clone()}),t.text=this.text&&this.text.map(function(e){return e.clone()}),t.label=this.label&&this.label.map(function(e){return e.clone()}),t.unified=this.unified&&this.unified.map(function(e){return e.clone()}),t},e}(),d=function(){function e(){this.geometryDPInfo=new f}return e.prototype.clone=function(){var t=new e;return t.zLevel=this.zLevel,t.geometryDPInfo=this.geometryDPInfo.clone(),t},e}(),p=function(){function e(){this.zLevels=[]}return e.prototype.clone=function(){var t=new e;t.symbolLevel=this.symbolLevel;for(var r=0,i=this.zLevels;r<i.length;r++){var n=i[r];t.zLevels.push(n.clone())}return t},e}();return l}.apply(null,i))||(e.exports=n)},"Ed/z":function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._pos=0,this._buffer=e,this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer)}return e.prototype.readInt32=function(){return this._i32View[this._pos++]},e.prototype.readF32=function(){return this._f32View[this._pos++]},e}();t.default=r}.apply(null,i))||(e.exports=n)},PwbG:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("apbF")],void 0===(n=function(e,t,r){return function(){function e(){this.geometries=[{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}}]}return e.prototype.clone=function(){for(var t=new e,r=0;r<this.geometries.length;r++){var i=this.geometries[r],n=t.geometries[r];for(var a in n.indexBuffer=i.indexBuffer.slice(),n.vertexBuffer={},i.vertexBuffer){var o=i.vertexBuffer[a],s=o.data,l=o.stride;n.vertexBuffer[a]={data:s.slice(),stride:l}}}return t},e.deserialize=function(t){for(var i=new e,n=0;n<5;++n)for(var a in i.geometries[n].indexBuffer=new Uint32Array(t.geometries[n].indexBuffer),i.geometries[n].vertexBuffer={},t.geometries[n].vertexBuffer)i.geometries[n].vertexBuffer[a]={data:r.allocateTypedArrayBufferwithData(t.geometries[n].vertexBuffer[a].data,t.geometries[n].vertexBuffer[a].stride),stride:t.geometries[n].vertexBuffer[a].stride};return i},e.prototype.serialize=function(){for(var e={geometries:[{indexBuffer:this.geometries[0].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[1].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[2].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[3].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[4].indexBuffer.buffer,vertexBuffer:{}}]},t=0;t<5;++t)for(var r in this.geometries[t].vertexBuffer)e.geometries[t].vertexBuffer[r]={data:this.geometries[t].vertexBuffer[r].data.buffer,stride:this.geometries[t].vertexBuffer[r].stride};return e},e.prototype.getBuffers=function(){for(var e=[],t=0;t<5;++t)for(var r in e.push(this.geometries[t].indexBuffer.buffer),this.geometries[t].vertexBuffer)e.push(this.geometries[t].vertexBuffer[r].data.buffer);return e},e}()}.apply(null,i))||(e.exports=n)},SkDs:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("apbF")],void 0===(n=function(e,t,r){function i(e,t,r){if(!e.allDirty)if(null!=e.from&&null!=e.count){var i=Math.min(e.from,t),n=Math.max(e.from+e.count,t+r)-i;e.from=i,e.count=n}else e.from=t,e.count=r}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._dirties=r.createGeometryData(function(e){return{indices:{from:null,count:null,allDirty:!1}}},function(e,t){return{vertices:{from:null,count:null,allDirty:!1}}})}return e.prototype.markAllClean=function(){for(var e=0,t=this._dirties;e<t.length;e++){var r=t[e];for(var i in r.data.indices.from=null,r.data.indices.count=null,r.data.indices.allDirty=!1,r.buffers)r.buffers[i].data.vertices.from=null,r.buffers[i].data.vertices.count=null,r.buffers[i].data.vertices.allDirty=!1}},e.prototype.markAllDirty=function(){for(var e=0,t=this._dirties;e<t.length;e++){var r=t[e];for(var i in r.data.indices.allDirty=!0,r.buffers)r.buffers[i].data.vertices.allDirty=!0}},e.prototype.forEach=function(e){for(var t=0;t<this._dirties.length;++t){var r=this._dirties[t],i={};for(var n in r.buffers){var a=r.buffers[n].data.vertices;(a.allDirty||null!=a.from&&null!=a.count&&0<a.count)&&(i[n]=a)}var o,s=r.data.indices;((o=s.allDirty||null!=s.from&&null!=s.count&&0<s.count?{indices:s,vertices:i}:{indices:null,vertices:i}).indices||0<Object.keys(o).length)&&e(o,t)}},e.prototype.markDirtyIndices=function(e,t,r){i(this._dirties[e].data.indices,t,r)},e.prototype.markDirtyVertices=function(e,t,r,n){i(this._dirties[e].buffers[t].data.vertices,r,n)},e}();t.default=n}.apply(null,i))||(e.exports=n)},Sq9p:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("H1tY"),r("Zry2"),r("apbF")],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0});var a=["FILL","LINE","MARKER","TEXT","LABEL"],o=function(){function e(e,t,r,a){for(var o in this._strides=e,this._displayList=t,this._freeListsAndStorage={},this._dirtyMap=null,this._dirtyMap=r,e)for(var s in this._freeListsAndStorage[o]={vtxFreeList:a?new i.FreeList(a):null,idxFreeList:a?new i.FreeList(a):null,vertexBuffers:{},indexBuffer:a?new Uint32Array(a):null},e[o])this._freeListsAndStorage[o].vertexBuffers[s]={data:a?n.allocateTypedArrayBuffer(a,e[o][s]):null,stride:e[o][s]}}return e.fromTileData=function(t,r){var o=function(e){var t=e.getStrides(),r={};for(var i in t)r[a[i]]=t[i];return r}(t),s=[0,0,0,0,0],l=[0,0,0,0,0],u=[];t.tileDisplayData.displayObjectRegistry.forEach(function(e){u.push(e)});for(var f=0,d=u;f<d.length;f++)for(var p=0,y=d[f].displayRecords;p<y.length;p++){var c=y[p];s[c.geometryType]=Math.max(s[c.geometryType],c.vertexFrom+c.vertexCount),l[c.geometryType]=Math.max(l[c.geometryType],c.indexFrom+c.indexCount)}for(var v=new e(o,t.tileDisplayData.displayList,r,null),h=0;h<t.tileBufferData.geometries.length;++h){var m=s[h],g=l[h],x=t.tileBufferData.geometries[h],_=a[h],b=v._storageFor(_),D=t.tileBufferData.geometries[h].indexBuffer;b.indexBuffer=D,b.idxFreeList=new i.FreeList(D.length),b.idxFreeList.allocate(g);var L=void 0;for(var B in x.vertexBuffer){var F=t.tileBufferData.geometries[h].vertexBuffer[B];b.vertexBuffers[B].data=F.data,b.vertexBuffers[B].stride=F.stride;var T=n.strideToPackingFactor(F.stride),w=F.data.length*T/F.stride;L||(L=w)}b.vtxFreeList=new i.FreeList(L),b.vtxFreeList.allocate(m)}return v},e.prototype.delete=function(e){var t=a[e.geometryType];this._freeVertices(t,e.vertexFrom,e.vertexCount),this._freeIndices(t,e.indexFrom,e.indexCount),this._displayList.removeFromList(e),e.vertexFrom=void 0,e.indexFrom=void 0},e.prototype.setMeshData=function(e,t,r,i,o){var s=a[e.geometryType];e.meshData=null;var l=void 0,u=void 0;void 0===e.vertexFrom?(u=t.vertexCount,l=this._allocateVertices(s,u)):t.vertexCount>e.vertexCount?(this._freeVertices(s,e.vertexFrom,e.vertexCount),u=t.vertexCount,l=this._allocateVertices(s,u)):u=t.vertexCount===e.vertexCount?(l=e.vertexFrom,e.vertexCount):(this._freeVertices(s,e.vertexFrom+t.vertexCount,e.vertexCount-t.vertexCount),l=e.vertexFrom,t.vertexCount);var f=!0,d=void 0,p=void 0,y=void 0;if(void 0===e.indexFrom?(d=o,y=t.indexCount,p=this._allocateIndices(s,y)):t.indexCount>e.indexCount?(d=this._displayList.removeFromList(e),this._freeIndices(s,e.indexFrom,e.indexCount),y=t.indexCount,p=this._allocateIndices(s,y)):y=t.indexCount===e.indexCount?(f=!1,p=e.indexFrom,e.indexCount):(d=this._displayList.removeFromList(e),this._freeIndices(s,e.indexFrom+t.indexCount,e.indexCount-t.indexCount),p=e.indexFrom,t.indexCount),-1===l||-1===p)return-1!==l&&this._freeVertices(s,l,u),-1!==p&&this._freeIndices(s,p,y),e.setMeshDataFromBuffers(t,r,i),e.vertexFrom=void 0,e.vertexCount=0,e.indexFrom=void 0,e.indexCount=0,!1;var c=this._storageFor(s);if(n.copyMeshData(l,p,c.vertexBuffers,c.indexBuffer,t,r,i),e.vertexFrom=l,e.indexFrom=p,e.vertexCount=t.vertexCount,e.indexCount=t.indexCount,this._dirtyMap)for(var v in this._dirtyMap.markDirtyIndices(e.geometryType,e.indexFrom,e.indexCount),r)this._dirtyMap.markDirtyVertices(e.geometryType,v,e.vertexFrom,e.vertexCount);return f&&this._displayList.addToList(e,d),!0},e.prototype._allocateVertices=function(e,t){var r=this._storageFor(e),i=r.vtxFreeList.allocate(t);return-1===i?-1:.5<r.vtxFreeList.fragmentation?-1:i},e.prototype._freeVertices=function(e,t,i){var a=this._storageFor(e);if(a.vtxFreeList.free(t,i),r("esri-feature-tiles-debug"))for(var o in a.vertexBuffers)for(var s=a.vertexBuffers[o].data,l=this._stridesFor(e,o),u=n.strideToPackingFactor(l),f=t*l/u,d=i*l/u,p=f;p<f+d;++p)s[p]=0},e.prototype._freeIndices=function(e,t,i){var n=this._storageFor(e);if(n.idxFreeList.free(t,i),r("esri-feature-tiles-debug"))for(var a=n.indexBuffer,o=t;o<t+i;++o)a[o]=0},e.prototype._allocateIndices=function(e,t){var r=this._storageFor(e),i=r.idxFreeList.allocate(t);return-1===i?-1:.5<r.idxFreeList.fragmentation?-1:i},e.prototype._storageFor=function(e){return this._freeListsAndStorage[e]},e.prototype._stridesFor=function(e,t){return this._strides[e][t]},e}();t.default=o}.apply(null,i))||(e.exports=n)},Zry2:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._largestRange=null,this._parent=e,this._updateLargestRange()}return Object.defineProperty(e.prototype,"largestRange",{get:function(){return this._largestRange},enumerable:!0,configurable:!0}),e.prototype.rangeCreated=function(e){(!this._largestRange||e.count>this._largestRange.count)&&(this._largestRange=e)},e.prototype.rangeResized=function(e,t,r){e===this._largestRange?e.count<r&&this._updateLargestRange():(!this._largestRange||e.count>this._largestRange.count)&&(this._largestRange=e)},e.prototype.findBestRange=function(e){for(var t=this._parent._freeHead,r=null;null!==t;)t.count>=e&&(!r||t.count-e<r.count-e)&&(r=t),t=t.next;return r},e.prototype.findAdjacentRanges=function(e,t){for(var r=!0,i=!1,n=null,a=this._parent._freeHead;r&&!i;){var o=null!==n?n.from+n.count:0,s=null!==a?a.from:this._parent._size;o<=e&&e+t<=s?i=!(r=!1):null!==a?a=(n=a).next:r=!1}return[n,a]},e.prototype._updateLargestRange=function(){for(var e=null,t=this._parent._freeHead;null!==t;)(!e||t.count>e.count)&&(e=t),t=t.next;this._largestRange=e},e}(),i=function(){function e(e,t){this._allocated=0,this._size=e,this._freeHead=0<e?{from:0,count:e,prev:null,next:null}:null,this._bookKeeper=t||new r(this),this._freeHead&&this._bookKeeper.rangeCreated(this._freeHead)}return e.prototype.allocate=function(t){var r=this._bookKeeper.findBestRange(t);if(null===r)return-1;var i=r.from,n=r.count;if(r.from+=t,r.count-=t,this._bookKeeper.rangeResized(r,i,n),this._allocated+=t,0===r.count){var a=null!==r.prev?this._freeHead:r.next;e._removeRange(r),this._freeHead=a}return i},e.prototype.free=function(t,r){var i=this._bookKeeper.findAdjacentRanges(t,r),n=i[0],a=i[1],o={from:t,count:r,prev:n,next:a};if(null!==n&&(n.next=o),null!==a&&(a.prev=o),this._bookKeeper.rangeCreated(o),this._allocated-=r,null!==a&&o.from+o.count===a.from){var s=o.from,l=o.count;e._fuse(o,a),e._removeRange(a),this._bookKeeper.rangeResized(o,s,l),this._bookKeeper.rangeResized(a,void 0,0)}null!==n&&n.from+n.count===o.from&&(s=n.from,l=n.count,e._fuse(n,o),e._removeRange(o),this._bookKeeper.rangeResized(n,s,l),this._bookKeeper.rangeResized(o,void 0,0)),this._freeHead=null!==o.prev?this._freeHead:o},Object.defineProperty(e.prototype,"fragmentation",{get:function(){var e=this._size-this._allocated;return 0===e?0:1-this._bookKeeper.largestRange.count/e},enumerable:!0,configurable:!0}),e._removeRange=function(e){null!==e.prev?null!==e.next?(e.prev.next=e.next,e.next.prev=e.prev):e.prev.next=null:null!==e.next&&(e.next.prev=null)},e._fuse=function(e,t){e.count+=t.count,e.next=t.next,t.from+=t.count,t.count=0,null!==t.next&&(t.next.prev=e)},e}();t.FreeList=i}.apply(null,i))||(e.exports=n)},oDRR:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("LxLY"),r("jBNx"),r("8uEs"),r("oZZu"),r("4oaH"),r("tI6k"),r("apbF")],void 0===(n=function(e,t,r,i,n,a,o,s,l){function u(e,t){var r=t.length;if(e<t[0].value||1===r)return t[0].size;for(var i=1;i<r;i++)if(e<t[i].value){var n=(e-t[i-1].value)/(t[i].value-t[i-1].value);return t[i-1].size+n*(t[i].size-t[i-1].size)}return t[r-1].size}function f(e,t,r){void 0===r&&(r=0);var i=t.r,n=t.g,a=t.b,o=t.a;e[r+0]=i*o/255,e[r+1]=n*o/255,e[r+2]=a*o/255,e[r+3]=o}var d=function(e,t,r){for(var i=16*r,n=i,a=0;n<Math.min(i+16,e.length);n++,a++)e[n]=t[a]},p=a.mat4f32.create(),y=a.mat4f32.fromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return function(){function e(){this.symbolLevels=[],this.vvColorValues=new Float32Array(8),this.vvColors=new Float32Array(32),this.vvOpacityValues=new Float32Array(8),this.vvOpacities=new Float32Array(8),this.vvSizeMinMaxValue=new Float32Array(4),this.vvSizeFieldStopsValues=new Float32Array(6),this.vvSizeFieldStopsSizes=new Float32Array(6),this.ddColors=new Float32Array(32),this.ddBackgroundColor=new Float32Array(4),this.insideEffect=new Float32Array(16*s.MAX_FILTERS),this.outsideEffect=new Float32Array(16*s.MAX_FILTERS),this.effectCount=0,this._vvMaterialParameters={vvSizeEnabled:!1,vvColorEnabled:!1,vvRotationEnabled:!1,vvRotationType:"geographic",vvOpacityEnabled:!1},this.symbolLevels.push(0),d(this.insideEffect,p,0),d(this.outsideEffect,y,0);for(var e=1;e<s.MAX_FILTERS;e++)d(this.insideEffect,p,e),d(this.outsideEffect,p,e)}return Object.defineProperty(e.prototype,"vvMaterialParameters",{get:function(){return this._vvMaterialParameters},enumerable:!0,configurable:!0}),e.prototype.update=function(e,t,i,n){var a=this;switch(r.isSome(n)?(n.forEach(function(e,t){return a._updateEffects(t,e)}),this.effectCount=n.length):this.effectCount=0,i&&this._updateVisualVariables(i,e),t.type){case"dot-density":this._updateDotDensityInfo(t.attributes),this.ddDotValue=t.referenceDotValue,this.ddDotScale=t.referenceScale,this.ddDotSize=t.dotSize,this.ddDotBlending=t.blendDots,this.ddSeed=t.seed,f(this.ddBackgroundColor,t.backgroundColor)}},e.prototype.getVariation=function(){return{ddDotBlending:this.ddDotBlending,outsideLabelsVisible:this.outsideLabelsVisible,effectCount:this.effectCount}},e.prototype.getVariationHash=function(){return(this.ddDotBlending?1:0)|(this.outsideLabelsVisible?1:0)<<1|this.effectCount<<2},e.prototype._updateEffects=function(e,t){var i=e+1;if(r.isSome(t)&&t.filter&&t.filter.enabled){this.outsideLabelsVisible=t.excludedLabelsVisible;var n=t.parsedIncludedEffect,a=t.parsedExcludedEffect;r.isSome(n)?d(this.insideEffect,n.getColorMatrix(),i):d(this.insideEffect,p,i),r.isSome(a)?d(this.outsideEffect,a.getColorMatrix(),i):d(this.outsideEffect,p,i)}else d(this.insideEffect,p,i),d(this.outsideEffect,p,i)},e.prototype._updateVisualVariables=function(e,t){var r=this._vvMaterialParameters;if(r.vvOpacityEnabled=!1,r.vvSizeEnabled=!1,r.vvColorEnabled=!1,r.vvRotationEnabled=!1,e){var a=e.size;if(a){if(r.vvSizeEnabled=!0,a.minMaxValue){var s=a.minMaxValue,f=void 0,d=void 0;if(l.isDefined(s.minSize)&&l.isDefined(s.maxSize))if(l.isNumber(s.minSize)&&l.isNumber(s.maxSize))f=i.pt2px(s.minSize),d=i.pt2px(s.maxSize);else{var p=t.scale;f=i.pt2px(u(p,s.minSize.stops)),d=i.pt2px(u(p,s.maxSize.stops))}this.vvSizeMinMaxValue.set([s.minDataValue,s.maxDataValue,f,d])}if(a.scaleStops&&(this.vvSizeScaleStopsValue=i.pt2px(u(t.scale,a.scaleStops.stops))),a.unitValue){var y=n.getMetersPerUnitForSR(t.spatialReference)/o.meterIn[a.unitValue.unit];this.vvSizeUnitValueToPixelsRatio=y/t.resolution}a.fieldStops&&(this.vvSizeFieldStopsValues.set(a.fieldStops.values),this.vvSizeFieldStopsSizes.set(a.fieldStops.sizes))}var c=e.color;c&&(r.vvColorEnabled=!0,this.vvColorValues.set(c.values),this.vvColors.set(c.colors));var v=e.opacity;v&&(r.vvOpacityEnabled=!0,this.vvOpacityValues.set(v.values),this.vvOpacities.set(v.opacities));var h=e.rotation;h&&(r.vvRotationEnabled=!0,r.vvRotationType=h.type)}},e.prototype._updateDotDensityInfo=function(e){for(var t=this.ddColors,r=0;r<Math.min(s.DOT_DENSITY_MAX_FIELDS,e.length);r++)f(t,e[r].color,4*r)},e}()}.apply(null,i))||(e.exports=n)},qe2g:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){void 0===e&&(e=400),this.duration=e,this._lastTime=0,this._elapsed=0,this._value=0,this._finished=!1}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._lastTime=0,this._elapsed=0,this._value=0},e.prototype.step=function(){var e=performance.now();if(0===this._lastTime)return this._lastTime=e,!(this._value=0);if(this._elapsed>=this.duration)return!0;var t=e-this._lastTime;return this._elapsed+=t,this._lastTime=e,this._value=Math.min(this._elapsed/this.duration,1),!1},e}();t.default=r}.apply(null,i))||(e.exports=n)},rYkQ:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("AwqN"),r("PwbG"),r("tTR7"),r("apbF"),r("apbF"),r("azm3"),r("hNI9"),r("ph8t"),r("Ed/z"),r("flWe"),r("3vQA")],void 0===(n=function(e,t,r,i,n,a,o,s,l,u,f,d,p){var y=new r.default,c=new r.default;function v(e,t){var r={};for(var i in e){var n={data:o.allocateTypedArrayBuffer(t,e[i]),stride:e[i]};r[i]=n}return r}return function(){function e(){this.tileDisplayData=null,this.tileBufferData=null}return e.prototype.reshuffle=function(){y.reset();for(var t=n.groupRecordsByGeometryType(this.tileDisplayData.displayObjects),r=0,s=t;r<s.length;r++)for(var l=0,u=D=s[r];l<u.length;l++)(F=u[l])&&y.needMore(F.geometryType,F.meshData?F.meshData.vertexCount:F.vertexCount,F.meshData?F.meshData.indexData.length:F.indexCount);for(var f=t.length,d=new i,p=0;p<f;++p){d.geometries[p].indexBuffer=new Uint32Array(Math.round(1.15*y.indicesFor(p)));var v=[];for(var h in this.tileBufferData.geometries[p].vertexBuffer)v.push(this.tileBufferData.geometries[p].vertexBuffer[h].stride);var m=e._computeVertexAlignment(v),g=Math.round(1.15*y.verticesFor(p)),x=e._align(g,m);for(var _ in this.tileBufferData.geometries[p].vertexBuffer){var b=this.tileBufferData.geometries[p].vertexBuffer[_].stride;d.geometries[p].vertexBuffer[_]={stride:b,data:o.allocateTypedArrayBuffer(x,b)}}}for(c.reset(),this.tileDisplayData.displayList.clear(),p=0;p<f;++p){for(var D,L=0,B=D=t[p];L<B.length;L++){var F;if((F=B[L]).meshData)F.writeMeshDataToBuffers(c.verticesFor(p),d.geometries[p].vertexBuffer,c.indicesFor(p),d.geometries[p].indexBuffer),F.meshData=null;else{var T=this.tileBufferData.geometries[p].vertexBuffer,w=this.tileBufferData.geometries[p].indexBuffer,I=d.geometries[p].vertexBuffer,R=d.geometries[p].indexBuffer,C=c.verticesFor(p),M=c.indicesFor(p);a.copyMeshData(C,M,I,R,F,T,w),F.vertexFrom=C,F.indexFrom=M}c.needMore(p,F.vertexCount,F.indexCount)}this.tileDisplayData.displayList.unified||this.tileDisplayData.displayList.addToList(D)}if(this.tileDisplayData.displayList.unified)for(var z=0,O=this.tileDisplayData.displayObjects;z<O.length;z++){var P=O[z];this.tileDisplayData.displayList.addToList(P.displayRecords)}this.tileBufferData=d},e.prototype.getStrides=function(){for(var e=[],t=0;t<this.tileBufferData.geometries.length;++t){var r=this.tileBufferData.geometries[t];for(var i in e[t]={},r.vertexBuffer)e[t][i]=r.vertexBuffer[i].stride}return e},e.prototype.clone=function(){var t=new e;return t.tileBufferData=this.tileBufferData.clone(),t.tileDisplayData=this.tileDisplayData.clone(),t},e.prototype._guessSize=function(){for(var e=this.tileDisplayData.displayObjects,t=Math.min(e.length,4),r=0,i=0;i<t;i++)r=Math.max(r,e[i].displayRecords.length);return 2*(12*e.length+e.length*r*40)},e.prototype.serialize=function(){var e=this.tileBufferData.serialize(),t=this.tileBufferData.getBuffers(),r=this.tileDisplayData.serialize(new p.default(Int32Array,this._guessSize())).buffer();return t.push(r),{result:{displayData:r,bufferData:e},transferList:t}},e.decode=function(t){var r=d.deserializeList(new f.default(t.displayObjects),s),i={};for(var n in t.vertexBuffersMap)i[n]=u.VertexBuffers.decode(t.vertexBuffersMap[n]);return e.fromMeshData({displayObjects:r,vertexBuffersMap:i})},e.fromMeshData=function(t){var r=new e,a=new n.default,o=new i;for(var s in a.displayObjects=t.displayObjects,t.vertexBuffersMap){var l=t.vertexBuffersMap[s];o.geometries[s].indexBuffer=l.indexBuffer,o.geometries[s].vertexBuffer=l.namedBuffers}return r.tileDisplayData=a,r.tileBufferData=o,r},e.bind=function(t,r){var i=new e;return i.tileDisplayData=t,i.tileBufferData=r,i},e.create=function(t,r){var a=new e;a.tileDisplayData=new n.default;for(var o=[0,0,0,0,0],s=[0,0,0,0,0],u=[[],[],[],[],[]],f=0,d=a.tileDisplayData.displayObjects=t;f<d.length;f++)for(var p=0,y=d[f].displayRecords;p<y.length;p++){var c=y[p];u[c.geometryType].push(c),o[c.geometryType]+=c.meshData.vertexCount,s[c.geometryType]+=c.meshData.indexData.length}for(var h,m=new i,g=[(h=r).fill||{},h.line||{},h.icon||{},h.text||{},h.label||{}],x=0;x<5;x++){var _=new Uint32Array(s[x]),b=v(g[x],o[x]);l.writeAllMeshDataToBuffers(u[x],b,_),m.geometries[x]={indexBuffer:_,vertexBuffer:b}}return a.tileBufferData=m,a},e._align=function(e,t){var r=e%t;return 0===r?e:e+(t-r)},e._computeVertexAlignment=function(e){for(var t=!1,r=!1,i=0,n=e;i<n.length;i++){var a=n[i];a%4==2?t=!0:a%4!=0&&(r=!0)}return r?4:t?2:1},e}()}.apply(null,i))||(e.exports=n)},tTR7:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("Dikz"),r("azm3"),r("flWe")],void 0===(n=function(e,t,r,i,n){function a(e){for(var t=[[],[],[],[],[]],r=0,i=e;r<i.length;r++)for(var n=0,a=i[r].displayRecords;n<a.length;n++){var o=a[n];t[o.geometryType].push(o)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.groupRecordsByGeometryType=a;var o=function(){function e(){}return Object.defineProperty(e.prototype,"displayObjectRegistry",{get:function(){if(!this._displayObjectRegistry){this._displayObjectRegistry=new Map;for(var e=0,t=this.displayObjects;e<t.length;e++){var r=t[e];this._displayObjectRegistry.set(r.id,r)}}return this._displayObjectRegistry},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayList",{get:function(){return this._displayList},enumerable:!0,configurable:!0}),e.prototype.computeDisplayList=function(e){if(this._displayList=new r(e),e)for(var t=0,i=this.displayObjects;t<i.length;t++)for(var n=0,o=i[t].displayRecords;n<o.length;n++){var s=o[n];this._displayList.addToList(s)}else for(var l=a(this.displayObjects),u=l.length,f=0;f<u;++f){var d=l[f];this._displayList.addToList(d)}},e.prototype.clone=function(){var t=new e;return this.displayObjects&&(t.displayObjects=this.displayObjects.map(function(e){return e.clone()})),t},e.prototype.serialize=function(e){return n.serializeList(e,this.displayObjects),e},e.prototype._deserializeObjects=function(e){for(var t=e.readInt32(),r=new Array(t),n=new Map,a=0;a<r.length;++a){var o=i.deserialize(e);r[a]=o,n.set(o.id,o)}this.displayObjects=r,this._displayList=null,this._displayObjectRegistry=n},e.deserialize=function(t){var r=new e;return r._deserializeObjects(t),r},e}();t.default=o}.apply(null,i))||(e.exports=n)},"u90+":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("Lzvl")],void 0===(n=function(e,t,r){function i(e){return e&&"upperLeft"===e.originPosition}function n(e,t){var r=e.scale,i=e.translate;return Math.round((t-i[0])/r[0])}function a(e,t){var r=e.scale,i=e.translate;return Math.round((i[1]-t)/r[1])}function o(e,t,r){for(var i,o,s,l,u=[],f=0;f<r.length;f++){var d=r[f];f>0?(s=n(e,d[0]),l=a(e,d[1]),s===i&&l===o||(u.push(t(d,s-i,l-o)),i=s,o=l)):(i=n(e,d[0]),o=a(e,d[1]),u.push(t(d,i,o)))}return u.length>0?u:null}function s(e,t,r,i){return o(e,r?i?T:F:i?F:B,t)}function l(e,t,r,i){for(var n=[],a=r?i?T:F:i?F:B,s=0;s<t.length;s++){var l=o(e,a,t[s]);l&&l.length>=3&&n.push(l)}return n.length?n:null}function u(e,t,r,i){for(var n=[],a=r?i?T:F:i?F:B,s=0;s<t.length;s++){var l=o(e,a,t[s]);l&&l.length>=2&&n.push(l)}return n.length?n:null}function f(e,t){var r=e.scale,i=e.translate;return t*r[0]+i[0]}function d(e,t){var r=e.scale;return e.translate[1]-t*r[1]}function p(e,t,r){var i=new Array(r.length);if(!r.length)return i;var n=e.scale,a=n[0],o=n[1],s=f(e,r[0][0]),l=d(e,r[0][1]);i[0]=t(r[0],s,l);for(var u=1;u<r.length;u++){var p=r[u];s+=p[0]*a,l-=p[1]*o,i[u]=t(p,s,l)}return i}function y(e,t,r){for(var i=new Array(r.length),n=0;n<r.length;n++)i[n]=p(e,t,r[n]);return i}function c(e,t,r,i){return p(e,r?i?T:F:i?F:B,t)}function v(e,t,r,i){return y(e,r?i?T:F:i?F:B,t)}function h(e,t,r,i){return y(e,r?i?T:F:i?F:B,t)}function m(e,t,r){for(var i=r[0],n=i[0],a=i[1],o=Math.min(n,t[0]),s=Math.min(a,t[1]),l=Math.max(n,t[2]),u=Math.max(a,t[3]),f=1;f<r.length;f++){var d=r[f],p=d[0],y=d[1];n+=p,a+=y,p<0&&(o=Math.min(o,n)),p>0&&(l=Math.max(l,n)),y<0?s=Math.min(s,a):y>0&&(u=Math.max(u,a))}return e[0]=o,e[1]=s,e[2]=l,e[3]=u,e}function g(e,t){if(!t.length)return null;e[0]=e[1]=Number.POSITIVE_INFINITY,e[2]=e[3]=Number.NEGATIVE_INFINITY;for(var r=0;r<t.length;r++)m(e,e,t[r]);return e}function x(e,t,r,i,o){return t.xmin=n(e,r.xmin),t.ymin=a(e,r.ymin),t.xmax=n(e,r.xmax),t.ymax=a(e,r.ymax),t!==r&&(i&&(t.zmin=r.zmin,t.zmax=r.zmax),o&&(t.mmin=r.mmin,t.mmax=r.mmax)),t}function _(e,t,r,i,n){return t.points=s(e,r.points,i,n),t}function b(e,t,r,i,o){return t.x=n(e,r.x),t.y=a(e,r.y),t!==r&&(i&&(t.z=r.z),o&&(t.m=r.m)),t}function D(e,t,r,i,n){var a=l(e,r.rings,i,n);return a?(t.rings=a,t):null}function L(e,t,r,i,n){var a=u(e,r.paths,i,n);return a?(t.paths=a,t):null}Object.defineProperty(t,"__esModule",{value:!0});var B=function(e,t,r){return[t,r]},F=function(e,t,r){return[t,r,e[2]]},T=function(e,t,r){return[t,r,e[2],e[3]]};t.toQuantizationTransform=function(e){return e?{originPosition:"upperLeft",scale:[e.tolerance,e.tolerance],translate:[e.extent.xmin,e.extent.ymax]}:null},t.equals=function(e,t){return e===t||null==e&&null==t||null!=e&&null!=t&&(i(e)?(r=e.translate[0],n=e.translate[1],a=e.scale[0]):(r=e.extent.xmin,n=e.extent.ymax,a=e.tolerance),i(t)?(o=t.translate[0],s=t.translate[1],l=t.scale[0]):(o=t.extent.xmin,s=t.extent.ymax,l=t.tolerance),r===o&&n===s&&a===l);var r,n,a,o,s,l},t.quantizeX=n,t.quantizeY=a,t.quantizeBounds=function(e,t,r){return t[0]=n(e,r[0]),t[3]=a(e,r[1]),t[2]=n(e,r[2]),t[1]=a(e,r[3]),t},t.quantizePoints=s,t.quantizeRings=l,t.quantizePaths=u,t.hydrateX=f,t.hydrateY=d,t.hydrateCoordsArray=p,t.hydrateCoordsArrayArray=y,t.hydrateBounds=function(e,t,r){return r?(t[0]=f(e,r[0]),t[1]=d(e,r[3]),t[2]=f(e,r[2]),t[3]=d(e,r[1]),t):[f(e,t[0]),d(e,t[3]),f(e,t[2]),d(e,t[1])]},t.hydratePoints=c,t.hydratePaths=v,t.hydrateRings=h,t.getQuantizedBoundsCoordsArray=m,t.getQuantizedBoundsCoordsArrayArray=g,t.getQuantizedBoundsPoints=function(e){var t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return m(t,t,e)},t.getQuantizedBoundsPaths=function(e){return g([0,0,0,0],e)},t.getQuantizedBoundsRings=function(e){return g([0,0,0,0],e)},t.quantizeExtent=x,t.quantizeMultipoint=_,t.quantizePoint=b,t.quantizePolygon=D,t.quantizePolyline=L,t.quantizeGeometry=function(e,t){return e&&t?r.isPoint(t)?b(e,{},t,!1,!1):r.isPolyline(t)?L(e,{},t,!1,!1):r.isPolygon(t)?D(e,{},t,!1,!1):r.isMultipoint(t)?_(e,{},t,!1,!1):r.isExtent(t)?x(e,{},t,!1,!1):null:null},t.hydrateExtent=function(e,t,r,i,n){return t.xmin=f(e,r.xmin),t.ymin=d(e,r.ymin),t.xmax=f(e,r.xmax),t.ymax=d(e,r.ymax),t!==r&&(i&&(t.zmin=r.zmin,t.zmax=r.zmax),n&&(t.mmin=r.mmin,t.mmax=r.mmax)),t},t.hydrateMultipoint=function(e,t,r,i,n){return t.points=c(e,r.points,i,n),t},t.hydratePoint=function(e,t,r,i,n){return t.x=f(e,r.x),t.y=d(e,r.y),t!==r&&(i&&(t.z=r.z),n&&(t.m=r.m)),t},t.hydratePolygon=function(e,t,r,i,n){return t.rings=h(e,r.rings,i,n),t},t.hydratePolyline=function(e,t,r,i,n){return t.paths=v(e,r.paths,i,n),t}}.apply(null,i))||(e.exports=n)},xf8T:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){return[1,0,0,0,1,0,0,0,1]},t.clone=function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},t.fromValues=function(e,t,r,i,n,a,o,s,l){return[e,t,r,i,n,a,o,s,l]},t.createView=function(e,t){return new Float64Array(e,t,9)}}.apply(null,i))||(e.exports=n)},xxo4:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("apbF"),r("QFi0")],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.geometryMap=r.createGeometryData(function(t){return{indexBuffer:i.createIndex(e,35044),vao:null}},function(t,n){return{vertexBuffer:i.createVertex(e,r.C_VBO_INFO[n])}})}return e.prototype.dispose=function(){for(var e in this.geometryMap){var t=this.geometryMap[e];for(var r in t.data.vao&&t.data.vao.dispose(!1),t.data.indexBuffer&&t.data.indexBuffer.dispose(),t.buffers)t.buffers[r]&&t.buffers[r].data.vertexBuffer.dispose()}},e.prototype.get=function(e){var t=this.geometryMap[e],r={};for(var i in t.buffers)r[i]=t.buffers[i].data.vertexBuffer;return{indexBuffer:t.data.indexBuffer,get vao(){return t.data.vao},set vao(e){t.data.vao=e},vertexBufferMap:r}},e.prototype.has=function(e){return null!=this.geometryMap[e]},e.prototype.upload=function(e,t){var r=this;t.forEach(function(t,i){r._upload(t,i,e)})},e.prototype._upload=function(e,t,r){if(e.indices&&(e.indices.allDirty?this._uploadIndices(r,t):null!=e.indices.from&&null!=e.indices.count&&this._uploadIndices(r,t,e.indices.from,e.indices.count)),e.vertices){var i=e.vertices;for(var n in i){var a=i[n];a.allDirty?this._uploadVertices(r,t,n):null!=a.from&&null!=a.count&&this._uploadVertices(r,t,n,a.from,a.count)}}},e.prototype._uploadVertices=function(e,t,r,i,n){var a=this.geometryMap[t];if(a){var o=e.geometries[t].vertexBuffer[r];if(o){var s=o.stride,l=o.data.buffer;a.buffers[r]&&0<l.byteLength&&(null!=i&&null!=n?a.buffers[r].data.vertexBuffer.setSubData(l,i*s,i*s,(i+n)*s):a.buffers[r].data.vertexBuffer.setData(l))}}},e.prototype._uploadIndices=function(e,t,r,i){var n=this.geometryMap[t];if(n){var a=e.geometries[t].indexBuffer.buffer;n.data.indexBuffer&&0<a.byteLength&&(null!=r&&null!=i?n.data.indexBuffer.setSubData(a,4*r,4*r,4*(r+i)):n.data.indexBuffer.setData(a))}},e}();t.default=n}.apply(null,i))||(e.exports=n)}}]);
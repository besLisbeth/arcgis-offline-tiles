(function(){(this||window).webpackJsonp.registerAbsMids({"esri/core/requireUtils":"ADZV","esri/views/layers/WMSLayerView":"GLSx","esri/views/3d/layers/WMSLayerView3D":"KqIV"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{ADZV:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("qMld")],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.when=function e(t,i){return Array.isArray(i)?r.create(function(e){t(i,function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e(t)})}):e(t,[i]).then(function(e){return e[0]})},t.getAbsMid=function(e,t,r){return t.toAbsMid?t.toAbsMid(e):r.id.replace(/\/[^\/]*$/gi,"/")+e}}.apply(null,i))||(e.exports=n)},GLSx:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("Q2wQ"),r("HZ3d"),r("ma1f"),r("qMld"),r("Vx27"),r("7XLS")],void 0===(n=function(e,t,r,i,n,a,o,s,p,u){return function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.fetchPopupFeatures=function(e){return a(this,void 0,void 0,function(){var t,r,i,a,p,u,c,h,l;return n(this,function(n){if(t=this.layer,!e)return[2,s.reject(new o("wmslayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:t}))];if(!(r=t.popupEnabled))return[2,s.reject(new o("wmslayerview:fetchPopupFeatures","popupEnabled should be true",{popupEnabled:r}))];if(i=this.createFetchPopupFeaturesQuery(e),a=i.extent,p=i.width,u=i.height,c=i.x,h=i.y,!(a&&p&&u))throw new o("wmslayerview:fetchPopupFeatures","WMSLayer does not support fetching features.",{extent:a,width:p,height:u});return[2,(l=t.fetchFeatureInfo(a,p,u,c,h))?l.then(function(e){return[e]}):s.resolve([])]})})},i([p.property()],t.prototype,"layer",void 0),i([p.subclass("esri.views.layers.WMSLayerView")],t)}(p.declared(u))}.apply(null,i))||(e.exports=n)},KqIV:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("ma1f"),r("qMld"),r("Vx27"),r("N7S/"),r("UDyV"),r("FRff"),r("GLSx")],void 0===(n=function(e,t,r,i,n,a,o,s,p,u,c){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.initialize=function(){var e=this;this.layer.supportsSpatialReference(this.view.spatialReference)||this.addResolvingPromise(a.reject(new n("layerview:spatial-reference-incompatible","The spatial references supported by this WMS layer are incompatible with the spatial reference of the view"))),this._exportWMSImageParameters=new p({layer:this.layer}),this.handles.add(this._exportWMSImageParameters.watch("version",function(t){e._imageVersion!==t&&(e._imageVersion=t,e.refetch())}))},t.prototype.destroy=function(){this._exportWMSImageParameters&&(this._exportWMSImageParameters.layer=null,this._exportWMSImageParameters.destroy(),this._exportWMSImageParameters=null)},t.prototype.createFetchPopupFeaturesQuery=function(e){var t=this.findExtentInfoAt(e),r=t.extent,i=new s(r[0],r[1],r[2],r[3],t.spatialReference),n=t.imageSize,a=n.width,o=n.height,p=i.width/a;return{extent:i,width:a,height:o,x:Math.round((e.x-i.xmin)/p),y:Math.round((i.ymax-e.y)/p)}},t.prototype.beforeFetch=function(){this._imageVersion=this._exportWMSImageParameters.version},i([o.property({dependsOn:["view.spatialReference","layer.spatialReferences"]})],t.prototype,"suspended",void 0),i([o.subclass("esri.views.3d.layers.WMSLayerView3D")],t)}(o.declared(u,c))}.apply(null,i))||(e.exports=n)}}]);
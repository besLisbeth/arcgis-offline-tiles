(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/2d/layers/features/controllers":"+G7i","esri/views/vectorTiles/Placement":"+fuo","esri/views/vectorTiles/style/StyleLayer":"+j0K","esri/views/vectorTiles/Feature":"+jDF","esri/views/3d/webgl-engine/lib/geometryDataUtils":"+nCE","esri/layers/graphics/data/timeSupport":"/61J","esri/core/libs/earcut/earcut":"1E+e","esri/views/3d/layers/i3s/LEPCC":"1RVI","esri/core/sql/WhereClause":"1eyA","esri/views/3d/support/buffer/InterleavedLayout":"2B1V","esri/views/3d/layers/SceneLayerWorker":"3sea","esri/layers/graphics/data/QueryEngineCapabilities":"4/qq","esri/views/2d/engine/webgl/Geometry":"6+ni","esri/tasks/operations/pbfOptimizedFeatureSet":"6/KI","esri/views/2d/engine/webgl/Rect":"6cAc","esri/views/2d/layers/features/support/TileStore":"6kSU","esri/layers/graphics/data/AttributesBuilder":"700l","esri/views/vectorTiles/FillBucket":"7RGc","esri/renderers/support/pointCloud/pointSizeAlgorithmTypeUtils":"7ahC","esri/views/vectorTiles/style/StyleProperty":"8HQk","esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker":"8fHt","esri/core/requireUtils":"ADZV","esri/views/vectorTiles/LineBucket":"ATxa","esri/renderers/support/pointCloud/pointSizeAlgorithmJSONUtils":"AWmc","esri/views/vectorTiles/BackgroundBucket":"BDCk","esri/views/vectorTiles/GeometryUtils":"BEeJ","esri/views/3d/support/meshProcessing":"BIt0","esri/views/vectorTiles/Conflict":"Cyw2","esri/layers/graphics/sources/support/clientSideDefaults":"DaHD","esri/core/libs/gl-matrix-2/quat":"EuvN","esri/renderers/support/pointCloud/StopInfo":"FPyo","esri/views/3d/support/buffer/workerHelper":"Fsr7","esri/layers/graphics/centroid":"Fzzg","esri/tasks/operations/pbfQueryUtils":"G+Sd","esri/views/2d/engine/webgl/TileClipper":"GDRe","esri/views/3d/layers/i3s/I3SGeometryUtil":"GS8/","esri/views/3d/support/buffer/types":"GntT","esri/views/3d/webgl-engine/lib/edgeRendering/edgeBufferWriters":"HSGS","esri/views/vectorTiles/TileParser":"IZzj","esri/views/2d/engine/webgl/TextShaping":"Id87","esri/views/vectorTiles/SourceLayerData":"IoTX","esri/renderers/support/pointCloud/ColorUniqueValueInfo":"Izrp","esri/tasks/operations/PBFWorker":"J0rm","esri/views/vectorTiles/style/StyleDefinition":"JG06","esri/views/webgl/Util":"Kfys","esri/views/vectorTiles/WorkerTile":"L8sq","esri/views/3d/support/buffer/internals/Vec4":"MI3s","esri/views/3d/support/buffer/glUtil":"MzcX","dojox/string/BidiEngine":"Nh3O","esri/renderers/PointCloudClassBreaksRenderer":"O0KB","esri/views/vectorTiles/CircleBucket":"OksM","esri/layers/graphics/sources/support/CSVSourceWorker":"P0Wv","esri/views/vectorTiles/SymbolBucket":"Q4b/","esri/views/3d/support/orientedBoundingBox":"QyYG","esri/renderers/support/pointCloud/PointSizeFixedSizeAlgorithm":"R+Pf","esri/views/2d/layers/features/processors":"R3Fd","esri/layers/support/LercWorker":"S+mV","esri/views/vectorTiles/Bucket":"SJ7f","esri/views/vectorTiles/MemoryBuffer":"U+RI","esri/views/2d/tiling/enums":"UTXC","esri/layers/graphics/data/spatialQuerySupport":"V1i6","esri/core/executeAsync":"VGdt","esri/views/2d/engine/webgl/GeometryUtils":"VY6u","esri/views/3d/support/buffer/BufferView":"VfPl","esri/views/3d/layers/i3s/I3SBinaryReader":"W2ph","esri/views/3d/webgl-engine/lib/edgeRendering/bufferLayouts":"W7eI","esri/views/vectorTiles/WorkerTileHandler":"WKzk","esri/renderers/PointCloudRenderer":"YT9w","esri/tasks/operations/pbfFeatureServiceParser":"YhCz","esri/layers/graphics/data/attributeSupport":"Ytki","esri/layers/graphics/data/QueryEngine":"ZooB","esri/views/3d/support/buffer/internals/Vec2":"bduU","esri/layers/graphics/data/QueryEngineResult":"d81A","esri/views/3d/webgl-engine/lib/localOrigin":"eHCP","esri/views/3d/layers/i3s/I3SProjectionUtil":"fBiT","esri/views/3d/support/buffer/internals/Mat4":"fHyw","esri/views/2d/layers/features/support/Tile":"fUL3","esri/core/libs/gl-matrix-2/quatf32":"fdzS","esri/renderers/support/pointCloud/ColorModulation":"fsLf","esri/geometry/support/normalizeUtils":"fw2w","esri/core/libs/gl-matrix-2/factories/quatf32":"gKSc","esri/layers/graphics/contains":"gT/q","esri/views/3d/support/buffer/internals/Vec3":"hQPx","esri/core/libs/gl-matrix-2/factories/vec3f32":"iHt0","esri/views/vectorTiles/style/Filter":"jSP+","esri/geometry/support/meshUtils/deduplicate":"jmRc","dojo/Stateful":"kDn6","esri/views/vectorTiles/VertexMemoryBuffer":"kEzy","esri/views/3d/webgl-engine/lib/edgeRendering/edgePreprocessing":"kfwU","esri/core/sql/StandardizedFunctions":"l8NS","esri/renderers/support/pointCloud/PointSizeSplatAlgorithm":"lbhO","esri/views/3d/support/dito":"mCA8","esri/renderers/PointCloudUniqueValueRenderer":"mkxQ","esri/renderers/support/pointCloud/PointSizeAlgorithm":"mu/x","dstore/Csv":"oigr","esri/views/3d/support/buffer/internals/Mat3":"pIuP","esri/views/2d/layers/features/Pipeline":"par7","esri/views/3d/layers/i3s/PointCloudRendererUtil":"qSbo","esri/renderers/PointCloudStretchRenderer":"qasq","esri/layers/graphics/data/FeatureStore":"rfv1","esri/renderers/support/pointCloud/ColorClassBreakInfo":"sYb8","esri/views/2d/engine/webgl/definitions":"tI6k","esri/layers/support/PromiseQueue":"tZaU","esri/core/pbf":"v7zm","esri/views/vectorTiles/style/StyleRepository":"vavG","esri/core/sql/AggregateFunctions":"vjUK","esri/core/libs/gl-matrix-2/vec3f32":"vlC2","esri/views/3d/layers/PointCloudWorker":"wCvz","esri/views/2d/engine/webgl/LineTess":"wURW","esri/core/libs/gl-matrix-2/math/quat":"weYu","esri/views/vectorTiles/IndexMemoryBuffer":"xfOW","esri/views/3d/webgl-engine/lib/PreinterleavedGeometryData":"yBJI","esri/tasks/operations/pbfDehydratedFeatureSet":"yre/","esri/layers/graphics/data/utils":"zDti","esri/views/3d/support/buffer/internals/Scalar":"zlCF"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[49,11,13,75],{"+G7i":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("Q2wQ"),r("HZ3d"),r("ma1f"),r("qMld")],void 0===(n=function(e,t,i,n,o,a,s){function u(e){return e&&"openPorts"in e}function l(e){if(!e)return null;var t={};return e.geometry&&(t.geometry=e.geometry.toJSON()),e.where&&(t.where=e.where),t}function c(e){switch(e){case"on-demand":return s.create(function(e){return Promise.all([r.e(2),r.e(3),r.e(11),r.e(13),r.e(56)]).then(function(){var t=[r("uqzM")];e.apply(null,t)}.bind(this)).catch(r.oe)});case"memory":return s.create(function(e){return Promise.all([r.e(2),r.e(11),r.e(57)]).then(function(){var t=[r("2X62")];e.apply(null,t)}.bind(this)).catch(r.oe)});case"stream":return s.create(function(e){return Promise.all([r.e(2),r.e(3),r.e(11),r.e(13),r.e(58)]).then(function(){var t=[r("A4oT")];e.apply(null,t)}.bind(this)).catch(r.oe)});default:return s.reject(new a("mapview-controller:bad-type","Unable to create controller for unknown type: "+e))}}Object.defineProperty(t,"__esModule",{value:!0}),t.getControllerConfiguration=function(e,t){var r=e.source,i=t&&t.toJSON();if("stream"===e.type){var n={type:"stream",purgeOptions:e.purgeOptions,filter:i,serviceFilter:l(e.filter),processing:null};return s.resolve(n)}if(!e.capabilities.operations.supportsQuery)return s.reject(new a("graphicscontroller:query-capability-required","Service requires query capabilities to be used as a feature layer",{layer:e}));if(u(r)){var o={type:"memory",filter:i,processing:"processing"in e&&e.processing&&e.processing.toWorker()||null};return s.resolve(o)}var c={type:"on-demand",gdbVersion:"gdbVersion"in e?e.gdbVersion:null,historicMoment:"historicMoment"in e&&e.historicMoment?e.historicMoment.getTime():null,processing:"processing"in e&&e.processing?e.processing.toWorker():null,filter:i};return s.resolve(c)},t.createController=function(e,t){return o(this,void 0,void 0,function(){var r,o,a,s,u;return n(this,function(n){switch(n.label){case 0:return[4,c(e.type)];case 1:return r=n.sent().default,o=t.serviceAndViewInfo,a=t.remoteClient,s=t.tileStore,[4,(u=new r(i({},o,{configuration:e,tileStore:s,remoteClient:a}))).setFilter({index:0,filter:e.filter})];case 2:return n.sent(),[2,u]}})})}}.apply(null,i))||(e.exports=n)},"+fuo":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("6+ni"),r("Cyw2"),r("BEeJ")],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r,i,n){void 0===r&&(r=0),void 0===i&&(i=-1),void 0===n&&(n=l),this.x=e,this.y=t,this.angle=r,this.segment=i,this.minzoom=n};t.Anchor=o;var a=function(e,t,r,i,o,a,s){void 0===o&&(o=!1),void 0===a&&(a=l),void 0===s&&(s=n.C_INFINITY),this.anchor=e,this.labelAngle=t,this.glyphAngle=r,this.page=i,this.upsideDown=o,this.minzoom=a,this.maxzoom=s},s=function(e,t,r,i,n,o,a,s,u,l){this.tl=e,this.tr=t,this.bl=r,this.br=i,this.mosaicRect=n,this.labelAngle=o,this.anchor=a,this.minzoom=s,this.maxzoom=u,this.page=l};t.PlacedSymbol=s;var u=function(e,t){this.footprint=e,this.shapes=t};t.Placement=u;var l=.5,c=function(){function e(){this.mapAngle=0,this._conflictEngine=new i.ConflictEngine}return e.prototype.reset=function(){this._conflictEngine.reset()},e.prototype.setAngle=function(e){this.mapAngle=e,this._conflictEngine.setAngle(e)},e.prototype.getIconPlacement=function(e,t,o,a,c,f,p){var h=o.width/o.pixelRatio,d=o.height/o.pixelRatio,y=f.offset[0]-h/2,v=f.offset[1]-d/2,m=y+h,g=v+d,x=o.rect,_=o.sdf?17:2,b=y-_,I=v-_,w=b+x.width/o.pixelRatio,T=I+x.height/o.pixelRatio,C=new r.Point(b,I),S=new r.Point(w,T),E=new r.Point(b,T),B=new r.Point(w,I),P=f.rotate*n.C_DEG_TO_RAD,M=1===f.rotationAlignment;if(e.segment>=0&&!M&&(P+=e.angle),0!==P){var V=Math.cos(P),A=Math.sin(P);C.rotate(V,A),S.rotate(V,A),E.rotate(V,A),B.rotate(V,A)}var D=8*f.padding,F=new r.Point(e.x,e.y),N=new i.Footprint(this.mapAngle,D,M);N.addBox(F,new i.Box(y,v,m,g),a,P,t,l,n.C_INFINITY);var L=new s(C,B,E,S,x,0,F,l,n.C_INFINITY,0),R=new u(N,[L]),O=l;return f.allowOverlap||(O=this._conflictEngine.getMinZoom(R.footprint,O,p,M)),N.minzoom=O,R},e.prototype.getTextPlacement=function(e,t,o,c,f,p,h,d){for(var y,v=new r.Point(e.x,e.y),m=h.rotate*n.C_DEG_TO_RAD,g=0===h.rotationAlignment,x=h.keepUpright,_=l,b=!g,I=b?0:e.angle,w=e.segment>=0&&g,T=8*h.padding,C=new i.Footprint(this.mapAngle,T,b),S=[],E=!w,B=Number.POSITIVE_INFINITY,P=Number.NEGATIVE_INFINITY,M=B,V=P,A=w?x:g&&x,D=0,F=c;D<F.length;D++){var N=F[D],L=N.glyphMosaicItem;if(L&&!L.rect.isEmpty){var R=L.rect,O=L.metrics,k=L.page;E&&(y&&y!==N.y&&(C.addBox(v,new i.Box(B,M,P,V),f,m,t,l,n.C_INFINITY),M=B=Number.POSITIVE_INFINITY,V=P=Number.NEGATIVE_INFINITY),y=N.y);var j=[];if(w){var z=.5*L.metrics.width,U=(o.x+N.x+O.left-4+z)*f;if(_=this._placeGlyph(e,_,U,p,e.segment,1,k,j),x&&(_=this._placeGlyph(e,_,U,p,e.segment,-1,k,j)),_>=2)break}else j.push(new a(v,I,I,k)),g&&x&&j.push(new a(v,I+n.C_PI,I+n.C_PI,k,!0));for(var q=N.x+o.x+O.left,G=N.y+o.y-O.top,Y=q+O.width,Q=G+O.height,Z=new r.Point(q-4,G-4),W=new r.Point(Z.x+R.width,Z.y+R.height),J=new r.Point(Z.x,W.y),X=new r.Point(W.x,Z.y),H=0,K=j;H<K.length;H++){var $=K[H],ee=Z.clone(),te=J.clone(),re=X.clone(),ie=W.clone(),ne=G,oe=Q,ae=$.glyphAngle+m;if(0!==ae){var se=Math.cos(ae),ue=Math.sin(ae);ee.rotate(se,ue),ie.rotate(se,ue),te.rotate(se,ue),re.rotate(se,ue)}S.push(new s(ee,re,te,ie,R,$.labelAngle,$.anchor,$.minzoom,$.maxzoom,$.page)),A&&!this._legible($.labelAngle)||(E?(q<B&&(B=q),ne<M&&(M=ne),Y>P&&(P=Y),oe>V&&(V=oe)):$.minzoom<2&&C.addBox($.anchor,new i.Box(q,ne,Y,oe),f,ae,t,$.minzoom,$.maxzoom))}}}if(_>=2)return null;E&&C.addBox(v,new i.Box(B,M,P,V),f,m,t,l,n.C_INFINITY);var le=new u(C,S);return h.allowOverlap||(_=this._conflictEngine.getMinZoom(le.footprint,_,d,b)),C.minzoom=_,le},e.prototype.add=function(e){this._conflictEngine.add(e.footprint)},e.prototype._legible=function(e){var t=n.radToByte(e);return t<65||t>=193},e.prototype._placeGlyph=function(e,t,i,o,s,u,l,c){var f=u,p=f<0?n.positiveMod(e.angle+n.C_PI,n.C_2PI):e.angle,h=this._legible(p),d=0;i<0&&(f*=-1,i*=-1,d=n.C_PI),f>0&&++s;var y=new r.Point(e.x,e.y),v=o[s],m=n.C_INFINITY;if(o.length<=s)return m;for(;;){var g=v.x-y.x,x=v.y-y.y,_=Math.sqrt(g*g+x*x),b=Math.max(i/_,t),I=g/_,w=x/_,T=n.positiveMod(Math.atan2(w,I)+d,n.C_2PI);if(c.push(new a(y,p,T,l,h,b,m)),b<=t)return b;y=v.clone();do{if(s+=f,o.length<=s||s<0)return b;v=o[s]}while(y.isEqual(v));var C=v.x-y.x,S=v.y-y.y,E=Math.sqrt(C*C+S*S);C*=_/E,S*=_/E,y.x-=C,y.y-=S,m=b}},e}();t.PlacementEngine=c}.apply(null,i))||(e.exports=n)},"+j0K":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("xhoE"),r("qKT0"),r("jSP+"),r("JG06"),r("8HQk")],void 0===(n=function(e,t,r,i,n,o,a){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t,r){switch(this.type=e,this.typeName=t.type,this.id=t.id,this.source=t.source,this.sourceLayer=t["source-layer"],this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,this.filter=t.filter,this.layout=t.layout,this.paint=t.paint,this.z=r,e){case 0:this._layoutDefinition=o.StyleDefinition.backgroundLayoutDefinition,this._paintDefinition=o.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=o.StyleDefinition.fillLayoutDefinition,this._paintDefinition=o.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=o.StyleDefinition.lineLayoutDefinition,this._paintDefinition=o.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=o.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=o.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=o.StyleDefinition.circleLayoutDefinition,this._paintDefinition=o.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout),this._paintProperties=this._parsePaint(this.paint)}return e.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=n.createFilter(this.filter)},e.prototype.getLayoutProperty=function(e){var t=this._layoutProperties;if(t)return t[e]},e.prototype.getPaintProperty=function(e){var t=this._paintProperties;if(t)return t[e]},e.prototype.getLayoutValue=function(e,t,r){var i,n=this._layoutProperties;if(n){var o=n[e];o&&(i=o.getValue(t,r))}var a=this._layoutDefinition[e];return void 0===i&&(i=a.default),"enum"===a.type&&(i=a.values.indexOf(i)),i},e.prototype.getPaintValue=function(e,t,r){var i,n=this._paintProperties;if(n){var o=n[e];o&&(i=o.getValue(t,r))}var a=this._paintDefinition[e];return void 0===i&&(i=a.default),"enum"===a.type&&(i=a.values.indexOf(i)),i},e.prototype._parseLayout=function(e){var t={};for(var r in e){var i=this._layoutDefinition[r];i&&(t[r]=new a(r,i,e[r]))}return t},e.prototype._parsePaint=function(e){var t={};for(var r in e){var i=this._paintDefinition[r];i&&(t[r]=new a(r,i,e[r]))}return t},e}();t.StyleLayer=s;var u=function(e){function t(t,r,i){return e.call(this,t,r,i)||this}return r(t,e),t}(s);t.BackgroundStyleLayer=u;var l=function(e){function t(t,r,i){var n=e.call(this,t,r,i)||this,o=n.getPaintProperty("fill-color");n.hasDataDrivenColor=!!o&&o.isDataDriven;var a=n.getPaintProperty("fill-opacity");n.hasDataDrivenOpacity=!!a&&a.isDataDriven,n.hasDataDrivenFill=n.hasDataDrivenColor||n.hasDataDrivenOpacity;var s=n.getPaintProperty("fill-outline-color");return n.outlineUsesFillColor=!s,n.hasDataDrivenOutlineColor=!!s&&s.isDataDriven,n.hasDataDrivenOutline=(s?n.hasDataDrivenOutlineColor:n.hasDataDrivenColor)||n.hasDataDrivenOpacity,n}return r(t,e),t}(s);t.FillStyleLayer=l;var c=function(e){function t(t,r,i){var n=e.call(this,t,r,i)||this,o=n.getPaintProperty("line-color");n.hasDataDrivenColor=!!o&&o.isDataDriven;var a=n.getPaintProperty("line-opacity");n.hasDataDrivenOpacity=!!a&&a.isDataDriven;var s=n.getPaintProperty("line-width");return n.hasDataDrivenWidth=!!s&&s.isDataDriven,n.hasDataDrivenLine=n.hasDataDrivenColor||n.hasDataDrivenOpacity||n.hasDataDrivenWidth,n}return r(t,e),t}(s);t.LineStyleLayer=c;var f=function(e){function t(t,r,i){var n=e.call(this,t,r,i)||this,o=n.getPaintProperty("icon-color");n.hasDataDrivenIconColor=!!o&&o.isDataDriven;var a=n.getPaintProperty("icon-opacity");n.hasDataDrivenIconOpacity=!!a&&a.isDataDriven;var s=n.getLayoutProperty("icon-size");n.hasDataDrivenIconSize=!!s&&s.isDataDriven,n.hasDataDrivenIcon=n.hasDataDrivenIconColor||n.hasDataDrivenIconOpacity||n.hasDataDrivenIconSize;var u=n.getPaintProperty("text-color");n.hasDataDrivenTextColor=!!u&&u.isDataDriven;var l=n.getPaintProperty("text-opacity");n.hasDataDrivenTextOpacity=!!l&&l.isDataDriven;var c=n.getLayoutProperty("text-size");return n.hasDataDrivenTextSize=!!c&&c.isDataDriven,n.hasDataDrivenText=n.hasDataDrivenTextColor||n.hasDataDrivenTextOpacity||n.hasDataDrivenTextSize,n}return r(t,e),t}(s);t.SymbolStyleLayer=f;var p=function(e){function t(t,r,i){var n=e.call(this,t,r,i)||this,o=n.getPaintProperty("circle-radius");n.hasDataDrivenRadius=!!o&&o.isDataDriven;var a=n.getPaintProperty("circle-color");n.hasDataDrivenColor=!!a&&a.isDataDriven;var s=n.getPaintProperty("circle-opacity");n.hasDataDrivenOpacity=!!s&&s.isDataDriven;var u=n.getPaintProperty("circle-stroke-width");n.hasDataDrivenStrokeWidth=!!u&&u.isDataDriven;var l=n.getPaintProperty("circle-stroke-color");n.hasDataDrivenStrokeColor=!!l&&l.isDataDriven;var c=n.getPaintProperty("circle-stroke-opacity");n.hasDataDrivenStrokeOpacity=!!c&&c.isDataDriven;var f=n.getPaintProperty("circle-blur");return n.hasDataDrivenBlur=!!f&&f.isDataDriven,n}return r(t,e),t}(s);t.CircleStyleLayer=p;var h=function(e,t,r){this.cap=e.getLayoutValue("line-cap",t,r),this.join=e.getLayoutValue("line-join",t,r),this.miterLimit=e.getLayoutValue("line-miter-limit",t,r),this.roundLimit=e.getLayoutValue("line-round-limit",t,r)};t.LineLayout=h;var d=function(e,t,r,i){this.allowOverlap=e.getLayoutValue("icon-allow-overlap",t,i),this.ignorePlacement=e.getLayoutValue("icon-ignore-placement",t,i),this.optional=e.getLayoutValue("icon-optional",t,i),this.rotationAlignment=e.getLayoutValue("icon-rotation-alignment",t,i),this.size=e.getLayoutValue("icon-size",t,i),this.rotate=e.getLayoutValue("icon-rotate",t,i),this.padding=e.getLayoutValue("icon-padding",t,i),this.keepUpright=e.getLayoutValue("icon-keep-upright",t,i),this.offset=e.getLayoutValue("icon-offset",t,i),2===this.rotationAlignment&&(this.rotationAlignment=r?0:1)};t.IconLayout=d;var y=function(e,t,r,i){this.allowOverlap=e.getLayoutValue("text-allow-overlap",t,i),this.ignorePlacement=e.getLayoutValue("text-ignore-placement",t,i),this.optional=e.getLayoutValue("text-optional",t,i),this.rotationAlignment=e.getLayoutValue("text-rotation-alignment",t,i),this.fontArray=e.getLayoutValue("text-font",t,i),this.maxWidth=e.getLayoutValue("text-max-width",t,i),this.lineHeight=e.getLayoutValue("text-line-height",t,i),this.letterSpacing=e.getLayoutValue("text-letter-spacing",t,i),this.justify=e.getLayoutValue("text-justify",t,i),this.anchor=e.getLayoutValue("text-anchor",t,i),this.maxAngle=e.getLayoutValue("text-max-angle",t,i),this.size=e.getLayoutValue("text-size",t,i),this.rotate=e.getLayoutValue("text-rotate",t,i),this.padding=e.getLayoutValue("text-padding",t,i),this.keepUpright=e.getLayoutValue("text-keep-upright",t,i),this.transform=e.getLayoutValue("text-transform",t,i),this.offset=e.getLayoutValue("text-offset",t,i),2===this.rotationAlignment&&(this.rotationAlignment=r?0:1)};t.TextLayout=y}.apply(null,i))||(e.exports=n)},"+jDF":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("6+ni")],void 0===(n=function(e,t,r){return function(){function e(e,t){this.values={};for(var r=t.keys,i=t.values;e.next();)switch(e.tag()){case 1:this.id=e.getUInt64();break;case 2:for(var n=e.getMessage(),o=this.values;!n.empty();){var a=n.getUInt32(),s=n.getUInt32();o[r[a]]=i[s]}break;case 3:this.type=e.getUInt32();break;case 4:this._pbfGeometry=e.getMessage();break;default:e.skip()}}return e.prototype.getGeometry=function(e){if(void 0!==this._geometry)return this._geometry;var t,i,n,o=this._pbfGeometry;e?e.reset(this.type):t=[];for(var a=1,s=0,u=0,l=0;!o.empty();){if(0===s){var c=o.getUInt32();a=7&c,s=c>>3}switch(s--,a){case 1:u+=o.getSInt32(),l+=o.getSInt32(),e?e.moveTo(u,l):(i&&t.push(i),(i=[]).push(new r.Point(u,l)));break;case 2:u+=o.getSInt32(),l+=o.getSInt32(),e?e.lineTo(u,l):i.push(new r.Point(u,l));break;case 7:e?e.close():i&&!i[0].equals(u,l)&&i.push(i[0].clone());break;default:throw new Error("Invalid path operation")}}return e?n=e.result():(i&&t.push(i),n=t),this._geometry=n,n},e}()}.apply(null,i))||(e.exports=n)},"+nCE":function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=1,i=null;t.generateDefaultIndexArray=function(e){if(e>r||null==i){for(;e>r;)r*=2;i=new Uint32Array(r);for(var t=0;t<r;t++)i[t]=t}return new Uint32Array(i.buffer,0,e)};var n=0;t.getNewId=function(){return n++}}.apply(null,i))||(e.exports=n)},"/61J":function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){function r(e,t,r,i){return!(r>t||i<e)}function i(e,t,i,n){if(null!=i&&null!=n&&i===n){var o=i;return function(r){return o>=r.attributes[e]&&o<=r.attributes[t]}}return null!=i&&null!=n?function(o){return r(i,n,o.attributes[e],o.attributes[t])}:null!=i?function(e){return!(e.attributes[t]<i)}:null!=n?function(t){return!(t.attributes[e]>n)}:void 0}function n(e,t,r){return null!=t&&null!=r&&t===r?function(r){return r.attributes[e]===t}:null!=t&&null!=r?function(i){return i.attributes[e]>=t&&i.attributes[e]<=r}:null!=t?function(r){return r.attributes[e]>=t}:null!=r?function(t){return t.attributes[e]<=r}:void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.getTimeExtent=function(e,t){if(!e)return null;var r=e.startTimeField,i=e.endTimeField,n=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;if(r&&i)t.forEach(function(e){var t=e.attributes,a=t[r],s=t[i];null==a||isNaN(a)||(n=Math.min(n,a)),null==s||isNaN(s)||(o=Math.max(o,s))});else{var a=r||i;t.forEach(function(e){var t=a,r=e.attributes[t];null==r||isNaN(r)||(n=Math.min(n,r),o=Math.max(o,r))})}return{start:n,end:o}},t.getTimeOperator=function(e,t){if(!t||!e)return null;var r=e.startTimeField,o=e.endTimeField;if(!r&&!o)return null;var a=t.start,s=t.end;return null==a&&null==s?null:r&&o?i(r,o,a,s):n(r||o,a,s)}}.apply(null,i))||(e.exports=n)},"1E+e":function(e,t,r){var i;void 0===(i=function(){"use strict";function e(e,r,n){n=n||2;var o,a,s,l,c,f,p,h=r&&r.length,d=h?r[0]*n:e.length,y=t(e,0,d,n,!0),v=[];if(!y||y.next===y.prev)return v;if(h&&(y=u(e,r,y,n)),e.length>80*n){o=s=e[0],a=l=e[1];for(var m=n;m<d;m+=n)(c=e[m])<o&&(o=c),(f=e[m+1])<a&&(a=f),c>s&&(s=c),f>l&&(l=f);p=0!==(p=Math.max(s-o,l-a))?1/p:0}return i(y,v,n,o,a,p),v}function t(e,t,r,i,n){var o,a;if(n===B(e,t,r,i)>0)for(o=t;o<r;o+=i)a=C(o,e[o],e[o+1],a);else for(o=r-i;o>=t;o-=i)a=C(o,e[o],e[o+1],a);return a&&x(a,a.next)&&(S(a),a=a.next),a}function r(e,t){if(!e)return e;t||(t=e);var r,i=e;do{if(r=!1,i.steiner||!x(i,i.next)&&0!==g(i.prev,i,i.next))i=i.next;else{if(S(i),(i=t=i.prev)===i.next)break;r=!0}}while(r||i!==t);return t}function i(e,t,u,l,c,f,h){if(e){!h&&f&&p(e,l,c,f);for(var d,y,v=e;e.prev!==e.next;)if(d=e.prev,y=e.next,f?o(e,l,c,f):n(e))t.push(d.i/u),t.push(e.i/u),t.push(y.i/u),S(e),e=y.next,v=y.next;else if((e=y)===v){h?1===h?i(e=a(e,t,u),t,u,l,c,f,2):2===h&&s(e,t,u,l,c,f):i(r(e),t,u,l,c,f,1);break}}}function n(e){var t=e.prev,r=e,i=e.next;if(g(t,r,i)>=0)return!1;for(var n=e.next.next;n!==e.prev;){if(v(t.x,t.y,r.x,r.y,i.x,i.y,n.x,n.y)&&g(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function o(e,t,r,i){var n=e.prev,o=e,a=e.next;if(g(n,o,a)>=0)return!1;for(var s=n.x<o.x?n.x<a.x?n.x:a.x:o.x<a.x?o.x:a.x,u=n.y<o.y?n.y<a.y?n.y:a.y:o.y<a.y?o.y:a.y,l=n.x>o.x?n.x>a.x?n.x:a.x:o.x>a.x?o.x:a.x,c=n.y>o.y?n.y>a.y?n.y:a.y:o.y>a.y?o.y:a.y,f=d(s,u,t,r,i),p=d(l,c,t,r,i),h=e.prevZ,y=e.nextZ;h&&h.z>=f&&y&&y.z<=p;){if(h!==e.prev&&h!==e.next&&v(n.x,n.y,o.x,o.y,a.x,a.y,h.x,h.y)&&g(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,y!==e.prev&&y!==e.next&&v(n.x,n.y,o.x,o.y,a.x,a.y,y.x,y.y)&&g(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;h&&h.z>=f;){if(h!==e.prev&&h!==e.next&&v(n.x,n.y,o.x,o.y,a.x,a.y,h.x,h.y)&&g(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;y&&y.z<=p;){if(y!==e.prev&&y!==e.next&&v(n.x,n.y,o.x,o.y,a.x,a.y,y.x,y.y)&&g(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function a(e,t,r){var i=e;do{var n=i.prev,o=i.next.next;!x(n,o)&&_(n,i,i.next,o)&&I(n,o)&&I(o,n)&&(t.push(n.i/r),t.push(i.i/r),t.push(o.i/r),S(i),S(i.next),i=e=o),i=i.next}while(i!==e);return i}function s(e,t,n,o,a,s){var u=e;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&m(u,l)){var c=T(u,l);return u=r(u,u.next),c=r(c,c.next),i(u,t,n,o,a,s),void i(c,t,n,o,a,s)}l=l.next}u=u.next}while(u!==e)}function u(e,i,n,o){var a,s,u,f=[];for(a=0,s=i.length;a<s;a++)(u=t(e,i[a]*o,a<s-1?i[a+1]*o:e.length,o,!1))===u.next&&(u.steiner=!0),f.push(y(u));for(f.sort(l),a=0;a<f.length;a++)c(f[a],n),n=r(n,n.next);return n}function l(e,t){return e.x-t.x}function c(e,t){if(t=f(e,t)){var i=T(t,e);r(i,i.next)}}function f(e,t){var r,i=t,n=e.x,o=e.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=n&&s>a){if(a=s,s===n){if(o===i.y)return i;if(o===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!r)return null;if(n===a)return r.prev;var u,l=r,c=r.x,f=r.y,p=1/0;for(i=r.next;i!==l;)n>=i.x&&i.x>=c&&n!==i.x&&v(o<f?n:a,o,c,f,o<f?a:n,o,i.x,i.y)&&((u=Math.abs(o-i.y)/(n-i.x))<p||u===p&&i.x>r.x)&&I(i,e)&&(r=i,p=u),i=i.next;return r}function p(e,t,r,i){var n=e;do{null===n.z&&(n.z=d(n.x,n.y,t,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,h(n)}function h(e){var t,r,i,n,o,a,s,u,l=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,i=r,s=0,t=0;t<l&&(s++,i=i.nextZ);t++);for(u=l;s>0||u>0&&i;)0!==s&&(0===u||!i||r.z<=i.z)?(n=r,r=r.nextZ,s--):(n=i,i=i.nextZ,u--),o?o.nextZ=n:e=n,n.prevZ=o,o=n;r=i}o.nextZ=null,l*=2}while(a>1);return e}function d(e,t,r,i,n){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function y(e){var t=e,r=e;do{t.x<r.x&&(r=t),t=t.next}while(t!==e);return r}function v(e,t,r,i,n,o,a,s){return(n-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(i-s)-(r-a)*(t-s)>=0&&(r-a)*(o-s)-(n-a)*(i-s)>=0}function m(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!b(e,t)&&I(e,t)&&I(t,e)&&w(e,t)}function g(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function x(e,t){return e.x===t.x&&e.y===t.y}function _(e,t,r,i){return!!(x(e,t)&&x(r,i)||x(e,i)&&x(r,t))||g(e,t,r)>0!=g(e,t,i)>0&&g(r,i,e)>0!=g(r,i,t)>0}function b(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&_(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function I(e,t){return g(e.prev,e,e.next)<0?g(e,t,e.next)>=0&&g(e,e.prev,t)>=0:g(e,t,e.prev)<0||g(e,e.next,t)<0}function w(e,t){var r=e,i=!1,n=(e.x+t.x)/2,o=(e.y+t.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&n<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==e);return i}function T(e,t){var r=new E(e.i,e.x,e.y),i=new E(t.i,t.x,t.y),n=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,o.next=i,i.prev=o,i}function C(e,t,r,i){var n=new E(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function S(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function E(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function B(e,t,r,i){for(var n=0,o=t,a=r-i;o<r;o+=i)n+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return n}return e.deviation=function(e,t,r,i){var n=t&&t.length,o=n?t[0]*r:e.length,a=Math.abs(B(e,0,o,r));if(n)for(var s=0,u=t.length;s<u;s++){var l=t[s]*r,c=s<u-1?t[s+1]*r:e.length;a-=Math.abs(B(e,l,c,r))}var f=0;for(s=0;s<i.length;s+=3){var p=i[s]*r,h=i[s+1]*r,d=i[s+2]*r;f+=Math.abs((e[p]-e[d])*(e[h+1]-e[p+1])-(e[p]-e[h])*(e[d+1]-e[p+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},e.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},i=0,n=0;n<e.length;n++){for(var o=0;o<e[n].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[n][o][a]);n>0&&(i+=e[n-1].length,r.holes.push(i))}return r},e}.apply(null,[]))||(e.exports=i)},"1RVI":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("ma1f")],void 0===(n=function(e,t,r){function i(e,t,r){return{identifier:String.fromCharCode.apply(null,new Uint8Array(e,r+c.identifierOffset,c.identifierLength)),version:t.getUint16(r+c.versionOffset,l),checksum:t.getUint32(r+c.checksumOffset,l)}}function n(e,t){return{sizeLo:e.getUint32(t+f.sizeLo,l),sizeHi:e.getUint32(t+f.sizeHi,l),minX:e.getFloat64(t+f.minX,l),minY:e.getFloat64(t+f.minY,l),minZ:e.getFloat64(t+f.minZ,l),maxX:e.getFloat64(t+f.maxX,l),maxY:e.getFloat64(t+f.maxY,l),maxZ:e.getFloat64(t+f.maxZ,l),errorX:e.getFloat64(t+f.errorX,l),errorY:e.getFloat64(t+f.errorY,l),errorZ:e.getFloat64(t+f.errorZ,l),count:e.getUint32(t+f.count,l),reserved:e.getUint32(t+f.reserved,l)}}function o(e,t,r){var i=[];t=a(e,t,i);for(var n=[],o=0;o<i.length;o++){n.length=0,t=a(e,t,n);for(var s=0;s<n.length;s++)r.push(n[s]+i[o])}return t}function a(e,t,i){var n=new DataView(e,t),o=n.getUint8(0),a=31&o,s=!!(32&o),u=(192&o)>>6,c=0;if(0===u)c=n.getUint32(1,l),t+=5;else if(1===u)c=n.getUint16(1,l),t+=3;else{if(2!==u)throw new r("lepcc-decode-error","Bad count type");c=n.getUint8(1),t+=2}if(s)throw new r("lepcc-decode-error","LUT not implemented");for(var f=Math.ceil(c*a/8),p=new Uint8Array(e,t,f),h=0,d=0,y=0,v=-1>>>32-a,m=0;m<c;m++){for(;d<a;)h|=p[y]<<d,d+=8,y+=1;i[m]=h&v,h>>>=a,(d-=a)+a>32&&(h|=p[y-1]>>8-d)}return t+y}function s(e,t){return{sizeLo:e.getUint32(t+p.sizeLo,l),sizeHi:e.getUint32(t+p.sizeHi,l),count:e.getUint32(t+p.count,l),colorMapCount:e.getUint16(t+p.colorMapCount,l),lookupMethod:e.getUint8(t+p.lookupMethod),compressionMethod:e.getUint8(t+p.compressionMethod)}}function u(e,t){return{sizeLo:e.getUint32(t+h.sizeLo,l),sizeHi:e.getUint32(t+h.sizeHi,l),count:e.getUint32(t+h.count,l),scaleFactor:e.getUint16(t+h.scaleFactor,l),bitsPerPoint:e.getUint8(t+h.bitsPerPoint),reserved:e.getUint8(t+h.reserved)}}Object.defineProperty(t,"__esModule",{value:!0});var l=!0,c={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16},f={sizeLo:0,sizeHi:4,minX:8,minY:16,minZ:24,maxX:32,maxY:40,maxZ:48,errorX:56,errorY:64,errorZ:72,count:80,reserved:84,byteCount:88};t.decodeXYZ=function(e){var t=new DataView(e,0),a=0,s=i(e,t,a),u=s.identifier,l=s.version;if(a+=c.byteCount,"LEPCC     "!==u)throw new r("lepcc-decode-error","Bad identifier");if(l>1)throw new r("lepcc-decode-error","Unknown version");var p=n(t,a);if(a+=f.byteCount,p.sizeHi*Math.pow(2,32)+p.sizeLo!==e.byteLength)throw new r("lepcc-decode-error","Bad size");var h=new Float64Array(3*p.count),d=[],y=[],v=[],m=[];if(a=o(e,a,d),a=o(e,a,y),a=o(e,a,v),(a=o(e,a,m))!==e.byteLength)throw new r("lepcc-decode-error","Bad length");for(var g=0,x=0,_=0;_<d.length;_++){x+=d[_];for(var b=0,I=0;I<y[_];I++){b+=v[g];var w=m[g];h[3*g]=Math.min(p.maxX,p.minX+2*p.errorX*b),h[3*g+1]=Math.min(p.maxY,p.minY+2*p.errorY*x),h[3*g+2]=Math.min(p.maxZ,p.minZ+2*p.errorZ*w),g++}}return{errorX:p.errorX,errorY:p.errorY,errorZ:p.errorZ,result:h}};var p={sizeLo:0,sizeHi:4,count:8,colorMapCount:12,lookupMethod:14,compressionMethod:15,byteCount:16};t.decodeRGB=function(e){var t=new DataView(e,0),n=0,o=i(e,t,n),a=o.identifier,u=o.version;if(n+=c.byteCount,"ClusterRGB"!==a)throw new r("lepcc-decode-error","Bad identifier");if(u>1)throw new r("lepcc-decode-error","Unknown version");var l=s(t,n);if(n+=p.byteCount,l.sizeHi*Math.pow(2,32)+l.sizeLo!==e.byteLength)throw new r("lepcc-decode-error","Bad size");if((2===l.lookupMethod||1===l.lookupMethod)&&0===l.compressionMethod){if(3*l.colorMapCount+l.count+n!==e.byteLength||l.colorMapCount>256)throw new r("lepcc-decode-error","Bad count");for(var f=new Uint8Array(e,n,3*l.colorMapCount),h=new Uint8Array(e,n+3*l.colorMapCount,l.count),d=new Uint8Array(3*l.count),y=0;y<l.count;y++){var v=h[y];d[3*y]=f[3*v],d[3*y+1]=f[3*v+1],d[3*y+2]=f[3*v+2]}return d}if(0===l.lookupMethod&&0===l.compressionMethod){if(3*l.count+n!==e.byteLength||0!==l.colorMapCount)throw new r("lepcc-decode-error","Bad count");return new Uint8Array(e,n).slice()}if(l.lookupMethod<=2&&1===l.compressionMethod){if(n+3!==e.byteLength||1!==l.colorMapCount)throw new r("lepcc-decode-error","Bad count");var m=t.getUint8(n),g=t.getUint8(n+1),x=t.getUint8(n+2);for(d=new Uint8Array(3*l.count),y=0;y<l.count;y++)d[3*y]=m,d[3*y+1]=g,d[3*y+2]=x;return d}throw new r("lepcc-decode-error","Bad method "+l.lookupMethod+","+l.compressionMethod)};var h={sizeLo:0,sizeHi:4,count:8,scaleFactor:12,bitsPerPoint:14,reserved:15,byteCount:16};t.decodeIntensity=function(e){var t=new DataView(e,0),n=0,o=i(e,t,n),s=o.identifier,l=o.version;if(n+=c.byteCount,"Intensity "!==s)throw new r("lepcc-decode-error","Bad identifier");if(l>1)throw new r("lepcc-decode-error","Unknown version");var f=u(t,n);if(n+=h.byteCount,f.sizeHi*Math.pow(2,32)+f.sizeLo!==e.byteLength)throw new r("lepcc-decode-error","Bad size");var p=new Uint16Array(f.count);if(8===f.bitsPerPoint){if(f.count+n!==e.byteLength)throw new r("lepcc-decode-error","Bad size");for(var d=new Uint8Array(e,n,f.count),y=0;y<f.count;y++)p[y]=d[y]*f.scaleFactor}else if(16===f.bitsPerPoint){if(2*f.count+n!==e.byteLength)throw new r("lepcc-decode-error","Bad size");for(d=new Uint16Array(e,n,f.count),y=0;y<f.count;y++)p[y]=d[y]*f.scaleFactor}else{if(a(e,n,d=[])!==e.byteLength)throw new r("lepcc-decode-error","Bad size");for(y=0;y<f.count;y++)p[y]=d[y]*f.scaleFactor}return p}}.apply(null,i))||(e.exports=n)},"1eyA":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("ll/V"),r("xdHJ"),r("UWzz"),r("vjUK"),r("l8NS"),r("fsiH")],void 0===(n=function(e,t,r,i,n,o,a,s){function u(e){return e&&"object"==typeof e.attributes}function l(e){return n(e,["YYYY-M-D H:m:s","YYYY-M-D H:mZ","YYYY-M-D H:m:sZ","YYYY-M-D H:m","YYYY-m-d"]).toDate()}function c(e){return n(e,["YYYY-M-D"]).toDate()}function f(e){return!0===e}function p(e){return Array.isArray(e)?e:[e]}function h(e){return null!==e?!0!==e:null}function d(e,t){return null!=e&&null!=t?!0===e&&!0===t:!1!==e&&!1!==t&&null}function y(e,t){return null!=e&&null!=t?!0===e||!0===t:!0===e||!0===t||null}function v(e,t){if(null==e)return null;for(var r=!1,i=0,n=t;i<n.length;i++){var o=n[i];if(null==o)r=null;else if(e===o){r=!0;break}}return r}function m(e,t,r){if(null==e)return null;for(var i=t,n=r,o="",a="-[]/{}()*+?.\\^$|",s=0,u=0;u<i.length;u++){var l=i.charAt(u);switch(s){case 0:l===n?s=1:a.indexOf(l)>=0?o+="\\"+l:o+="%"===l?".*":"_"===l?".":l;break;case 1:a.indexOf(l)>=0?o+="\\"+l:o+=l,s=0}}return new RegExp("^"+o+"$").test(e)}function g(e){return e instanceof Date?e.valueOf():e}function x(e,t,r){if(null==t||null==r)return null;var i=g(t),n=g(r);switch(e){case"<>":return i!==n;case"=":return i===n;case">":return i>n;case"<":return i<n;case">=":return i>=n;case"<=":return i<=n}}function _(e){for(var t=[],r={},i=0,n=e;i<n.length;i++){var o=n[i],a=o.toLowerCase();void 0===r[a]&&(t.push(o),r[a]=1)}return t}return function(){function e(){this.parseTree=null,this.parameters=null,this._hasStandardizedFunctions=null,this._hasAggregateFunctions=null}return e.create=function(t){var r=new e;r.parseTree=s.WhereGrammar.parse(t);var i=!0,n=!0;return r.visitAll(r.parseTree,function(e){if("function"===e.type){var t=e.name,r=e.args.value.length;i&&(i=a.isStandardized(t,r)),n&&(n=o.isAggregate(t,r))}}),r._hasStandardizedFunctions=i,r._hasAggregateFunctions=n,r},e.prototype.isStandardized=function(){return this._hasStandardizedFunctions},e.prototype.isAggregate=function(){return this._hasAggregateFunctions},e.prototype.setVariablesDictionary=function(e){this.parameters=e},e.prototype.testFeature=function(e){return!!this.evaluateNode(this.parseTree,e)},e.prototype.testSet=function(e){var t=this,r=new i.default;this.visitAll(this.parseTree,function(e){"column_ref"!==e.type||r.has(e.column)||r.set(e.column,e)});for(var n={},o=0,a=e;o<a.length;o++){!function(e){r.forEach(function(r,i){var o=t.featureValue(e,i,r);n[i]?n[i].push(o):n[i]=[o]})}(a[o])}return!!this.evaluateNode(this.parseTree,{attributes:n})},e.prototype.calculateValue=function(e){return this.evaluateNode(this.parseTree,e)},e.prototype.getFunctions=function(){var e=[];return this.visitAll(this.parseTree,function(t){"function"===t.type&&e.push(t.name.toLowerCase())}),_(e)},e.prototype.getExpressions=function(){var e=new i.default;return this.visitAll(this.parseTree,function(t){if("function"===t.type){var r=t.name.toLowerCase(),i=t.args.value[0];if("column_ref"===i.type){var n=i.column,o=r+"-"+n;e.has(o)||e.set(o,{aggregateType:r,field:n})}}}),r.from(e.values())},e.prototype.getFields=function(){var e=[];return this.visitAll(this.parseTree,function(t){"column_ref"===t.type&&e.push(t.column)}),_(e)},e.prototype.getVariables=function(){var e=[];return this.visitAll(this.parseTree,function(t){"param"===t.type&&e.push(t.value.toLowerCase())}),_(e)},e.prototype.featureValue=function(e,t,r){var i=u(e)?e.attributes:e,n=i[t];if(void 0!==n)return n;for(var o in i)if(t.toLowerCase()===o.toLowerCase())return r.column=o,i[o];return null},e.prototype.visitAll=function(e,t){if(null!=e)switch(t(e),e.type){case"when_clause":this.visitAll(e.operand,t),this.visitAll(e.value,t);break;case"case_expression":for(var r=0,i=e.clauses;r<i.length;r++){var n=i[r];this.visitAll(n,t)}"simple"===e.format&&this.visitAll(e.operand,t),null!==e.else&&this.visitAll(e.else,t);break;case"expr_list":for(var o=0,a=e.value;o<a.length;o++){n=a[o];this.visitAll(n,t)}break;case"unary_expr":this.visitAll(e.expr,t);break;case"binary_expr":this.visitAll(e.left,t),this.visitAll(e.right,t);break;case"function":this.visitAll(e.args,t)}},e.prototype.evaluateNode=function(e,t){switch(e.type){case"case_expression":if("simple"===e.format){for(var r=g(this.evaluateNode(e.operand,t)),i=0;i<e.clauses.length;i++)if(r===g(this.evaluateNode(e.clauses[i].operand,t)))return this.evaluateNode(e.clauses[i].value,t);if(null!==e.else)return this.evaluateNode(e.else,t)}else{for(i=0;i<e.clauses.length;i++)if(f(this.evaluateNode(e.clauses[i].operand,t)))return this.evaluateNode(e.clauses[i].value,t);if(null!==e.else)return this.evaluateNode(e.else,t)}return null;case"param":return this.parameters[e.value.toLowerCase()];case"expr_list":for(var n=[],s=0,u=e.value;s<u.length;s++){var _=u[s];n.push(this.evaluateNode(_,t))}return n;case"unary_expr":return h(this.evaluateNode(e.expr,t));case"binary_expr":switch(e.operator){case"AND":return d(this.evaluateNode(e.left,t),this.evaluateNode(e.right,t));case"OR":return y(this.evaluateNode(e.left,t),this.evaluateNode(e.right,t));case"IS":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return null===this.evaluateNode(e.left,t);case"ISNOT":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return null!==this.evaluateNode(e.left,t);case"IN":var b=p(this.evaluateNode(e.right,t));return v(this.evaluateNode(e.left,t),b);case"NOT IN":b=p(this.evaluateNode(e.right,t));return h(v(this.evaluateNode(e.left,t),b));case"BETWEEN":var I=this.evaluateNode(e.left,t),w=this.evaluateNode(e.right,t);return null==I||null==w[0]||null==w[1]?null:I>=w[0]&&I<=w[1];case"NOTBETWEEN":I=this.evaluateNode(e.left,t),w=this.evaluateNode(e.right,t);return null==I||null==w[0]||null==w[1]?null:I<w[0]||I>w[1];case"LIKE":return m(this.evaluateNode(e.left,t),this.evaluateNode(e.right,t),e.escape);case"NOT LIKE":return h(m(this.evaluateNode(e.left,t),this.evaluateNode(e.right,t),e.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return x(e.operator,this.evaluateNode(e.left,t),this.evaluateNode(e.right,t));case"*":return this.evaluateNode(e.left,t)*this.evaluateNode(e.right,t);case"-":return this.evaluateNode(e.left,t)-this.evaluateNode(e.right,t);case"+":return this.evaluateNode(e.left,t)+this.evaluateNode(e.right,t);case"/":return this.evaluateNode(e.left,t)/this.evaluateNode(e.right,t)}throw new Error("Not Supported Operator "+e.operator);case"null":case"bool":case"string":case"number":return e.value;case"date":return c(e.value);case"timestamp":return l(e.value);case"column_ref":return"CURRENT_DATE"===e.column.toUpperCase()?((_=new Date).setHours(0,0,0,0),_):"CURRENT_TIMESTAMP"===e.column.toUpperCase()?new Date:this.featureValue(t,e.column,e);case"function":var T=this.evaluateNode(e.args,t);return this.isAggregate()?o.aggregateFunction(e.name,T):a.evaluateFunction(e.name,T)}throw new Error("Unsupported sql syntax "+e.type)},e}()}.apply(null,i))||(e.exports=n)},"2B1V":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("VfPl"),r("GntT")],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.layout=e,this.buffer="number"==typeof t?new ArrayBuffer(t*e.stride):t;for(var r=0,i=e.fieldNames;r<i.length;r++){var n=i[r],o=e.fields.get(n);this[n]=new o.constructor(this.buffer,o.offset,this.stride)}}return Object.defineProperty(e.prototype,"stride",{get:function(){return this.layout.stride},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this.buffer.byteLength/this.stride},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byteLength",{get:function(){return this.buffer.byteLength},enumerable:!0,configurable:!0}),e.prototype.getField=function(e,t){var r=this[e];return r&&r.elementCount===t.ElementCount&&r.elementType===t.ElementType?r:null},e.prototype.slice=function(t,r){return new e(this.layout,this.buffer.slice(t*this.stride,r*this.stride))},e.prototype.copyFrom=function(e,t,r,i){var n=this.stride;if(n%4==0){var o=new Uint32Array(e.buffer,t*n,i*n/4);new Uint32Array(this.buffer,r*n,i*n/4).set(o)}else{o=new Uint8Array(e.buffer,t*n,i*n);new Uint8Array(this.buffer,r*n,i*n).set(o)}},e}();t.InterleavedBuffer=n;var o=function(){function e(){this.stride=0,this.fields=new Map,this.fieldNames=[]}return e.prototype.vec2f=function(e,t){return this.appendField(e,r.BufferViewVec2f,t),this},e.prototype.vec2f64=function(e,t){return this.appendField(e,r.BufferViewVec2f64,t),this},e.prototype.vec3f=function(e,t){return this.appendField(e,r.BufferViewVec3f,t),this},e.prototype.vec3f64=function(e,t){return this.appendField(e,r.BufferViewVec3f64,t),this},e.prototype.vec4f=function(e,t){return this.appendField(e,r.BufferViewVec4f,t),this},e.prototype.vec4f64=function(e,t){return this.appendField(e,r.BufferViewVec4f64,t),this},e.prototype.mat3f=function(e,t){return this.appendField(e,r.BufferViewMat3f,t),this},e.prototype.mat3f64=function(e,t){return this.appendField(e,r.BufferViewMat3f64,t),this},e.prototype.mat4f=function(e,t){return this.appendField(e,r.BufferViewMat4f,t),this},e.prototype.mat4f64=function(e,t){return this.appendField(e,r.BufferViewMat4f64,t),this},e.prototype.vec4u8=function(e,t){return this.appendField(e,r.BufferViewVec4u8,t),this},e.prototype.f32=function(e,t){return this.appendField(e,r.BufferViewFloat,t),this},e.prototype.f64=function(e,t){return this.appendField(e,r.BufferViewFloat64,t),this},e.prototype.u8=function(e,t){return this.appendField(e,r.BufferViewUint8,t),this},e.prototype.u16=function(e,t){return this.appendField(e,r.BufferViewUint16,t),this},e.prototype.i8=function(e,t){return this.appendField(e,r.BufferViewInt8,t),this},e.prototype.vec2i8=function(e,t){return this.appendField(e,r.BufferViewVec2i8,t),this},e.prototype.vec2i16=function(e,t){return this.appendField(e,r.BufferViewVec2i16,t),this},e.prototype.vec2u8=function(e,t){return this.appendField(e,r.BufferViewVec2u8,t),this},e.prototype.vec4u16=function(e,t){return this.appendField(e,r.BufferViewVec4u16,t),this},e.prototype.u32=function(e,t){return this.appendField(e,r.BufferViewUint32,t),this},e.prototype.appendField=function(e,t,r){var n=t.ElementCount*i.elementTypeSize(t.ElementType),o=this.stride;this.fields.set(e,{size:n,constructor:t,offset:o,optional:r}),this.stride+=n,this.fieldNames.push(e)},e.prototype.alignTo=function(e){return this.stride=Math.floor((this.stride+e-1)/e)*e,this},e.prototype.hasField=function(e){return this.fieldNames.indexOf(e)>=0},e.prototype.createBuffer=function(e){return new n(this,e)},e.prototype.createView=function(e){return new n(this,e)},e.prototype.clone=function(){var t=new e;return t.stride=this.stride,t.fields=new Map,this.fields.forEach(function(e,r){return t.fields.set(r,e)}),t.fieldNames=this.fieldNames.slice(),t.BufferType=this.BufferType,t},e}();t.InterleavedLayout=o,t.newLayout=function(){return new o}}.apply(null,i))||(e.exports=n)},"3sea":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("qMld"),r("FXVB"),r("1m5D"),r("EuvN"),r("fdzS"),r("0LE5"),r("Rdxj"),r("Z4y+"),r("jmRc"),r("GS8/"),r("fBiT"),r("QyYG"),r("mmEe"),r("yBJI"),r("CIy2")],void 0===(n=function(e,t,r,i,n,o,a,s,u,l,c,f,p,h,d,y,v){var m=function(){function e(){}return e.prototype.process=function(e){var t=[e.geometryBuffer],i=this.transform(e,t);return r.resolve({result:i,transferList:t})},e.prototype.transform=function(e,t){var r=l.fromJSON(e.indexSR),n=l.fromJSON(e.vertexSR),o=l.fromJSON(e.renderSR),a=e.geometryBuffer,u=p.computeGlobalTransformation(e.mbs,e.elevationOffset,r,o);i.mat4.invert(g,u);var m=e.obb?null:h.create([0,0,0],[-1,-1,-1],[0,0,0,1]);s.vec3.copy(x,e.mbs),x[2]+=e.elevationOffset,s.vec3.copy(_,x);for(var b=!1,I=0,w=[],T=0,C=e.geometryData;T<C.length;T++)for(var S=C[T],E=S.geometries,B=S.componentOffsets,P=0,M=E;P<M.length;P++){var V=M[P],A=e.layouts[I];++I;var D=[{name:v.VertexAttrConstants.COLOR,byteValue:255}],F=[v.VertexAttrConstants.NORMAL,v.VertexAttrConstants.NORMALCOMPRESSED,v.VertexAttrConstants.SYMBOLCOLOR,v.VertexAttrConstants.COMPONENTINDEX],N=f.interleaveGeometryBuffer(V,a,A,D,F),L=new y(new Float32Array(N),A),R=L.getAttribute(v.VertexAttrConstants.POSITION),O=e.mbs,k=e.elevationOffset;if(p.reprojectPoints(R,O,g,k,r,n,o),m&&this._updateObb(m,R,u),e.needNormals){var j={normals:L.getAttribute(v.VertexAttrConstants.NORMALCOMPRESSED),positions:R,normalInd:L.getIndices(v.VertexAttrConstants.NORMALCOMPRESSED),positionInd:L.getIndices(v.VertexAttrConstants.POSITION)},z=e.normalReferenceFrame;f.processAndInterleaveNormals(z,V,a,u,j)}var U=L.getAttribute(v.VertexAttrConstants.COMPONENTINDEX);U&&this._createComponentNumbers(U,B);var q=L.getAttribute(v.VertexAttrConstants.COLOR);q&&!b&&(b=this._hasColors(q));var G={globalTrafo:u},Y=A[0].stride,Q=1-.8*Y/(Y+4),Z=c.default(N,Y/4,null,Q);if(null!=Z){var W=Z.uniqueCount<65536?new Uint16Array(Z.indices):Z.indices,J=f.extractPositionData(Z.buffer,A,W);w.push({layout:A,interleavedVertexData:Z.buffer,indices:W,corMatrices:G,hasColors:b,positionData:J}),t&&(t.push(Z.buffer),t.push(W.buffer),t.push(J.data.buffer),t.push(J.indices.buffer))}else{J=f.extractPositionData(N,A);w.push({layout:A,interleavedVertexData:N,corMatrices:G,hasColors:b,positionData:J}),t&&(t.push(N),t.push(J.data.buffer),t.push(J.indices.buffer))}}return m&&(s.vec3.transformMat4(m.center,m.center,u),d.vectorToVector(m.center,o,m.center,r),m.center[2]-=e.elevationOffset),{geometryBuffer:a,transformedGeometries:w,obb:m}},e.prototype._hasColors=function(e){for(var t=e.data,r=e.size,i=e.offsetIdx,n=e.strideIdx,o=i;o<t.length;o+=n)for(var a=0;a<r;a++)if(255!==t[o+a])return!0;return!1},e.prototype._createComponentNumbers=function(e,t){for(var r=e.data,i=e.offsetIdx,n=e.strideIdx,o=r.length/n,a=0,s=i,u=0;u<o;u++)u>=t[a+1]&&a++,r[s]=a,s+=n},e.prototype._updateObb=function(e,t,r){if(e.halfSize[0]>0){s.vec3.subtract(x,e.center,e.halfSize),s.vec3.add(_,e.center,e.halfSize);for(var i=t.offsetIdx;i<t.data.length;i+=t.strideIdx)x[0]=Math.min(x[0],t.data[i]),x[1]=Math.min(x[1],t.data[i+1]),x[2]=Math.min(x[2],t.data[i+2]),_[0]=Math.max(_[0],t.data[i]),_[1]=Math.max(_[1],t.data[i+1]),_[2]=Math.max(_[2],t.data[i+2]);s.vec3.subtract(e.halfSize,_,x),s.vec3.scale(e.halfSize,e.halfSize,.5),s.vec3.add(e.center,x,_),s.vec3.scale(e.center,e.center,.5)}else{h.compute(t,e);var n=2*Math.sqrt(1+r[0]+r[5]+r[10]);b[0]=(r[9]-r[6])/n,b[1]=(r[2]-r[8])/n,b[2]=(r[4]-r[1])/n,b[3]=.25*n,o.quat.conjugate(b,b),o.quat.multiply(e.quaternion,b,e.quaternion)}},e}(),g=n.mat4f64.create(),x=u.vec3f64.create(),_=u.vec3f64.create(),b=a.quatf32.create();return m}.apply(null,i))||(e.exports=n)},"4/qq":function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.queryCapabilities={supportsStatistics:!0,supportsCentroid:!0,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0}}.apply(null,i))||(e.exports=n)},"6+ni":function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.equals=function(e,t){return e===this.x&&t===this.y},e.prototype.isEqual=function(e){return e.x===this.x&&e.y===this.y},e.prototype.setCoords=function(e,t){this.x=e,this.y=t},e.prototype.normalize=function(){var e=this.x,t=this.y,r=Math.sqrt(e*e+t*t);this.x/=r,this.y/=r},e.prototype.rightPerpendicular=function(){var e=this.x;this.x=this.y,this.y=-e},e.prototype.move=function(e,t){this.x+=e,this.y+=t},e.prototype.assign=function(e){this.x=e.x,this.y=e.y},e.prototype.assignAdd=function(e,t){this.x=e.x+t.x,this.y=e.y+t.y},e.prototype.assignSub=function(e,t){this.x=e.x-t.x,this.y=e.y-t.y},e.prototype.rotate=function(e,t){var r=this.x,i=this.y;this.x=r*e-i*t,this.y=r*t+i*e},e.prototype.scale=function(e){this.x*=e,this.y*=e},e.prototype.length=function(){var e=this.x,t=this.y;return Math.sqrt(e*e+t*t)},e.distance=function(e,t){var r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)},e.add=function(t,r){return new e(t.x+r.x,t.y+r.y)},e.sub=function(t,r){return new e(t.x-r.x,t.y-r.y)},e}();t.Point=r}.apply(null,i))||(e.exports=n)},"6/KI":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("/COu"),r("xJgq"),r("Jvs9")],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"]}return e.prototype.createFeatureResult=function(){return new i.default},e.prototype.prepareFeatures=function(){},e.prototype.finishFeatureResult=function(){},e.prototype.addFeature=function(e,t){e.features.push(t)},e.prototype.createFeature=function(){return new r.default},e.prototype.createSpatialReference=function(){return{wkid:0}},e.prototype.createGeometry=function(){return new n.default},e.prototype.addField=function(e,t){e.fields.push(t)},e.prototype.addCoordinate=function(e,t){e.coords.push(t)},e.prototype.addCoordinatePoint=function(e,t){e.coords.push(t)},e.prototype.addLength=function(e,t){e.lengths.push(t)},e.prototype.createPointGeometry=function(){return new n.default},e}();t.Context=o}.apply(null,i))||(e.exports=n)},"6cAc":function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(e,t,r,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=e,this.y=t,this.width=r,this.height=i}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this.width<=0||this.height<=0},enumerable:!0,configurable:!0}),e}()}.apply(null,i))||(e.exports=n)},"6kSU":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("xhoE"),r("qKT0"),r("PND3"),r("BcWh"),r("H1tY"),r("jEml"),r("fUL3"),r("f3JK")],void 0===(n=function(e,t,r,i,n,o,a,s,u,l){Object.defineProperty(t,"__esModule",{value:!0});var c={added:[],removed:[]},f=new n.default,p=new l(0,0,0,0),h=function(e){function t(t){var r=e.call(this)||this;return r._tiles=new Map,r._index=s(9,a("csp-restrictions")?function(e){return{minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}}:[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),r.tiles=[],r.tileScheme=t,r}return r(t,e),t.prototype.destroy=function(){this._tiles.clear()},t.prototype.has=function(e){return this._tiles.has(e)},t.prototype.get=function(e){return this._tiles.get(e)},t.prototype.findByKey=function(e){return this._tiles.get(e.id)},t.prototype.intersections=function(e,t){var r="string"==typeof e?this.get(e):e;if(!r)return[];for(var i=t*r.resolution,n=r.bounds[0]-i,o=r.bounds[1]-i,a=r.bounds[2]+i,s=r.bounds[3]+i,u=[],l=0,c=this._index.search({minX:n,minY:o,maxX:a,maxY:s});l<c.length;l++){var f=c[l],p=f.bounds.slice();p[0]=Math.max(p[0],n),p[1]=Math.max(p[1],o),p[2]=Math.min(p[2],a),p[3]=Math.min(p[3],s),p[2]-p[0]>0&&p[3]-p[1]>0&&u.push({bounds:p,tile:f})}return u},t.prototype.boundsIntersections=function(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})},t.prototype.setViewState=function(e){var t=this.tileScheme.getTileCoverage(e,0);if(t){var r=t.spans,i=t.lodInfo,n=i.level;if(r.length>0)for(var o=0,a=r;o<a.length;o++)for(var s=a[o],l=s.row,h=s.colFrom,d=s.colTo,y=h;y<=d;y++){var v=p.set(n,l,i.normalizeCol(y),i.getWorldForColumn(y)).id;if(f.add(v),!this.has(v)){var m=new u.default(this.tileScheme,v);this._tiles.set(v,m),this._index.insert(m),this.tiles.push(m),c.added.push(m)}}for(var g=this.tiles.length-1;g>=0;g--){m=this.tiles[g];f.has(m.id)||(this._tiles.delete(m.id),this.tiles.splice(g,1),this._index.remove(m),c.removed.push(m))}(c.added.length||c.removed.length)&&this.emit("update",c),f.clear(),c.added.length=0,c.removed.length=0}},t}(o);t.default=h}.apply(null,i))||(e.exports=n)},"700l":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("xdHJ"),r("Ytki")],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this._fieldDataCache=new r.default,this._returnDistinctMap=new r.default,this.returnDistinctValues=e.returnDistinctValues,this.fieldsMap=t;var n=e.outFields;if(n&&-1===n.indexOf("*")){this.outFields=n;for(var o=0,a=0,s=n;a<s.length;a++){var u=s[a],l=i.getExpressionFromFieldName(u),c=this.fieldsMap.has(l),f=c?null:i.getWhereClause(l),p=c?this.fieldsMap.get(u).name:i.getAliasFromFieldName(u)||"FIELD_EXP_"+o++;this._fieldDataCache.set(u,{alias:p,clause:f})}}}return e.prototype.getAttributes=function(e){var t=e.attributes;return t=this._processAttributesForOutFields(t),this._processAttributesForDistinctValues(t)},e.prototype.getFieldValue=function(e,t){var r=e.attributes,n=this.fieldsMap.has(t),o=n?this.fieldsMap.get(t).name:t,a=null;return this._fieldDataCache.has(o)?a=this._fieldDataCache.get(o).clause:n||(a=i.getWhereClause(t),this._fieldDataCache.set(o,{alias:o,clause:a})),n?r[o]:a.calculateValue(r)},e.prototype.validateItem=function(e,t){return this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:i.getWhereClause(t)}),this._fieldDataCache.get(t).clause.testFeature(e.attributes)},e.prototype.validateItems=function(e,t){var r=this;this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:i.getWhereClause(t)});var n=e.map(function(e){return r.getAttributes(e)});return this._fieldDataCache.get(t).clause.testSet(n)},e.prototype._processAttributesForOutFields=function(e){var t=this.outFields;if(!e||!t||!t.length)return e;for(var r={},i=0,n=t;i<n.length;i++){var o=n[i],a=this._fieldDataCache.get(o),s=a.alias,u=a.clause;r[s]=u?u.calculateValue(e):e[s]}return r},e.prototype._processAttributesForDistinctValues=function(e){if(!e||!this.returnDistinctValues)return e;var t=this.outFields,r=[];if(t)for(var i=0,n=t;i<n.length;i++){var o=n[i],a=this._fieldDataCache.get(o).alias;r.push(e[a])}else for(var a in e)r.push(e[a]);var s=(t||["*"]).join(",")+"="+r.join(","),u=this._returnDistinctMap.get(s)||0;return this._returnDistinctMap.set(s,++u),u>1?null:e},e}();t.default=n}.apply(null,i))||(e.exports=n)},"7RGc":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("xhoE"),r("qKT0"),r("QVms"),r("1E+e"),r("6+ni"),r("SJ7f")],void 0===(n=function(e,t,r,i,n,o,a,s){return function(e){function t(t,r,i,n,o,a){var s=e.call(this,t,r)||this;if(t.hasDataDrivenFill!==i.isDataDriven())throw new Error("incompatible fill buffer");if(t.hasDataDrivenOutline!==o.isDataDriven())throw new Error("incompatible outline buffer");return s._fillVertexBuffer=i,s._fillIndexBuffer=n,s._outlineVertexBuffer=o,s._outlineIndexBuffer=a,s}return r(t,e),Object.defineProperty(t.prototype,"fillIndexStart",{get:function(){return this._fillIndexStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillIndexCount",{get:function(){return this._fillIndexCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outlineIndexStart",{get:function(){return this._outlineIndexStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outlineIndexCount",{get:function(){return this._outlineIndexCount},enumerable:!0,configurable:!0}),t.prototype.assignBufferInfo=function(e){var t=e;t._fillIndexStart=this._fillIndexStart,t._fillIndexCount=this._fillIndexCount,e.layer.getPaintProperty("fill-outline-color")?(t._outlineIndexStart=this._outlineIndexStart,t._outlineIndexCount=this._outlineIndexCount):(t._outlineIndexStart=0,t._outlineIndexCount=0)},t.prototype.processFeatures=function(e,t){this._fillIndexStart=this._fillIndexBuffer.index,this._fillIndexCount=0,this._outlineIndexStart=this._outlineIndexBuffer.index,this._outlineIndexCount=0;var r=this.layer,i=this.zoom,n=r.hasDataDrivenFill,o=r.hasDataDrivenOutline;e&&e.setExtent(this.layerExtent);var a=r.getPaintValue("fill-pattern",i),s=r.getPaintValue("fill-antialias",i)&&void 0===a,u=[1,1,1,1],l=[1,1,1,1],c=1;if(r.outlineUsesFillColor){if(s&&!r.hasDataDrivenOpacity){var f=r.getPaintValue("fill-opacity",i),p=r.getPaintValue("fill-opacity",i+1);f<1&&p<1&&(s=!1)}if(s&&!r.hasDataDrivenColor){var h=r.getPaintValue("fill-color",i),d=r.getPaintValue("fill-color",i+1);h[3]<1&&d[3]<1&&(s=!1)}}for(var y=0,v=this._features;y<v.length;y++){var m=v[y];!a&&r.hasDataDrivenColor&&(u=r.getPaintValue("fill-color",i,m)),r.hasDataDrivenOpacity&&(c=r.getPaintValue("fill-opacity",i,m)),!a&&r.hasDataDrivenOutlineColor&&(l=r.getPaintValue("fill-outline-color",i,m));var g=void 0;n&&(g={color:u,opacity:c});var x=void 0;o&&(x={color:r.outlineUsesFillColor?u:l,opacity:c});var _=m.getGeometry(e);this._processFeature(_,s,r.outlineUsesFillColor,g,x)}},t.prototype._processFeature=function(e,r,i,n,o){if(e){var a=e.length;if(r&&(!i||!o||o.color[3]*o.opacity==1))for(var s=0;s<a;s++)this._processOutline(e[s],o);var u;for(s=0;s<a;s++){var l=t._area(e[s]);l>128?(void 0!==u&&this._processFill(e,u,n),u=[s]):l<-128&&void 0!==u&&u.push(s)}void 0!==u&&this._processFill(e,u,n)}},t.prototype._processOutline=function(e,t){var r,i,n,o=this._outlineVertexBuffer,s=this._outlineIndexBuffer,u=s.index,l=new a.Point(0,0),c=new a.Point(0,0),f=new a.Point(0,0),p=-1,h=-1,d=-1,y=-1,v=-1,m=!1,g=e.length;if(!(g<2)){for(var x=e[0],_=e[g-1];g&&_.isEqual(x);)_=e[--g-1];if(!(g-0<2)){for(var b=0;b<g;++b){0===b?(r=e[g-1],i=e[0],n=e[1],l.assignSub(i,r),l.normalize(),l.rightPerpendicular()):(r=i,i=n,n=b!==g-1?e[b+1]:e[0],l.assign(c));var I=this._isClipEdge(r,i);-1===y&&(m=I),c.assignSub(n,i),c.normalize(),c.rightPerpendicular();var w=l.x*c.y-l.y*c.x;f.assignAdd(l,c),f.normalize();var T=-f.x*-l.x+-f.y*-l.y,C=Math.abs(0!==T?1/T:1);C>8&&(C=8),w>=0?(d=o.add(i.x,i.y,l.x,l.y,0,1,t),-1===y&&(y=d),p>=0&&h>=0&&d>=0&&!I&&s.add(p,h,d),h=o.add(i.x,i.y,C*-f.x,C*-f.y,0,-1,t),-1===v&&(v=h),p>=0&&h>=0&&d>=0&&!I&&s.add(p,h,d),p=h,h=d,d=o.add(i.x,i.y,f.x,f.y,0,1,t),p>=0&&h>=0&&d>=0&&!I&&s.add(p,h,d),h=o.add(i.x,i.y,c.x,c.y,0,1,t),p>=0&&h>=0&&d>=0&&!I&&s.add(p,h,d)):(d=o.add(i.x,i.y,C*f.x,C*f.y,0,1,t),-1===y&&(y=d),p>=0&&h>=0&&d>=0&&!I&&s.add(p,h,d),h=o.add(i.x,i.y,-l.x,-l.y,0,-1,t),-1===v&&(v=h),p>=0&&h>=0&&d>=0&&!I&&s.add(p,h,d),p=h,h=d,d=o.add(i.x,i.y,-f.x,-f.y,0,-1,t),p>=0&&h>=0&&d>=0&&!I&&s.add(p,h,d),(p=o.add(i.x,i.y,-c.x,-c.y,0,-1,t))>=0&&h>=0&&d>=0&&!I&&s.add(p,h,d))}p>=0&&h>=0&&y>=0&&!m&&s.add(p,h,y),p>=0&&y>=0&&v>=0&&!m&&s.add(p,v,y),this._outlineIndexCount+=3*(s.index-u)}}},t.prototype._processFill=function(e,t,r){var i;t.length>1&&(i=[]);for(var a=0,s=0,u=t;s<u.length;s++){var l=u[s];0!==a&&i.push(a),a+=e[l].length}for(var c=2*a,f=n.acquire(),p=0,h=t;p<h.length;p++)for(var d=e[l=h[p]],y=d.length,v=0;v<y;++v)f.push(d[v].x),f.push(d[v].y);var m=o(f,i,2),g=m.length;if(g>0){for(var x=this._fillVertexBuffer.index,_=0;_<c;)this._fillVertexBuffer.add(f[_++],f[_++],r);for(var b=0;b<g;)this._fillIndexBuffer.add(x+m[b++],x+m[b++],x+m[b++]);this._fillIndexCount+=g}n.release(f)},t.prototype._isClipEdge=function(e,t){return e.x===t.x?e.x<=-64||e.x>=4160:e.y===t.y&&(e.y<=-64||e.y>=4160)},t._area=function(e){for(var t=0,r=e.length-1,i=0;i<r;i++)t+=(e[i].x-e[i+1].x)*(e[i].y+e[i+1].y);return.5*(t+(e[r].x-e[0].x)*(e[r].y+e[0].y))},t}(s)}.apply(null,i))||(e.exports=n)},"7ahC":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("mu/x"),r("R+Pf"),r("lbhO")],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0}),t.pointSizeAlgorithmTypes={key:"type",base:r.default,typeMap:{"fixed-size":i.default,splat:n.default}}}.apply(null,i))||(e.exports=n)},"8HQk":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("QDcU"),r("BEeJ")],void 0===(n=function(e,t,r,i){return function(){function e(t,r,i){var n;switch(this.isDataDriven=!1,r.type){case"number":n=!0;break;case"color":n=!0,i=e._parseColor(i);break;case"array":n="number"===r.value;break;default:n=!1}null==i&&(i=r.default),n&&"interval"===i.type&&(n=!1);var o=i&&i.stops&&i.stops.length>0;if(o)for(var a=0,s=i.stops;a<s.length;a++){var u=s[a];u[1]=this._validate(u[1],r)}if(this.isDataDriven=!!i&&!!i.property,this.isDataDriven)if(void 0!==i.default&&(i.default=this._validate(i.default,r)),o)switch(i.type){case"identity":this.getValue=this._buildIdentity(i,r);break;case"categorical":this.getValue=this._buildCategorical(i,r);break;default:this.getValue=n?this._buildInterpolate(i,r):this._buildInterval(i,r)}else this.getValue=this._buildIdentity(i,r);else o?this.getValue=n?this._buildZoomInterpolate(i):this._buildZoomInterval(i):(i=this._validate(i,r),this.getValue=this._buildSimple(i))}return e.prototype._validate=function(e,t){if("number"===t.type){if(e<t.minimum)return t.minimum;if(e>t.maximum)return t.maximum}return e},e.prototype._buildSimple=function(e){return function(){return e}},e.prototype._buildIdentity=function(t,r){var i=this;return function(n,o){var a;return o&&(a=o.values[t.property],"color"===r.type&&(a=e._parseColor(a))),void 0===a&&(a=t.default),void 0!==a?i._validate(a,r):r.default}},e.prototype._buildCategorical=function(e,t){var r=this;return function(i,n){var o;return n&&(o=n.values[e.property]),void 0!==(o=r._categorical(o,e.stops))?o:void 0!==e.default?e.default:t.default}},e.prototype._buildInterval=function(e,t){var r=this;return function(i,n){var o;return n&&(o=n.values[e.property]),"number"==typeof o?r._interval(o,e.stops):void 0!==e.default?e.default:t.default}},e.prototype._buildInterpolate=function(e,t){var r=this;return function(i,n){var o;return n&&(o=n.values[e.property]),"number"==typeof o?r._interpolate(o,e.stops,e.base||1):void 0!==e.default?e.default:t.default}},e.prototype._buildZoomInterpolate=function(e){var t=this;return function(r){return t._interpolate(r,e.stops,e.base||1)}},e.prototype._buildZoomInterval=function(e){var t=this;return function(r){return t._interval(r,e.stops)}},e.prototype._categorical=function(e,t){for(var r=t.length,i=0;i<r;i++)if(t[i][0]===e)return t[i][1]},e.prototype._interval=function(e,t){for(var r=t.length,i=0,n=0;n<r&&t[n][0]<=e;n++)i=n;return t[i][1]},e.prototype._interpolate=function(e,t,r){for(var n,o,a=t.length,s=0;s<a;s++){var u=t[s];if(!(u[0]<=e)){o=u;break}n=u}if(n&&o){var l=o[0]-n[0],c=e-n[0],f=1===r?c/l:(Math.pow(r,c)-1)/(Math.pow(r,l)-1);if(Array.isArray(n[1])){var p=n[1],h=o[1],d=[];for(s=0;s<p.length;s++)d.push(i.interpolate(p[s],h[s],f));return d}return i.interpolate(n[1],o[1],f)}return n?n[1]:o?o[1]:void 0},e._isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},e._parseColor=function(t){if(Array.isArray(t))return t;if("string"!=typeof t)return t&&t.default&&(t.default=e._parseColor(t.default)),t&&t.stops&&(t.stops=t.stops.map(function(t){return[t[0],e._parseColor(t[1])]})),t;var i=new r(t);return this._isEmpty(i)?void 0:r.toUnitRGBA(i)},e}()}.apply(null,i))||(e.exports=n)},"8fHt":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("HZ3d"),r("Q2wQ"),r("rusB"),r("jmRc"),r("BIt0"),r("Fsr7"),r("W7eI"),r("HSGS"),r("kfwU")],void 0===(n=function(e,t,r,i,n,o,a,s,u,l,c){return function(){function e(){this.regularWriter=new l.RegularEdgeBufferWriter,this.silhouetteWriter=new l.SilhouetteEdgeBufferWriter}return e.prototype.process=function(e,t){return r(this,void 0,void 0,function(){var r,n,o;return i(this,function(i){switch(i.label){case 0:return t?(r=new Array,n=this.packInput(e,r),this.wrappedWork,[4,t.invoke("wrappedWork",n,{transferList:r})]):[3,2];case 1:return o=i.sent(),[2,this.unpackOutput(o)];case 2:return[2,this.work(e)]}})})},e.prototype.wrappedWork=function(e){return r(this,void 0,void 0,function(){var t,r,n;return i(this,function(i){return t=this.unpackInput(e),r=this.work(t),n=new Array,this.packInputTransferables(t,n),[2,{result:this.packOutput(r,n),transferList:n}]})})},e.prototype.work=function(e){var t=this.extractEdgeInformation(e.data,e.skipDeduplicate,e.originalIndices);return this.regularWriter.updateSettings(e.writerSettings),this.silhouetteWriter.updateSettings(e.writerSettings),c.extractEdges(t,this.regularWriter,this.silhouetteWriter)},e.prototype.packInputTransferables=function(e,t){t.push(e.data.buffer)},e.prototype.packInput=function(e,t){this.packInputTransferables(e,t);var r={dataBuffer:e.data.buffer,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate};return e.originalIndices&&(r.originalIndicesBuffer=e.originalIndices.buffer,r.originalIndicesType=n.isUint32Array(e.originalIndices)?"Uint32Array":"Uint16Array"),r},e.prototype.unpackInput=function(e){return{data:u.EdgeInputBufferLayout.createView(e.dataBuffer),originalIndices:"Uint32Array"===e.originalIndicesType?new Uint32Array(e.originalIndicesBuffer):"Uint16Array"===e.originalIndicesType?new Uint16Array(e.originalIndicesBuffer):void 0,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}},e.prototype.packOutput=function(e,t){return t.push(e.regular.lodInfo.lengths.buffer),t.push(e.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:s.packInterleavedBuffer(e.regular.instancesData,t),lodInfo:{lengths:e.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:s.packInterleavedBuffer(e.silhouette.instancesData,t),lodInfo:{lengths:e.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:e.averageEdgeLength}},e.prototype.unpackOutput=function(e){return{regular:{instancesData:s.unpackInterleavedBuffer(e.regular.instancesData),lodInfo:{lengths:new Float32Array(e.regular.lodInfo.lengths)}},silhouette:{instancesData:s.unpackInterleavedBuffer(e.silhouette.instancesData),lodInfo:{lengths:new Float32Array(e.silhouette.lodInfo.lengths)}},averageEdgeLength:e.averageEdgeLength}},e.prototype.extractEdgeInformation=function(e,t,r){if(t&&r)return{faces:r,neighbors:n=a.computeNeighbors(r,e.count),vertices:e};var i=o.default(e.buffer,e.stride/4,r),n=a.computeNeighbors(i.indices,i.uniqueCount);return{faces:i.indices,neighbors:n,vertices:u.EdgeInputBufferLayout.createView(i.buffer)}},e}()}.apply(null,i))||(e.exports=n)},ADZV:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("qMld")],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.when=function e(t,i){return Array.isArray(i)?r.create(function(e){t(i,function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e(t)})}):e(t,[i]).then(function(e){return e[0]})},t.getAbsMid=function(e,t,r){return t.toAbsMid?t.toAbsMid(e):r.id.replace(/\/[^\/]*$/gi,"/")+e}}.apply(null,i))||(e.exports=n)},ATxa:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("xhoE"),r("qKT0"),r("wURW"),r("SJ7f"),r("+j0K")],void 0===(n=function(e,t,r,i,n,o,a){var s=20,u=new n.Tessellator({distanceAlongCorrection:!0});return function(e){function t(t,r,i,o){var a=e.call(this,t,r)||this;if(a.extrudeVectorsDoubleBuffer=[n.allocExtrudeVectors(),n.allocExtrudeVectors()],a.firstExtrudeVectors=n.allocExtrudeVectors(),a.recycledTriangleBridge=n.allocTriangles(s),a.recycledTrianglePie=n.allocTriangles(s),t.hasDataDrivenLine!==i.isDataDriven())throw new Error("incompatible line buffer");return a._lineVertexBuffer=i,a._lineIndexBuffer=o,a}return r(t,e),Object.defineProperty(t.prototype,"lineIndexStart",{get:function(){return this._lineIndexStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineIndexCount",{get:function(){return this._lineIndexCount},enumerable:!0,configurable:!0}),t.prototype.assignBufferInfo=function(e){var t=e;t._lineIndexStart=this._lineIndexStart,t._lineIndexCount=this._lineIndexCount},t.prototype.processFeatures=function(e,t){this._lineIndexStart=this._lineIndexBuffer.index,this._lineIndexCount=0;var r=this.layer,i=this.zoom,n=r.hasDataDrivenLine;e&&e.setExtent(this.layerExtent);for(var o=r.getPaintValue("line-pattern",i),s=[1,1,1,1],u=1,l=1,c=0,f=this._features;c<f.length;c++){var p=f[c],h=new a.LineLayout(r,i,p);!o&&r.hasDataDrivenColor&&(s=r.getPaintValue("line-color",i,p)),r.hasDataDrivenOpacity&&(u=r.getPaintValue("line-opacity",i,p)),r.hasDataDrivenWidth&&(l=r.getPaintValue("line-width",i,p));var d=void 0;if(!(n&&(d={color:s,opacity:u,size:Math.max(Math.min(l,256),0)},d.size<=0||d.opacity<=0||d.color[3]<=0))){var y=p.getGeometry(e);this._processFeature(h,y,d)}}},t.prototype._processFeature=function(e,t,r){if(t)for(var i=t.length,n=0;n<i;n++)this._processGeometry(t[n],e,r)},t.prototype._processGeometry=function(e,t,r){if(!(e.length<2)){for(var i=e[0],o=e[e.length-1],a=o.x-i.x,s=o.y-i.y,u=a*a+s*s<1e-6,l=e[0],c=1;c<e.length;)(a=e[c].x-l.x)*a+(s=e[c].y-l.y)*s<1e-6?e.splice(c,1):(l=e[c],++c);if(!(e.length<2)){this.vertices=e,this.verticesLen=e.length,this.isClosed=u,this.cap=t.cap,this.join=t.join,this.almostParallelRads=.05,this.veryShallowRads=.1,this.miterSafeRads=n.MITER_SAFE_RADS,this.miterLimitMag=Math.min(t.miterLimit,n.SYSTEM_MAG_LIMIT),this.roundLimitRads=Math.min(t.roundLimit,.5),this.newRoundJoinsSafeRads=2.3;for(var f=this._lineIndexBuffer.index,p=0,h=void 0,d=this.verticesLen,y=0;y<d;++y){var v=e[y],m=e[(y+d-1)%d],g=u&&this._isClipEdge(m,v),x=h===this.extrudeVectorsDoubleBuffer[y%2]?this.extrudeVectorsDoubleBuffer[(y+1)%2]:this.extrudeVectorsDoubleBuffer[y%2];if(y<d-1||!u||this.hasPattern?(this._computeExtrudeVectors(x,y),this._writeGPUVertices(v.x,v.y,p,x,r),!x.capCenter||u&&y===d-1||this._writeGPUPieElements(x,g),u&&0===y&&!this.hasPattern&&n.copyExtrudeVectors(this.firstExtrudeVectors,x)):n.copyExtrudeVectors(x,this.firstExtrudeVectors),h&&this._writeGPUBridgeElements(h,x,g),y<d-1){var _=e[y+1];p+=n.length([_.x-v.x,_.y-v.y])}h=x}this._lineIndexCount+=3*(this._lineIndexBuffer.index-f)}}},t.prototype._computeExtrudeVectors=function(e,t){var r=this.vertices,i=this.verticesLen,o=this.isClosed,a=r[t],s=[void 0,void 0],u=[void 0,void 0];if(t>0&&t<i-1){var l=r[(t+i-1)%i],c=r[(t+1)%i];n.normalize(s,[a.x-l.x,a.y-l.y]),n.normalize(u,[c.x-a.x,c.y-a.y])}else if(0===t){c=r[(t+1)%i];if(n.normalize(u,[c.x-a.x,c.y-a.y]),o){var f=r[i-2];n.normalize(s,[a.x-f.x,a.y-f.y])}else s=u}else{if(t!==i-1)return;l=r[(t+i-1)%i];if(n.normalize(s,[a.x-l.x,a.y-l.y]),o){var p=r[1];n.normalize(u,[p.x-a.x,p.y-a.y])}else u=s}o||0!==t?o||t!==i-1?this._computeJoinExtrudeVectors(e,s,u):this._computeCapExtrudeVectors(e,s,u,n.CapPosition.END):this._computeCapExtrudeVectors(e,s,u,n.CapPosition.START)},t.prototype._computeCapExtrudeVectors=function(e,t,r,i){0===this.cap?u.buttCap(e,t,r):1===this.cap?u.roundCap(e,t,r,i,n.getNumberOfSlices(Math.PI),i===n.CapPosition.START?-1:1):2===this.cap?u.squareCap(e,t,r,i):u.buttCap(e,t,r)},t.prototype._computeJoinExtrudeVectors=function(e,t,r){var i=n.getRads(t,r);if(i>Math.PI-this.almostParallelRads)u.rectJoin(e,t,r);else if(0===this.join&&i>=this.veryShallowRads)u.bevelJoin(e,t,r,1);else if(1===this.join&&i>=this.veryShallowRads){var o=n.getNumberOfSlices(i);i<this.newRoundJoinsSafeRads?o<2||i<this.roundLimitRads?u.bevelJoin(e,t,r,1):u.roundJoin(e,t,r,o):u.unitRoundJoin(e,t,r,o)}else i<this.almostParallelRads?u.fastMiterJoin(e,t,r):i<this.miterSafeRads?u.miterJoin(e,t,r):u.bevelJoin(e,t,r,this.miterLimitMag)},t.prototype._writeGPUVertices=function(e,t,r,i,n){for(var o=0;o<i.vectors.count;++o){var a=i.vectors.items[o].vector[0],s=i.vectors.items[o].vector[1],u=i.vectors.items[o].texCoords[0],l=i.vectors.items[o].texCoords[1];i.vectors.items[o].base=this._lineVertexBuffer.index,this._lineVertexBuffer.add(e,t,a,s,u,l,r,n)}},t.prototype._writeGPUBridgeElements=function(e,t,r){if(u.bridge(this.recycledTriangleBridge,e,t),!r)for(var i=0;i<this.recycledTriangleBridge.count;++i){var n=this.recycledTriangleBridge.items[i];this._lineIndexBuffer.add(n.v1.base,n.v2.base,n.v3.base)}},t.prototype._writeGPUPieElements=function(e,t){if(u.pie(this.recycledTrianglePie,e),!t)for(var r=0;r<this.recycledTrianglePie.count;++r){var i=this.recycledTrianglePie.items[r];this._lineIndexBuffer.add(i.v1.base,i.v2.base,i.v3.base)}},t.prototype._isClipEdge=function(e,t){return e.x===t.x?e.x<=-64||e.x>=4160:e.y===t.y&&(e.y<=-64||e.y>=4160)},t}(o)}.apply(null,i))||(e.exports=n)},AWmc:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("V2ZO"),r("R+Pf"),r("lbhO")],void 0===(n=function(e,t,r,i,n){function o(e){return e&&a[e.type]||null}Object.defineProperty(t,"__esModule",{value:!0});var a={pointCloudFixedSizeAlgorithm:i.default,pointCloudSplatAlgorithm:n.default};t.read=function(e,t,i){var n=o(e);if(n){var a=new n;return a.read(e,i),a}return i&&i.messages&&e&&i.messages.push(new r("pointsizealgorithm:unsupported","Point size algorithms of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:i})),null},t.fromJSON=function(e){var t=o(e);return t?t.fromJSON(e):null}}.apply(null,i))||(e.exports=n)},BDCk:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("xhoE"),r("qKT0"),r("SJ7f")],void 0===(n=function(e,t,r,i,n){return function(e){function t(t,r){return e.call(this,t,r)||this}return r(t,e),t}(n)}.apply(null,i))||(e.exports=n)},BEeJ:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){function r(e,t){return(e%=t)>=0?e:e+t}Object.defineProperty(t,"__esModule",{value:!0}),t.C_INFINITY=Number.POSITIVE_INFINITY,t.C_PI=Math.PI,t.C_2PI=2*t.C_PI,t.C_PI_BY_2=t.C_PI/2,t.C_RAD_TO_256=128/t.C_PI,t.C_256_TO_RAD=t.C_PI/128,t.C_DEG_TO_256=256/360,t.C_DEG_TO_RAD=t.C_PI/180,t.C_SQRT2=1.414213562,t.C_SQRT2_INV=1/t.C_SQRT2;var i=1/Math.LN2;t.positiveMod=r,t.radToByte=function(e){return r(e*t.C_RAD_TO_256,256)},t.degToByte=function(e){return r(e*t.C_DEG_TO_256,256)},t.log2=function(e){return Math.log(e)*i},t.sqr=function(e){return e*e},t.clamp=function(e,t,r){return Math.min(Math.max(e,t),r)},t.interpolate=function(e,t,r){return e*(1-r)+t*r},t.between=function(e,t,r){return e>=t&&e<=r||e>=r&&e<=t}}.apply(null,i))||(e.exports=n)},BIt0:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.computeNeighbors=function(e,t){for(var r=e.length/3,i=new Uint32Array(t+1),n=new Uint32Array(t+1),o=function(e,t){e<t?i[e+1]++:n[t+1]++},a=0;a<r;a++){var s=e[3*a],u=e[3*a+1],l=e[3*a+2];o(s,u),o(u,l),o(l,s)}var c=0,f=0;for(a=0;a<t;a++){var p=i[a+1],h=n[a+1];i[a+1]=c,n[a+1]=f,c+=p,f+=h}var d=new Uint32Array(6*r),y=i[t],v=function(e,t,r){if(e<t){var o=i[e+1]++;d[2*o]=t,d[2*o+1]=r}else o=n[t+1]++,d[2*y+2*o]=e,d[2*y+2*o+1]=r};for(a=0;a<r;a++)s=e[3*a],u=e[3*a+1],l=e[3*a+2],v(s,u,a),v(u,l,a),v(l,s,a);var m=function(e,t){for(var r=2*e,i=t-e,n=1;n<i;n++){for(var o=d[r+2*n],a=d[r+2*n+1],s=n-1;s>=0&&d[r+2*s]>o;s--)d[r+2*s+2]=d[r+2*s],d[r+2*s+3]=d[r+2*s+1];d[r+2*s+2]=o,d[r+2*s+3]=a}};for(a=0;a<t;a++)m(i[a],i[a+1]),m(y+n[a],y+n[a+1]);var g=new Int32Array(3*r),x=function(t,r){return t===e[3*r]?0:t===e[3*r+1]?1:t===e[3*r+2]?2:-1},_=function(e,t){var r=x(e,t);g[3*t+r]=-1};for(a=0;a<t;a++){for(var b=i[a],I=i[a+1],w=n[a],T=n[a+1];b<I&&w<T;){var C=d[2*b];C===(S=d[2*y+2*w])?(function(e,t,r,i){var n=x(e,t);g[3*t+n]=i;var o=x(r,i);g[3*i+o]=t}(a,d[2*b+1],S,d[2*y+2*w+1]),b++,w++):C<S?(_(a,d[2*b+1]),b++):(_(S,d[2*y+2*w+1]),w++)}for(;b<I;)_(a,d[2*b+1]),b++;for(;w<T;){var S;_(S=d[2*y+2*w],d[2*y+2*w+1]),w++}}return g}}.apply(null,i))||(e.exports=n)},Cyw2:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("6+ni"),r("BEeJ")],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r,i){this.left=e,this.top=t,this.right=r,this.bottom=i}return e.prototype.clone=function(){return new e(this.left,this.top,this.right,this.bottom)},e.prototype.move=function(e,t){this.left+=e,this.top+=t,this.right+=e,this.bottom+=t},e.prototype.rotate=function(e,t){var r=this.left,i=this.right,n=this.top,o=this.bottom,a=r*e-n*t,s=r*t+n*e,u=i*e-n*t,l=i*t+n*e,c=r*e-o*t,f=r*t+o*e,p=i*e-o*t,h=i*t+o*e;this.left=Math.min(a,u,c,p),this.top=Math.min(s,l,f,h),this.right=Math.max(a,u,c,p),this.bottom=Math.max(s,l,f,h)},e.overlaps=function(e,t){return e.right>t.left&&e.left<t.right&&e.bottom>t.top&&e.top<t.bottom},e}();t.Box=n;var o=function(){function e(e,t,r,i){this.anchor=e,this.corners=t,this.minzoom=r,this.maxzoom=i}return e.prototype.left=function(){return this.corners[0].x},e.prototype.right=function(){return this.corners[2].x},e.prototype.top=function(){return this.corners[1].y},e.prototype.bottom=function(){return this.corners[3].y},e}();t.Obstacle=o;var a=function(){function e(e,t,r){this.obstacles=[],this.mapAngle=e,this.padding=t,this.isScreenAligned=r,this.minzoom=s}return e.prototype.addBox=function(e,t,i,n,a,s,u){var l=t.left*i-this.padding,c=t.top*i-this.padding,f=t.right*i+this.padding,p=t.bottom*i+this.padding,h=[new r.Point(l,c),new r.Point(f,c),new r.Point(f,p),new r.Point(l,p)];if(0!==this.mapAngle){var d=Math.cos(this.mapAngle),y=Math.sin(this.mapAngle);(e=e.clone()).rotate(d,y)}if(this.isScreenAligned||(n+=this.mapAngle),0!==n){d=Math.cos(n),y=Math.sin(n);h[0].rotate(d,y),h[1].rotate(d,y),h[2].rotate(d,y),h[3].rotate(d,y);for(var v=0,m=1;m<4;m++)h[m].x<h[v].x?v=m:h[m].x===h[v].x&&h[m].y<h[v].y&&(v=m);if(v){var g=[];for(m=0;m<4;m++)g.push(h[(m+v)%4]);h=g}}if(a)for(var x=0,_=h;x<_.length;x++){_[x].move(a[0],a[1])}this.obstacles.push(new o(e,h,s,u))},e}();t.Footprint=a;var s=.5,u=function(){function e(){this._grid=[]}return e.prototype.setAngle=function(e){},e.prototype.reset=function(){this._grid=[]},e.prototype.add=function(t){for(var r=this._grid,i=0,n=t.obstacles;i<n.length;i++)for(var o=n[i],a=o.anchor,s=e._gridClamp(Math.min(o.left()+a.x,a.x)),u=e._gridClamp(Math.max(o.right()+a.x,a.x)),l=e._gridClamp(Math.min(o.top()+a.y,a.y)),c=e._gridClamp(Math.max(o.bottom()+a.y,a.y)),f=l;f<=c;f++)for(var p=s;p<=u;p++){var h=r[16*f+p];h||(h=r[16*f+p]=[]),h.push(o)}},e.prototype.getMinZoom=function(t,r,n,o){if(0===t.obstacles.length)return i.C_INFINITY;for(var a=r,s=this._grid,u=0,l=t.obstacles;u<l.length;u++)for(var c=l[u],f=c.anchor,p=e._gridClamp(Math.min(c.left()+f.x,f.x)),h=e._gridClamp(Math.max(c.right()+f.x,f.x)),d=e._gridClamp(Math.min(c.top()+f.y,f.y)),y=e._gridClamp(Math.max(c.bottom()+f.y,f.y)),v=d;v<=y;v++)for(var m=p;m<=h;m++){var g=s[16*v+m];if(g)for(var x=0,_=g;x<_.length;x++){var b=_[x];if(!(c.minzoom>=b.maxzoom||b.minzoom>=c.maxzoom)&&(a=e._calcPlacementZoom(c,b,a))>=2)return i.C_INFINITY}}return a<2?a:i.C_INFINITY},e._gridClamp=function(e){return i.clamp(e>>9,-7,8)},e._calcPlacementZoom=function(t,r,n){var o=r.anchor.x-t.anchor.x;if(0===o&&(t.right()<r.left()||r.right()<t.left()))return n;var a=r.anchor.y-t.anchor.y;if(0===a&&(t.bottom()<r.top()||r.bottom()<t.top()))return n;var s=i.C_INFINITY;if(0!==o){var u=(o>0?t.right()-r.left():t.left()-r.right())/o;u<s&&(s=u);var l=o>0?e._calcExtZoomX(t,r,u):e._calcExtZoomX(r,t,u);l<s&&(s=l)}if(0!==a){var c=(a>0?t.bottom()-r.top():t.top()-r.bottom())/a;c<s&&(s=c);var f=a>0?e._calcExtZoomY(t,r,c):e._calcExtZoomY(r,t,c);f<s&&(s=f)}return s<t.minzoom||s<r.minzoom?n:((s=Math.min(s,t.maxzoom,r.maxzoom))<n&&(s=n),s)},e._calcExtZoomX=function(e,t,r){var i,n,o,a;if(e.anchor.y+e.corners[2].y/r<t.anchor.y+t.corners[0].y/r){var s=e.corners[2].x-e.corners[3].x,u=e.corners[2].y-e.corners[3].y,l=t.corners[1].x-t.corners[0].x;s*(t.corners[1].y-t.corners[0].y)-u*l>=0?e.anchor.y+e.corners[3].y/r<t.anchor.y+t.corners[0].y/r?(i=e.corners[3],n=t.corners[0],o=t.corners[1],a=1):(i=t.corners[0],n=e.corners[3],o=e.corners[2],a=-1):e.anchor.y+e.corners[2].y/r>t.anchor.y+t.corners[1].y/r?(i=e.corners[2],n=t.corners[0],o=t.corners[1],a=1):(i=t.corners[1],n=e.corners[3],o=e.corners[2],a=-1)}else{s=e.corners[2].x-e.corners[1].x,u=e.corners[2].y-e.corners[1].y,l=t.corners[3].x-t.corners[0].x;s*(t.corners[3].y-t.corners[0].y)-u*l<0?e.anchor.y+e.corners[1].y/r>t.anchor.y+t.corners[0].y/r?(i=e.corners[1],n=t.corners[0],o=t.corners[3],a=1):(i=t.corners[0],n=e.corners[1],o=e.corners[2],a=-1):e.anchor.y+e.corners[2].y/r<t.anchor.y+t.corners[3].y/r?(i=e.corners[2],n=t.corners[0],o=t.corners[3],a=1):(i=t.corners[3],n=e.corners[1],o=e.corners[2],a=-1)}var c=o.x-n.x,f=o.y-n.y;return a*((i.y-n.y)*c-(i.x-n.x)*f)/((e.anchor.x-t.anchor.x)*f-(e.anchor.y-t.anchor.y)*c)},e._calcExtZoomY=function(e,t,r){var i,n,o,a;if(e.anchor.x+e.corners[3].x/r<t.anchor.x+t.corners[1].x/r){var s=e.corners[3].x-e.corners[2].x,u=e.corners[3].y-e.corners[2].y,l=t.corners[0].x-t.corners[1].x;s*(t.corners[0].y-t.corners[1].y)-u*l<0?e.anchor.x+e.corners[2].x/r<t.anchor.x+t.corners[1].x/r?(i=e.corners[2],n=t.corners[1],o=t.corners[0],a=1):(i=t.corners[1],n=e.corners[2],o=e.corners[3],a=-1):e.anchor.x+e.corners[3].x/r>t.anchor.x+t.corners[0].x/r?(i=e.corners[3],n=t.corners[1],o=t.corners[0],a=1):(i=t.corners[0],n=e.corners[2],o=e.corners[3],a=-1)}else{s=e.corners[3].x-e.corners[0].x,u=e.corners[3].y-e.corners[0].y,l=t.corners[2].x-t.corners[1].x;s*(t.corners[2].y-t.corners[1].y)-u*l>0?e.anchor.x+e.corners[0].x/r>t.anchor.x+t.corners[1].x/r?(i=e.corners[0],n=t.corners[1],o=t.corners[2],a=1):(i=t.corners[1],n=e.corners[0],o=e.corners[3],a=-1):e.anchor.x+e.corners[3].x/r<t.anchor.x+t.corners[2].x/r?(i=e.corners[3],n=t.corners[1],o=t.corners[2],a=1):(i=t.corners[2],n=e.corners[0],o=e.corners[3],a=-1)}var c=o.x-n.x,f=o.y-n.y;return a*((i.y-n.y)*c-(i.x-n.x)*f)/((e.anchor.x-t.anchor.x)*f-(e.anchor.y-t.anchor.y)*c)},e}();t.ConflictEngine=u}.apply(null,i))||(e.exports=n)},DaHD:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("H1tY"),r("rg9i")],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0});var o={type:"esriSMS",style:"esriSMSCircle",size:6,color:[252,146,31,255],outline:{width:.75,color:[153,153,153,255]}},a={type:"esriSLS",style:"esriSLSSolid",width:1,color:[252,146,31,255]},s={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{width:.75,color:[255,255,255,191]}};t.createDrawingInfo=function(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?o:"esriGeometryPolyline"===e?a:s}}},t.createDefaultAttributesFunction=function(e,t){if(i("csp-restrictions"))return function(){var i;return r(((i={})[t]=null,i),e)};try{var n="this."+t+" = null;";for(var o in e)n+="this."+o+" = "+JSON.stringify(e[o])+";";var a=new Function(n);return function(){return new a}}catch(i){return function(){var i;return r(((i={})[t]=null,i),e)}}},t.createDefaultTemplate=function(e){return void 0===e&&(e={}),[{name:"New Feature",description:"",prototype:{attributes:n.clone(e)}}]}}.apply(null,i))||(e.exports=n)},EuvN:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("weYu")],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.quat=r}.apply(null,i))||(e.exports=n)},FPyo:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("QDcU"),r("ycL1"),r("rg9i"),r("Vx27"),r("1dvD")],void 0===(n=function(e,t,r,i,n,o,a,s,u){Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.value=0,t.color=null,t}var o;return r(t,e),o=t,t.prototype.clone=function(){return new o({label:this.label,value:this.value,color:a.clone(this.color)})},i([s.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),i([s.property({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"value",void 0),i([s.property({type:n,json:{type:[u.Integer],write:!0}})],t.prototype,"color",void 0),o=i([s.subclass("esri.renderers.support.pointCloud.StopInfo")],t)}(s.declared(o));t.StopInfo=l,t.default=l}.apply(null,i))||(e.exports=n)},Fsr7:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("VfPl"),r("2B1V")],void 0===(n=function(e,t,r,i,n){function o(e){var t=new Array;return e.fields.forEach(function(e,i){var n=r({},e,{constructor:s(e.constructor)});t.push([i,n])}),{stride:e.stride,fields:t,fieldNames:e.fieldNames}}function a(e){var t=n.newLayout();return t.stride=e.stride,t.fieldNames=e.fieldNames,e.fields.forEach(function(e){return t.fields.set(e[0],r({},e[1],{constructor:u(e[1].constructor)}))}),t}function s(e){return e.ElementType+"_"+e.ElementCount}function u(e){return c.get(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.packInterleavedBuffer=function(e,t){return t.push(e.buffer),{buffer:e.buffer,layout:o(e.layout)}},t.unpackInterleavedBuffer=function(e){return a(e.layout).createView(e.buffer)},t.packLayout=o,t.unpackLayout=a;var l=[i.BufferViewFloat,i.BufferViewVec2f,i.BufferViewVec3f,i.BufferViewVec4f,i.BufferViewMat3f,i.BufferViewMat4f,i.BufferViewFloat64,i.BufferViewVec2f64,i.BufferViewVec3f64,i.BufferViewVec4f64,i.BufferViewMat3f64,i.BufferViewMat4f64,i.BufferViewUint8,i.BufferViewVec2u8,i.BufferViewVec3u8,i.BufferViewVec4u8,i.BufferViewUint16,i.BufferViewVec2u16,i.BufferViewVec3u16,i.BufferViewVec4u16,i.BufferViewUint32,i.BufferViewVec2u32,i.BufferViewVec3u32,i.BufferViewVec4u32,i.BufferViewInt8,i.BufferViewVec2i8,i.BufferViewVec3i8,i.BufferViewVec4i8,i.BufferViewInt16,i.BufferViewVec2i16,i.BufferViewVec3i16,i.BufferViewVec4i16,i.BufferViewInt32,i.BufferViewVec2i32,i.BufferViewVec3i32,i.BufferViewVec4i32],c=new Map;l.forEach(function(e){return c.set(s(e),e)})}.apply(null,i))||(e.exports=n)},Fzzg:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("MYn5")],void 0===(n=function(e,t,r){function i(e,t,i,n,o,a){for(var s=r.getStride(o,a),u=i,l=i+s,c=0,f=0,p=0,h=0,d=0,y=0,v=n-1;y<v;y++,u+=s,l+=s){var m=t[u],g=t[u+1],x=t[u+2],_=t[l],b=t[l+1],I=t[l+2],w=m*b-_*g;h+=w,c+=(m+_)*w,f+=(g+b)*w,o&&(p+=(x+I)*(w=m*I-_*x),d+=w),m<e[0]&&(e[0]=m),m>e[1]&&(e[1]=m),g<e[2]&&(e[2]=g),g>e[3]&&(e[3]=g),o&&(x<e[4]&&(e[4]=x),x>e[5]&&(e[5]=x))}if(h>0&&(h*=-1),d>0&&(d*=-1),!h)return null;var T=[c,f,.5*h];return o&&(T[3]=p,T[4]=.5*d),T}function n(e,t,i,n,l){for(var c=r.getStride(n,l),f=t,p=t+c,h=0,d=0,y=0,v=0,m=0,g=i-1;m<g;m++,f+=c,p+=c){var x=e[f],_=e[f+1],b=e[f+2],I=e[p],w=e[p+1],T=e[p+2],C=n?a(x,_,b,I,w,T):o(x,_,I,w);if(C)if(h+=C,n){d+=C*(S=u(x,_,b,I,w,T))[0],y+=C*S[1],v+=C*S[2]}else{var S;d+=C*(S=s(x,_,I,w))[0],y+=C*S[1]}}return h>0?n?[d/h,y/h,v/h]:[d/h,y/h]:i>0?n?[e[t],e[t+1],e[t+2]]:[e[t],e[t+1]]:null}function o(e,t,r,i){var n=r-e,o=i-t;return Math.sqrt(n*n+o*o)}function a(e,t,r,i,n,o){var a=i-e,s=n-t,u=o-r;return Math.sqrt(a*a+s*s+u*u)}function s(e,t,r,i){return[e+.5*(r-e),t+.5*(i-t)]}function u(e,t,r,i,n,o){return[e+.5*(i-e),t+.5*(n-t),r+.5*(o-r)]}Object.defineProperty(t,"__esModule",{value:!0}),t.getCentroidOptimizedGeometry=function(e,t,o,a){if(!t||!t.lengths.length)return null;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);for(var s=e.coords,u=[],l=o?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],c=t.lengths,f=t.coords,p=r.getStride(o,a),h=0,d=0,y=c;d<y.length;d++){var v=y[d],m=i(l,f,h,v,o,a);m&&u.push(m),h+=v*p}if(u.sort(function(e,t){var r=e[2]-t[2];return 0===r&&o&&(r=e[4]-t[4]),r}),u.length){var g=6*u[0][2];s[0]=u[0][0]/g,s[1]=u[0][1]/g,o&&(g=6*u[0][4],s[2]=0!==g?u[0][3]/g:0),(s[0]<l[0]||s[0]>l[1]||s[1]<l[2]||s[1]>l[3]||o&&(s[2]<l[4]||s[2]>l[5]))&&(s.length=0)}if(!s.length){var x=t.lengths[0]?n(f,0,c[0],o,a):null;if(!x)return null;s[0]=x[0],s[1]=x[1],o&&x.length>2&&(s[2]=x[2])}return e},t.lineCentroid=n}.apply(null,i))||(e.exports=n)},"G+Sd":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("YhCz")],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.parsePBFFeatureQuery=function(e,t){var i=r.parseFeatureQuery(e,t).queryResult.featureResult;if(i&&i.features&&i.features.length&&i.objectIdFieldName)for(var n=i.objectIdFieldName,o=0,a=i.features;o<a.length;o++){var s=a[o];s.attributes&&(s.objectId=s.attributes[n])}return i}}.apply(null,i))||(e.exports=n)},GDRe:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("tI6k"),r("6+ni"),r("VY6u")],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,r){this.ratio=e,this.x=t,this.y=r},a=function(){function e(e,t,i,n,o){void 0===n&&(n=8),void 0===o&&(o=8),this.lines=[],this.starts=[],this.pixelRatio=n,this.pixelMargin=o,this.tileSize=r.TILE_SIZE*n,this.dz=e,this.yPos=t,this.xPos=i}return e.prototype.setExtent=function(e){this.finalRatio=this.tileSize/e*(1<<this.dz);var t=this.pixelRatio*this.pixelMargin;t/=this.finalRatio;var r=e>>this.dz;r<t&&(t=r),this.margin=t,this.xmin=r*this.xPos-t,this.ymin=r*this.yPos-t,this.xmax=this.xmin+r+2*t,this.ymax=this.ymin+r+2*t},e.prototype.reset=function(e){this.type=e,this.lines=[],this.starts=[],this.line=null,this.start=0},e.prototype.moveTo=function(e,t){this._pushLine(),this._prevIsIn=this._isIn(e,t),this._moveTo(e,t,this._prevIsIn),this._prevPt=new i.Point(e,t),this._firstPt=new i.Point(e,t),this._dist=0},e.prototype.lineTo=function(e,t){var r,n,a,s,u,l,c,f,p=this._isIn(e,t),h=new i.Point(e,t),d=i.Point.distance(this._prevPt,h);if(p)this._prevIsIn?this._lineTo(e,t,!0):(r=this._prevPt,n=h,a=this._intersect(n,r),this.start=this._dist+d*(1-this._r),this._lineTo(a.x,a.y,!0),this._lineTo(n.x,n.y,!0));else if(this._prevIsIn)n=this._prevPt,r=h,a=this._intersect(n,r),this._lineTo(a.x,a.y,!0),this._lineTo(r.x,r.y,!1);else{var y=this._prevPt,v=h;if(y.x<=this.xmin&&v.x<=this.xmin||y.x>=this.xmax&&v.x>=this.xmax||y.y<=this.ymin&&v.y<=this.ymin||y.y>=this.ymax&&v.y>=this.ymax)this._lineTo(v.x,v.y,!1);else{var m=[];if((y.x<this.xmin&&v.x>this.xmin||y.x>this.xmin&&v.x<this.xmin)&&(s=(this.xmin-y.x)/(v.x-y.x),(f=y.y+s*(v.y-y.y))<=this.ymin?l=!1:f>=this.ymax?l=!0:m.push(new o(s,this.xmin,f))),(y.x<this.xmax&&v.x>this.xmax||y.x>this.xmax&&v.x<this.xmax)&&(s=(this.xmax-y.x)/(v.x-y.x),(f=y.y+s*(v.y-y.y))<=this.ymin?l=!1:f>=this.ymax?l=!0:m.push(new o(s,this.xmax,f))),(y.y<this.ymin&&v.y>this.ymin||y.y>this.ymin&&v.y<this.ymin)&&(s=(this.ymin-y.y)/(v.y-y.y),(c=y.x+s*(v.x-y.x))<=this.xmin?u=!1:c>=this.xmax?u=!0:m.push(new o(s,c,this.ymin))),(y.y<this.ymax&&v.y>this.ymax||y.y>this.ymax&&v.y<this.ymax)&&(s=(this.ymax-y.y)/(v.y-y.y),(c=y.x+s*(v.x-y.x))<=this.xmin?u=!1:c>=this.xmax?u=!0:m.push(new o(s,c,this.ymax))),0===m.length)u?l?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):l?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(1<m.length&&m[0].ratio>m[1].ratio)this.start=this._dist+d*m[1].ratio,this._lineTo(m[1].x,m[1].y,!0),this._lineTo(m[0].x,m[0].y,!0);else{this.start=this._dist+d*m[0].ratio;for(var g=0;g<m.length;g++)this._lineTo(m[g].x,m[g].y,!0)}this._lineTo(v.x,v.y,!1)}}this._dist+=d,this._prevIsIn=p,this._prevPt=h},e.prototype.close=function(){if(2<this.line.length){var e=this._firstPt,t=this._prevPt;e.x===t.x&&e.y===t.y||this.lineTo(e.x,e.y);for(var r=this.line,i=r.length;4<=i&&(r[0].x===r[1].x&&r[0].x===r[i-2].x||r[0].y===r[1].y&&r[0].y===r[i-2].y);)r.pop(),r[0].x=r[i-2].x,r[0].y=r[i-2].y,--i}},e.prototype.result=function(e){return void 0===e&&(e=!0),this._pushLine(),0===this.lines.length?null:(3===this.type&&e&&u.simplify(this.tileSize,this.margin*this.finalRatio,this.lines),this.lines)},e.prototype.resultWithStarts=function(){if(2!==this.type)throw new Error("Only valid for lines");this._pushLine();var e=this.lines,t=e.length;if(0===t)return null;for(var r=[],i=0;i<t;i++)r.push({line:e[i],start:this.starts[i]||0});return r},e.prototype._isIn=function(e,t){return e>=this.xmin&&e<=this.xmax&&t>=this.ymin&&t<=this.ymax},e.prototype._intersect=function(e,t){var r,n,o;if(t.x>=this.xmin&&t.x<=this.xmax)o=((n=t.y<=this.ymin?this.ymin:this.ymax)-e.y)/(t.y-e.y),r=e.x+o*(t.x-e.x);else if(t.y>=this.ymin&&t.y<=this.ymax)o=((r=t.x<=this.xmin?this.xmin:this.xmax)-e.x)/(t.x-e.x),n=e.y+o*(t.y-e.y);else{n=t.y<=this.ymin?this.ymin:this.ymax;var a=((r=t.x<=this.xmin?this.xmin:this.xmax)-e.x)/(t.x-e.x),s=(n-e.y)/(t.y-e.y);a<s?(o=a,n=e.y+a*(t.y-e.y)):(o=s,r=e.x+s*(t.x-e.x))}return this._r=o,new i.Point(r,n)},e.prototype._pushLine=function(){this.line&&(1===this.type?0<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):2===this.type?1<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):3===this.type&&3<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start))),this.line=[],this.start=0},e.prototype._moveTo=function(e,t,r){3!==this.type?r&&(e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),this.line.push(new i.Point(e,t))):(r||(e<this.xmin&&(e=this.xmin),e>this.xmax&&(e=this.xmax),t<this.ymin&&(t=this.ymin),t>this.ymax&&(t=this.ymax)),e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),this.line.push(new i.Point(e,t)),this._is_h=!1,this._is_v=!1)},e.prototype._lineTo=function(e,t,r){var n,o;if(3!==this.type)if(r){if(e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),0<this.line.length&&(n=this.line[this.line.length-1]).equals(e,t))return;this.line.push(new i.Point(e,t))}else this.line&&0<this.line.length&&this._pushLine();else if(r||(e<this.xmin&&(e=this.xmin),e>this.xmax&&(e=this.xmax),t<this.ymin&&(t=this.ymin),t>this.ymax&&(t=this.ymax)),e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){var a=(n=this.line[this.line.length-1]).x===e,s=n.y===t;if(a&&s)return;this._is_h&&a?(n.x=e,n.y=t,(o=this.line[this.line.length-2]).x===e&&o.y===t?(this.line.pop(),this.line.length<=1?(this._is_h=!1,this._is_v=!1):(o=this.line[this.line.length-2],this._is_h=o.x===e,this._is_v=o.y===t)):(this._is_h=o.x===e,this._is_v=o.y===t)):this._is_v&&s?(n.x=e,n.y=t,(o=this.line[this.line.length-2]).x===e&&o.y===t?(this.line.pop(),this.line.length<=1?(this._is_h=!1,this._is_v=!1):(o=this.line[this.line.length-2],this._is_h=o.x===e,this._is_v=o.y===t)):(this._is_h=o.x===e,this._is_v=o.y===t)):(this.line.push(new i.Point(e,t)),this._is_h=a,this._is_v=s)}else this.line.push(new i.Point(e,t))},e}();t.TileClipper=a;var s=function(){function e(){}return e.prototype.setExtent=function(e){this._ratio=4096===e?1:4096/e},e.prototype.reset=function(e){this.type=e,this.lines=[],this.line=null},e.prototype.moveTo=function(e,t){this.line&&this.lines.push(this.line),this.line=[];var r=this._ratio;this.line.push(new i.Point(Math.round(e*r),Math.round(t*r)))},e.prototype.lineTo=function(e,t){var r=this._ratio;this.line.push(new i.Point(Math.round(e*r),Math.round(t*r)))},e.prototype.close=function(){var e=this.line;e&&!e[0].isEqual(e[e.length-1])&&e.push(e[0])},e.prototype.result=function(){return this.line&&this.lines.push(this.line),0===this.lines.length?null:(3===this.type&&1!==this._ratio&&u.simplify(4096,64,this.lines),this.lines)},e}();t.SimpleBuilder=s;var u=function(){function e(){}return e.simplify=function(t,r,i){if(i){for(var n=-r,o=t+r,a=-r,s=t+r,u=[],l=[],c=i.length,f=0;f<c;++f){var p=i[f];if(p&&!(p.length<2))for(var h=p[0],d=void 0,y=p.length,v=1;v<y;++v)d=p[v],h.x===d.x&&(h.x<=n&&(h.y>d.y?(u.push(f),u.push(v),u.push(0),u.push(-1)):(l.push(f),l.push(v),l.push(0),l.push(-1))),h.x>=o&&(h.y<d.y?(u.push(f),u.push(v),u.push(1),u.push(-1)):(l.push(f),l.push(v),l.push(1),l.push(-1)))),h.y===d.y&&(h.y<=a&&(h.x<d.x?(u.push(f),u.push(v),u.push(2),u.push(-1)):(l.push(f),l.push(v),l.push(2),l.push(-1))),h.y>=s&&(h.x>d.x?(u.push(f),u.push(v),u.push(3),u.push(-1)):(l.push(f),l.push(v),l.push(3),l.push(-1)))),h=d}if(0!==u.length&&0!==l.length){e.fillParent(i,l,u),e.fillParent(i,u,l);var m=[];e.calcDeltas(m,l,u),e.calcDeltas(m,u,l),e.addDeltas(m,i)}}},e.fillParent=function(e,t,r){for(var i=r.length,o=t.length,a=0;a<o;a+=4){for(var s=t[a],u=t[a+1],l=t[a+2],c=e[s][u-1],f=e[s][u],p=8092,h=-1,d=0;d<i;d+=4)if(r[d+2]===l){var y=r[d],v=r[d+1],m=e[y][v-1],g=e[y][v];switch(l){case 0:case 1:n.between(c.y,m.y,g.y)&&n.between(f.y,m.y,g.y)&&(x=Math.abs(g.y-m.y))<p&&(p=x,h=d);break;case 2:case 3:var x;n.between(c.x,m.x,g.x)&&n.between(f.x,m.x,g.x)&&(x=Math.abs(g.x-m.x))<p&&(p=x,h=d)}}t[a+3]=h}},e.calcDeltas=function(t,r,i){for(var n=r.length,o=0;o<n;o+=4){var a=e.calcDelta(o,r,i,[]);t.push(r[o]),t.push(r[o+1]),t.push(r[o+2]),t.push(a)}},e.calcDelta=function(t,r,i,n){var o=r[t+3];if(-1===o)return 0;var a=n.length;return 1<a&&n[a-2]===o?0:(n.push(o),e.calcDelta(o,i,r,n)+1)},e.addDeltas=function(e,t){for(var r=e.length,i=0,n=0;n<r;n+=4)i<(s=e[n+3])&&(i=s);for(n=0;n<r;n+=4){var o=t[e[n]],a=e[n+1],s=i-e[n+3];switch(e[n+2]){case 0:o[a-1].x-=s,o[a].x-=s,1===a&&(o[o.length-1].x-=s),a===o.length-1&&(o[0].x-=s);break;case 1:o[a-1].x+=s,o[a].x+=s,1===a&&(o[o.length-1].x+=s),a===o.length-1&&(o[0].x+=s);break;case 2:o[a-1].y-=s,o[a].y-=s,1===a&&(o[o.length-1].y-=s),a===o.length-1&&(o[0].y-=s);break;case 3:o[a-1].y+=s,o[a].y+=s,1===a&&(o[o.length-1].y+=s),a===o.length-1&&(o[0].y+=s)}}},e}(),l=function(){function e(){this.linesIn=[],this.linesOut=[]}return e.prototype.cut=function(e,t){var r;if(this.xCut=t,e.rings)this.closed=!0,r=e.rings,this.minPts=4;else{if(!e.paths)return null;this.closed=!1,r=e.paths,this.minPts=2}for(var i=0,n=r;i<n.length;i++)if((d=n[i])&&!(d.length<this.minPts)){for(var o=!0,a=0,s=d;a<s.length;a++){var u=s[a];o?(this.moveTo(u),o=!1):this.lineTo(u)}this.closed&&this.close()}this._pushLineIn(),this._pushLineOut(),r=[];for(var l=0,c=this.linesIn;l<c.length;l++)(d=c[l])&&d.length>=this.minPts&&r.push(d);for(var f=-2*this.xCut,p=0,h=this.linesOut;p<h.length;p++){var d;if((d=h[p])&&d.length>=this.minPts){for(var y=0,v=d;y<v.length;y++)(u=v[y])[0]+=f;r.push(d)}}return this.closed?e.rings=r:e.paths=r,e},e.prototype.moveTo=function(e){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(e[0]),this._moveTo(e[0],e[1],this._prevSide),this._prevPt=e,this._firstPt=e},e.prototype.lineTo=function(e){var t=this._side(e[0]);if(t*this._prevSide==-1){var r=this._intersect(this._prevPt,e);this._lineTo(this.xCut,r,0),this._prevSide=0,this._lineTo(e[0],e[1],t)}else this._lineTo(e[0],e[1],t);this._prevSide=t,this._prevPt=e},e.prototype.close=function(){var e=this._firstPt,t=this._prevPt;e[0]===t[0]&&e[1]===t[1]||this.lineTo(e),this._checkClosingPt(this.lineIn),this._checkClosingPt(this.lineOut)},e.prototype._moveTo=function(e,t,r){this.closed?(this.lineIn.push([r<=0?e:this.xCut,t]),this.lineOut.push([0<=r?e:this.xCut,t])):(r<=0&&this.lineIn.push([e,t]),0<=r&&this.lineOut.push([e,t]))},e.prototype._lineTo=function(e,t,r){this.closed?(this._addPolyVertex(this.lineIn,r<=0?e:this.xCut,t),this._addPolyVertex(this.lineOut,0<=r?e:this.xCut,t)):r<0?(0===this._prevSide&&this._pushLineOut(),this.lineIn.push([e,t])):0<r?(0===this._prevSide&&this._pushLineIn(),this.lineOut.push([e,t])):this._prevSide<0?(this.lineIn.push([e,t]),this.lineOut.push([e,t])):0<this._prevSide&&(this.lineOut.push([e,t]),this.lineIn.push([e,t]))},e.prototype._addPolyVertex=function(e,t,r){var i=e.length;1<i&&e[i-1][0]===t&&e[i-2][0]===t?e[i-1][1]=r:e.push([t,r])},e.prototype._checkClosingPt=function(e){var t=e.length;3<t&&e[0][0]===this.xCut&&e[t-2][0]===this.xCut&&e[1][0]===this.xCut&&(e[0][1]=e[t-2][1],e.pop())},e.prototype._side=function(e){return e<this.xCut?-1:e>this.xCut?1:0},e.prototype._intersect=function(e,t){var r=(this.xCut-e[0])/(t[0]-e[0]);return e[1]+r*(t[1]-e[1])},e.prototype._pushLineIn=function(){this.lineIn&&this.lineIn.length>=this.minPts&&this.linesIn.push(this.lineIn),this.lineIn=[]},e.prototype._pushLineOut=function(){this.lineOut&&this.lineOut.length>=this.minPts&&this.linesOut.push(this.lineOut),this.lineOut=[]},e}();t.CutVertical=l}.apply(null,i))||(e.exports=n)},"GS8/":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("qMld"),r("ab6c"),r("0LE5"),r("vlC2"),r("WRgd"),r("jmRc"),r("W2ph"),r("mmEe"),r("CIy2")],void 0===(n=function(e,t,i,n,o,a,s,u,l,c,f){function p(e,t,r,i,n,o,a){switch(r){case 1:for(var s=0;s<a;s++)i[n]=e[t],t+=1,n+=o;break;case 2:for(s=0;s<a;s++)i[n]=e[t],i[n+1]=e[t+1],t+=2,n+=o;break;case 3:for(s=0;s<a;s++)i[n]=e[t],i[n+1]=e[t+1],i[n+2]=e[t+2],t+=3,n+=o;break;case 4:for(s=0;s<a;s++)i[n]=e[t],i[n+1]=e[t+1],i[n+2]=e[t+2],i[n+3]=e[t+3],t+=4,n+=o;break;default:throw g("Unhandled stride size "+r)}}function h(e,t,r,i,n,o){switch(t){case 1:for(var a=0;a<o;a++)r[i]=e,i+=n;break;case 2:for(a=0;a<o;a++)r[i]=e,r[i+1]=e,i+=n;break;case 3:for(a=0;a<o;a++)r[i]=e,r[i+1]=e,r[i+2]=e,i+=n;break;case 4:for(a=0;a<o;a++)r[i]=e,r[i+1]=e,r[i+2]=e,r[i+3]=e,i+=n;break;default:throw g("Unhandled stride size "+t)}}function d(e){switch(e){case 5120:return Int8Array;case 5126:return Float32Array;case 5124:return Int32Array;case 5122:return Int16Array;case 5121:return Uint8Array;case 5125:return Uint32Array;case 5123:return Uint16Array}throw new Error("Unhandled data type: "+e)}function y(e){switch(e){case 5120:return"Int8";case 5126:return"Float32";case 5124:return"Int32";case 5122:return"Int16";case 5121:return"UInt8";case 5125:return"UInt32";case 5123:return"UInt16"}throw new Error("Unhandled data type: "+e)}function v(e){return e%Uint32Array.BYTES_PER_ELEMENT==0}function m(e){return e>0&&e%Uint32Array.BYTES_PER_ELEMENT==0}function g(e){return new Error("I3SGeometryUtil processing failed: "+e)}function x(e){var t=e.normals,r=e.positions,i=e.normalInd,s=e.positionInd;f.assert(e.normalInd.length===e.positionInd.length);for(var u=a.vec3f32.create(),l=a.vec3f32.create(),c=n.vec2f32.create(),p=r.data,h=r.offsetIdx,d=r.strideIdx,y=t.data,v=t.offsetIdx,m=t.strideIdx,g=0;g<s.length;g+=3){var x=s[g],_=h+d*x,b=p[_],I=p[_+1],w=p[_+2];_=h+d*(x=s[g+1]),u[0]=p[_]-b,u[1]=p[_+1]-I,u[2]=p[_+2]-w,_=h+d*(x=s[g+2]),l[0]=p[_]-b,l[1]=p[_+1]-I,l[2]=p[_+2]-w,o.vec3.cross(u,u,l),f.encodeNormal(u,c);for(var T=0;T<3;T++){var C=v+m*i[g+T];y[C]=f.encodeInt16(c[0]),y[C+1]=f.encodeInt16(c[1])}}}function _(e,t,r){var i=e.length/3,n=t.data,o=t.offsetIdx,a=t.strideIdx;if(null!=r)for(var s=r,u=s[0],l=s[1],c=s[2],p=s[4],h=s[5],d=s[6],y=s[8],v=s[9],m=s[10],g=0;g<i;g++){var x=e[3*g],_=e[3*g+1],b=e[3*g+2];B[0]=u*x+l*_+c*b,B[1]=p*x+h*_+d*b,B[2]=y*x+v*_+m*b,f.encodeNormal(B,P),n[o+g*a]=f.encodeInt16(P[0]),n[o+g*a+1]=f.encodeInt16(P[1])}else for(g=0;g<i;g++)B[0]=e[3*g],B[1]=e[3*g+1],B[2]=e[3*g+2],f.encodeNormal(B,P),n[o+g*a]=f.encodeInt16(P[0]),n[o+g*a+1]=f.encodeInt16(P[1])}function b(e,t){switch(t){case 0:switch(e.type){case"intersects":case"contains":case"crosses":case"envelope-intersects":case"overlaps":case"touches":case"within":return 1;case"disjoint":return 0}break;case 2:switch(e.type){case"intersects":case"contains":case"envelope-intersects":case"within":return 0;case"disjoint":case"crosses":case"overlaps":case"touches":return 1}break;case 1:switch(e.type){case"envelope-intersects":return 0}}return 2}function I(e,t){return T.contains(e.mask,t)?2:T.intersects(e.mask,t)?1:0}Object.defineProperty(t,"__esModule",{value:!0});var w=new Uint8Array(64);t.interleaveGeometryBuffer=function(e,t,r,i,n){void 0===i&&(i=[]),void 0===n&&(n=[]);var o=e.params.vertexAttributes,a=o.position.count;if(!m(r[0].stride))throw g("Layout stride must use "+Uint32Array.BYTES_PER_ELEMENT+"-byte words");for(var s=r[0].stride/Uint32Array.BYTES_PER_ELEMENT,u=new Uint32Array(s*a),l=0,c=r=r.slice(0).sort(function(e,t){return e.offset-t.offset});l<c.length;l++)!function(e){if(-1!==n.indexOf(e.name))return"continue";var r=o[e.name],s=d(e.type),l=void 0,c=!1;if(null==r){var f=i.filter(function(t){return t.name===e.name})[0];if(!f)throw g("Geometry definition is missing attribute");r={valueType:y(e.type),byteOffset:0,count:a,valuesPerElement:e.count};for(var x=0;x<w.length;x++)w[x]=f.byteValue;l=w.buffer,c=!0}else l=t;if(y(e.type)!==r.valueType)throw g("Geometry definition type must match attribute type");if(!v(r.byteOffset)||!v(e.offset))throw g(e.name+" offset must use "+Uint32Array.BYTES_PER_ELEMENT+"-byte words");if(!m(r.valuesPerElement*s.BYTES_PER_ELEMENT)||!m(e.count*s.BYTES_PER_ELEMENT))throw g(e.name+" data must use "+Uint32Array.BYTES_PER_ELEMENT+"-byte words");var _=new Uint32Array(l),b=r.byteOffset/Uint32Array.BYTES_PER_ELEMENT,I=r.valuesPerElement*s.BYTES_PER_ELEMENT/Uint32Array.BYTES_PER_ELEMENT,T=e.offset/Uint32Array.BYTES_PER_ELEMENT,C=e.stride/Uint32Array.BYTES_PER_ELEMENT;c?h(_[0],I,u,T,C,a):p(_,b,I,u,T,C,a)}(c[l]);return u.buffer},t.processAndInterleaveNormals=function(e,t,r,i,n){if("none"===e)x(n);else{var o="earth-centered"===e?i:null;_(l.createTypedView(r,t.params.vertexAttributes.normal),n.normals,o)}};var T,C=65536;t.extractPositionData=function(e,t,r){var i=t[0];if(null==i||"position"!==i.name||5126!==i.type)return null;for(var n=new Float32Array(e),o=i.stride/4,a=i.offset/4,s=3*n.length/o,l=new Float32Array(s),c=0;c<s/3;c++)l[3*c]=n[c*o+a],l[3*c+1]=n[c*o+a+1],l[3*c+2]=n[c*o+a+2];var f=u.default(l.buffer,3,r);return f.uniqueCount<C?{data:new Float32Array(f.buffer),indices:new Uint16Array(f.indices)}:{data:new Float32Array(f.buffer),indices:f.indices}},t.loadGeometryEngine=function(){return null!=T?i.resolve():i.create(function(e,t){return r.e(15).then(function(){var t=[r("21p4")];e.apply(null,t)}.bind(this)).catch(r.oe)}).then(function(e){return T=e})},t.acquireMaskFilterContext=function(e,t,r,i){var n=r.spatialReference||t.spatialReference,o=t.renderSpatialReference,a={rings:[[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]]],hasZ:!1,hasM:!1,type:"polygon",spatialReference:n};a.rings[0][4]=a.rings[0][0];var s=i.objectTransformation,u=i.getGeometryRecords()[0].geometry,l={rings:[[[0,0,0],[0,0,0],[0,0,0],[0,0,0]]],hasZ:!1,hasM:!1,type:"polygon",spatialReference:n};l.rings[0][3]=l.rings[0][0];var c=T[e];return c||(c=function(){return!0}),{type:e,mask:r,maskSR:n,renderSR:o,aabb:a,transform:s,geometry:u,triangle:l,testFunction:c}},t.getIntersectRelation=b,t.intersectMaskWithMbs=function(e,t){var r={x:t[0],y:t[1],hasZ:!1,hasM:!1,type:"point",spatialReference:e.maskSR};return I(e,T.buffer(r,t[3],1,!0))};var S=Math.pow(2,-32);t.filterMask=function(e,t){var r=t.type,i=t.mask,n=t.transform,a=t.renderSR,s=t.maskSR,u=t.geometry,l=t.triangle,p=t.testFunction,h=t.aabb;u.getComponentAABB(e,E);var d=[h.rings[0][0],h.rings[0][1],h.rings[0][2],h.rings[0][3]];o.vec3.set(d[0],E[0],E[1],0),o.vec3.set(d[1],E[0],E[4],0),o.vec3.set(d[2],E[3],E[4],0),o.vec3.set(d[3],E[3],E[1],0);for(var y=0;y<4;++y)o.vec3.transformMat4(d[y],d[y],n),c.vectorToVector(d[y],a,d[y],s);switch(delete h._geVersion,b(t,I(t,h))){case 1:return!1;case 0:return!0}var v,m=l.rings[0][0],g=l.rings[0][1],x=l.rings[0][2],_=u.data.getIndices(f.VertexAttrConstants.POSITION),w=u.data.componentOffsets,T=u.data.getAttribute(f.VertexAttrConstants.POSITION),C=T.data,B=T.offsetIdx,P=T.strideIdx,M=w.length?w[e]:0,V=w.length?w[e+1]:_.length;switch(r){case"intersects":case"crosses":case"envelope-intersects":case"index-intersects":case"overlaps":case"touches":v=function(){return p(i,l)?0:2};break;case"contains":case"disjoint":case"within":default:v=function(){return p(i,l)?2:1}}for(y=M;y<V;y+=3){var A=B+P*_[y+0],D=B+P*_[y+1],F=B+P*_[y+2];o.vec3.set(m,C[A+0],C[A+1],C[A+2]),o.vec3.set(g,C[D+0],C[D+1],C[D+2]),o.vec3.set(x,C[F+0],C[F+1],C[F+2]),o.vec3.transformMat4(m,m,n),o.vec3.transformMat4(g,g,n),o.vec3.transformMat4(x,x,n),c.vectorToVector(m,a,m,s),c.vectorToVector(g,a,g,s),c.vectorToVector(x,a,x,s);var N=g[0]-m[0],L=g[1]-m[1],R=x[0]-m[0],O=x[1]-m[1];if(!(Math.abs(N*O-L*R)<S))switch(delete l._geVersion,v()){case 1:return!1;case 0:return!0}}switch(r){case"intersects":case"crosses":case"envelope-intersects":case"index-intersects":case"overlaps":case"touches":return!1;case"contains":case"disjoint":case"within":default:return!0}};var E=s.create(),B=a.vec3f32.create(),P=n.vec2f32.create()}.apply(null,i))||(e.exports=n)},GntT:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("pcDC")],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.elementTypeSize=function(e){switch(e){case"u8":return 1;case"u16":return 2;case"u32":return 4;case"i8":return 1;case"i16":return 2;case"i32":case"f32":return 4;case"f64":return 8;default:r.neverReached(e)}},t.isSigned=function(e){switch(e){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:r.neverReached(e)}},t.isInteger=function(e){switch(e){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:r.neverReached(e)}},t.maximumValue=function(e){switch(e){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:r.neverReached(e)}}}.apply(null,i))||(e.exports=n)},HSGS:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("xhoE"),r("4w2c"),r("0LE5"),r("Rdxj"),r("MzcX"),r("W7eI")],void 0===(n=function(e,t,r,i,n,o,a,s,u){function l(e){var t=p;t[0]=e.position0[0],t[1]=e.position0[1],t[2]=e.position0[2],t[3]=e.position1[0],t[4]=e.position1[1],t[5]=e.position1[2],d[0]=5381;for(var r=0;r<h.length;r++)d[0]=31*d[0]+h[r];return d[0]}function c(e,t){var r=e<0?-1:1;return Math.pow(Math.abs(e),t)*r}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(){}return e.prototype.updateSettings=function(e){this.settings=e},e.prototype.write=function(e,t,r){var i=l(r);y.seed=i;var n=y.getIntRange(0,255),o=y.getIntRange(0,this.settings.variants-1),a=y.getFloat(),s=255*(.5*c(-(1-Math.min(a/.7,1))+Math.max(0,a-.7)/(1-.7),1.2)+.5);e.position0.setVec(t,r.position0),e.position1.setVec(t,r.position1),e.componentIndex.set(t,r.componentIndex),e.variantOffset.set(t,n),e.variantStroke.set(t,o),e.variantExtension.set(t,s)},e.prototype.trim=function(e,t){return e.slice(0,t)},e}();t.CommonBufferWriter=f;var p=new Float32Array(6),h=new Uint32Array(p.buffer),d=new Uint32Array(1),y=new n,v=function(){function e(){this.commonWriter=new f}return e.prototype.updateSettings=function(e){this.commonWriter.updateSettings(e)},e.prototype.allocate=function(e){return u.RegularEdgeInstancesLayout.createBuffer(e)},e.prototype.write=function(e,t,r){this.commonWriter.write(e,t,r),o.vec3.add(g,r.faceNormal0,r.faceNormal1),o.vec3.normalize(g,g),e.normal.setVec(t,g)},e.prototype.trim=function(e,t){return this.commonWriter.trim(e,t)},e.Layout=u.RegularEdgeInstancesLayout,e.glLayout=s.glLayout(u.RegularEdgeInstancesLayout,{prefixA:!0,divisor:1}),e}();t.RegularEdgeBufferWriter=v;var m=function(){function e(){this.commonWriter=new f}return e.prototype.updateSettings=function(e){this.commonWriter.updateSettings(e)},e.prototype.allocate=function(e){return u.SilhouetteEdgeInstancesLayout.createBuffer(e)},e.prototype.write=function(e,t,r){this.commonWriter.write(e,t,r),e.normalA.setVec(t,r.faceNormal0),e.normalB.setVec(t,r.faceNormal1)},e.prototype.trim=function(e,t){return this.commonWriter.trim(e,t)},e.Layout=u.SilhouetteEdgeInstancesLayout,e.glLayout=s.glLayout(u.SilhouetteEdgeInstancesLayout,{prefixA:!0,divisor:1}),e}();t.SilhouetteEdgeBufferWriter=m;var g=a.vec3f64.create()}.apply(null,i))||(e.exports=n)},IZzj:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("VGdt"),r("v7zm"),r("qMld"),r("GDRe"),r("UTXC"),r("BDCk"),r("OksM"),r("+jDF"),r("7RGc"),r("ATxa"),r("IoTX"),r("Q4b/")],void 0===(n=function(e,t,r,i,n,o,a,s,u,l,c,f,p,h){return function(){function e(e,t,r){this._pbfTiles={},this._tileClippers={},this._client=r,this._tile=t,this._layers=t.getLayers();var n=t.tileKey.split("/").map(parseFloat),a=n[0],s=n[1],u=n[2];this._level=a;for(var l=0,c=Object.keys(e);l<c.length;l++){var f=c[l],p=e[f];if(this._pbfTiles[f]=new i(new Uint8Array(p.protobuff),new DataView(p.protobuff)),p.refKey){var h=a-p.refKey.split("/").map(parseFloat)[0];if(h>0){var d=(1<<h)-1,y=s&d,v=u&d;this._tileClippers[f]=new o.TileClipper(h,y,v)}}this._tileClippers[f]||(this._tileClippers[f]=new o.SimpleBuilder)}}return e.prototype.parse=function(){for(var e,t=this,i=this._parseTileData(this._pbfTiles),o=this._layers,s=o.length,u=this._level,c=[],f=this._tileClippers,p={},h={},d=s-1;d>=0;d--)if(!((e=o[d]).minzoom&&u<e.minzoom||e.maxzoom&&u>=e.maxzoom||e.layout&&"none"===e.layout.visibility))if(0!==e.type){if(i[e.source]&&f[e.source]){var y=i[e.source],v=f[e.source],m=e.sourceLayer,g=y[m];if(g){var x=h[e.source];if(x||(x=h[e.source]=new Set),x.add(e.sourceLayer),I=this._createBucket(e)){I.layerIndex=d,I.layerExtent=g.extent,I.tileClipper=v;var _=p[e.source];_||(_=p[e.source]={});var b=_[m];b||(b=_[m]=[]),b.push(I)}}}}else{var I;(I=this._createBucket(e)).layerIndex=d,c.push(I)}for(var w=10*this._level,T=10*(this._level+1),C=[],S=[],E=[],B=[],P=new Set,M={},V=[],A=[],D=0,F=Object.keys(h);D<F.length;D++){!function(e){h[e].forEach(function(t){V.push(t),A.push(e)})}(F[D])}var N=0,L=0,R=V.length;return r(function(){if(t._tile.status===a.TileStatus.INVALID)return!0;switch(N){case 0:if(L<R){var e=A[L],r=V[L++];if(!i[e]||!p[e])break;var n=i[e][r];if(!(_=p[e][r])||0===_.length)break;for(var o=n.getData();o.next(2);){var s=new l(o.getMessage(),n),u=s.values;if(u){var c=u._minzoom;if(c&&c>=T)continue;var f=u._maxzoom;if(f&&f<=w)continue}for(var h=0,d=_;h<d.length;h++){(D=d[h]).pushFeature(s)}}}else{for(var y=t._tile,v=0,m=Object.keys(p);v<m.length;v++){e=m[v];var g=p[e];for(var x in g)for(var _,b=0,I=_=g[x];b<I.length;b++){var D;(D=I[b]).hasFeatures()&&(3===D.layer.type?(C.push(D),y.addBucket(D)):D.layer.refLayerId?E.push(D):(S.push(D),B[D.layer.id]=D))}}N=1,L=0,R=C.length}break;case 1:if(L<R){var F=C[L++];F.getResources(F.tileClipper,P,M)}else N=2}return 2===N}).then(function(){if(t._tile.status===a.TileStatus.INVALID)return[];var e,i,o=[],s=t._tile.getWorkerTileHandler();for(var u in P.size>0&&(e=s.fetchSprites(P,t._client),o.push(e)),M){var l=M[u];l.size>0&&(i=s.fetchGlyphs(t._tile.tileKey,u,l,t._client),o.push(i))}return n.all(o).then(function(e){if(t._tile.status===a.TileStatus.INVALID)return[];var i=0,n=0,o=S.length;return r(function(){if(t._tile.status===a.TileStatus.INVALID)return!0;switch(i){case 0:if(n<o)(s=S[n++]).processFeatures(s.tileClipper,t._tile),c.push(s);else i=1,n=0,o=E.length;break;case 1:for(var e=0,r=E;e<r.length;e++){var s=r[e],u=B[s.layer.refLayerId];u&&(u.assignBufferInfo(s),c.push(s))}i=2,n=0,o=C.length;break;case 2:if(n<o)(s=C[n++]).processFeatures(s.tileClipper,t._tile),c.push(s);else i=3}return 3===i}).then(function(){return c.sort(function(e,t){return e.layerIndex-t.layerIndex}),c})}).catch(function(e){return n.reject(new Error(e))})}).catch(function(e){return n.reject(new Error(e))})},e.prototype._parseTileData=function(e){for(var t={},r=0,i=Object.keys(e);r<i.length;r++){for(var n=i[r],o=e[n],a={};o.next();)switch(o.tag()){case 3:var s=new p(o.getMessage());a[s.name]=s;break;default:o.skip()}t[n]=a}return t},e.prototype._createBucket=function(e){switch(e.type){case 0:return this._createBackgroundBucket(e);case 1:return this._createFillBucket(e);case 2:return this._createLineBucket(e);case 4:return this._createCircleBucket(e);case 3:return this._createSymbolBucket(e)}},e.prototype._createBackgroundBucket=function(e){return new s(e,this._level)},e.prototype._createFillBucket=function(e){var t=this._tile;return new c(e,this._level,e.hasDataDrivenFill?t.fillDDVertexBuffer:t.fillVertexBuffer,t.fillIndexBuffer,e.hasDataDrivenOutline?t.outlineDDVertexBuffer:t.outlineVertexBuffer,t.outlineIndexBuffer)},e.prototype._createLineBucket=function(e){var t=this._tile;return new f(e,this._level,e.hasDataDrivenLine?t.lineDDVertexBuffer:t.lineVertexBuffer,t.lineIndexBuffer)},e.prototype._createCircleBucket=function(e){var t=this._tile;return new u(e,this._level,t.circleVertexBuffer,t.circleIndexBuffer)},e.prototype._createSymbolBucket=function(e){var t=this._tile;return new h(e,this._level,e.hasDataDrivenIcon?t.iconDDVertexBuffer:t.iconVertexBuffer,t.iconIndexBuffer,e.hasDataDrivenText?t.textDDVertexBuffer:t.textVertexBuffer,t.textIndexBuffer,t.placementEngine,t.getWorkerTileHandler())},e}()}.apply(null,i))||(e.exports=n)},Id87:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("6cAc")],void 0===(n=function(e,t,r){return function(){function e(e,t,r,i,n,o,a,s){this._glyphItems=e,this._maxWidth=t,this._lineHeight=r,this._letterSpacing=i,this._offset=n,this._hAnchor=o,this._vAnchor=a,this._justify=s}return e.prototype.getShaping=function(e,t){for(var r=this._letterSpacing,i=this._lineHeight,n=this._justify,o=this._maxWidth,a=[],s=0,u=0,l=0,c=0,f=-1,p=0,h=-1,d=e.length,y=0;y<d;y++){var v=e.charCodeAt(y);if(10!==v){for(var m=void 0,g=0,x=this._glyphItems;g<x.length&&!(m=x[g][v]);g++);if(m){if(a.push({codePoint:v,x:s,y:u,glyphMosaicItem:m}),s+=m.metrics.advance+r,0<o&&o<s&&0<=h){var _=h+1;I=a[_].x,p=Math.max(I,p);for(var b=_;b<a.length;b++)t?a[b].y-=i:a[b].y+=i,a[b].x-=I;n&&this._applyJustification(a,c,h),t?u-=i:u+=i,s-=I,++l,c=_,h=-1}++f,32===v&&(h=a.length-1)}}else{if(y===d-1)continue;if(c<=f){var I=(w=a[f]).x+w.glyphMosaicItem.metrics.advance;p=Math.max(I,p),n&&this._applyJustification(a,c,f),c=a.length}t?u-=i:u+=i,s=0,++l}}if(c<=f){var w,T=(w=a[f]).x+w.glyphMosaicItem.metrics.advance;p=Math.max(p,T),n&&this._applyJustification(a,c,f)}if(0<a.length){var C=(n-this._hAnchor)*p,S=(-this._vAnchor*(l+1)+.5)*i;t&&l&&(S+=l*i),C+=this._offset[0],S+=this._offset[1];for(var E=0,B=a;E<B.length;E++){var P=B[E];P.x+=C,P.y+=S}}return a},e.getBox=function(e){if(!e.length)return null;for(var t=1/0,r=1/0,i=0,n=0,o=0,a=e;o<a.length;o++){var s=a[o],u=s.glyphMosaicItem.metrics,l=u.height,c=u.left,f=u.top,p=u.width,h=s.x,d=s.y-(l-Math.abs(f)),y=h+p+c,v=d+l;t=Math.min(t,h),i=Math.max(i,y),r=Math.min(r,d),n=Math.max(n,v)}return{x:t,y:r,width:i-t,height:n-r}},e.addDecoration=function(e,t){var i=e.length;if(0!==i){for(var n=e[0].x+e[0].glyphMosaicItem.metrics.left,o=e[0].y,a=1;a<i;a++){var s=e[a];if(s.y!==o){var u=e[a-1].x+e[a-1].glyphMosaicItem.metrics.left+e[a-1].glyphMosaicItem.metrics.width;e.push({codePoint:0,x:n,y:o+t-3,glyphMosaicItem:{sdf:!0,rect:new r(4,0,4,8),metrics:{width:u-n,height:8,left:0,top:0,advance:0},page:0}}),o=s.y,n=s.x+s.glyphMosaicItem.metrics.left}}var l=e[i-1].x+e[i-1].glyphMosaicItem.metrics.left+e[i-1].glyphMosaicItem.metrics.width;e.push({codePoint:0,x:n,y:o+t-3,glyphMosaicItem:{sdf:!0,rect:new r(4,0,4,8),metrics:{width:l-n,height:8,left:0,top:0,advance:0},page:0}})}},e.prototype._applyJustification=function(e,t,r){for(var i=e[r],n=i.glyphMosaicItem.metrics.advance,o=(i.x+n)*this._justify,a=t;a<=r;a++)e[a].x-=o},e}()}.apply(null,i))||(e.exports=n)},IoTX:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(t){for(this.extent=4096,this.keys=[],this.values=[],this._pbfLayer=t.clone();t.next();)switch(t.tag()){case 1:this.name=t.getString();break;case 3:this.keys.push(t.getString());break;case 4:this.values.push(e._parseValue(t.getMessage()));break;case 5:this.extent=t.getUInt32();break;default:t.skip()}}return e.prototype.getData=function(){return this._pbfLayer},e._parseValue=function(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getInt64();case 5:return e.getUInt64();case 6:return e.getSInt64();case 7:return e.getBool();default:e.skip()}return null},e}()}.apply(null,i))||(e.exports=n)},Izrp:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("QDcU"),r("ycL1"),r("rg9i"),r("Vx27"),r("1dvD")],void 0===(n=function(e,t,r,i,n,o,a,s,u){Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.description=null,t.label=null,t.values=null,t.color=null,t}var o;return r(t,e),o=t,t.prototype.clone=function(){return new o({description:this.description,label:this.label,values:a.clone(this.values),color:a.clone(this.color)})},i([s.property({type:String,json:{write:!0}})],t.prototype,"description",void 0),i([s.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),i([s.property({type:[String],json:{write:!0}})],t.prototype,"values",void 0),i([s.property({type:n,json:{type:[u.Integer],write:!0}})],t.prototype,"color",void 0),o=i([s.subclass("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],t)}(s.declared(o));t.ColorUniqueValueInfo=l,t.default=l}.apply(null,i))||(e.exports=n)},J0rm:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("xhoE"),r("jZlN"),r("qMld"),r("ADZV"),r("8V7H"),r("Z4y+"),r("G+Sd"),r.dj.m(e)],void 0===(n=function(e,t,r,i,n,o,a,s,u,l){Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(){}return e.prototype._parseFeatureQuery=function(e){var t,r=u.parsePBFFeatureQuery(e.buffer,e.options);return e.options&&"dehydrated"===e.options.type&&(t=r.spatialReference.toJSON(),r.spatialReference=null),n.resolve({featureSet:r,sr:t})},e}(),f=function(t){function c(){var r=t.call(this)||this;return r._thread=void 0,a.open(o.getAbsMid("./PBFWorker",e,l),{strategy:"dedicated"}).then(function(e){void 0===r._thread?r._thread=e:e.close()}),r}return r(c,t),c.prototype.destroy=function(){this._thread&&this._thread.close(),this._thread=null},c.prototype.parseFeatureQuery=function(e,t){return e&&0!==e.byteLength?this._thread?this._thread.invoke("_parseFeatureQuery",{buffer:e,options:t},{transferList:[e]}).then(function(e){var t=e.featureSet;if(e.sr){var r=s.fromJSON(e.sr);t.spatialReference=r}for(var n=t.spatialReference,o=0,a=t.features;o<a.length;o++){var u=a[o];u.uid=i.generateUID(),u.geometry&&(u.geometry.spatialReference=n)}return e.featureSet}):n.resolve(u.parsePBFFeatureQuery(e,t)):n.resolve(null)},c}(c);t.PBFWorker=f,t.default=function(){return new c}}.apply(null,i))||(e.exports=n)},JG06:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}},e.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}},e.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"line-cap":{type:"enum",values:["butt","round","square"],default:"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],default:"miter"},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}},e.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"symbol-placement":{type:"enum",values:["point","line"],default:"point"},"symbol-spacing":{type:"number",minimum:1,default:250},"symbol-avoid-edges":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean",default:!1},"icon-ignore-placement":{type:"boolean",default:!1},"icon-optional":{type:"boolean",default:!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"icon-size":{type:"number",minimum:0,default:1},"icon-rotate":{type:"number",default:0},"icon-padding":{type:"number",minimum:0,default:2},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,default:16},"text-max-width":{type:"number",minimum:0,default:10},"text-line-height":{type:"number",default:1.2},"text-letter-spacing":{type:"number",default:0},"text-justify":{type:"enum",values:["left","center","right"],default:"center"},"text-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:"center"},"text-max-angle":{type:"number",minimum:0,default:45},"text-rotate":{type:"number",default:0},"text-padding":{type:"number",minimum:0,default:2},"text-keep-upright":{type:"boolean",default:!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:"none"},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-allow-overlap":{type:"boolean",default:!1},"text-ignore-placement":{type:"boolean",default:!1},"text-optional":{type:"boolean",default:!1}},e.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}},e.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-color":{type:"color",default:[0,0,0,1]},"background-pattern":{type:"string"}},e.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"fill-pattern":{type:"string"}},e.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-color":{type:"color",default:[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"line-width":{type:"number",minimum:0,default:1},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-blur":{type:"number",minimum:0,default:0},"line-dasharray":{type:"array",value:"number",default:[]},"line-pattern":{type:"string"}},e.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-halo-blur":{type:"number",minimum:0,default:0},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"}},e.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}},e.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-color":{type:"color",default:[0,0,0,1]},"circle-blur":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1}},e}();t.StyleDefinition=r}.apply(null,i))||(e.exports=n)},Kfys:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("pcDC"),r("ma1f")],void 0===(n=function(e,t,r,i,n){function o(e){return e[0].stride}function a(e){switch(e){case 5126:case 5124:case 5125:return 4;case 5122:case 5123:return 2;case 5120:case 5121:return 1;default:throw new Error("Unknown data type")}}function s(e){switch(e){case 6406:case 6409:return 1;case 6410:return 2;case 6407:return 3;case 6408:case 34041:return 4;case 33325:return 2;case 33326:case 35898:case 33327:return 4;case 33328:case 34842:return 8;case 34836:return 16;case 33189:return 2;case 34041:return 4;case 32854:return 2;case 36168:return 1;default:i.neverReached(e)}return 0}Object.defineProperty(t,"__esModule",{value:!0}),t.vertexCount=function(e,t){return e.vertexBuffers[t].size/o(e.layout[t])},t.getStride=o,t.getBytesPerElement=a,t.addDescriptor=function(e,t,r,i,n,o){var s=a(i);if(e.length>0){var u=e[0].stride,l=u+s*r;e.forEach(function(e){return e.stride=l}),e.push({name:t,count:r,type:i,offset:u,stride:l,normalized:n,divisor:o})}else e.push({name:t,count:r,type:i,offset:0,stride:s*r,normalized:n,divisor:o})},t.assertCompatibleVertexAttributeLocations=function(e,t){var r=e.locations===t.locations;return r},t.hasAttribute=function(e,t){for(var r=0;r<e.length;r++)if(e[r].name===t)return!0;return!1},t.findAttribute=function(e,t){for(var r=0;r<e.length;r++)if(e[r].name===t)return e[r];return null},t.copyFramebufferToTexture=function(e,t,r,i,n){void 0===n&&(n=0);var o=e.getBoundFramebufferObject(),a=e.getBoundTexture(0);e.bindFramebuffer(t),e.bindTexture(r,0),e.gl.copyTexImage2D(e.gl.TEXTURE_2D,n,r.descriptor.pixelFormat,i[0],i[1],i[2],i[3],0),e.gl.flush(),e.bindFramebuffer(o),e.bindTexture(a,0)},t.assert=function(e,t){if(!e)throw new n(t)},t.setBaseInstanceOffset=function(e,t){var i={};for(var n in e)i[n]=e[n].map(function(e){return e.divisor?r({},e,{baseInstance:t}):e});return i},t.bindVertexBufferLayout=function(e,t,r,i,n){var o=e.gl,a=e.capabilities.instancing;e.bindBuffer(r);for(var s=0,u=i;s<u.length;s++){var l=u[s],c=t[l.name],f=(n||(0+l.baseInstance?l.baseInstance:0))*l.stride;if(l.baseInstance&&l.divisor,l.count<=4)o.vertexAttribPointer(c,l.count,l.type,l.normalized,l.stride,l.offset+f),o.enableVertexAttribArray(c),l.divisor&&l.divisor>0&&a&&a.vertexAttribDivisor(c,l.divisor);else if(9===l.count)for(var p=0;p<3;p++)o.vertexAttribPointer(c+p,3,l.type,l.normalized,l.stride,l.offset+12*p+f),o.enableVertexAttribArray(c+p),l.divisor&&l.divisor>0&&a&&a.vertexAttribDivisor(c+p,l.divisor);else if(16===l.count)for(p=0;p<4;p++)o.vertexAttribPointer(c+p,4,l.type,l.normalized,l.stride,l.offset+16*p+f),o.enableVertexAttribArray(c+p),l.divisor&&l.divisor>0&&a&&a.vertexAttribDivisor(c+p,l.divisor)}},t.unbindVertexBufferLayout=function(e,t,r,i){var n=e.gl,o=e.capabilities.instancing;e.bindBuffer(r);for(var a=0,s=i;a<s.length;a++){var u=s[a],l=t[u.name];if(u.count<=4)n.disableVertexAttribArray(l),u.divisor&&u.divisor>0&&o&&o.vertexAttribDivisor(l,0);else if(9===u.count)for(var c=0;c<3;c++)n.disableVertexAttribArray(l+c),u.divisor&&u.divisor>0&&o&&o.vertexAttribDivisor(l+c,0);else if(16===u.count)for(c=0;c<4;c++)n.disableVertexAttribArray(l+c),u.divisor&&u.divisor>0&&o&&o.vertexAttribDivisor(l+c,0)}e.unbindBuffer(34962)},t.getBytesPerElementFormat=s,t.getGpuMemoryUsage=function e(t){if(!t)return 0;if("colorAttachment"in t)return t.glName?e(t.colorAttachment)+e(t.depthStencilAttachment):0;if("descriptor"in t)return t.glName?e(t.descriptor):0;var r=t.internalFormat||"pixelFormat"in t&&t.pixelFormat;if(!r)return 0;var i="hasMipmap"in t&&t.hasMipmap?1.3:1,n=t.width*t.height;return s(r)*n*i}}.apply(null,i))||(e.exports=n)},L8sq:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("VGdt"),r("SyoC"),r("qMld"),r("UTXC"),r("BDCk"),r("OksM"),r("7RGc"),r("BEeJ"),r("xfOW"),r("ATxa"),r("+fuo"),r("Q4b/"),r("IZzj"),r("kEzy")],void 0===(n=function(e,t,r,i,n,o,a,s,u,l,c,f,p,h,d,y){return function(){function e(){this.rotation=0,this.status=o.TileStatus.INITIALIZED,this._symbolBuckets=[],this.placementEngine=new p.PlacementEngine,this.fillVertexBuffer=new y.FillVertexBuffer(!1),this.fillDDVertexBuffer=new y.FillVertexBuffer(!0),this.fillIndexBuffer=new c.TriangleIndexBuffer,this.outlineVertexBuffer=new y.OutlineVertexBuffer(!1),this.outlineDDVertexBuffer=new y.OutlineVertexBuffer(!0),this.outlineIndexBuffer=new c.TriangleIndexBuffer,this.lineVertexBuffer=new y.LineVertexBuffer(!1),this.lineDDVertexBuffer=new y.LineVertexBuffer(!0),this.lineIndexBuffer=new c.TriangleIndexBuffer,this.iconVertexBuffer=new y.SymbolVertexBuffer(!1),this.iconDDVertexBuffer=new y.SymbolVertexBuffer(!0),this.iconIndexBuffer=new c.TriangleIndexBuffer,this.textVertexBuffer=new y.SymbolVertexBuffer(!1),this.textDDVertexBuffer=new y.SymbolVertexBuffer(!0),this.textIndexBuffer=new c.TriangleIndexBuffer,this.circleVertexBuffer=new y.CircleVertexBuffer,this.circleIndexBuffer=new c.TriangleIndexBuffer}return e.prototype.initialize=function(e,t,r,i){void 0===i&&(i=0),this.tileKey=e,this.refKeys=t,this._workerTileHandler=r,this.rotation=i,this.placementEngine.setAngle(l.C_DEG_TO_RAD*i)},e.prototype.release=function(){this.tileKey="",this.refKeys=null,this.status=o.TileStatus.INITIALIZED,this.rotation=0,this.resetData(),this._workerTileHandler=null},e.prototype.resetData=function(){this.fillVertexBuffer.reset(),this.fillDDVertexBuffer.reset(),this.fillIndexBuffer.reset(),this.outlineVertexBuffer.reset(),this.outlineDDVertexBuffer.reset(),this.outlineIndexBuffer.reset(),this.lineVertexBuffer.reset(),this.lineDDVertexBuffer.reset(),this.lineIndexBuffer.reset(),this.iconVertexBuffer.reset(),this.iconDDVertexBuffer.reset(),this.iconIndexBuffer.reset(),this.textVertexBuffer.reset(),this.textDDVertexBuffer.reset(),this.textIndexBuffer.reset(),this.circleVertexBuffer.reset(),this.circleIndexBuffer.reset(),this.placementEngine.reset(),this._symbolBuckets.length=0},e.prototype.reparse=function(e){return this.resetData(),this.setDataAndParse(this._data,e)},e.prototype.setDataAndParse=function(e,t){var r=this,i=t&&t.signal;if(i){var n=function(){i.removeEventListener("abort",n),r.status=o.TileStatus.INVALID};i.addEventListener("abort",n)}return this._data=e,this._parse(e,t).then(function(e){r.status=o.TileStatus.READY;for(var t=[1,r.fillVertexBuffer.sizeInBytes,2,r.fillDDVertexBuffer.sizeInBytes,3,r.fillIndexBuffer.sizeInBytes,4,r.outlineVertexBuffer.sizeInBytes,5,r.outlineDDVertexBuffer.sizeInBytes,6,r.outlineIndexBuffer.sizeInBytes,7,r.lineVertexBuffer.sizeInBytes,8,r.lineDDVertexBuffer.sizeInBytes,9,r.lineIndexBuffer.sizeInBytes,10,r.iconVertexBuffer.sizeInBytes,11,r.iconDDVertexBuffer.sizeInBytes,12,r.iconIndexBuffer.sizeInBytes,13,r.textVertexBuffer.sizeInBytes,14,r.textDDVertexBuffer.sizeInBytes,15,r.textIndexBuffer.sizeInBytes,16,r.circleVertexBuffer.sizeInBytes,17,r.circleIndexBuffer.sizeInBytes],i=new Uint32Array(t),n=[],l=e.length,c=0;c<l;c++){var p=e[c];if(p instanceof u)n.push(p.layerIndex),n.push(1),n.push(p.fillIndexStart),n.push(p.fillIndexCount),n.push(p.outlineIndexStart),n.push(p.outlineIndexCount);else if(p instanceof f)n.push(p.layerIndex),n.push(2),n.push(p.lineIndexStart),n.push(p.lineIndexCount);else if(p instanceof h){n.push(p.layerIndex),n.push(3),n.push(p.sdfMarker?1:0);var d=p.markerPageMap;n.push(d.size),d.forEach(function(e,t){n.push(t),n.push(e[0]),n.push(e[1])});var y=p.glyphsPageMap;n.push(y.size),y.forEach(function(e,t){n.push(t),n.push(e[0]),n.push(e[1])})}else p instanceof s?(n.push(p.layerIndex),n.push(4),n.push(p.circleIndexStart),n.push(p.circleIndexCount)):p instanceof a&&(n.push(p.layerIndex),n.push(0))}var v=new Uint32Array(n),m=r.fillVertexBuffer.toBuffer(),g=r.fillDDVertexBuffer.toBuffer(),x=r.fillIndexBuffer.toBuffer(),_=r.outlineVertexBuffer.toBuffer(),b=r.outlineDDVertexBuffer.toBuffer(),I=r.outlineIndexBuffer.toBuffer(),w=r.lineVertexBuffer.toBuffer(),T=r.lineDDVertexBuffer.toBuffer(),C=r.lineIndexBuffer.toBuffer(),S=r.iconVertexBuffer.toBuffer(),E=r.iconDDVertexBuffer.toBuffer(),B=r.iconIndexBuffer.toBuffer(),P=r.textVertexBuffer.toBuffer(),M=r.textDDVertexBuffer.toBuffer(),V=r.textIndexBuffer.toBuffer(),A=r.circleVertexBuffer.toBuffer(),D=r.circleIndexBuffer.toBuffer();return{result:{bufferDataInfo:i.buffer,bucketDataInfo:v.buffer,bufferData:[m,g,x,_,b,I,w,T,C,S,E,B,P,M,V,A,D]},transferList:[m,g,x,_,b,I,w,T,C,S,E,B,P,M,V,A,D,i.buffer,v.buffer]}})},e.prototype.addBucket=function(e){this._symbolBuckets.push(e)},e.prototype.updateSymbols=function(e){var t=this,i=this._symbolBuckets;if(!i||0===i.length)return n.resolve();this.rotation=e;var a=this.placementEngine;a.reset(),a.setAngle(e/256*360*l.C_DEG_TO_RAD);var s=this.iconVertexBuffer;s.reset();var u=this.iconDDVertexBuffer;u.reset();var c=this.iconIndexBuffer;c.reset();var f=this.textVertexBuffer;f.reset();var p=this.textDDVertexBuffer;p.reset();var h=this.textIndexBuffer;h.reset();var d=[],y=i.length,v=0;return r(function(){if(t.status===o.TileStatus.INVALID||t.status===o.TileStatus.INITIALIZED)return!0;if(v<y){var e=i[v++];if(e&&e.layer){var r=e.layer,n=e.copy(r.hasDataDrivenIcon?u:s,c,r.hasDataDrivenText?p:f,h,a);n&&(d.push(n),n.updateSymbols())}}return v>=y}).then(function(){if(t.status===o.TileStatus.INVALID||t.status===o.TileStatus.INITIALIZED||0===s.sizeInBytes&&0===u.sizeInBytes&&0===c.sizeInBytes&&0===f.sizeInBytes&&0===p.sizeInBytes&&0===h.sizeInBytes)return{result:null,transferList:null};var e=[10,s.sizeInBytes,11,u.sizeInBytes,12,c.sizeInBytes,13,f.sizeInBytes,14,p.sizeInBytes,15,h.sizeInBytes],r=new Uint32Array(e),i=[];y=d.length;for(var n=0;n<y;n++){var a=d[n];i.push(a.layerIndex),i.push(3),i.push(a.sdfMarker?1:0);var l=a.markerPageMap;i.push(l.size),l.forEach(function(e,t){i.push(t),i.push(e[0]),i.push(e[1])});var v=a.glyphsPageMap;i.push(v.size),v.forEach(function(e,t){i.push(t),i.push(e[0]),i.push(e[1])})}var m=new Uint32Array(i),g=s.toBuffer(),x=u.toBuffer(),_=c.toBuffer(),b=f.toBuffer(),I=p.toBuffer(),w=h.toBuffer();return{result:{bufferDataInfo:r.buffer,bucketDataInfo:m.buffer,bufferData:[g,x,_,b,I,w]},transferList:[g,x,_,b,I,w,r.buffer,m.buffer]}}).catch(function(){return null})},e.prototype.setObsolete=function(){this.status=o.TileStatus.INVALID},e.prototype.getLayers=function(){return this._workerTileHandler.getLayers()},e.prototype.getWorkerTileHandler=function(){return this._workerTileHandler},e.prototype._parse=function(e,t){return 0===Object.keys(e).length?n.resolve([]):(this.status=o.TileStatus.MODIFIED,new d(e,this,t.client).parse())},e.pool=new i(e),e}()}.apply(null,i))||(e.exports=n)},MI3s:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2fXB")],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,r,i,n){void 0===r&&(r=0),this.TypedArrayConstructor=e,this.elementCount=4;var o=this.TypedArrayConstructor;void 0===i&&(i=4*o.BYTES_PER_ELEMENT);var a=0===t.byteLength?0:r;this.typedBuffer=null==n?new o(t,a):new o(t,a,(n-r)/o.BYTES_PER_ELEMENT),this.typedBufferStride=i/o.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return e.prototype.getVec=function(e,t){return r.vec4.set(t,this.typedBuffer[e*this.typedBufferStride],this.typedBuffer[e*this.typedBufferStride+1],this.typedBuffer[e*this.typedBufferStride+2],this.typedBuffer[e*this.typedBufferStride+3])},e.prototype.setVec=function(e,t){this.typedBuffer[e*this.typedBufferStride]=t[0],this.typedBuffer[e*this.typedBufferStride+1]=t[1],this.typedBuffer[e*this.typedBufferStride+2]=t[2],this.typedBuffer[e*this.typedBufferStride+3]=t[3]},e.prototype.get=function(e,t){return this.typedBuffer[e*this.typedBufferStride+t]},e.prototype.set=function(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r},e.prototype.copyFrom=function(e,t,r){var i=this.typedBuffer,n=t.typedBuffer,o=e*this.typedBufferStride,a=r*t.typedBufferStride;i[o]=n[a],i[o+1]=n[a+1],i[o+2]=n[a+2],i[o+3]=n[a+3]},Object.defineProperty(e.prototype,"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0}),e.ElementCount=4,e}();t.BufferViewVec4Impl=i}.apply(null,i))||(e.exports=n)},MzcX:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf")],void 0===(n=function(e,t,r){function i(e){return"a"+e[0].toUpperCase()+e.substr(1)}function n(e){var t=a[e];if(t)return t;throw new Error("BufferType not supported in WebGL")}Object.defineProperty(t,"__esModule",{value:!0});var o={divisor:0,prefixA:!1};t.glLayout=function(e,t){void 0===t&&(t={}),t=r({},o,t);var a=e.stride;return e.fieldNames.filter(function(t){var r=e.fields.get(t).optional;return!(r&&r.glPadding)}).map(function(r){var o=e.fields.get(r),s=o.constructor.ElementCount,u=n(o.constructor.ElementType),l=o.offset,c=!(!o.optional||!o.optional.glNormalized);return{name:t.prefixA?i(r):r,stride:a,count:s,type:u,offset:l,normalized:c,divisor:t.divisor}})};var a={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126}}.apply(null,i))||(e.exports=n)},Nh3O:function(e,t,r){var i,n;i=[r("G/ag"),r("ajsq"),r("kDn6")],void 0===(n=function(e,t,r){e.getObject("string",!0,dojox);var i=t("dojox.string.BidiEngine",r,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(e,t,r){if(this.sourceToTarget=[],this.targetToSource=[],!e)return"";if(M(this.sourceToTarget,this.targetToSource,e.length),!this.checkParameters(t,r))return e;t=this.inputFormat,r=this.outputFormat;var i=e,o=L,s=E(t.charAt(1)),u=E(r.charAt(1)),l=("I"===t.charAt(0)?"L":t.charAt(0))+s,f=("I"===r.charAt(0)?"L":r.charAt(0))+u,p=t.charAt(2)+r.charAt(2);o.defInFormat=l,o.defOutFormat=f,o.defSwap=p;var h=n(e,l,f,p,o),d=!1;return"R"===r.charAt(1)?d=!0:"C"!==r.charAt(1)&&"D"!==r.charAt(1)||(d=this.checkContextual(h)),this.sourceToTarget=D,this.targetToSource=V(this.sourceToTarget),F=this.targetToSource,i=t.charAt(3)===r.charAt(3)?h:"S"===r.charAt(3)?a(d,h,!0):c(h,d,!0),this.sourceToTarget=D,this.targetToSource=F,this.levels=N,i},_inputFormatSetter:function(e){if(!z.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=e},_outputFormatSetter:function(e){if(!z.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=e},checkParameters:function(e,t){return e?this.set("inputFormat",e):e=this.inputFormat,t?this.set("outputFormat",t):t=this.outputFormat,e!==t},checkContextual:function(e){var t=u(e);if("ltr"!==t&&"rtl"!==t){try{t=document.dir.toLowerCase()}catch(e){}"ltr"!==t&&"rtl"!==t&&(t="ltr")}return t},hasBidiChar:function(e){return U.test(e)}});function n(e,t,r,i,a){var s=o(e,{inFormat:t,outFormat:r,swap:i},a);if(s.inFormat===s.outFormat)return e;t=s.inFormat,r=s.outFormat,i=s.swap;var u=t.substring(0,1),l=t.substring(1,4),c=r.substring(0,1),p=r.substring(1,4);if(a.inFormat=t,a.outFormat=r,a.swap=i,"L"===u&&"VLTR"===r){if("LTR"===l)return a.dir=k,f(e,a);if("RTL"===l)return a.dir=j,f(e,a)}if("V"===u&&"V"===c)return a.dir="RTL"===l?j:k,y(e,a);if("L"===u&&"VRTL"===r)return"LTR"===l?(a.dir=k,e=f(e,a)):(a.dir=j,e=f(e,a)),y(e);if("VLTR"===t&&"LLTR"===r)return a.dir=k,f(e,a);if("V"===u&&"L"===c&&l!==p)return e=y(e),"RTL"===l?n(e,"LLTR","VLTR",i,a):n(e,"LRTL","VRTL",i,a);if("VRTL"===t&&"LRTL"===r)return n(e,"LRTL","VRTL",i,a);if("L"===u&&"L"===c){var h=a.swap;return a.swap=h.substr(0,1)+"N","RTL"===l?(a.dir=j,e=f(e,a),a.swap="N"+h.substr(1,2),a.dir=k,e=f(e,a)):(a.dir=k,e=f(e,a),a.swap="N"+h.substr(1,2),e=n(e,"VLTR","LRTL",a.swap,a)),e}}function o(e,t,r){if(void 0===t.inFormat&&(t.inFormat=r.defInFormat),void 0===t.outFormat&&(t.outFormat=r.defOutFormat),void 0===t.swap&&(t.swap=r.defSwap),t.inFormat===t.outFormat)return t;var i,n=t.inFormat.substring(0,1),o=t.inFormat.substring(1,4),a=t.outFormat.substring(0,1),s=t.outFormat.substring(1,4);return"C"===o.charAt(0)&&(o="ltr"===(i=u(e))||"rtl"===i?i.toUpperCase():"L"===t.inFormat.charAt(2)?"LTR":"RTL",t.inFormat=n+o),"C"===s.charAt(0)&&(s="rtl"===(i=u(e))?"RTL":"ltr"===i?(i=l(e)).toUpperCase():"L"===t.outFormat.charAt(2)?"LTR":"RTL",t.outFormat=a+s),t}function a(e,t,r){if(0!==t.length){void 0===e&&(e=!0),void 0===r&&(r=!0);var i=(t=String(t)).split(""),n=0,o=1,a=i.length;e||(n=i.length-1,o=-1,a=1);for(var u=s(i,n,o,a,r),l="",c=0;c<i.length;c++)r&&v(u,u.length,c)>-1?(A(F,c,!e,-1),D.splice(c,1)):l+=i[c];return l}}function s(e,t,r,i,n){for(var o=0,a=[],s=0,u=t;u*r<i;u+=r)if(m(e[u])||S(e[u])){if("ل"===e[u]&&x(e,u+r,r,i)){e[u]=P(e[u+r],0===o?Y:Q),B(e,u+=r,r,i),n&&(a[s]=u,s++),o=0;continue}var l=e[u];1===o?e[u]=g(e,u+r,r,i)?T(e[u]):C(e[u],J):!0===g(e,u+r,r,i)?e[u]=C(e[u],H):e[u]=C(e[u],W),S(l)||(o=1),!0===w(l)&&(o=0)}else o=0;return a}function u(e){var t=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(e);return t?t[0]<="z"?"ltr":"rtl":""}function l(e){var t=e.split("");return t.reverse(),u(t.join(""))}function c(e,t,r){if(0!==e.length){void 0===r&&(r=!0),void 0===t&&(t=!0);var i,n="";i=(e=String(e)).split("");for(var o=0;o<e.length;o++){var a=!1;if(i[o]>="ﹰ"&&i[o]<"\ufeff"){var s=e.charCodeAt(o);i[o]>="ﻵ"&&i[o]<="ﻼ"?(t?(o>0&&r&&" "===i[o-1]?n=n.substring(0,n.length-1)+"ل":(n+="ل",a=!0),n+=G[(s-65269)/2]):(n+=G[(s-65269)/2],n+="ل",o+1<e.length&&r&&" "===i[o+1]?o++:a=!0),a&&(A(F,o,!0,1),D.splice(o,0,D[o]))):n+=$[s-65136]}else n+=i[o]}return n}}function f(e,t){var r=e.split(""),i=[];return p(r,i,t),d(r,i,t),_(2,r,i,t),_(1,r,i,t),N=i,r.join("")}function p(e,t,r){var i,n,o,a=e.length,s=r.dir?ie:re,u=null,l=null,c=null,f=0,p=null,d=-1,y=null,v=null,m=[],g=[];for(r.hiLevel=r.dir,r.lastArabic=!1,r.hasUbatAl=!1,r.hasUbatB=!1,r.hasUbatS=!1,y=0;y<a;y++)m[y]=(i=e[y],n=void 0,o=void 0,n=i.charCodeAt(0),(o=me[n>>8])<ve?o:ge[o-ve][255&n]);for(v=0;v<a;v++){if(u=f,g[v]=l=b(e,m,g,v,r),p=240&(f=s[u][l]),f&=15,t[v]=c=s[f][R],p>0)if(16===p){for(y=d;y<v;y++)t[y]=1;d=-1}else d=-1;if(s[f][O])-1===d&&(d=v);else if(d>-1){for(y=d;y<v;y++)t[y]=c;d=-1}m[v]===le&&(t[v]=0),r.hiLevel|=c}r.hasUbatS&&h(m,t,a,r)}function h(e,t,r,i){for(var n=0;n<r;n++)if(e[n]===ce){t[n]=i.dir;for(var o=n-1;o>=0&&e[o]===pe;o--)t[o]=i.dir}}function d(e,t,r){if(0!==r.hiLevel&&r.swap.substr(0,1)!==r.swap.substr(1,2))for(var i=0;i<e.length;i++)1===t[i]&&(e[i]=I(e[i]))}function y(e,t){var r=e.split("");if(t){var i=[];p(r,i,t),N=i}return r.reverse(),D.reverse(),r.join("")}function v(e,t,r){for(var i=0;i<t;i++)if(e[i]===r)return i;return-1}function m(e){for(var t=0;t<ee.length;t++)if(e>=ee[t]&&e<=te[t])return!0;return!1}function g(e,t,r,i){for(;t*r<i&&S(e[t]);)t+=r;return!!(t*r<i&&m(e[t]))}function x(e,t,r,i){for(;t*r<i&&S(e[t]);)t+=r;var n=" ";if(!(t*r<i))return!1;n=e[t];for(var o=0;o<G.length;o++)if(G[o]===n)return!0;return!1}function _(e,t,r,i){if(!(i.hiLevel<e)){if(1===e&&i.dir===j&&!i.hasUbatB)return t.reverse(),void D.reverse();for(var n,o,a,s,u=t.length,l=0;l<u;){if(r[l]>=e){for(n=l+1;n<u&&r[n]>=e;)n++;for(o=l,a=n-1;o<a;o++,a--)s=t[o],t[o]=t[a],t[a]=s,s=D[o],D[o]=D[a],D[a]=s;l=n}l++}}}function b(e,t,r,i,n){var o=t[i];return{UBAT_L:function(){return n.lastArabic=!1,ne},UBAT_R:function(){return n.lastArabic=!1,oe},UBAT_ON:function(){return ue},UBAT_AN:function(){return se},UBAT_EN:function(){return n.lastArabic?se:ae},UBAT_AL:function(){return n.lastArabic=!0,n.hasUbatAl=!0,oe},UBAT_WS:function(){return ue},UBAT_CS:function(){var e,o;return i<1||i+1>=t.length||(e=r[i-1])!==ae&&e!==se||(o=t[i+1])!==ae&&o!==se?ue:(n.lastArabic&&(o=se),o===e?o:ue)},UBAT_ES:function(){return(i>0?r[i-1]:le)===ae&&i+1<t.length&&t[i+1]===ae?ae:ue},UBAT_ET:function(){if(i>0&&r[i-1]===ae)return ae;if(n.lastArabic)return ue;for(var e=i+1,o=t.length;e<o&&t[e]===he;)e++;return e<o&&t[e]===ae?ae:ue},UBAT_NSM:function(){if("VLTR"===n.inFormat){for(var o=t.length,a=i+1;a<o&&t[a]===de;)a++;if(a<o){var s=e[i],u=s>=1425&&s<=2303||64286===s,l=t[a];if(u&&(l===oe||l===fe))return oe}}return i<1||t[i-1]===le?ue:r[i-1]},UBAT_B:function(){return n.lastArabic=!0,n.hasUbatB=!0,n.dir},UBAT_S:function(){return n.hasUbatS=!0,ue},UBAT_LRE:function(){return n.lastArabic=!1,ue},UBAT_RLE:function(){return n.lastArabic=!1,ue},UBAT_LRO:function(){return n.lastArabic=!1,ue},UBAT_RLO:function(){return n.lastArabic=!1,ue},UBAT_PDF:function(){return n.lastArabic=!1,ue},UBAT_BN:function(){return ue}}[ye[o]]()}function I(e){for(var t,r=0,i=q.length-1;r<=i;)if(t=Math.floor((r+i)/2),e<q[t][0])i=t-1;else{if(!(e>q[t][0]))return q[t][1];r=t+1}return e}function w(e){for(var t=0;t<K.length;t++)if(K[t]===e)return!0;return!1}function T(e){for(var t=0;t<Z.length;t++)if(e===Z[t])return X[t];return e}function C(e,t){for(var r=0;r<Z.length;r++)if(e===Z[r])return t[r];return e}function S(e){return e>="ً"&&e<="ٕ"}function E(e){return"L"===e?"LTR":"R"===e?"RTL":"C"===e?"CLR":"D"===e?"CRL":void 0}function B(e,t,r,i){for(;t*r<i&&S(e[t]);)t+=r;return t*r<i&&(e[t]=" ",!0)}function P(e,t){for(var r=0;r<G.length;r++)if(e===G[r])return t[r];return e}function M(e,t,r){D=[],N=[];for(var i=0;i<r;i++)e[i]=i,t[i]=i,D[i]=i}function V(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[e[r]]=r;return t}function A(e,t,r,i){for(var n=0;n<e.length;n++)(e[n]>t||!r&&e[n]===t)&&(e[n]+=i)}var D=[],F=[],N=[],L={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},R=5,O=6,k=0,j=1,z=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,U=/[\u0591-\u06ff\ufb1d-\ufefc]/,q=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["«","»"],["»","«"],["‹","›"],["›","‹"],["⁽","⁾"],["⁾","⁽"],["₍","₎"],["₎","₍"],["≤","≥"],["≥","≤"],["〈","〉"],["〉","〈"],["﹙","﹚"],["﹚","﹙"],["﹛","﹜"],["﹜","﹛"],["﹝","﹞"],["﹞","﹝"],["﹤","﹥"],["﹥","﹤"]],G=["آ","أ","إ","ا"],Y=["ﻵ","ﻷ","ﻹ","ﻻ"],Q=["ﻶ","ﻸ","ﻺ","ﻼ"],Z=["ا","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ی","ئ","ؤ"],W=["ﺍ","ﺏ","ﺕ","ﺙ","ﺝ","ﺡ","ﺥ","ﺩ","ﺫ","ﺭ","ﺯ","ﺱ","ﺵ","ﺹ","ﺽ","ﻁ","ﻅ","ﻉ","ﻍ","ﻑ","ﻕ","ﻙ","ﻝ","ﻡ","ﻥ","ﻩ","ﻭ","ﻱ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯼ","ﺉ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺉ","ﺅ"],J=["ﺎ","ﺐ","ﺖ","ﺚ","ﺞ","ﺢ","ﺦ","ﺪ","ﺬ","ﺮ","ﺰ","ﺲ","ﺶ","ﺺ","ﺾ","ﻂ","ﻆ","ﻊ","ﻎ","ﻒ","ﻖ","ﻚ","ﻞ","ﻢ","ﻦ","ﻪ","ﻮ","ﻲ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯽ","ﺊ","ﺆ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺊ","ﺆ"],X=["ﺎ","ﺒ","ﺘ","ﺜ","ﺠ","ﺤ","ﺨ","ﺪ","ﺬ","ﺮ","ﺰ","ﺴ","ﺸ","ﺼ","ﻀ","ﻄ","ﻈ","ﻌ","ﻐ","ﻔ","ﻘ","ﻜ","ﻠ","ﻤ","ﻨ","ﻬ","ﻮ","ﻴ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯿ","ﺌ","ﺆ","ﹱ","ﹲ","ﹴ","ﹷ","ﹹ","ﹻ","ﹽ","ﹿ","ﺀ","ﺌ","ﺆ"],H=["ﺍ","ﺑ","ﺗ","ﺛ","ﺟ","ﺣ","ﺧ","ﺩ","ﺫ","ﺭ","ﺯ","ﺳ","ﺷ","ﺻ","ﺿ","ﻃ","ﻇ","ﻋ","ﻏ","ﻓ","ﻗ","ﻛ","ﻟ","ﻣ","ﻧ","ﻫ","ﻭ","ﻳ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯾ","ﺋ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺋ","ﺅ"],K=["ء","آ","أ","ؤ","إ","ا","ة","د","ذ","ر","ز","و","ى"],$=["ً","ً","ٌ","؟","ٍ","؟","َ","َ","ُ","ُ","ِ","ِ","ّ","ّ","ْ","ْ","ء","آ","آ","أ","أ","ؤ","ؤ","إ","إ","ئ","ئ","ئ","ئ","ا","ا","ب","ب","ب","ب","ة","ة","ت","ت","ت","ت","ث","ث","ث","ث","ج","ج","ج","ج","ح","ح","ح","ح","خ","خ","خ","خ","د","د","ذ","ذ","ر","ر","ز","ز","س","س","س","س","ش","ش","ش","ش","ص","ص","ص","ص","ض","ض","ض","ض","ط","ط","ط","ط","ظ","ظ","ظ","ظ","ع","ع","ع","ع","غ","غ","غ","غ","ف","ف","ف","ف","ق","ق","ق","ق","ك","ك","ك","ك","ل","ل","ل","ل","م","م","م","م","ن","ن","ن","ن","ه","ه","ه","ه","و","و","ى","ى","ي","ي","ي","ي","ﻵ","ﻶ","ﻷ","ﻸ","ﻹ","ﻺ","ﻻ","ﻼ","؟","؟","؟"],ee=["ء","ف"],te=["غ","ي"],re=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],ie=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],ne=0,oe=1,ae=2,se=3,ue=4,le=5,ce=6,fe=7,pe=8,he=11,de=12,ye=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],ve=100,me=[ve+0,ne,ne,ne,ne,ve+1,ve+2,ve+3,oe,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ve+4,ue,ue,ue,ne,ue,ne,ue,ne,ue,ue,ue,ne,ne,ue,ue,ne,ne,ne,ne,ne,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ne,ne,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ne,ne,ue,ue,ne,ne,ue,ue,ne,ne,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ne,ne,ne,ve+5,fe,fe,ve+6,ve+7],ge=[[18,18,18,18,18,18,18,18,18,ce,le,ce,pe,le,18,18,18,18,18,18,18,18,18,18,18,18,18,18,le,le,le,ce,pe,ue,ue,he,he,he,ue,ue,ue,ue,ue,10,9,10,9,9,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,9,ue,ue,ue,ue,ue,ue,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ue,ue,ue,ue,ue,ue,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ue,ue,ue,ue,18,18,18,18,18,18,le,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,ue,he,he,he,he,ue,ue,ue,ue,ne,ue,ue,18,ue,ue,he,he,ae,ae,ue,ne,ue,ue,ue,ae,ne,ue,ue,ue,ue,ue,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ue,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ue,ne,ne,ne,ne,ne,ne,ne,ne],[ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ue,ue,ue,ue,ue,ue,ue,ue,ue,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ue,ue,ne,ne,ne,ne,ne,ne,ne,ue,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ue,ne,ue,ue,ue,ue,ue,ue,ue,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,oe,de,oe,de,de,oe,de,de,oe,de,ue,ue,ue,ue,ue,ue,ue,ue,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,ue,ue,ue,ue,ue,oe,oe,oe,oe,oe,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue],[se,se,se,se,ue,ue,ue,ue,fe,he,he,fe,9,fe,ue,ue,de,de,de,de,de,de,de,de,de,de,de,fe,ue,ue,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,se,se,se,se,se,se,se,se,se,se,he,se,se,fe,fe,fe,de,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,de,de,de,de,de,de,de,se,ue,de,de,de,de,de,de,fe,fe,de,de,ue,de,de,de,de,fe,fe,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,fe,fe,fe,fe,fe,fe],[fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,ue,fe,fe,de,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,ue,ue,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,de,de,de,de,de,de,de,de,de,de,de,fe,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,de,de,de,de,de,de,de,de,de,oe,oe,ue,ue,ue,ue,oe,ue,ue,ue,ue,ue],[pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,pe,18,18,18,ne,oe,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,pe,le,13,14,15,16,17,9,he,he,he,he,he,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,9,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,pe,18,18,18,18,18,ue,ue,ue,ue,ue,18,18,18,18,18,18,ae,ne,ue,ue,ae,ae,ae,ae,ae,ae,10,10,ue,ue,ue,ne,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,10,10,ue,ue,ue,ue,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ue,ue,ue,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,he,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue],[ne,ne,ne,ne,ne,ne,ne,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ne,ne,ne,ne,ne,ue,ue,ue,ue,ue,oe,de,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,10,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,ue,oe,oe,oe,oe,oe,ue,oe,ue,oe,oe,ue,oe,oe,ue,oe,oe,oe,oe,oe,oe,oe,oe,oe,oe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe],[de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,de,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,de,de,de,de,de,de,de,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,9,ue,9,ue,ue,9,ue,ue,ue,ue,ue,ue,ue,ue,ue,he,ue,ue,10,10,ue,ue,ue,ue,ue,he,he,ue,ue,ue,ue,ue,fe,fe,fe,fe,fe,ue,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,fe,ue,ue,18],[ue,ue,ue,he,he,he,ue,ue,ue,ue,ue,10,9,10,9,9,ae,ae,ae,ae,ae,ae,ae,ae,ae,ae,9,ue,ue,ue,ue,ue,ue,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ue,ue,ue,ue,ue,ue,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ue,ue,ue,ne,ne,ne,ne,ne,ne,ue,ue,ne,ne,ne,ne,ne,ne,ue,ue,ne,ne,ne,ne,ne,ne,ue,ue,ne,ne,ne,ue,ue,ue,he,he,ue,ue,ue,he,he,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue,ue]];return i}.apply(null,i))||(e.exports=n)},O0KB:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("9opi"),r("qKT0"),r("rg9i"),r("Vx27"),r("YT9w"),r("sHoj"),r("sYb8")],void 0===(n=function(e,t,r,i,n,o,a,s,u,l){return function(e){function t(t){var r=e.call(this)||this;return r.type="point-cloud-class-breaks",r.field=null,r.legendOptions=null,r.fieldTransformType=null,r.colorClassBreakInfos=null,r}var c;return i(t,e),c=t,t.prototype.clone=function(){return new c(r({},this.cloneProperties(),{field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:o.clone(this.colorClassBreakInfos),legendOptions:o.clone(this.legendOptions)}))},n([a.enumeration.serializable()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],t.prototype,"type",void 0),n([a.property({json:{write:!0},type:String})],t.prototype,"field",void 0),n([a.property({type:u.default,json:{write:!0}})],t.prototype,"legendOptions",void 0),n([a.property({type:s.fieldTransformTypeKebabDict.apiValues,json:{type:s.fieldTransformTypeKebabDict.jsonValues,read:s.fieldTransformTypeKebabDict.read,write:s.fieldTransformTypeKebabDict.write}})],t.prototype,"fieldTransformType",void 0),n([a.property({type:[l.default],json:{write:!0}})],t.prototype,"colorClassBreakInfos",void 0),c=n([a.subclass("esri.renderers.PointCloudClassBreaksRenderer")],t)}(a.declared(s))}.apply(null,i))||(e.exports=n)},OksM:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("xhoE"),r("qKT0"),r("SJ7f")],void 0===(n=function(e,t,r,i,n){return function(e){function t(t,r,i,n){var o=e.call(this,t,r)||this;return o._circleVertexBuffer=i,o._circleIndexBuffer=n,o}return r(t,e),Object.defineProperty(t.prototype,"circleIndexStart",{get:function(){return this._circleIndexStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"circleIndexCount",{get:function(){return this._circleIndexCount},enumerable:!0,configurable:!0}),t.prototype.assignBufferInfo=function(e){var t=e;t._circleIndexStart=this._circleIndexStart,t._circleIndexCount=this._circleIndexCount},t.prototype.processFeatures=function(e,t){var r=this._circleVertexBuffer,i=this._circleIndexBuffer;this._circleIndexStart=i.index,this._circleIndexCount=0;var n=this.layer,o=this.zoom;e&&e.setExtent(this.layerExtent);for(var a=1,s=[1,1,1,1],u=1,l=0,c=1,f=[1,1,1,1],p=1,h=0,d=this._features;h<d.length;h++){var y=d[h],v=y.getGeometry(e);if(v){n.hasDataDrivenRadius&&(a=n.getPaintValue("circle-radius",o,y)),n.hasDataDrivenColor&&(s=n.getPaintValue("circle-color",o,y)),n.hasDataDrivenOpacity&&(u=n.getPaintValue("circle-opacity",o,y)),n.hasDataDrivenStrokeWidth&&(c=n.getPaintValue("circle-stroke-width",o,y)),n.hasDataDrivenStrokeColor&&(f=n.getPaintValue("circle-stroke-color",o,y)),n.hasDataDrivenStrokeOpacity&&(p=n.getPaintValue("circle-stroke-opacity",o,y)),n.hasDataDrivenBlur&&(l=n.getPaintValue("circle-blur",o,y));for(var m=0,g=v;m<g.length;m++){var x=g[m];if(x)for(var _=0,b=x;_<b.length;_++){var I=b[_],w=r.index;r.add(I.x,I.y,0,0,a,s,u,l,c,f,p),r.add(I.x,I.y,0,1,a,s,u,l,c,f,p),r.add(I.x,I.y,1,0,a,s,u,l,c,f,p),r.add(I.x,I.y,1,1,a,s,u,l,c,f,p),i.add(w+0,w+1,w+2),i.add(w+1,w+2,w+3),this._circleIndexCount+=6}}}}},t}(n)}.apply(null,i))||(e.exports=n)},P0Wv:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("Q2wQ"),r("PND3"),r("Xfn2"),r("oigr"),r("TMur"),r("zp6E"),r("ma1f"),r("H1tY"),r("rg9i"),r("qMld"),r("jfWY"),r("wIC5"),r("nrlZ"),r("vtMp"),r("/COu"),r("Jvs9"),r("rfv1"),r("Q2Em"),r("ZooB"),r("DaHD")],void 0===(n=function(e,t,r,i,n,o,a,s,u,l,c,f,p,h,d,y,v,m,g,x,_,b){Object.defineProperty(t,"__esModule",{value:!0});var I=b.createDrawingInfo("esriGeometryPoint"),w=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong"];t.csvLatitudeFieldNames=["lat","latitude","y","ycenter","latitude83","latdecdeg","point-y"],t.csvLongitudeFieldNames=["lon","lng","long","longitude","x","xcenter","longitude83","longdecdeg","point-x"],t.csvDetectedDelimiters=[","," ",";","|","\t"];var T=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,C=[0,0],S=function(e,t){this.x=e,this.y=t},E=function(){var e=n._parseInfo(),t=new RegExp("^"+e.regexp+"$"),r=new RegExp("["+e.group+"\\s\\xa0]","g"),i=e.factor;return function(n){var o=t.exec(n);if(e.factor=i,!o)return NaN;var a=o[1];if(!o[1]){if(!o[2])return NaN;a=o[2],e.factor*=-1}return+(a=a.replace(r,"").replace(e.decimal,"."))*e.factor}}(),B="isInteger"in Number?Number.isInteger:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},P=function(){function e(){this._fieldsMap=new Map,this._queryEngine=null}return e.prototype.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=null},e.prototype.load=function(e){var t=this;return f.all([this._fetch(e.url),this._checkProjection(e&&e.parsing&&e.parsing.spatialReference)]).then(function(r){var i=r[0],n=t._parse(i,e.parsing);if(t._queryEngine=t._createQueryEngine(i,n),n.layerDefinition.extent=t._queryEngine.fullExtent,n.layerDefinition.timeInfo){var o=t._queryEngine.timeExtent,a=o.start,s=o.end;n.layerDefinition.timeInfo.timeExtent=[a,s]}return n})},e.prototype.applyEdits=function(e){return f.reject(new u("csv-source:editing-not-supported","applyEdits() is not supported on CSVLayer"))},e.prototype.queryFeatures=function(e){return void 0===e&&(e={}),this._queryEngine.executeQuery(e)},e.prototype.queryFeatureCount=function(e){return void 0===e&&(e={}),this._queryEngine.executeQueryForCount(e)},e.prototype.queryObjectIds=function(e){return void 0===e&&(e={}),this._queryEngine.executeQueryForIds(e)},e.prototype.queryExtent=function(e){return void 0===e&&(e={}),this._queryEngine.executeQueryForExtent(e)},e.prototype._fetch=function(e){if(!e)return f.reject(new u("csv-source:invalid-source","url not defined"));var t=p.urlToObject(e);return s(t.path,{query:t.query,responseType:"text"}).then(function(e){return e.data})},e.prototype._parse=function(e,t){void 0===t&&(t={});for(var r={columnDelimiter:t.columnDelimiter,layerDefinition:null,locationInfo:{latitudeFieldName:t.latitudeField,longitudeFieldName:t.longitudeField}};e&&"\n"===e[0];)e=e.slice(1);"\n"!==e[e.length-1]&&(e+="\n");var i=this._readFirstLine(e);if(!i)throw new u("csv","CSV is empty",{csv:e});if(!t.columnDelimiter){var n=this._inferDelimiter(i);if(!n)throw new u("csv-source:invalid-delimiter","Unable to detect the delimiter from CSV");r.columnDelimiter=n}var o=i.split(r.columnDelimiter),a=r.layerDefinition={name:"csv",drawingInfo:I,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:t.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:t.spatialReference||{wkid:102100}}};if(!t.latitudeField||!t.longitudeField){var s=this._inferLocationInfo(o);if(!t.longitudeField&&!s.longitudeFieldName||!t.latitudeField&&!s.latitudeFieldName)throw new u("csv","Unable to identify latitudeField and/or longitudeField from CSV");r.locationInfo={longitudeFieldName:t.longitudeField||s.longitudeFieldName,latitudeFieldName:t.latitudeField||s.latitudeFieldName}}var l=this._inferFields(e,r.columnDelimiter,o,r.locationInfo);if(t.fields&&t.fields.length){for(var f=new Map,p=0,h=t.fields;p<h.length;p++){var d=h[p];f.set(d.name.toLowerCase(),d)}for(var y=0,v=l;y<v.length;y++){d=v[y];var m=f.get(d.name.toLowerCase());if(m){var g=d.name;c.mixin(d,m),d.name=g}this._fieldsMap.set(d.name.trim(),d),this._fieldsMap.set(d.name.trim().toLowerCase(),d)}}if(a.fields=l,!a.fields.some(function(e){return"esriFieldTypeOID"===e.type&&(a.objectIdField=e.name,!0)})){d={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1};a.objectIdField=d.name,a.fields.unshift(d),this._fieldsMap.set(d.name,d),this._fieldsMap.set(d.name.toLowerCase(),d)}if(a.timeInfo){var x=a.timeInfo;if(x.startTimeField){var _=this._fieldsMap.get(x.startTimeField.toLowerCase());_?(x.startTimeField=_.name,_.type="esriFieldTypeDate"):x.startTimeField=null}if(x.endTimeField){var b=this._fieldsMap.get(x.endTimeField.toLowerCase());b?(x.endTimeField=b.name,b.type="esriFieldTypeDate"):x.endTimeField=null}if(x.trackIdField){var w=this._fieldsMap.get(x.trackIdField.toLowerCase());x.trackIdField=w?w.name:null}x.startTimeField||x.endTimeField||(a.timeInfo=null)}return r},e.prototype._inferLocationInfo=function(e){var r=null,i=null;return e.forEach(function(e){var n=e.toLowerCase();-1===t.csvLatitudeFieldNames.indexOf(n)||i||(i=e),-1===t.csvLongitudeFieldNames.indexOf(n)||r||(r=e)}),{longitudeFieldName:r,latitudeFieldName:i}},e.prototype._inferFields=function(e,t,r,i){for(var n=[],o=this._sampleLines(e).map(function(e){return e.split(t).map(function(e){return e.trim()})}),a=this,s=0;s<r.length;s++)!function(e){var t=r[e];if(t===i.longitudeFieldName||t===i.latitudeFieldName)n.push({name:t,type:"esriFieldTypeDouble",alias:t});else{var s=o.map(function(t){return t[e]}),u=a._inferFieldType(s),l={name:t.replace(/[\s\'’‘\.\-\/\(\)]+/g,"_"),type:null,alias:t};switch(u){case"integer":l.type="esriFieldTypeInteger";break;case"double":l.type="esriFieldTypeDouble";break;case"date":l.type="esriFieldTypeDate",l.length=36;break;default:l.type="esriFieldTypeString",l.length=255}n.push(l)}}(s);return n},e.prototype._inferFieldType=function(e){var t=this;if(!e.length)return"string";var r=/[^+-.,0-9]/;return e.map(function(e){var i=!1;if(""===e||r.test(e))i=!0;else{var n=E(e);if(!isNaN(n))return/[.,]/.test(e)?"double":!B(n)||n>214783647||n<-214783648?"double":"integer";if(-1===e.indexOf("E"))i=!0;else{if(n=Number(e),!isNaN(n))return"double";if(-1===e.indexOf(","))i=!0;else{if(e=e.replace(",","."),n=Number(e),!isNaN(n))return"double";i=!0}}}if(i){if(!/^[-]?\d*[.,]?\d*$/.test(e)){var o=new Date(e);return t._isValidDate(o,e)?"date":"string"}return"string"}return"string"}).reduce(function(e,t){return e===t?t:"string"===e||"string"===t?"string":"double"===e||"double"===t?"double":void 0})},e.prototype._isValidDate=function(e,t){if(!e||"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))return!1;var r=!0;if(l("chrome")&&/\d+\W*$/.test(t)){var i=t.match(/[a-zA-Z]{2,}/);if(i){for(var n=!1,o=0;!n&&o<=i.length;)n=!T.test(i[o]),o++;r=!n}}return r},e.prototype._readFirstLine=function(e){return e.substring(0,e.indexOf("\n")).trim()},e.prototype._sampleLines=function(e,t){void 0===t&&(t=10);for(var r=!1,i=[],n=e.indexOf("\n")+1;!r&&i.length<t;){var o=e.indexOf("\n",n);if(-1!==o){var a;(a=-1===o&&n<e.length-1?e.substring(n).trim():e.substring(n,o).trim())&&i.push(a),n=o+1}else r=!0}return i},e.prototype._inferDelimiter=function(e){var r=0,i="";return t.csvDetectedDelimiters.forEach(function(t){var n=e.split(t).length;n>r&&(r=n,i=t)}),""===i?null:i},e.prototype._createQueryEngine=function(e,t){for(var r,n=t.locationInfo,s=n.latitudeFieldName,u=n.longitudeFieldName,l=t.layerDefinition,c=l.objectIdField,f=l.fields,p=l.extent,x=l.timeInfo,b=[],I=[],T=new i.Set,B=new i.Set,P=[],M=0,V=f;M<V.length;M++){var A=V[M],D=A.name,F=A.type;"esriFieldTypeDate"===F?T.add(D):w.indexOf(F)>-1&&B.add(D),D!==c&&P.push(D)}var N=new o;N.delimiter=t.columnDelimiter,N.fieldNames=P,N.newline="\n";var L=N.parse(e),R=0;L.shift();for(var O=0,k=L;O<k.length;O++){var j=k[O],z=this._parseCoordinateValue(j[s]),U=this._parseCoordinateValue(j[u]);if(null!=U&&null!=z&&!isNaN(z)&&!isNaN(U)){for(var q in j[s]=z,j[u]=U,j)if(q!==s&&q!==u)if(T.has(q)){var G=new Date(j[q]);j[q]=this._isValidDate(G,j[q])?G.getTime():null}else if(B.has(q)){var Y=E(j[q]);isNaN(Y)?j[q]=null:j[q]=Y}j[c]=R,R++,b.push(new S(U,z)),I.push(j)}}if(!d.equals({wkid:4326},p.spatialReference))if(d.isWebMercator(p.spatialReference))for(var Q=0,Z=b;Q<Z.length;Q++){var W=Z[Q];r=y.lngLatToXY(W.x,W.y,C),W.x=r[0],W.y=r[1]}else b=h.projectMany(b,a.SpatialReference.WGS84,p.spatialReference,null,!0);for(var J=new g.default({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1}),X=new _.default({fields:t.layerDefinition.fields,geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:x,objectIdField:c,spatialReference:p.spatialReference||{wkid:4326},cacheSpatialQueries:!0,featureStore:J}),H=[],K=0;K<b.length;K++){var $=b[K],ee=$.x,te=$.y,re=I[K];re[c]=K+1,H.push(new v.default(new m.default([],[ee,te]),re,null,re[c]))}return J.addMany(H),X},e.prototype._parseCoordinateValue=function(e){if(null==e||""===e)return null;var t=E(e);return(isNaN(t)||Math.abs(t)>181)&&(t=parseFloat(e)),t},e.prototype._checkProjection=function(e){return x.checkProjectionSupport(d.WGS84,e).catch(function(){throw new u("csv-layer","Projection not supported")})},e}();t.default=P}.apply(null,i))||(e.exports=n)},"Q4b/":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("xhoE"),r("qKT0"),r("Nh3O"),r("6+ni"),r("Id87"),r("SJ7f"),r("BEeJ"),r("+fuo"),r("+j0K")],void 0===(n=function(e,t,r,i,n,o,a,s,u,l,c){function f(e,t){return e.iconMosaicItem&&t.iconMosaicItem?e.iconMosaicItem.page===t.iconMosaicItem.page?0:e.iconMosaicItem.page<t.iconMosaicItem.page?-1:1:e.iconMosaicItem&&!t.iconMosaicItem?1:!e.iconMosaicItem&&t.iconMosaicItem?-1:0}return function(e){function t(t,r,i,n,o,a,s,u){var l=e.call(this,t,r)||this;if(l._markerMap=new Map,l._glyphMap=new Map,l._glyphBufferDataStorage=new Map,l._sdfMarkers=!1,t.hasDataDrivenIcon!==i.isDataDriven())throw new Error("incompatible icon buffer");if(t.hasDataDrivenText!==o.isDataDriven())throw new Error("incompatible text buffer");return l._iconVertexBuffer=i,l._iconIndexBuffer=n,l._textVertexBuffer=o,l._textIndexBuffer=a,l._placementEngine=s,l._workerTileHandler=u,l}return r(t,e),Object.defineProperty(t.prototype,"markerPageMap",{get:function(){return this._markerMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"glyphsPageMap",{get:function(){return this._glyphMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sdfMarker",{get:function(){return this._sdfMarkers},enumerable:!0,configurable:!0}),t.prototype.copy=function(e,r,i,n,o){var a=new t(this.layer,this.zoom,e,r,i,n,o,this._workerTileHandler);return a.layerIndex=this.layerIndex,a.layerExtent=this.layerExtent,a._iconIndexStart=r.index,a._textIndexStart=n.index,a._iconIndexCount=0,a._textIndexCount=0,a._symbolInstances=this._symbolInstances,a._workerTileHandler=this._workerTileHandler,a._fontArray=this._fontArray,a._textLayout=this._textLayout,a._iconLayout=this._iconLayout,a._isLinePlacement=this._isLinePlacement,a._avoidEdges=this._avoidEdges,a},t.prototype.getResources=function(e,r,i){var n=this.layer,o=this.zoom,a=n.hasDataDrivenIcon,s=n.hasDataDrivenText;e&&e.setExtent(this.layerExtent);for(var u=n.getLayoutProperty("icon-image"),l=n.getLayoutProperty("text-field"),c=n.getLayoutValue("text-font",o),f=n.getLayoutValue("text-transform",o),p=[],h=[1,1,1,1],d=1,y=1,v=[1,1,1,1],m=1,g=1,x=0,_=this._features;x<_.length;x++){var b=_[x],I=b.getGeometry(e);if(I&&0!==I.length){var w=void 0;u&&(w=n.getLayoutValue("icon-image",o,b),u.isDataDriven||(w=this._replaceKeys(w,b.values)),w&&r.add(w));var T=void 0,C=!1;if(l&&(T=n.getLayoutValue("text-field",o,b),l.isDataDriven||(T=this._replaceKeys(T,b.values)),T=T.replace(/\\n/g,"\n"))){switch(f){case 2:T=T.toLowerCase();break;case 1:T=T.toUpperCase()}if(t._bidiEngine.hasBidiChar(T)){var S;S="rtl"===t._bidiEngine.checkContextual(T)?"IDNNN":"ICNNN",T=t._bidiEngine.bidiTransform(T,S,"VLYSN"),C=!0}var E=T.length;if(E>0)for(var B=0,P=c;B<P.length;B++){var M=P[B],V=i[M];V||(V=i[M]=new Set);for(var A=0;A<E;A++){var D=T.charCodeAt(A);V.add(D)}}}if(w||T){var F=n.getLayoutValue("icon-size",o,b),N=n.getLayoutValue("text-size",o,b);n.hasDataDrivenIconColor&&(h=n.getPaintValue("icon-color",o,b)),n.hasDataDrivenIconOpacity&&(d=n.getPaintValue("icon-opacity",o,b)),n.hasDataDrivenIconSize&&(y=F),n.hasDataDrivenTextColor&&(v=n.getPaintValue("text-color",o,b)),n.hasDataDrivenTextOpacity&&(m=n.getPaintValue("text-opacity",o,b)),n.hasDataDrivenTextSize&&(g=N);var L={sprite:w,label:T,rtl:C,type:b.type,geometry:I,iconSize:F,iconRotate:n.getLayoutValue("icon-rotate",o,b),ddIconValues:a?{color:h,opacity:d,size:y}:null,textSize:N,textRotate:n.getLayoutValue("text-rotate",o,b),ddTextValues:s?{color:v,opacity:m,size:g}:null};p.push(L)}}}this._symbolFeatures=p},t.prototype.processFeatures=function(e,r){e&&e.setExtent(this.layerExtent);var i,n,o,s,p,h=this.layer,d=this.zoom,y=this._isLinePlacement=1===h.getLayoutValue("symbol-placement",d),v=this._avoidEdges=h.getLayoutValue("symbol-avoid-edges",d)&&!y,m=8*h.getLayoutValue("symbol-spacing",d),g=h.getLayoutProperty("icon-image"),x=h.getLayoutProperty("text-field"),_=this._workerTileHandler;if(g&&(this._iconLayout=new c.IconLayout(h,d,y),i=_.getSpriteItems(),n=this._getTranslate(!0)),x){var b=this._textLayout=new c.TextLayout(h,d,y);this._fontArray=b.fontArray;var I=.5;switch(b.anchor){case 5:case 1:case 7:I=0;break;case 6:case 2:case 8:I=1}var w=.5;switch(b.anchor){case 5:case 3:case 6:w=0;break;case 7:case 4:case 8:w=1}var T=.5;switch(b.justify){case 0:T=0;break;case 2:T=1}var C=24*b.letterSpacing,S=y?0:24*b.maxWidth,E=24*b.lineHeight,B=[24*b.offset[0],24*b.offset[1]];o=this._fontArray.map(function(e){return _.getGlyphItems(e)}),s=new a(o,S,E,C,B,I,w,T),p=this._getTranslate(!1)}this._iconIndexStart=this._iconIndexBuffer.index,this._textIndexStart=this._textIndexBuffer.index,this._iconIndexCount=0,this._textIndexCount=0,this._markerMap.clear(),this._glyphMap.clear();var P=[];this._symbolInstances=P;var M=this._textLayout,V=1;M&&M.size&&(V=M.size/24);for(var A=M?M.maxAngle*u.C_DEG_TO_RAD:0,D=M?8*M.size:0,F=0,N=this._symbolFeatures;F<N.length;F++){var L=N[F],R=void 0;L.sprite&&(R=i[L.sprite])&&R.sdf&&(this._sdfMarkers=!0);var O=void 0,k=L.label,j=0;if(k&&(O=s.getShaping(k,L.rtl))&&O.length>0){for(var z=1e30,U=-1e30,q=0,G=O;q<G.length;q++){var Y=G[q];z=Math.min(z,Y.x),U=Math.max(U,Y.x)}j=(U-z+48)*V*8}for(var Q=0,Z=L.geometry;Q<Z.length;Q++){var W=Z[Q],J=void 0;if(y){if(O&&O.length>0&&M&&M.size){var X=8*M.size*(2+Math.min(2,4*Math.abs(M.offset[1])));t._smoothVertices(W,X)}J=t._findAnchors(W,m,j)}else J=3===L.type?t._findCentroid(W):[new l.Anchor(W[0].x,W[0].y)];for(var H=0,K=J;H<K.length;H++){var $=K[H];$.x<0||$.x>4096||$.y<0||$.y>4096||y&&j>0&&0===M.rotationAlignment&&!t._honorsTextMaxAngle(W,$,j,A,D)||P.push({shaping:O,line:W,iconMosaicItem:R,anchor:$,iconSize:L.iconSize,iconRotate:L.iconRotate,ddIconValues:L.ddIconValues,textSize:L.textSize,textRotate:L.textRotate,ddTextValues:L.ddTextValues})}}}P.sort(f);for(var ee=0,te=P;ee<te.length;ee++){var re=te[ee];this._processFeature(re,n,p,v)}this._addPlacedGlyphs()},t.prototype.updateSymbols=function(){this._iconIndexStart=this._iconIndexBuffer.index,this._textIndexStart=this._textIndexBuffer.index,this._iconIndexCount=0,this._textIndexCount=0,this._markerMap.clear(),this._glyphMap.clear();var e,t,r=this._avoidEdges,i=this.layer;i.getLayoutProperty("icon-image")&&(e=this._getTranslate(!0)),i.getLayoutProperty("text-field")&&(t=this._getTranslate(!1));for(var n=0,o=this._symbolInstances;n<o.length;n++){var a=o[n];this._processFeature(a,e,t,r)}this._addPlacedGlyphs()},t.prototype._getTranslate=function(e){var t=this.layer.getPaintValue(e?"icon-translate":"text-translate",this.zoom);if(0!==t[0]||0!==t[1]){var r=this._placementEngine.mapAngle;if(0!==r&&0===this.layer.getPaintValue(e?"icon-translate-anchor":"text-translate-anchor",this.zoom)){var i=Math.sin(r),n=Math.cos(r);return[8*(t[0]*n-t[1]*i),8*(t[0]*i+t[1]*n)]}return[8*t[0],8*t[1]]}},t.prototype._replaceKeys=function(e,t){return e.replace(/{([^{}]+)}/g,function(e,r){return r in t?t[r]:""})},t.prototype._processFeature=function(e,t,r,i){var n=e.line,a=e.iconMosaicItem,s=e.shaping,l=e.anchor,c=this._iconLayout,f=c&&!!a,p=!0,h=1;f&&(c.size=e.iconSize,c.rotate=e.iconRotate,h=8*c.size,p=c.optional||!a);var d=this._textLayout,y=d&&s&&s.length>0,v=1,m=v,g=!0;y&&(d.size=e.textSize,d.rotate=e.textRotate,m=8*(v=d.size/24),g=d.optional||!s||0===s.length);var x,_,b=new o.Point(0,-17);if((f&&(x=this._placementEngine.getIconPlacement(l,t,a,h,n,c,i),l.minzoom>x.footprint.minzoom&&(x.footprint.minzoom=l.minzoom),x.footprint.minzoom===u.C_INFINITY&&(x=null)),x||p)&&(y&&(_=this._placementEngine.getTextPlacement(l,r,b,s,m,n,d,i))&&(l.minzoom>_.footprint.minzoom&&(_.footprint.minzoom=l.minzoom),_.footprint.minzoom===u.C_INFINITY&&(_=null)),_||g)){if(x&&_||(g||p?g||_?p||x||(_=null):x=null:(x=null,_=null)),x&&_&&!g&&!p){var I=Math.max(x.footprint.minzoom,_.footprint.minzoom);x.footprint.minzoom=I,_.footprint.minzoom=I}_&&(d.ignorePlacement||this._placementEngine.add(_),this._storePlacedGlyphs(_.shapes,_.footprint.minzoom,this.zoom,e.ddTextValues)),x&&(c.ignorePlacement||this._placementEngine.add(x),this._addPlacedIcons(x.shapes,x.footprint.minzoom,this.zoom,a.page,e.ddIconValues))}},t.prototype._addPlacedIcons=function(e,t,r,i,n){for(var o=Math.max(r+u.log2(t),0),a=this._iconVertexBuffer,s=this._iconIndexBuffer,l=0,c=e;l<c.length;l++){var f=c[l],p=Math.max(r+u.log2(f.minzoom),o),h=Math.min(r+u.log2(f.maxzoom),25);if(!(h<=p)){var d=f.tl,y=f.tr,v=f.bl,m=f.br,g=f.mosaicRect,x=f.labelAngle,_=f.anchor,b=a.index,I=g.x,w=g.y,T=I+g.width,C=w+g.height;a.add(_.x,_.y,d.x,d.y,I,w,x,p,h,o,n),a.add(_.x,_.y,y.x,y.y,T,w,x,p,h,o,n),a.add(_.x,_.y,v.x,v.y,I,C,x,p,h,o,n),a.add(_.x,_.y,m.x,m.y,T,C,x,p,h,o,n),s.add(b+0,b+1,b+2),s.add(b+1,b+2,b+3),this._markerMap.has(i)?this._markerMap.get(i)[1]+=6:this._markerMap.set(i,[this._iconIndexStart+this._iconIndexCount,6]),this._iconIndexCount+=2}}},t.prototype._addPlacedGlyphs=function(){var e=this,t=this._textVertexBuffer,r=this._textIndexBuffer;this._glyphBufferDataStorage.forEach(function(i,n){for(var o=0,a=i;o<a.length;o++){var s=a[o],u=t.index;t.add(s.glyphAnchor[0],s.glyphAnchor[1],s.tl[0],s.tl[1],s.xmin,s.ymin,s.labelAngle,s.minLod,s.maxLod,s.placementLod,s.ddValues),t.add(s.glyphAnchor[0],s.glyphAnchor[1],s.tr[0],s.tr[1],s.xmax,s.ymin,s.labelAngle,s.minLod,s.maxLod,s.placementLod,s.ddValues),t.add(s.glyphAnchor[0],s.glyphAnchor[1],s.bl[0],s.bl[1],s.xmin,s.ymax,s.labelAngle,s.minLod,s.maxLod,s.placementLod,s.ddValues),t.add(s.glyphAnchor[0],s.glyphAnchor[1],s.br[0],s.br[1],s.xmax,s.ymax,s.labelAngle,s.minLod,s.maxLod,s.placementLod,s.ddValues),r.add(u+0,u+1,u+2),r.add(u+1,u+2,u+3),e._glyphMap.has(n)?e._glyphMap.get(n)[1]+=6:e._glyphMap.set(n,[e._textIndexStart+e._textIndexCount,6]),e._textIndexCount+=2}}),this._glyphBufferDataStorage.clear()},t.prototype._storePlacedGlyphs=function(e,t,r,i){for(var n=Math.max(r+u.log2(t),0),o=0,a=e;o<a.length;o++){var s=a[o],l=Math.max(r+u.log2(s.minzoom),n),c=Math.min(r+u.log2(s.maxzoom),25);if(!(c<=l)){var f=s.tl,p=s.tr,h=s.bl,d=s.br,y=s.labelAngle,v=s.anchor,m=s.mosaicRect;this._glyphBufferDataStorage.has(s.page)||this._glyphBufferDataStorage.set(s.page,[]),this._glyphBufferDataStorage.get(s.page).push({glyphAnchor:[v.x,v.y],tl:[f.x,f.y],tr:[p.x,p.y],bl:[h.x,h.y],br:[d.x,d.y],xmin:m.x,ymin:m.y,xmax:m.x+m.width,ymax:m.y+m.height,labelAngle:y,minLod:l,maxLod:c,placementLod:n,ddValues:i})}}},t._findAnchors=function(e,t,r){t+=r;for(var i=0,n=e.length-1,a=0;a<n;a++)i+=o.Point.distance(e[a],e[a+1]);var s=r||t;if(i<=(s*=.5))return[];var c=s/i,f=0,p=-(t=i/Math.max(Math.round(i/t),1))/2,h=[],d=e.length-1;for(a=0;a<d;a++){for(var y=e[a],v=e[a+1],m=v.x-y.x,g=v.y-y.y,x=Math.sqrt(m*m+g*g),_=void 0;p+t<f+x;){var b=((p+=t)-f)/x,I=u.interpolate(y.x,v.x,b),w=u.interpolate(y.y,v.y,b);void 0===_&&(_=Math.atan2(g,m)),h.push(new l.Anchor(I,w,_,a,c))}f+=x}return h},t._deviation=function(e,t,r){var i=(t.x-e.x)*(r.x-t.x)+(t.y-e.y)*(r.y-t.y),n=(t.x-e.x)*(r.y-t.y)-(t.y-e.y)*(r.x-t.x);return Math.atan2(n,i)},t._honorsTextMaxAngle=function(e,t,r,i,n){for(var a=0,s=r/2,u=new o.Point(t.x,t.y),l=t.segment+1;a>-s;){if(--l<0)return!1;a-=o.Point.distance(e[l],u),u=e[l]}a+=o.Point.distance(e[l],e[l+1]);for(var c=[],f=0,p=e.length;a<s;){var h=e[l],d=l,y=void 0;do{if(++d===p)return!1;y=e[d]}while(y.isEqual(h));var v=d,m=void 0;do{if(++v===p)return!1;m=e[v]}while(m.isEqual(y));var g=this._deviation(h,y,m);for(c.push({deviation:g,distToAnchor:a}),f+=g;a-c[0].distToAnchor>n;)f-=c.shift().deviation;if(Math.abs(f)>i)return!1;a+=o.Point.distance(y,m),l=d}return!0},t._smoothVertices=function(e,t){if(!(t<=0)){var r=e.length;if(!(r<3)){var i=[],n=0;i.push(0);for(var a=1;a<r;a++)n+=o.Point.distance(e[a],e[a-1]),i.push(n);t=Math.min(t,.2*n);var s=[];s.push(e[0].x),s.push(e[0].y);var u=e[r-1].x,l=e[r-1].y,c=o.Point.sub(e[0],e[1]);c.normalize(),e[0].x+=t*c.x,e[0].y+=t*c.y,c.assignSub(e[r-1],e[r-2]),c.normalize(),e[r-1].x+=t*c.x,e[r-1].y+=t*c.y;for(a=1;a<r;a++)i[a]+=t;i[r-1]+=t;var f=.5*t;for(a=1;a<r-1;a++){for(var p=0,h=0,d=0,y=a-1;y>=0&&!(i[y+1]<i[a]-f);y--){var v=f+i[y+1]-i[a],m=i[y+1]-i[y],g=i[a]-i[y]<f?1:v/m;if(Math.abs(g)<1e-6)break;var x=g*v-.5*(T=g*g)*m,_=g*m/t,b=e[y+1],I=e[y].x-b.x,w=e[y].y-b.y;p+=_/x*(b.x*g*v+.5*T*(v*I-m*b.x)-T*g*m*I/3),h+=_/x*(b.y*g*v+.5*T*(v*w-m*b.y)-T*g*m*w/3),d+=_}for(y=a+1;y<r&&!(i[y-1]>i[a]+f);y++){v=f-i[y-1]+i[a],m=i[y]-i[y-1],g=i[y]-i[a]<f?1:v/m;if(Math.abs(g)<1e-6)break;var T;x=g*v-.5*(T=g*g)*m,_=g*m/t,b=e[y-1],I=e[y].x-b.x,w=e[y].y-b.y;p+=_/x*(b.x*g*v+.5*T*(v*I-m*b.x)-T*g*m*I/3),h+=_/x*(b.y*g*v+.5*T*(v*w-m*b.y)-T*g*m*w/3),d+=_}s.push(p/d),s.push(h/d)}s.push(u),s.push(l);for(a=0,y=0;a<r;a++)e[a].x=s[y++],e[a].y=s[y++]}}},t._findCentroid=function(e){var t=e.length-1,r=0,i=0,n=0,o=e[0].x,a=e[0].y;o>4096&&(o=4096),o<0&&(o=0),a>4096&&(a=4096),a<0&&(a=0);for(var s=1;s<t;s++){var u=e[s].x,c=e[s].y,f=e[s+1].x,p=e[s+1].y;u>4096&&(u=4096),u<0&&(u=0),c>4096&&(c=4096),c<0&&(c=0),f>4096&&(f=4096),f<0&&(f=0),p>4096&&(p=4096),p<0&&(p=0);var h=(u-o)*(p-a)-(f-o)*(c-a);r+=h*(o+u+f),i+=h*(a+c+p),n+=h}return r/=3*n,i/=3*n,isNaN(r)||isNaN(i)?[]:[new l.Anchor(r,i)]},t._bidiEngine=new n,t}(s)}.apply(null,i))||(e.exports=n)},QyYG:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("YX1r"),r("lgZd"),r("EuvN"),r("fdzS"),r("0LE5"),r("vlC2"),r("Rdxj"),r("WRgd"),r("mCA8"),r("aWgr")],void 0===(n=function(e,t,r,i,n,o,a,s,u,l,c,f){function p(e,t,r){return{center:u.vec3f64.clone(e),halfSize:s.vec3f32.clone(t),quaternion:o.quatf32.clone(r)}}function h(e,t){var r=f.plane.signedDistance(t,e.center),i=d(e,t);return r>i?1:r<-i?-1:0}function d(e,t){n.quat.conjugate(y,e.quaternion),a.vec3.transformQuat(v,t,y);var r=e.halfSize;return Math.abs(v[0]*r[0])+Math.abs(v[1]*r[1])+Math.abs(v[2]*r[2])}Object.defineProperty(t,"__esModule",{value:!0});var y=o.quatf32.create(),v=s.vec3f32.create(),m=s.vec3f32.create(),g=i.mat3f32.create(),x=function(e){var t=56*e;this.buffer=new ArrayBuffer(t),this.obbs=new Array(e);for(var r=0;r<e;r++)this.obbs[r]={center:u.vec3f64.createView(this.buffer,56*r+0),halfSize:s.vec3f32.createView(this.buffer,56*r+24),quaternion:o.quatf32.createView(this.buffer,56*r+36)}};t.ObbArray=x,t.create=p,t.clone=function(e){return p(e.center,e.halfSize,e.quaternion)},t.set=function(e,t){a.vec3.copy(t.center,e.center),a.vec3.copy(t.halfSize,e.halfSize),n.quat.copy(t.quaternion,e.quaternion)},t.compute=function(e,t){return t||(t=p([0,0,0],[-1,-1,-1],[0,0,0,1])),c.computeOBB(e,t),t},t.intersectPlane=h,t.toAaBoundingBox=function(e,t){t||(t=l.create());var i=r.mat3.fromQuat(g,e.quaternion),n=e.halfSize[0]*Math.abs(i[0])+e.halfSize[1]*Math.abs(i[3])+e.halfSize[2]*Math.abs(i[6]),o=e.halfSize[0]*Math.abs(i[1])+e.halfSize[1]*Math.abs(i[4])+e.halfSize[2]*Math.abs(i[7]),a=e.halfSize[0]*Math.abs(i[2])+e.halfSize[1]*Math.abs(i[5])+e.halfSize[2]*Math.abs(i[8]);return t[0]=e.center[0]-n,t[1]=e.center[1]-o,t[2]=e.center[2]-a,t[3]=e.center[0]+n,t[4]=e.center[1]+o,t[5]=e.center[2]+a,t},t.minimumDistancePlane=function(e,t){return f.plane.signedDistance(t,e.center)-d(e,t)},t.maximumDistancePlane=function(e,t){return f.plane.signedDistance(t,e.center)+d(e,t)},t.isVisible=function(e,t){return h(e,t.planes[0])<=0&&h(e,t.planes[1])<=0&&h(e,t.planes[2])<=0&&h(e,t.planes[3])<=0&&h(e,t.planes[4])<=0&&h(e,t.planes[5])<=0},t.intersectLine=function(e,t,r,i){void 0===i&&(i=0),n.quat.conjugate(y,e.quaternion),a.vec3.subtract(v,t,e.center);for(var o=a.vec3.transformQuat(v,v,y),s=a.vec3.transformQuat(m,r,y),u=-1/0,l=1/0,c=0;c<3;c++)if(Math.abs(s[c])>1e-6){var f=(i+e.halfSize[c]-o[c])/s[c],p=(-i-e.halfSize[c]-o[c])/s[c];u=Math.max(u,Math.min(f,p)),l=Math.min(l,Math.max(f,p))}else if(o[c]>e.halfSize[c]+i||o[c]<-e.halfSize[c]-i)return!1;return u<=l}}.apply(null,i))||(e.exports=n)},"R+Pf":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("Vx27"),r("mu/x")],void 0===(n=function(e,t,r,i,n,o){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="fixed-size",t.size=0,t.useRealWorldSymbolSizes=null,t}var o;return r(t,e),o=t,t.prototype.clone=function(){return new o({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})},i([n.enumeration.serializable()({pointCloudFixedSizeAlgorithm:"fixed-size"})],t.prototype,"type",void 0),i([n.property({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"size",void 0),i([n.property({type:Boolean,json:{write:!0}})],t.prototype,"useRealWorldSymbolSizes",void 0),o=i([n.subclass("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],t)}(n.declared(o.default));t.PointSizeFixedSizeAlgorithm=a,t.default=a}.apply(null,i))||(e.exports=n)},R3Fd:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("qMld")],void 0===(n=function(e,t,i,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createProcessor=function(e,t){var o;return"heatmap"===e?o=n.create(function(e){return r.e(68).then(function(){var t=[r("lw41")];e.apply(null,t)}.bind(this)).catch(r.oe)}):"symbol"===e&&(o=n.create(function(e){return Promise.all([r.e(8),r.e(10),r.e(63)]).then(function(){var t=[r("dh9Z")];e.apply(null,t)}.bind(this)).catch(r.oe)})),o.then(function(e){return e.default}).then(function(e){var r=t.serviceAndViewInfo,n=t.remoteClient,o=t.tileStore;return new e(i({},r,{tileStore:o,remoteClient:n}))})}}.apply(null,i))||(e.exports=n)},"S+mV":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("xhoE"),r("qMld"),r("ADZV"),r("8V7H"),r.dj.m(e)],void 0===(n=function(e,t,i,n,o,a,s){function u(){return n.create(function(e){r.e(89).then(function(){var t=[r("Rc7o")];e.apply(null,t)}.bind(this)).catch(r.oe)})}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(){}return e.prototype._decode=function(e){return u().then(function(t){var r=(0,t.decode)(e.buffer,e.options);return{result:r,transferList:[r.pixelData.buffer]}})},e}(),c=function(t){function r(r){var i=t.call(this)||this;return i.scheduler=r,i._thread=void 0,a.open(o.getAbsMid("./LercWorker",e,s),{strategy:"dedicated",scheduler:r}).then(function(e){void 0===i._thread?i._thread=e:e.close()}),i}return i(r,t),r.prototype.destroy=function(){this._thread&&this._thread.close(),this._thread=null},r.prototype.decode=function(e,t){return e&&0!==e.byteLength?this._thread?this._thread.invoke("_decode",{buffer:e,options:t},{transferList:[e]}):u().then(function(r){return(0,r.decode)(e,t)}):n.resolve(null)},r}(l),f=new Map;t.acquireInstance=function(e){var t=f.get(e);return t||(t={instance:new c(e),ref:0},f.set(e,t)),++t.ref,t.instance},t.releaseInstance=function(e){if(null!=e){var t=e.scheduler,r=f.get(t);r&&--r.ref<=0&&(r.instance.destroy(),f.delete(t))}},t.default=function(){return new l}}.apply(null,i))||(e.exports=n)},SJ7f:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(e,t){this.layerExtent=4096,this._features=[],this.layer=e,this.zoom=t,this._filter=e.getFeatureFilter()}return e.prototype.pushFeature=function(e){this._filter.filter(e)&&this._features.push(e)},e.prototype.hasFeatures=function(){return this._features.length>0},e.prototype.processFeatures=function(e,t){},e.prototype.assignBufferInfo=function(e){},e}()}.apply(null,i))||(e.exports=n)},"U+RI":function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(e){this._array=[],this._stride=e}return Object.defineProperty(e.prototype,"array",{get:function(){return this._array},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.array.length=0},e.prototype.toBuffer=function(){return new Uint32Array(this._array).buffer},e.i1616to32=function(e,t){return 65535&e|t<<16},e.i8888to32=function(e,t,r,i){return 255&e|(255&t)<<8|(255&r)<<16|i<<24},e.i8816to32=function(e,t,r){return 255&e|(255&t)<<8|r<<16},e}()}.apply(null,i))||(e.exports=n)},UTXC:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.NO_DATA=1]="NO_DATA",e[e.READY=2]="READY",e[e.MODIFIED=3]="MODIFIED",e[e.INVALID=4]="INVALID"}(t.TileStatus||(t.TileStatus={}))}.apply(null,i))||(e.exports=n)},V1i6:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("ma1f"),r("qMld"),r("k1EI"),r("Thzy"),r("Lzvl"),r("nrlZ"),r("gT/q"),r("+6sX"),r("Jvs9"),r("Q2Em"),r("zDti")],void 0===(n=function(e,t,i,n,o,a,s,u,l,c,f,p,h){function d(e){return!0===_.spatialRelationship[e]}function y(e){return!0===_.queryGeometry[s.getJsonType(e)]}function v(e){return!0===_.layerGeometry[e]}function m(){return n.create(function(e){return r.e(15).then(function(){var t=[r("21p4")];e.apply(null,t)}.bind(this)).catch(r.oe)})}Object.defineProperty(t,"__esModule",{value:!0});var g="feature-store:unsupported-query",x={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},_={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};t.importGeometryEngine=m,t.getGeodesicBufferOperator=function(){return m().then(function(e){return e.geodesicBuffer})},t.getSpatialQueryOperator=function(e,t,r){if(s.isPolygon(t)&&"esriGeometryPoint"===r.geometryType&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===e)){var i=c.convertFromPolygon(new f.default,t,!1,!1);return n.resolve(function(e){return l.polygonContainsPoint(i,!1,!1,e)})}if(s.isPolygon(t)&&"esriGeometryMultipoint"===r.geometryType){var u=c.convertFromPolygon(new f.default,t,!1,!1);if("esriSpatialRelContains"===e)return n.resolve(function(e){return l.polygonContainsMultipoint(u,!1,!1,e,r.hasZ,r.hasM)})}if(s.isExtent(t)&&"esriGeometryPoint"===r.geometryType&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===e))return n.resolve(function(e){return o.extentContainsPoint(t,h.getGeometry(r,e))});if(s.isExtent(t)&&"esriGeometryMultipoint"===r.geometryType&&"esriSpatialRelContains"===e)return n.resolve(function(e){return o.extentContainsMultipoint(t,h.getGeometry(r,e))});if(s.isExtent(t)&&"esriSpatialRelIntersects"===e){var p=a.getExtentIntersector(r.geometryType);return n.resolve(function(e){return p(t,h.getGeometry(r,e))})}return m().then(function(i){var n=i[x[e]].bind(null,t);return function(e){return n(h.getGeometry(r,e))}})},t.checkSpatialQuerySupport=function(e,t,r){var o=e.spatialRel,a=e.geometry;return a?d(o)?u.isValid(a.spatialReference)&&u.isValid(r)?y(a)?v(t)?e.outSR?p.checkProjectionSupport(e.geometry&&e.geometry.spatialReference,e.outSR):n.resolve():n.reject(new i(g,"Unsupported layer geometry type",{query:e})):n.reject(new i(g,"Unsupported query geometry type",{query:e})):n.resolve():n.reject(new i(g,"Unsupported query spatial relationship",{query:e})):n.resolve()},t.canQueryWithRBush=function(e){if(s.isExtent(e))return!0;if(s.isPolygon(e)){for(var t=0,r=e.rings;t<r.length;t++){var i=r[t];if(5!==i.length)return!1;if(i[0][0]!==i[1][0]||i[0][0]!==i[4][0]||i[2][0]!==i[3][0]||i[0][1]!==i[3][1]||i[0][1]!==i[4][1]||i[1][1]!==i[2][1])return!1}return!0}return!1}}.apply(null,i))||(e.exports=n)},VGdt:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("H1tY"),r("6DRN"),r("VCyw"),r("qMld")],void 0===(n=function(e,t,r,i,n,o){function a(){var e=0===u.length;if(!e){for(var t=n();!e&&n()-t<s;){var r=u[c];if(r){if(!0===r()){var o=l.get(r);u[c]=null,l.delete(r),o()}c=(c+1)%u.length}else u.splice(c,1),(e=0===u.length)?c=0:c%=u.length}e||i(a)}}var s=r("host-browser")?6:200,u=[],l=new Map,c=0;return function(e){return e?o.create(function(t){u.push(e),l.set(e,t),1===u.length&&i(a)},function(){u[u.indexOf(e)]=null,l.delete(e)}):o.reject(new TypeError("callback is not a function"))}}.apply(null,i))||(e.exports=n)},VY6u:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.C_INFINITY=Number.POSITIVE_INFINITY,t.C_PI=Math.PI,t.C_2PI=2*t.C_PI,t.C_PI_BY_2=t.C_PI/2,t.C_RAD_TO_256=128/t.C_PI,t.C_256_TO_RAD=t.C_PI/128,t.C_DEG_TO_256=256/360,t.C_DEG_TO_RAD=t.C_PI/180,t.C_SQRT2=1.414213562,t.C_SQRT2_INV=1/t.C_SQRT2;var r=1/Math.LN2;function i(e,t){return 0<=(e%=t)?e:e+t}t.positiveMod=i,t.radToByte=function(e){return i(e*t.C_RAD_TO_256,256)},t.degToByte=function(e){return i(e*t.C_DEG_TO_256,256)},t.log2=function(e){return Math.log(e)*r},t.sqr=function(e){return e*e},t.clamp=function(e,t,r){return Math.min(Math.max(e,t),r)},t.interpolate=function(e,t,r){return e*(1-r)+t*r},t.between=function(e,t,r){return t<=e&&e<=r||r<=e&&e<=t}}.apply(null,i))||(e.exports=n)},VfPl:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("xhoE"),r("pIuP"),r("fHyw"),r("zlCF"),r("bduU"),r("hQPx"),r("MI3s")],void 0===(n=function(e,t,r,i,n,o,a,s,u){Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Float32Array,t,r,i,n)||this;return o.elementType="f32",o}return r(t,e),t.ElementType="f32",t}(o.BufferViewScalarImpl);t.BufferViewFloat=l;var c=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Float32Array,t,r,i,n)||this;return o.elementType="f32",o}return r(t,e),t.ElementType="f32",t}(a.BufferViewVec2Impl);t.BufferViewVec2f=c;var f=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Float32Array,t,r,i,n)||this;return o.elementType="f32",o}return r(t,e),t.ElementType="f32",t}(s.BufferViewVec3Impl);t.BufferViewVec3f=f;var p=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Float32Array,t,r,i,n)||this;return o.elementType="f32",o}return r(t,e),t.ElementType="f32",t}(u.BufferViewVec4Impl);t.BufferViewVec4f=p;var h=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Float32Array,t,r,i,n)||this;return o.elementType="f32",o}return r(t,e),t.ElementType="f32",t}(i.BufferViewMat3Impl);t.BufferViewMat3f=h;var d=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Float64Array,t,r,i,n)||this;return o.elementType="f64",o}return r(t,e),t.ElementType="f64",t}(i.BufferViewMat3Impl);t.BufferViewMat3f64=d;var y=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Float32Array,t,r,i,n)||this;return o.elementType="f32",o}return r(t,e),t.ElementType="f32",t}(n.BufferViewMat4Impl);t.BufferViewMat4f=y;var v=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Float64Array,t,r,i,n)||this;return o.elementType="f64",o}return r(t,e),t.ElementType="f64",t}(n.BufferViewMat4Impl);t.BufferViewMat4f64=v;var m=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Float64Array,t,r,i,n)||this;return o.elementType="f64",o}return r(t,e),t.ElementType="f64",t}(o.BufferViewScalarImpl);t.BufferViewFloat64=m;var g=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Float64Array,t,r,i,n)||this;return o.elementType="f64",o}return r(t,e),t.ElementType="f64",t}(a.BufferViewVec2Impl);t.BufferViewVec2f64=g;var x=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Float64Array,t,r,i,n)||this;return o.elementType="f64",o}return r(t,e),t.ElementType="f64",t}(s.BufferViewVec3Impl);t.BufferViewVec3f64=x;var _=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Float64Array,t,r,i,n)||this;return o.elementType="f64",o}return r(t,e),t.ElementType="f64",t}(u.BufferViewVec4Impl);t.BufferViewVec4f64=_;var b=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Uint8Array,t,r,i,n)||this;return o.elementType="u8",o}return r(t,e),t.ElementType="u8",t}(o.BufferViewScalarImpl);t.BufferViewUint8=b;var I=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Uint8Array,t,r,i,n)||this;return o.elementType="u8",o}return r(t,e),t.ElementType="u8",t}(a.BufferViewVec2Impl);t.BufferViewVec2u8=I;var w=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Uint8Array,t,r,i,n)||this;return o.elementType="u8",o}return r(t,e),t.ElementType="u8",t}(s.BufferViewVec3Impl);t.BufferViewVec3u8=w;var T=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Uint8Array,t,r,i,n)||this;return o.elementType="u8",o}return r(t,e),t.ElementType="u8",t}(u.BufferViewVec4Impl);t.BufferViewVec4u8=T;var C=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Uint16Array,t,r,i,n)||this;return o.elementType="u16",o}return r(t,e),t.ElementType="u16",t}(o.BufferViewScalarImpl);t.BufferViewUint16=C;var S=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Uint16Array,t,r,i,n)||this;return o.elementType="u16",o}return r(t,e),t.ElementType="u16",t}(a.BufferViewVec2Impl);t.BufferViewVec2u16=S;var E=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Uint16Array,t,r,i,n)||this;return o.elementType="u16",o}return r(t,e),t.ElementType="u16",t}(s.BufferViewVec3Impl);t.BufferViewVec3u16=E;var B=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Uint16Array,t,r,i,n)||this;return o.elementType="u16",o}return r(t,e),t.ElementType="u16",t}(u.BufferViewVec4Impl);t.BufferViewVec4u16=B;var P=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Uint32Array,t,r,i,n)||this;return o.elementType="u32",o}return r(t,e),t.ElementType="u32",t}(o.BufferViewScalarImpl);t.BufferViewUint32=P;var M=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Uint32Array,t,r,i,n)||this;return o.elementType="u32",o}return r(t,e),t.ElementType="u32",t}(a.BufferViewVec2Impl);t.BufferViewVec2u32=M;var V=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Uint32Array,t,r,i,n)||this;return o.elementType="u32",o}return r(t,e),t.ElementType="u32",t}(s.BufferViewVec3Impl);t.BufferViewVec3u32=V;var A=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Uint32Array,t,r,i,n)||this;return o.elementType="u32",o}return r(t,e),t.ElementType="u32",t}(u.BufferViewVec4Impl);t.BufferViewVec4u32=A;var D=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Int8Array,t,r,i,n)||this;return o.elementType="i8",o}return r(t,e),t.ElementType="i8",t}(o.BufferViewScalarImpl);t.BufferViewInt8=D;var F=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Int8Array,t,r,i,n)||this;return o.elementType="i8",o}return r(t,e),t.ElementType="i8",t}(a.BufferViewVec2Impl);t.BufferViewVec2i8=F;var N=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Int8Array,t,r,i,n)||this;return o.elementType="i8",o}return r(t,e),t.ElementType="i8",t}(s.BufferViewVec3Impl);t.BufferViewVec3i8=N;var L=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Int8Array,t,r,i,n)||this;return o.elementType="i8",o}return r(t,e),t.ElementType="i8",t}(u.BufferViewVec4Impl);t.BufferViewVec4i8=L;var R=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Int16Array,t,r,i,n)||this;return o.elementType="i16",o}return r(t,e),t.ElementType="i16",t}(o.BufferViewScalarImpl);t.BufferViewInt16=R;var O=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Int16Array,t,r,i,n)||this;return o.elementType="i16",o}return r(t,e),t.ElementType="i16",t}(a.BufferViewVec2Impl);t.BufferViewVec2i16=O;var k=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Int16Array,t,r,i,n)||this;return o.elementType="i16",o}return r(t,e),t.ElementType="i16",t}(s.BufferViewVec3Impl);t.BufferViewVec3i16=k;var j=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Int16Array,t,r,i,n)||this;return o.elementType="i16",o}return r(t,e),t.ElementType="i16",t}(u.BufferViewVec4Impl);t.BufferViewVec4i16=j;var z=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Int32Array,t,r,i,n)||this;return o.elementType="i32",o}return r(t,e),t.ElementType="i32",t}(o.BufferViewScalarImpl);t.BufferViewInt32=z;var U=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Int32Array,t,r,i,n)||this;return o.elementType="i32",o}return r(t,e),t.ElementType="i32",t}(a.BufferViewVec2Impl);t.BufferViewVec2i32=U;var q=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Int32Array,t,r,i,n)||this;return o.elementType="i32",o}return r(t,e),t.ElementType="i32",t}(s.BufferViewVec3Impl);t.BufferViewVec3i32=q;var G=function(e){function t(t,r,i,n){void 0===r&&(r=0);var o=e.call(this,Int32Array,t,r,i,n)||this;return o.elementType="i32",o}return r(t,e),t.ElementType="i32",t}(u.BufferViewVec4Impl);t.BufferViewVec4i32=G}.apply(null,i))||(e.exports=n)},W2ph:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("ma1f"),r("rg9i"),r("qsST"),r("1RVI")],void 0===(n=function(e,t,r,i,n,o){function a(e,t,i){for(var n="",o=0;o<i;){var a=e[t+o];if(a<128)n+=String.fromCharCode(a),o++;else if(a>=192&&a<224){if(o+1>=i)throw new r("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");var s=(31&a)<<6|63&e[t+o+1];n+=String.fromCharCode(s),o+=2}else if(a>=224&&a<240){if(o+2>=i)throw new r("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");s=(15&a)<<12|(63&e[t+o+1])<<6|63&e[t+o+2];n+=String.fromCharCode(s),o+=3}else{if(!(a>=240&&a<248))throw new r("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");if(o+3>=i)throw new r("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");if((s=(7&a)<<18|(63&e[t+o+1])<<12|(63&e[t+o+2])<<6|63&e[t+o+3])>=65536){var u=55296+(s-65536>>10),l=56320+(1023&s);n+=String.fromCharCode(u,l)}else n+=String.fromCharCode(s);o+=4}}return n}function s(e,r){for(var i={byteOffset:0,byteCount:0,fields:Object.create(null)},n=0,o=0;o<r.length;o++){var a=r[o],s=a.valueType||a.type,u=t.valueType2ArrayBufferReader[s];i.fields[a.property]=u(e,n),n+=t.valueType2TypedArrayClassMap[s].BYTES_PER_ELEMENT}return i.byteCount=n,i}function u(e,t,i){var n,o,s=[],u=0;for(o=0;o<e;o+=1){if((n=t[o])>0){if(s.push(a(i,u,n-1)),0!==i[u+n-1])throw new r("string-array-error","Invalid string array: missing null termination.")}else s.push(null);u+=n}return s}function l(e,r){return new(0,t.valueType2TypedArrayClassMap[r.valueType])(e,r.byteOffset,r.count*r.valuesPerElement)}function c(e,t){return new Uint8Array(e,t.byteOffset,t.byteCount)}function f(e,t,n){for(var o=null!=t.header?s(e,t.header):{byteOffset:0,byteCount:0,fields:{count:n}},a={header:o,byteOffset:o.byteCount,byteCount:0,entries:Object.create(null)},u=o.byteCount,l=0;l<t.ordering.length;l++){var c=t.ordering[l],f=i.clone(t[c]);if(f.count=o.fields.count,"String"===f.valueType){if(f.byteOffset=u,f.byteCount=o.fields[c+"ByteCount"],"UTF-8"!==f.encoding)throw new r("unsupported-encoding","Unsupported String encoding.",{encoding:f.encoding})}else{if(!h(f.valueType))throw new r("unsupported-value-type","Unsupported binary valueType",{valueType:f.valueType});var p=d(f.valueType);u+=u%p!=0?p-u%p:0,f.byteOffset=u,f.byteCount=p*f.valuesPerElement*f.count}u+=f.byteCount,a.entries[c]=f}return a.byteCount=u-a.byteOffset,a}function p(e,t,i){if(t!==e&&y.error("Invalid "+i+" buffer size\n expected: "+e+", actual: "+t+")"),t<e)throw new r("buffer-too-small","Binary buffer is too small",{expectedSize:e,actualSize:t})}function h(e){return t.valueType2TypedArrayClassMap.hasOwnProperty(e)}function d(e){return h(e)&&t.valueType2TypedArrayClassMap[e].BYTES_PER_ELEMENT}Object.defineProperty(t,"__esModule",{value:!0});var y=n.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");t.readHeader=s,t.readStringArray=u,t.createTypedView=l,t.createRawView=c,t.createAttributeDataIndex=f,t.createGeometryDataIndex=function(e,t,r){var n=s(e,t&&t.header),o=n.byteCount,a={header:n,byteOffset:n.byteCount,byteCount:0,vertexAttributes:i.clone(t.vertexAttributes)},u=a.vertexAttributes;r||null==u.region||delete u.region;for(var l=n.fields,c=null!=l.vertexCount?l.vertexCount:l.count,f=0;f<t.ordering.length;f++){var h=t.ordering[f];null!=u[h]&&(u[h].byteOffset=o,u[h].count=c,o+=d(u[h].valueType)*u[h].valuesPerElement*c)}var y=l.faceCount;if(t.faces&&y){a.faces=i.clone(t.faces);var v=a.faces;for(f=0;f<t.ordering.length;f++){var m=t.ordering[f];null!=v[m]&&(v[m].byteOffset=o,v[m].count=y,o+=d(v[m].valueType)*v[m].valuesPerElement*y)}}var g=l.featureCount;if(t.featureAttributes&&t.featureAttributeOrder&&g){a.featureAttributes=i.clone(t.featureAttributes);var x=a.featureAttributes;for(f=0;f<t.featureAttributeOrder.length;f++){var _=t.featureAttributeOrder[f];x[_].byteOffset=o,x[_].count=g;var b=d(x[_].valueType);"UInt64"===x[_].valueType&&(b=8),o+=b*x[_].valuesPerElement*g}}return p(o,e.byteLength,"geometry"),a.byteCount=o-a.byteOffset,a},t.readBinaryAttribute=function(e,t,i){if("lepcc-rgb"===e.encoding)return o.decodeRGB(t);if("lepcc-intensity"===e.encoding)return o.decodeIntensity(t);if(null!=e.encoding&&""!==e.encoding)throw new r("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");e["attributeByteCounts "]&&!e.attributeByteCounts&&(y.warn("Warning: Trailing space in 'attributeByteCounts '."),e.attributeByteCounts=e["attributeByteCounts "]),"ObjectIds"===e.ordering[0]&&e.hasOwnProperty("objectIds")&&(y.warn("Warning: Case error in objectIds"),e.ordering[0]="objectIds");var n=f(t,e,i);p(n.byteOffset+n.byteCount,t.byteLength,"attribute");var a=n.entries.attributeValues||n.entries.objectIds;if(a){if("String"===a.valueType){var s=n.entries.attributeByteCounts,h=l(t,s),d=c(t,a);return u(s.count,h,d)}return l(t,a)}throw new r("bad-attribute-storage-info","Bad attributeStorageInfo specification.")},t.valueType2TypedArrayClassMap={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},t.valueType2ArrayBufferReader={Float32:function(e,t){return new DataView(e,0).getFloat32(t,!0)},Float64:function(e,t){return new DataView(e,0).getFloat64(t,!0)},UInt8:function(e,t){return new DataView(e,0).getUint8(t)},Int8:function(e,t){return new DataView(e,0).getInt8(t)},UInt16:function(e,t){return new DataView(e,0).getUint16(t,!0)},Int16:function(e,t){return new DataView(e,0).getInt16(t,!0)},UInt32:function(e,t){return new DataView(e,0).getUint32(t,!0)},Int32:function(e,t){return new DataView(e,0).getInt32(t,!0)}},t.isValueType=h,t.getBytesPerValue=d}.apply(null,i))||(e.exports=n)},W7eI:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("MzcX"),r("2B1V")],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0}),t.EdgeInputBufferLayout=i.newLayout().vec3f("position").u16("componentIndex").u16("_padding"),t.VertexLayout=i.newLayout().vec2u8("sideness"),t.glVertexLayout=r.glLayout(t.VertexLayout,{prefixA:!0}),t.CommonInstancesLayout=i.newLayout().vec3f("position0").vec3f("position1").u16("componentIndex").vec2u8("packedAttributes").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).u8("_padding",{glPadding:!0}),t.RegularEdgeInstancesLayout=t.CommonInstancesLayout.clone().vec3f("normal"),t.SilhouetteEdgeInstancesLayout=t.CommonInstancesLayout.clone().vec3f("normalA").vec3f("normalB"),t.EdgeShaderAttributeLocations={aPosition0:0,aPosition1:1,aComponentIndex:2,aPackedAttributes:3,aVariantOffset:4,aVariantStroke:5,aVariantExtension:6,aNormal:7,aNormalA:7,aNormalB:8,aSideness:9}}.apply(null,i))||(e.exports=n)},WKzk:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("qMld"),r("UTXC"),r("L8sq"),r("vavG")],void 0===(n=function(e,t,r,i,n,o){return function(){function e(){this._tiles=new Map,this._spriteInfo={},this._glyphInfo={}}return e.prototype.reset=function(){this._spriteInfo={},this._glyphInfo={};var e=this._tiles;return e.forEach(function(e){return e.setObsolete()}),e.clear(),r.resolve()},e.prototype.getLayers=function(){return this._layers},e.prototype.setLayers=function(e){var t=new o(e);return this._layers=t.layers,r.resolve({data:""})},e.prototype.createTileAndParse=function(e,t){for(var o=this,a=e.key,s=e.cacheTile,u=n.pool.acquire(),l={},c=0,f=Object.keys(e.sourceName2DataAndRefKey);c<f.length;c++){var p=f[c],h=e.sourceName2DataAndRefKey[p];l[p]=h.refKey}return u.initialize(a,l,this,e.rotation),u.setDataAndParse(e.sourceName2DataAndRefKey,t).then(function(e){return s&&u.status!==i.TileStatus.INVALID&&o._tiles.set(a,u),e}).catch(function(e){return u.setObsolete(),n.pool.release(u),o._tiles.has(u.tileKey)&&o._tiles.delete(u.tileKey),r.reject(e)}).catch(function(e){return e}).then(function(e){return s||n.pool.release(u),e})},e.prototype.updateSymbols=function(e){var t=this._tiles.get(e.key);return t?t.updateSymbols(e.rotation):r.reject()},e.prototype.updateStyle=function(e,t){var i=new o(e);return this._layers=i.layers,this._tiles.forEach(function(e,r){e.reparse(t).then(function(r){t.client.invoke("updateTileData",{tileId:e.tileKey,tileData:r.result})})}),r.resolve({data:""})},e.prototype.destructTileData=function(e){return this._tiles.has(e)&&(n.pool.release(this._tiles.get(e)),this._tiles.delete(e)),r.resolve()},e.prototype.fetchSprites=function(e,t){var i=[],n=this._spriteInfo;return e.forEach(function(e){void 0===n[e]&&i.push(e)}),0===i.length?r.resolve():t.invoke("getSprites",i).then(function(e){for(var t in e){var r=e[t];n[t]=r}})},e.prototype.getSpriteItems=function(){return this._spriteInfo},e.prototype.fetchGlyphs=function(e,t,i,n){var o=[],a=this._glyphInfo[t];return a?i.forEach(function(e){a[e]||o.push(e)}):(a=this._glyphInfo[t]=[],i.forEach(function(e){return o.push(e)})),0===o.length?r.resolve():n.invoke("getGlyphs",{tileID:e,font:t,codePoints:o}).then(function(e){for(var t in e)a[t]=e[t]})},e.prototype.getGlyphItems=function(e){return this._glyphInfo[e]},e}()}.apply(null,i))||(e.exports=n)},YT9w:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("ycL1"),r("0+sO"),r("rg9i"),r("Vx27"),r("fsLf"),r("AWmc"),r("7ahC")],void 0===(n=function(e,t,r,i,n,o,a,s,u,l,c){var f=o.strict()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"}),p=function(e){function t(t){var r=e.call(this)||this;return r.type=void 0,r.pointSizeAlgorithm=null,r.colorModulation=null,r.pointsPerInch=10,r}return r(t,e),t.prototype.clone=function(){return null},t.prototype.cloneProperties=function(){return{pointSizeAlgorithm:a.clone(this.pointSizeAlgorithm),colorModulation:a.clone(this.colorModulation),pointsPerInch:a.clone(this.pointsPerInch)}},i([s.property({type:f.apiValues,readOnly:!0,nonNullable:!0,json:{type:f.jsonValues,read:!1,write:f.write}})],t.prototype,"type",void 0),i([s.property({types:c.pointSizeAlgorithmTypes,json:{read:l.read,write:!0}})],t.prototype,"pointSizeAlgorithm",void 0),i([s.property({type:u.default,json:{write:!0}})],t.prototype,"colorModulation",void 0),i([s.property({json:{write:!0},nonNullable:!0,type:Number})],t.prototype,"pointsPerInch",void 0),i([s.subclass("esri.renderers.PointCloudRenderer")],t)}(s.declared(n));return(p||(p={})).fieldTransformTypeKebabDict=new o.KebabDictionary({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"}),p}.apply(null,i))||(e.exports=n)},YhCz:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("ma1f"),r("qsST"),r("v7zm"),r("yre/"),r("6/KI")],void 0===(n=function(e,t,r,i,n,o,a){function s(e){return e>=C.length?null:C[e]}function u(e){return e>=S.length?null:S[e]}function l(e){return e>=E.length?null:E[e]}function c(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function f(e,t,r){for(var i=e.createPointGeometry(t);r.next();)switch(r.tag()){case 3:for(var n=r.getUInt32(),o=r.pos()+n,a=0;r.pos()<o;)e.addCoordinatePoint(i,r.getSInt64(),0,a++);break;case 1:case 2:default:r.skip()}return i}function p(e,t,r){for(var i=e.createGeometry(t),n=2+(t.hasZ?1:0)+(t.hasM?1:0);r.next();)switch(r.tag()){case 2:for(var o=r.getUInt32(),a=r.pos()+o,s=0;r.pos()<a;)e.addLength(i,r.getUInt32(),s++);break;case 3:for(var u=r.getUInt32(),l=(a=r.pos()+u,0),c=0;r.pos()<a;)e.addCoordinate(i,r.getSInt64(),c,l),++l===n&&(c++,l=0);break;case 1:default:r.skip()}return i}function h(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function d(e){for(var t={type:s(0)};e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.type=s(e.getEnum());break;case 3:t.alias=e.getString();break;case 4:t.sqlType=u(e.getEnum());break;case 5:case 6:default:e.skip()}return t}function y(e,t,r,i){for(var n=e.createFeature(t),o=0;r.next();)switch(r.tag()){case 1:var a=i[o++].name;n.attributes[a]=h(r.getMessage());break;case 2:n.geometry=p(e,t,r.getMessage());break;case 4:n.centroid=f(e,t,r.getMessage());break;default:r.skip()}return n}function v(e){for(var t=[0,0,0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function m(e){for(var t=[0,0,0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function g(e){for(var t={originPosition:l(0)};e.next();)switch(e.tag()){case 1:t.originPosition=l(e.getEnum());break;case 2:t.scale=v(e.getMessage());break;case 3:t.translate=m(e.getMessage());break;default:e.skip()}return t}function x(e){for(var t={};e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip()}return t}function _(e,t){for(var r=e.createSpatialReference();t.next();)switch(t.tag()){case 1:r.wkid=t.getUInt32();break;case 5:r.wkt=t.getString();break;case 2:case 3:case 4:default:t.skip()}return r}function b(e,t){var r=e.createFeatureResult();r.geometryType=c(e,0);for(var i=!1;t.next();)switch(t.tag()){case 1:r.objectIdFieldName=t.getString();break;case 3:r.globalIdFieldName=t.getString();break;case 4:r.geohashFieldName=t.getString();break;case 5:r.geometryProperties=x(t.getMessage());break;case 7:r.geometryType=c(e,t.getEnum());break;case 8:r.spatialReference=_(e,t.getMessage());break;case 10:r.hasZ=t.getBool();break;case 11:r.hasM=t.getBool();break;case 12:r.transform=g(t.getMessage());break;case 9:var n=t.getBool();r.exceededTransferLimit=n;break;case 13:e.addField(r,d(t.getMessage()));break;case 15:i||(e.prepareFeatures(r),i=!0),e.addFeature(r,y(e,r,t.getMessage(),r.fields));break;case 2:case 6:default:t.skip()}return e.finishFeatureResult(r),r}function I(e,t){for(var r={};t.next();)switch(t.tag()){case 1:r.featureResult=b(e,t.getMessage());break;default:t.skip()}return r}function w(e){return e&&"dehydrated"===e.type?new o.Context(e):new a.Context(e)}Object.defineProperty(t,"__esModule",{value:!0});var T=i.getLogger("esri.tasks.operations.pbfFeatureServiceParser"),C=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],S=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],E=["upperLeft","lowerLeft"];t.parseFeatureQuery=function(e,t){var i=w(t);try{for(var o=new n(new Uint8Array(e),new DataView(e)),a={};o.next();)switch(o.tag()){case 2:a.queryResult=I(i,o.getMessage());break;default:o.skip()}return a}catch(e){var s=new r("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:e});return T.error(s),{queryResult:{featureResult:i.createFeatureResult()}}}}}.apply(null,i))||(e.exports=n)},Ytki:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("PND3"),r("ma1f"),r("ZHL0"),r("1eyA")],void 0===(n=function(e,t,r,i,n,o){function a(e){if(!e)return null;var r=t.invalidClauseCache.get(e);if(void 0!==r)return r;var i,n=t.whereClausesCache.get(e);return void 0!==n?n:(i=o.create(e),t.whereClausesCache.put(e,i),i)}function s(e,t,r,n){void 0===n&&(n=!0);for(var o=[],c=0,f=t;c<f.length;c++){var p=f[c];if("*"!==p&&!e.has(p))if(n){var h=u(p);try{var d=a(h);if(!d.isStandardized())throw new i(l,"expression is not standard",{clause:d});s(e,d.getFields(),"expression contains missing fields")}catch(e){var y=e&&e.details;if(y&&y.clause)throw e;y&&y.missingFields?Array.prototype.push.apply(o,y.missingFields):o.push(p)}}else o.push(p)}if(o.length)throw new i(l,r,{missingFields:o})}function u(e){return e.split(c)[0]}Object.defineProperty(t,"__esModule",{value:!0}),t.invalidClauseCache=new n(500),t.whereClausesCache=new n(50);var l="feature-store:unsupported-query",c=" as ",f=new r.default(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);t.validateWhere=function(e,r){if(!r)return!0;var n;try{n=o.create(r),t.whereClausesCache.put(r,n)}catch(e){throw t.invalidClauseCache.put(r,null),new i(l,"invalid SQL expression",{where:r})}if(!n.isStandardized())throw new i(l,"where clause is not standard",{where:r});return s(e,n.getFields(),"where clause contains missing fields"),!0},t.validateHaving=function(e,r,n){if(!r)return!0;var a;try{a=o.create(r),t.whereClausesCache.put(r,a)}catch(e){throw t.invalidClauseCache.put(r,null),new i(l,"invalid SQL expression",{having:r})}if(!a.isAggregate())throw new i(l,"having does not contain a valid aggregate function",{having:r});var u=a.getFields();if(s(e,u,"having contains missing fields"),!a.getExpressions().every(function(t){var r=t.aggregateType,i=t.field,o=e.has(i)&&e.get(i).name;return n.some(function(t){var i=t.onStatisticField,n=t.statisticType,a=i.toLowerCase().trim();return(e.has(a)&&e.get(a).name)===o&&n.toLowerCase().trim()===r})}))throw new i(l,"expressions in having should also exist in outStatistics",{having:r});return!0},t.getWhereClause=a,t.validateFields=s,t.getExpressionFromFieldName=u,t.getAliasFromFieldName=function(e){return e.split(c)[1]},t.hasInvalidFieldType=function(e,t){var r=!1;if(-1!==a(e).getFields().indexOf(e)){var i=t.get(e);r=!f.has(i.type)}return r}}.apply(null,i))||(e.exports=n)},ZooB:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("ll/V"),r("xdHJ"),r("PND3"),r("WYKK"),r("ma1f"),r("rg9i"),r("qsST"),r("r7jh"),r("qMld"),r("8uEs"),r("lRq4"),r("hBh5"),r("Lzvl"),r("nrlZ"),r("Ytki"),r("Q2Em"),r("4/qq"),r("d81A"),r("V1i6"),r("/61J"),r("zDti"),r("tZaU")],void 0===(n=function(e,t,r,i,n,o,a,s,u,l,c,f,p,h,d,y,v,m,g,x,_,b,I,w,T){function C(e,t,r,i,n,o,a,s,u){u||(u=S),a&&!o?i.forEachInBounds(n,function(i){if(!t.has(i.objectId)){var n=w.getCentroid(r,i,s),o=i.attributes;n&&(t.add(i.objectId),e.push(new B(o,null,n,u(i))))}}):o&&!a?i.forEachInBounds(n,function(i){if(!t.has(i.objectId)){var n=i.attributes,o=w.getGeometry(r,i,0,s);o&&(t.add(i.objectId),e.push(new B(n,o,null,u(i))))}}):i.forEachInBounds(n,function(i){if(!t.has(i.objectId)){var n=i.attributes,o=w.getGeometry(r,i,0,s),a=w.getCentroid(r,i,s);o&&a&&(t.add(i.objectId),e.push(new B(n,o,a,u(i))))}})}Object.defineProperty(t,"__esModule",{value:!0});var S=function(e){return 1},E=l.getLogger("esri.layers.graphics.data.QueryEngine"),B=function(e,t,r,i){this.attributes=e,this.geometry=t,this.centroid=r,this.filterFlags=i},P=new o.default,M=new c.Storage(2e6),V=0,A=function(){function e(e){var t=this;this.capabilities={query:x.queryCapabilities},this.fieldsMap=new n.default,this.geometryType=e.geometryType,this.hasM=e.hasM,this.hasZ=e.hasZ,this.objectIdField=e.objectIdField,this.spatialReference=e.spatialReference,this.definitionExpression=e.definitionExpression,this.cacheSpatialQueries=e.cacheSpatialQueries||!1,this.gdbVersion=e.gdbVersion,this.historicMoment=e.historicMoment,this.featureStore=e.featureStore,this.featureStore.setEngine(this),this.timeInfo=e.timeInfo,this.cacheSpatialQueries&&(this._geometryQueryCache=new c(V+++"$$",M)),e.fields.forEach(function(e){t.fieldsMap.set(e.name.trim(),e),t.fieldsMap.set(e.name.trim().toLowerCase(),e)}),e.scheduler&&e.priority&&(this._frameQueue=new T.PromiseQueue,this._frameTask=e.scheduler.registerTask(e.priority,function(e){return t._update(e)},function(){return t._frameQueue.length>0}))}return e.prototype.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=null),this.clearCache(),this._geometryQueryCache&&this._geometryQueryCache.destroy(),this.fieldsMap.clear()},Object.defineProperty(e.prototype,"fullExtent",{get:function(){var e=this.featureStore.fullBounds;return e?{xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:w.cleanFromGeometryEngine(this.spatialReference)}:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeExtent",{get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:(this._timeExtent=I.getTimeExtent(this.timeInfo,this.featureStore),this._timeExtent):null},enumerable:!0,configurable:!0}),e.prototype.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear(),this._allItems=null,this._timeExtent=null},e.prototype.executeQuery=function(e){var t=this;void 0===e&&(e={});var r=u.clone(e);return a.safeCast(w.normalizeQuery(r,this.definitionExpression,this.spatialReference)).then(function(e){return t._schedule(e)}).then(function(e){return t._checkQuerySupport(e)}).then(function(e){return t._reschedule(e)}).then(function(e){return t._executeGeometryQuery(e)}).then(function(e){return t._reschedule(e)}).then(function(e){return e.executeObjectIdsQuery(r)}).then(function(e){return t._reschedule(e)}).then(function(e){return e.executeTimeQuery(r)}).then(function(e){return t._reschedule(e)}).then(function(e){return e.executeAttributesQuery(r)}).catch(function(e){if(e===w.QUERY_ENGINE_EMPTY_RESULT)return new _.default([],null,t);throw e}).then(function(e){return e.createQueryResponse(r)})},e.prototype.executeQueryForCount=function(e){var t=this;void 0===e&&(e={});var r=u.clone(e);return r.returnGeometry=!1,r.returnCentroid=!1,r.outSR=null,a.safeCast(w.normalizeQuery(r,this.definitionExpression,this.spatialReference)).then(function(e){return t._schedule(e)}).then(function(e){return t._checkQuerySupport(e)}).then(function(e){return t._reschedule(e)}).then(function(e){return t._executeGeometryQuery(e)}).then(function(e){return t._reschedule(e)}).then(function(e){return e.executeObjectIdsQuery(r)}).then(function(e){return t._reschedule(e)}).then(function(e){return e.executeTimeQuery(r)}).then(function(e){return t._reschedule(e)}).then(function(e){return e.executeAttributesQuery(r)}).then(function(e){return e.size}).catch(function(e){if(e===w.QUERY_ENGINE_EMPTY_RESULT)return 0;throw e})},e.prototype.executeQueryForExtent=function(e){var t=this;void 0===e&&(e={});var r=u.clone(e),i=r.outSR;return a.safeCast(w.normalizeQuery(r,this.definitionExpression,this.spatialReference)).then(function(e){return t._schedule(e)}).then(function(e){return t._checkQuerySupport(e)}).then(function(){return r.returnGeometry=!0,r.returnCentroid=!1,r.outSR=null,r}).then(function(e){return t._reschedule(e)}).then(function(e){return t._executeGeometryQuery(e)}).then(function(e){return t._reschedule(e)}).then(function(e){return e.executeObjectIdsQuery(r)}).then(function(e){return t._reschedule(e)}).then(function(e){return e.executeTimeQuery(r)}).then(function(e){return t._reschedule(e)}).then(function(e){return e.executeAttributesQuery(r)}).then(function(e){return t._reschedule(e)}).then(function(e){var r=e.size;if(!r)return{count:r,extent:null};var n={xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:w.cleanFromGeometryEngine(t.spatialReference)};t.featureStore.forEachBounds(e.items,function(e){n.xmin=Math.min(e[0],n.xmin),n.ymin=Math.min(e[1],n.ymin),n.xmax=Math.max(e[2],n.xmax),n.ymax=Math.max(e[3],n.ymax)});var o=g.project(n,e.spatialReference,i);if(o.spatialReference=w.cleanFromGeometryEngine(i||t.spatialReference),o.xmax-o.xmin==0){var a=p.getMetersPerUnitForSR(o.spatialReference);o.xmin-=a,o.xmax+=a}if(o.ymax-o.ymin==0){a=p.getMetersPerUnitForSR(o.spatialReference);o.ymin-=a,o.ymax+=a}return{count:r,extent:o}}).catch(function(e){if(e===w.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw e})},e.prototype.executeQueryForIds=function(e){return void 0===e&&(e={}),this.executeQueryForIdSet(e).then(function(e){return i.from(e)})},e.prototype.executeQueryForIdSet=function(e){var t=this;void 0===e&&(e={});var r=u.clone(e);return r.returnGeometry=!1,r.returnCentroid=!1,r.outSR=null,a.safeCast(w.normalizeQuery(r,this.definitionExpression,this.spatialReference)).then(function(e){return t._schedule(e)}).then(function(e){return t._executeGeometryQuery(e)}).then(function(e){return t._reschedule(e)}).then(function(e){return e.executeObjectIdsQuery(r)}).then(function(e){return t._reschedule(e)}).then(function(e){return e.executeTimeQuery(r)}).then(function(e){return t._reschedule(e)}).then(function(e){return e.executeAttributesQuery(r)}).then(function(e){return t._reschedule(e)}).then(function(e){for(var t=e.items,r=new o.default,i=0,n=t;i<n.length;i++){var a=n[i];r.add(a.objectId)}return r}).catch(function(e){if(e===w.QUERY_ENGINE_EMPTY_RESULT)return new o.default;throw e})},e.prototype.executeTileQuery=function(e,t,r){var i=this;void 0===r&&(r=null);var n=t.returnGeometry,a=t.returnCentroid,s=t.pixelBuffer,u=new o.default,l=[],c=s*e.resolution,f=h.pad(e.bounds,c,h.create());if(C(l,u,this,this.featureStore,f,n,a,{originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[e.bounds[0],e.bounds[3]]},r),"esriGeometryPoint"===this.geometryType||a){var p=v.getInfo(this.spatialReference);if(p){var d=p.valid,y=d[0],m=d[1];if(f[0]<y){var g=h.fromValues(m-c,f[1],m,f[3]);C(l,u,this,this.featureStore,g,n,a,{originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[m,e.bounds[3]]},r)}if(f[2]>m){var x=h.fromValues(y,f[1],y+c,f[3]);C(l,u,this,this.featureStore,x,n,a,{originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[y-m+e.bounds[0],e.bounds[3]]},r)}}}return l.sort(function(e,t){return e.attributes[i.objectIdField]-t.attributes[i.objectIdField]}),{features:l,objectIds:u}},e.prototype.executeTileQueryForIds=function(e,t){var r=t.pixelBuffer*e.resolution,i=h.pad(e.bounds,r,h.create()),n=[];return this.featureStore.forEachInBounds(i,function(e){return n.push(e.objectId)}),n},e.prototype.executeQueryForLatestObservations=function(e){var t=this;return this.timeInfo?this.executeQuery(e).then(function(e){return t._filterLatest(e,t.timeInfo)}):void E.error(new s("invalid-query","Unable to make time-based query as the underlying service does include TimeInfo"))},e.prototype._schedule=function(e){return this._frameQueue?this._frameQueue.push(e).then(function(e){return e}):f.resolve(e)},e.prototype._reschedule=function(e){return this._frameQueue?this._frameQueue.push(e).then(function(e){return e}):f.resolve(e)},e.prototype._update=function(e){for(this._budget=e;!e.done&&this._frameQueue.process();)e.madeProgress();this._budget=null},e.prototype._filterLatest=function(e,t){for(var i=t.trackIdField,o=t.startTimeField,a=t.endTimeField||o,s=new n.default,u=[],l=0,c=e.features;l<c.length;l++){var f=c[l],p=f.attributes[i],h=f.attributes[a];(!s.has(p)||s.get(p).attributes[a]<h)&&s.set(p,f)}return s.forEach(function(e){return u.push(e)}),r({},e,{features:u})},e.prototype._getAll=function(){if(!this._allItems){var e=[];this.featureStore.forEach(function(t){return e.push(t)}),this._allItems=new _.default(e,null,this)}return this._allItems},e.prototype._executeGeometryQuery=function(e){var t=this,r=e.geometry,i=e.outSR,n=e.spatialRel,a=v.isValid(i)&&!v.equals(this.spatialReference,i),s=this.cacheSpatialQueries?a?JSON.stringify({geometry:r,spatialRelationship:n,outSpatialReference:i}):JSON.stringify({geometry:r,spatialRelationship:n}):null;if(s){var u=this._geometryQueryCache.get(s);if(void 0!==u)return f.resolve(u)}var l=function(r){return a&&(e.returnGeometry||e.returnCentroid)?r.project(i).then(function(e){return s&&t._geometryQueryCache.put(s,e,e.size||1),e}):(s&&t._geometryQueryCache.put(s,r,r.size||1),r)};if(!r)return f.resolve(this._getAll()).then(function(e){return l(e)});if("esriSpatialRelDisjoint"===n){var c,p,h=this._searchFeatures(this._getQueryBBoxes(r));return h.length?this._reschedule(h).then(function(e){return new o.default(e)}).then(function(e){return t._reschedule(e)}).then(function(e){var r=0;c=new Array(e.size),t.featureStore.forEach(function(e){return c[r++]=e}),p=e}).then(function(){return t._reschedule()}).then(function(){return b.getSpatialQueryOperator(n,r,t)}).then(function(e){return t._runSpatialFilter(c,function(t){return!p.has(t)||e(t.geometry)}).then(function(e){return new _.default(e,r,t)}).then(function(e){return l(e)})}):f.resolve(this._getAll()).then(function(e){return l(e)})}var d=this._searchFeatures(this._getQueryBBoxes(r));if(!d.length){var y=new _.default([],r,this);return s&&this._geometryQueryCache.put(s,y,y.size||1),f.resolve(y)}return this._canExecuteSoloPass(r,e)?f.resolve(new _.default(d,r,this)).then(function(e){return l(e)}):b.getSpatialQueryOperator(n,r,this).then(function(e){return t._runSpatialFilter(d,function(t){return e(t.geometry)})}).then(function(e){return new _.default(e,r,t)}).then(function(e){return l(e)})},e.prototype._runSpatialFilter=function(e,t){var r=this;if(!t)return f.resolve(e);if(!this._budget)return f.resolve(e.filter(function(e){return t(e)}));var i=0,n=new Array,o=function(){for(;i<e.length;){var a=e[i];if(t(a)&&n.push(a),r._budget.done)return r._reschedule().then(function(){return o()});++i}return f.resolve()};return this._reschedule().then(function(){return o()}).then(function(){return n})},e.prototype._canExecuteSoloPass=function(e,t){var r=this.geometryType,i=t.spatialRel;return b.canQueryWithRBush(e)&&("esriSpatialRelEnvelopeIntersects"===i||"esriGeometryPoint"===r&&("esriSpatialRelIntersects"===i||"esriSpatialRelContains"===i||"esriSpatialRelWithin"===i))},e.prototype._getQueryBBoxes=function(e){if(b.canQueryWithRBush(e)){if(y.isExtent(e))return[h.fromValues(e.xmin,e.ymin,e.xmax,e.ymax)];if(y.isPolygon(e))return e.rings.map(function(e){return h.fromValues(e[0][0],e[0][1],e[2][0],e[2][1])})}return[d.getBoundsXY(h.create(),e)]},e.prototype._searchFeatures=function(e){for(var t=0,r=e;t<r.length;t++){var i=r[t];this.featureStore.forEachInBounds(i,function(e){P.add(e)})}var n=new Array(P.size),o=0;return P.forEach(function(e){return n[o++]=e}),P.clear(),n},e.prototype._checkQuerySupport=function(e){return e.distance<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text?f.reject(new s("feature-store:unsupported-query","Unsupported query options",{query:e})):f.all([this._checkAttributesQuerySupport(e),this._checkStatisticsQuerySupport(e),b.checkSpatialQuerySupport(e,this.geometryType,this.spatialReference),g.checkProjectionSupport(this.spatialReference,e.outSR)]).then(function(){return e})},e.prototype._checkAttributesQuerySupport=function(e){var t=e.outFields,r=e.orderByFields,i=e.returnDistinctValues;if(r&&r.length>0){var n=r.map(function(e){return e.indexOf(" ASC")>-1?e.split(" ASC")[0]:e.indexOf(" DESC")>-1?e.split(" DESC")[0]:e});m.validateFields(this.fieldsMap,n,"orderByFields contains missing fields")}if(t&&t.length>0)m.validateFields(this.fieldsMap,t,"outFields contains missing fields");else if(i)throw new s("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:e});m.validateWhere(this.fieldsMap,e.where)},e.prototype._checkStatisticsQuerySupport=function(e){var t=e.outStatistics,r=e.groupByFieldsForStatistics,i=e.having,n=r&&r.length,o=t&&t.length;if(i){if(!n||!o)return f.reject(new s("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:e}));m.validateHaving(this.fieldsMap,i,t)}if(o){if(t.some(function(e){return"exceedslimit"===e.statisticType}))return;var a=t.map(function(e){return e.onStatisticField});m.validateFields(this.fieldsMap,a,"onStatisticFields contains missing fields"),n&&m.validateFields(this.fieldsMap,r,"groupByFieldsForStatistics contains missing fields");for(var u=0,l=t;u<l.length;u++){var c=l[u],p=c.onStatisticField,h=c.statisticType;if("exceedslimit"===h)return f.reject(new s("feature-store:unsupported-query","statistic type exceedslimit is not supported",{definition:c,query:e}));if((!n||"count"!==h)&&p&&m.hasInvalidFieldType(p,this.fieldsMap))return f.reject(new s("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:c,query:e}))}}},e}();t.default=A}.apply(null,i))||(e.exports=n)},bduU:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("W9tT")],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,r,i,n){void 0===r&&(r=0),this.TypedArrayConstructor=e,this.elementCount=2;var o=this.TypedArrayConstructor;void 0===i&&(i=2*o.BYTES_PER_ELEMENT);var a=0===t.byteLength?0:r;this.typedBuffer=null==n?new o(t,a):new o(t,a,(n-r)/o.BYTES_PER_ELEMENT),this.typedBufferStride=i/o.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return e.prototype.getVec=function(e,t){return r.vec2.set(t,this.typedBuffer[e*this.typedBufferStride],this.typedBuffer[e*this.typedBufferStride+1])},e.prototype.setVec=function(e,t){this.typedBuffer[e*this.typedBufferStride]=t[0],this.typedBuffer[e*this.typedBufferStride+1]=t[1]},e.prototype.get=function(e,t){return this.typedBuffer[e*this.typedBufferStride+t]},e.prototype.set=function(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r},e.prototype.copyFrom=function(e,t,r){var i=this.typedBuffer,n=t.typedBuffer,o=e*this.typedBufferStride,a=r*t.typedBufferStride;i[o]=n[a],i[o+1]=n[a+1]},Object.defineProperty(e.prototype,"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0}),e.ElementCount=2,e}();t.BufferViewVec2Impl=i}.apply(null,i))||(e.exports=n)},d81A:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("PND3"),r("LxLY"),r("qMld"),r("u90+"),r("nrlZ"),r("+6sX"),r("700l"),r("Ytki"),r("Q2Em"),r("/61J"),r("zDti")],void 0===(n=function(e,t,r,i,n,o,a,s,u,l,c,f,p,h){Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function e(e,t,r){this.items=e,this.queryGeometry=t,this.definitionExpression=r.definitionExpression,this.geometryType=r.geometryType,this.hasM=r.hasM,this.hasZ=r.hasZ,this.objectIdField=r.objectIdField,this.spatialReference=r.spatialReference,this.fieldsMap=r.fieldsMap,this.timeInfo=r.timeInfo}return Object.defineProperty(e.prototype,"size",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),e.prototype.createQueryResponse=function(e){var t;return t=e.outStatistics?e.outStatistics.some(function(e){return"exceedslimit"===e.statisticType})?this._createExceedsLimitQueryResponse(e):this._createStatisticsQueryResponse(e):this._createFeatureQueryResponse(e),e.returnQueryGeometry&&(s.isValid(e.outSR)&&!s.equals(this.queryGeometry.spatialReference,e.outSR)?t.queryGeometry=h.cleanFromGeometryEngine(r({spatialReference:e.outSR},f.project(this.queryGeometry,this.queryGeometry.spatialReference,e.outSR))):t.queryGeometry=h.cleanFromGeometryEngine(r({spatialReference:e.outSR},this.queryGeometry))),t},e.prototype.executeAttributesQuery=function(t){var r=c.getWhereClause(t.where);if(!r)return o.resolve(this);if(r.isStandardized()){for(var i=0,n=[],a=0,s=this.items;a<s.length;a++){var u=s[a];r.testFeature(u.attributes)&&(n[i++]=u)}var l=new e(n,this.queryGeometry,this);return l.definitionExpression=t.where,o.resolve(l)}return o.reject(new TypeError("Where clause is not standardized"))},e.prototype.executeObjectIdsQuery=function(t){if(!t.objectIds||!t.objectIds.length)return o.resolve(this);var r=new i.default(t.objectIds);return o.resolve(new e(this.items.filter(function(e){return r.has(e.objectId)}),this.queryGeometry,this))},e.prototype.executeTimeQuery=function(t){var r=p.getTimeOperator(this.timeInfo,t.timeExtent);if(!n.isSome(r))return o.resolve(this);var i=this.items.filter(r);return o.resolve(new e(i,this.queryGeometry,this))},e.prototype.project=function(t){var r=this;return!t||s.equals(this.spatialReference,t)?o.resolve(this):f.projectMany(this.items.map(function(e){return h.getGeometry(r,e)}),this.spatialReference,t).then(function(i){for(var n=[],o=0;o<r.items.length;o++)n[o]={attributes:r.items[o].attributes,geometry:i[o]};var a=[];return u.convertFromFeatures(a,n,r.geometryType,r.hasZ,r.hasM,r.objectIdField),new e(a,r.queryGeometry,{definitionExpression:r.definitionExpression,geometryType:r.geometryType,hasM:r.hasM,hasZ:r.hasZ,objectIdField:r.objectIdField,spatialReference:t,fieldsMap:r.fieldsMap,timeInfo:r.timeInfo})})},e.prototype._createFeatureQueryResponse=function(e){var t=this,r=this.items,i=this,n=i.geometryType,o=i.hasM,s=i.hasZ,u=i.objectIdField,l=i.spatialReference,c=e.outFields,f=e.outSR,p=e.quantizationParameters,d=e.resultRecordCount,y=e.resultOffset,v=!1;if(null!=d&&null!=y){var m=y+d;v=r.length>m,r=r.slice(y,Math.min(r.length,m))}return{exceededTransferLimit:v,features:this._createFeatures(e,r),fields:c&&c.map(function(e){return t.fieldsMap.get(e)}),geometryType:n,hasM:o,hasZ:s,objectIdFieldName:u,spatialReference:h.cleanFromGeometryEngine(f||l),transform:p&&a.toQuantizationTransform(p)||null}},e.prototype._createFeatures=function(e,t){var r=new l.default(e,this.fieldsMap),i=e.quantizationParameters,n=e.returnGeometry,o=e.returnCentroid,s=e.maxAllowableOffset,u=e.orderByFields,c=[],f=0;if(t.length&&u&&u.length){var p=u[0].split(" "),d=p[0],y="DESC"===p[1];t.sort(function(e,t){var i=r.getFieldValue(e,d),n=r.getFieldValue(t,d);if("number"==typeof i&&"number"==typeof n)return y?n-i:i-n;if("string"==typeof i&&"string"==typeof n){var o=i.toUpperCase(),a=n.toUpperCase();return(y?o>a:o<a)?-1:(y?o<a:o>a)?1:0}})}if(n||o){var v=a.toQuantizationTransform(i);if(n&&!o)for(var m=0,g=t;m<g.length;m++){var x=g[m];c[f++]={attributes:r.getAttributes(x),geometry:h.getGeometry(this,x,s,v)}}else if(!n&&o)for(var _=0,b=t;_<b.length;_++){x=b[_];c[f++]={attributes:r.getAttributes(x),centroid:h.getCentroid(this,x,v)}}else for(var I=0,w=t;I<w.length;I++){x=w[I];c[f++]={attributes:r.getAttributes(x),centroid:h.getCentroid(this,x,v),geometry:h.getGeometry(this,x,s,v)}}}else for(var T=0,C=t;T<C.length;T++){x=C[T];var S=r.getAttributes(x);S&&(c[f++]={attributes:S})}return c},e.prototype._createExceedsLimitQueryResponse=function(e){for(var t=!1,r=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,o=0,a=e.outStatistics;o<a.length;o++){var s=a[o];if("exceedslimit"===s.statisticType){r=null!=s.maxPointCount?s.maxPointCount:Number.POSITIVE_INFINITY,i=null!=s.maxRecordCount?s.maxRecordCount:Number.POSITIVE_INFINITY,n=null!=s.maxVertexCount?s.maxVertexCount:Number.POSITIVE_INFINITY;break}}if("esriGeometryPoint"===this.geometryType)t=this.items.length>r;else if(this.items.length>i)t=!0;else{var u=this.hasZ?this.hasM?4:3:this.hasM?3:2;t=this.items.reduce(function(e,t){return e+(t.geometry&&t.geometry.coords.length||0)},0)/u>n}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(t)}}]}},e.prototype._createStatisticsQueryResponse=function(e){for(var t=new l.default(e,this.fieldsMap),r=e.outStatistics,i=[],n=[],o=e.groupByFieldsForStatistics,a=e.having,s=o&&o.length,u=s&&o[0],c={},f={},p={},h={attributes:{}},d=0,y=r;d<y.length;d++){var v=y[d],m=v.outStatisticFieldName,g=v.statisticType,x="exceedslimit"!==v.statisticType?v.onStatisticField:void 0,_="1"===x;if(s&&(x===u||_)&&"count"===v.statisticType){c[x]||(c[x]=this._calculateUniqueValues(t,_?u:x));var b=c[x];for(var I in b){var w=b[I],T=w.count,C=w.data,S=w.items,E=f[C]||{attributes:{}};a&&!t.validateItems(S,a)||(E.attributes[m]=T,E.attributes[_?"EXPR_1":x]=C,f[C]=E)}n.push({name:m,alias:m,type:"esriFieldTypeString"})}else{if(s){var B=this._calculateUniqueValues(t,u);for(var I in B){var P=B[I];C=P.data,S=P.items;if(!a||t.validateItems(S,a)){E=f[C]||{attributes:{}};var M=this._calculateStatistics(S,t,x),V="var"===g?"variance":g;E.attributes[m]=M[V],E.attributes[u]=C,f[C]=E}}}else{p[x]||(p[x]=this._calculateStatistics(this.items,t,x));M=p[x],V="var"===g?"variance":g;h.attributes[m]=M[V]}n.push({name:m,alias:m,type:"esriFieldTypeDouble"})}}if(s)for(var A in f)i.push(f[A]);else i.push(h);return{fields:n,features:i}},e.prototype._calculateStatistics=function(e,t,r){for(var i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,o=null,a=null,s=null,u=null,l=[],c=0;c<e.length;c++){var f=e[c];null==(v=t.getFieldValue(f,r))||isNaN(v)||(o+=v,i=Math.min(i,v),n=Math.max(n,v),l.push(v))}var p=l.length;if(p){a=o/p;for(var h=0,d=0,y=l;d<y.length;d++){var v=y[d];h+=Math.pow(v-a,2)}u=p>1?h/(p-1):0,s=Math.sqrt(u)}else i=null,n=null;return{avg:a,count:p,max:n,min:i,stddev:s,sum:o,variance:u}},e.prototype._calculateUniqueValues=function(e,t){for(var r={},i=0,n=this.items;i<n.length;i++){var o=n[i],a=e.getFieldValue(o,t);(null==a||"string"==typeof a&&""===a.trim())&&(a=null),null==r[a]?r[a]={count:1,data:a,items:[o]}:(r[a].count++,r[a].items.push(o))}return r},e}();t.default=d}.apply(null,i))||(e.exports=n)},eHCP:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("Rdxj")],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.fromVector=function(e,t){return{vec3:r.vec3f64.clone(e),id:t}},t.fromValues=function(e,t,i,n){return{vec3:r.vec3f64.fromValues(e,t,i),id:n}}}.apply(null,i))||(e.exports=n)},fBiT:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("1m5D"),r("0LE5"),r("Rdxj"),r("wPX3"),r("mmEe"),r("eHCP")],void 0===(n=function(e,t,r,i,n,o,a,s){function u(e,t,r){var i,a,s,u=n.vec3f64.create(),l=e[3],c=Math.ceil(Math.log(l)*Math.LOG2E/h),f=Math.pow(2,c*h+p);if(r.isGeographic){var d=f/o.earthRadius*180/Math.PI;a=Math.round(e[1]/d);var y=Math.max(-90,Math.min(90,a*d)),v=d/Math.cos((Math.abs(y)-d/2)/180*Math.PI),m=(i=Math.round(e[0]/v))*v;u[0]=m,u[1]=y}else i=Math.round(e[0]/f),a=Math.round(e[1]/f),u[0]=i*f,u[1]=a*f;var g=e[2]+t;return s=Math.round(g/f),u[2]=s*f,{center:u,id:c+"_"+i+"_"+a+"_"+s}}Object.defineProperty(t,"__esModule",{value:!0});var l=1e3,c=new Float64Array(3*l),f=n.vec3f64.create();t.computeGlobalTransformation=function(e,t,i,n){var o=u(e,t,i).center,s=r.mat4f64.create();return a.computeLinearTransformation(i,o,s,n),s},t.reprojectPoints=function(e,t,r,n,o,s,u){var p=e.data,h=e.offsetIdx,d=e.strideIdx;i.vec3.copy(f,t),f[2]+=n;var y=[0,0,0],v=p.length/d;a.vectorToVector(f,o,y,s);for(var m=0;m<v;m+=l){for(var g=Math.min(l,v-m),x=0;x<g;x++){var _=h+d*(m+x);c[3*x+0]=p[_+0]+y[0],c[3*x+1]=p[_+1]+y[1],c[3*x+2]=p[_+2]+y[2]}for(a.bufferToBuffer(c,s,0,c,u,0,g),x=0;x<g;x++){var b=c[3*x+0],I=c[3*x+1],w=c[3*x+2],T=h+d*(m+x);p[T+0]=r[0]*b+r[4]*I+r[8]*w+r[12],p[T+1]=r[1]*b+r[5]*I+r[9]*w+r[13],p[T+2]=r[2]*b+r[6]*I+r[10]*w+r[14]}}},t.createOrigin=function(e,t,r,i){var n=u(e,t,r),o=n.center,l=n.id;return a.vectorToVector(o,r,o,i),s.fromVector(o,l)};var p=1,h=5-p}.apply(null,i))||(e.exports=n)},fHyw:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r,i,n){void 0===r&&(r=0),this.TypedArrayConstructor=e,this.elementCount=16;var o=this.TypedArrayConstructor;void 0===i&&(i=16*o.BYTES_PER_ELEMENT);var a=0===t.byteLength?0:r;this.typedBuffer=null==n?new o(t,a):new o(t,a,(n-r)/o.BYTES_PER_ELEMENT),this.typedBufferStride=i/o.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return e.prototype.getMat=function(e,t){for(var r=e*this.typedBufferStride,i=0;i<16;i++)t[i]=this.typedBuffer[r+i];return t},e.prototype.setMat=function(e,t){for(var r=e*this.typedBufferStride,i=0;i<16;i++)this.typedBuffer[r+i]=t[i]},e.prototype.get=function(e,t){return this.typedBuffer[e*this.typedBufferStride+t]},e.prototype.set=function(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r},e.prototype.copyFrom=function(e,t,r){for(var i=this.typedBuffer,n=t.typedBuffer,o=e*this.typedBufferStride,a=r*t.typedBufferStride,s=0;s<16;++s)i[o+s]=n[a+s]},Object.defineProperty(e.prototype,"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0}),e.ElementCount=16,e}();t.BufferViewMat4Impl=r}.apply(null,i))||(e.exports=n)},fUL3:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("PND3"),r("QVms"),r("lRq4"),r("lAK8"),r("f3JK")],void 0===(n=function(e,t,r,i,n,o,a){function s(e,t){var r=e.bounds,i=t.bounds;return e.key.id!==t.key.id&&e.key.world===t.key.world&&r[0]<=i[0]&&r[1]<=i[1]&&r[2]>=i[2]&&r[3]>=i[3]}Object.defineProperty(t,"__esModule",{value:!0}),t.isParentOf=s,t.isChildOf=function(e,t){return s(t,e)};var u=function(){function e(e,t){this.bounds=n.create(),this.key=new a(0,0,0,0),this.objectIds=new r.default,this.key.set(t);var i=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.scale=i.scale,this.level=i.level,this.needsClear=!0}return Object.defineProperty(e.prototype,"id",{get:function(){return this.key.id},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.tileInfoView,this.id)},e.prototype.createChildTiles=function(){for(var t=this.key.getChildKeys(),r=i.acquire(),n=0;n<t.length;n++)r[n]=new e(this.tileInfoView,t[n]);return r},e.prototype.getQuantizationParameters=function(){return o.default.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})},e}();t.Tile=u,t.default=u}.apply(null,i))||(e.exports=n)},fdzS:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("gKSc")],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.quatf32=r}.apply(null,i))||(e.exports=n)},fsLf:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("ycL1"),r("Vx27")],void 0===(n=function(e,t,r,i,n,o){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.field=null,t.minValue=0,t.maxValue=255,t}var n;return r(t,e),n=t,t.prototype.clone=function(){return new n({field:this.field,minValue:this.minValue,maxValue:this.maxValue})},i([o.property({type:String,json:{write:!0}})],t.prototype,"field",void 0),i([o.property({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minValue",void 0),i([o.property({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxValue",void 0),n=i([o.subclass("esri.renderers.support.pointCloud.ColorModulation")],t)}(o.declared(n));t.ColorModulation=a,t.default=a}.apply(null,i))||(e.exports=n)},fw2w:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("0J3i"),r("ma1f"),r("qsST"),r("qMld"),r("Vt+U"),r("aYWh"),r("Z4y+"),r("nrlZ"),r("vtMp"),r("xuSL")],void 0===(n=function(e,t,r,i,n,o,a,s,u,l,c,f){function p(e){return"polygon"===e.type}function h(e){return"polygon"===e[0].type}function d(e){return"polyline"===e[0].type}function y(e){return p(e)?e.rings:e.paths}function v(e,t){return Math.ceil((e-t)/(2*t))}function m(e,t){for(var r=0,i=y(e);r<i.length;r++)for(var n=0,o=i[r];n<o.length;n++){o[n][0]+=t}return e}function g(e){for(var t=[],r=0,i=0,n=0;n<e.length;n++){for(var o=e[n],a=null,s=0;s<o.length;s++)a=o[s],t.push(a),0===s?i=r=a[0]:(r=Math.min(r,a[0]),i=Math.max(i,a[0]));a&&t.push([(r+i)/2,0])}return t}function x(e,t){if(!(e instanceof s||e instanceof a)){var r="straightLineDensify: the input geometry is neither polyline nor polygon";throw C.error(r),new i(r)}for(var n=[],o=0,u=y(e);o<u.length;o++){var l=u[o],c=[];n.push(c),c.push([l[0][0],l[0][1]]);for(var f=0;f<l.length-1;f++){var h=l[f][0],d=l[f][1],v=l[f+1][0],m=l[f+1][1],g=Math.sqrt((v-h)*(v-h)+(m-d)*(m-d)),x=(m-d)/g,_=(v-h)/g,b=g/t;if(b>1){for(var I=1;I<=b-1;I++){var w=I*t,T=_*w+h,S=x*w+d;c.push([T,S])}var E=(g+Math.floor(b-1)*t)/2,B=_*E+h,P=x*E+d;c.push([B,P])}c.push([v,m])}}return p(e)?new a({rings:n,spatialReference:e.spatialReference}):new s({paths:n,spatialReference:e.spatialReference})}function _(e,t,r){if(t){var i=x(e,1e6);e=c.webMercatorToGeographic(i,!0)}return r&&(e=m(e,r)),e}function b(e,t,r){var i;if(Array.isArray(e)){if((i=e[0])>t){var n=v(i,t);e[0]=i+n*(-2*t)}else if(i<r){n=v(i,r);e[0]=i+n*(-2*r)}}else if((i=e.x)>t){n=v(i,t);e=e.clone().offset(n*(-2*t),0)}else if(i<r){n=v(i,r);e=e.clone().offset(n*(-2*r),0)}return e}function I(e,t){for(var r=-1,i=0;i<t.cutIndexes.length;i++)!function(i){for(var n=t.cutIndexes[i],o=t.geometries[i],a=y(o),s=0;s<a.length;s++)!function(e){var t=a[e];t.some(function(r){if(r[0]<180)return!0;for(var i=0,n=0;n<t.length;n++){var a=t[n][0];i=a>i?a:i}for(var s=-360*v(i=Number(i.toFixed(9)),180),u=0;u<t.length;u++){var l=o.getPoint(e,u);o.setPoint(e,u,l.clone().offset(s,0))}return!0})}(s);if(n===r){if(h(e))for(var u=0,l=y(o);u<l.length;u++){var c=l[u];e[n]=e[n].addRing(c)}else if(d(e))for(var f=0,p=y(o);f<p.length;f++){var m=p[f];e[n]=e[n].addPath(m)}}else r=n,e[n]=o}(i);return e}function w(){return T||(T=new f({url:r.geometryServiceUrl})),T}Object.defineProperty(t,"__esModule",{value:!0});var T,C=n.getLogger("esri.geometry.support.normalizeUtils"),S={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new s({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:u.WebMercator}),minus180Line:new s({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:u.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new s({paths:[[[180,-180],[180,180]]],spatialReference:u.WebMercator}),minus180Line:new s({paths:[[[-180,-180],[-180,180]]],spatialReference:u.WebMercator})}};t.straightLineDensify=x,t.normalizeCentralMeridian=function e(t,r,i){if(!Array.isArray(t))return e([t],r);r||(r=w());for(var n,u,f,p,h,d,y,g,x=0,T=[],C=[],E=0,B=t;E<B.length;E++){var P=B[E];if(P)if(n||(n=P.spatialReference,u=l.getInfo(n),f=n.isWebMercator,p=S[d=f?102100:4326].maxX,h=S[d].minX,y=S[d].plus180Line,g=S[d].minus180Line),u)if("mesh"===P.type)C.push(P);else if("point"===P.type)C.push(b(P.clone(),p,h));else if("multipoint"===P.type){var M=P.clone();M.points=M.points.map(function(e){return b(e,p,h)}),C.push(M)}else if("extent"===P.type){var V=(A=P.clone())._normalize(!1,!1,u);C.push(V.rings?new a(V):V)}else if(P.extent){var A,D=v((A=P.extent).xmin,h)*(2*p),F=0===D?P.clone():m(P.clone(),D);A.offset(D,0),A.intersects(y)&&A.xmax!==p?(x=A.xmax>x?A.xmax:x,F=_(F,f),T.push(F),C.push("cut")):A.intersects(g)&&A.xmin!==h?(x=A.xmax*(2*p)>x?A.xmax*(2*p):x,F=_(F,f,360),T.push(F),C.push("cut")):C.push(F)}else C.push(P.clone());else C.push(P);else C.push(P)}for(var N=v(x,p),L=-90,R=N,O=new s;N>0;){var k=360*N-180;O.addPath([[k,L],[k,-1*L]]),L*=-1,N--}if(T.length>0&&R>0)return r.cut(T,O,i).then(function(e){return I(T,e)}).then(function(e){for(var n=[],o=[],a=0;a<C.length;a++){var s=C[a];if("cut"!==s)o.push(s);else{var u=e.shift(),l=t[a];"polygon"===l.type&&l.rings&&l.rings.length>1&&u.rings.length>=l.rings.length?(n.push(u),o.push("simplify")):o.push(f?c.geographicToWebMercator(u):u)}}return n.length?r.simplify(n,i).then(function(e){for(var t=[],r=0;r<o.length;r++){var i=o[r];"simplify"!==i?t.push(i):t.push(f?c.geographicToWebMercator(e.shift()):e.shift())}return t}):o});for(var j=[],z=0;z<C.length;z++){var U=C[z];if("cut"!==U)j.push(U);else{var q=T.shift();j.push(!0===f?c.geographicToWebMercator(q):q)}}return o.resolve(j)},t.getDenormalizedExtent=function(e){var t;if(!e)return null;var r=e.extent;if(!r)return null;var i=e.spatialReference&&l.getInfo(e.spatialReference);if(!i)return r;var n,o=i.valid,a=o[0],s=o[1],u=2*s,c=r.width,f=r.xmin,p=r.xmax;if(f=(t=[p,f])[0],p=t[1],"extent"===e.type||0===c||c<=s||c>u||f<a||p>s)return r;switch(e.type){case"polygon":if(!(e.rings.length>1))return r;n=g(e.rings);break;case"polyline":if(!(e.paths.length>1))return r;n=g(e.paths);break;case"multipoint":n=e.points}for(var h=r.clone(),d=0;d<n.length;d++){var y=n[d][0];y<0?(y+=s,p=Math.max(y,p)):(y-=s,f=Math.min(y,f))}return h.xmin=f,h.xmax=p,h.width<c?(h.xmin-=s,h.xmax-=s,h):r},t.normalizeMapX=function(e,t){var r=l.getInfo(t);if(r){var i=r.valid,n=i[0],o=i[1],a=o-n;if(e<n)for(;e<n;)e+=a;if(e>o)for(;e>o;)e-=a}return e}}.apply(null,i))||(e.exports=n)},gKSc:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){var e=new Float32Array(4);return e[3]=1,e},t.clone=function(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},t.fromValues=function(e,t,r,i){var n=new Float32Array(4);return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n},t.createView=function(e,t){return new Float32Array(e,t,4)}}.apply(null,i))||(e.exports=n)},"gT/q":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("MYn5")],void 0===(n=function(e,t,r){function i(e,t,i,o,a){if(!e)return!1;for(var s=r.getStride(t,i),u=e.coords,l=!1,c=0,f=0,p=e.lengths;f<p.length;f++){var h=p[f];l=n(l,u,s,c,h,o,a),c+=h*s}return l}function n(e,t,r,i,n,o,a){for(var s=e,u=i,l=i,c=i+n*r;l<c;l+=r){(u=l+r)===c&&(u=i);var f=t[l],p=t[l+1],h=t[u],d=t[u+1];(p<a&&d>=a||d<a&&p>=a)&&f+(a-p)/(d-p)*(h-f)<o&&(s=!s)}return s}Object.defineProperty(t,"__esModule",{value:!0}),t.polygonContainsPoint=function(e,t,r,n){return i(e,t,r,n.coords[0],n.coords[1])},t.polygonContainsMultipoint=function(e,t,n,o,a,s){var u=r.getStride(a,s),l=o.coords,c=o.lengths;if(!c)return!1;for(var f=0,p=0;f<c.length;f++,p+=u)if(!i(e,t,n,l[p],l[p+1]))return!1;return!0},t.polygonContainsCoords=i}.apply(null,i))||(e.exports=n)},hQPx:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("0LE5")],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,r,i,n){void 0===r&&(r=0),this.TypedArrayConstructor=e,this.elementCount=3;var o=this.TypedArrayConstructor;void 0===i&&(i=3*o.BYTES_PER_ELEMENT);var a=0===t.byteLength?0:r;this.typedBuffer=null==n?new o(t,a):new o(t,a,(n-r)/o.BYTES_PER_ELEMENT),this.typedBufferStride=i/o.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return e.prototype.getVec=function(e,t){return r.vec3.set(t,this.typedBuffer[e*this.typedBufferStride],this.typedBuffer[e*this.typedBufferStride+1],this.typedBuffer[e*this.typedBufferStride+2])},e.prototype.setVec=function(e,t){this.typedBuffer[e*this.typedBufferStride]=t[0],this.typedBuffer[e*this.typedBufferStride+1]=t[1],this.typedBuffer[e*this.typedBufferStride+2]=t[2]},e.prototype.get=function(e,t){return this.typedBuffer[e*this.typedBufferStride+t]},e.prototype.set=function(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r},e.prototype.copyFrom=function(e,t,r){var i=this.typedBuffer,n=t.typedBuffer,o=e*this.typedBufferStride,a=r*t.typedBufferStride;i[o]=n[a],i[o+1]=n[a+1],i[o+2]=n[a+2]},Object.defineProperty(e.prototype,"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0}),e.ElementCount=3,e}();t.BufferViewVec3Impl=i}.apply(null,i))||(e.exports=n)},iHt0:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){return new Float32Array(3)},t.clone=function(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.fromValues=function(e,t,r){var i=new Float32Array(3);return i[0]=e,i[1]=t,i[2]=r,i},t.createView=function(e,t){return new Float32Array(e,t,3)}}.apply(null,i))||(e.exports=n)},"jSP+":function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(t,r,i){this._op=t,"$type"===r?(i instanceof Array?this._val=i.map(function(t){return e._types.indexOf(t)}):this._val=e._types.indexOf(i),this._op+=11):(this._key=r,this._val=i)}return e.prototype.filter=function(e){switch(this._op){case 0:return this._val;case 1:return e.values[this._key]===this._val;case 2:return e.values[this._key]!==this._val;case 3:return e.values[this._key]<this._val;case 4:return e.values[this._key]>this._val;case 5:return e.values[this._key]<=this._val;case 6:return e.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(e.values[this._key]);case 8:return-1===this._val.indexOf(e.values[this._key]);case 9:for(var t=0,r=this._val;t<r.length;t++){if(r[t].filter(e))return!0}return!1;case 10:for(var i=0,n=this._val;i<n.length;i++){if(!n[i].filter(e))return!1}return!0;case 11:for(var o=0,a=this._val;o<a.length;o++){if(a[o].filter(e))return!1}return!0;case 12:return e.type===this._val;case 13:return e.type!==this._val;case 14:return e.type<this._val;case 15:return e.type>this._val;case 16:return e.type>=this._val;case 17:return e.type<=this._val;case 18:return-1!==this._val.indexOf(e.type);case 19:return-1===this._val.indexOf(e.type);case 20:return void 0!==e.values[this._key];case 21:return void 0===e.values[this._key]}},e.createFilter=function(t){if(!t)return new e(0,void 0,!0);var r=t[0];if(t.length<=1)return new e(0,void 0,"any"!==r);switch(r){case"==":return new e(1,t[1],t[2]);case"!=":return new e(2,t[1],t[2]);case">":return new e(4,t[1],t[2]);case"<":return new e(3,t[1],t[2]);case">=":return new e(6,t[1],t[2]);case"<=":return new e(5,t[1],t[2]);case"in":return new e(7,t[1],t.slice(2));case"!in":return new e(8,t[1],t.slice(2));case"any":return new e(9,void 0,t.slice(1).map(e.createFilter.bind(this)));case"all":return new e(10,void 0,t.slice(1).map(e.createFilter.bind(this)));case"none":return new e(11,void 0,t.slice(1).map(e.createFilter.bind(this)));case"has":return new e(20,t[1],void 0);case"!has":return new e(21,t[1],void 0);default:throw new Error("invalid operator: "+r)}},e._types=["Unknown","Point","LineString","Polygon"],e}()}.apply(null,i))||(e.exports=n)},jmRc:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("xoE+")],void 0===(n=function(e,t,r){function i(e,t,i,u){void 0===u&&(u=0);var l=e.byteLength/(4*t),c=new Uint32Array(e,0,l*t),f=new Uint32Array(l),p=Math.floor(1.1*l)+1;(null==s||s.length<2*p)&&(s=new Uint32Array(r.nextHighestPowerOfTwo(2*p)));for(var h=0;h<2*p;h++)s[h]=0;var d=0,y=1.96,v=0!==u?Math.ceil(4*y*y/(u*u)*u*(1-u)):l;for(h=0;h<l;h++){if(h===v){var m=1-d/h;if(m+y*Math.sqrt(m*(1-m)/h)<u)return null;v*=2}for(var g=h*t,x=a(c,g,t),_=x%p,b=d;0!==s[2*_+1];){if(s[2*_]===x){var I=s[2*_+1]-1;if(n(c,g,I*t,t)){b=f[I];break}}++_>=p&&(_-=p)}b===d&&(s[2*_]=x,s[2*_+1]=h+1,d++),f[h]=b}if(0!==u&&1-d/l<u)return null;var w=new Uint32Array(t*d);d=0;for(h=0;h<l;h++)f[h]===d&&(o(c,h*t,w,d*t,t),d++);if(i){var T=new Uint32Array(i.length);for(h=0;h<T.length;h++)T[h]=f[i[h]];f=T}return{buffer:w.buffer,indices:f,uniqueCount:d}}function n(e,t,r,i){for(var n=0;n<i;n++)if(e[t+n]!==e[r+n])return!1;return!0}function o(e,t,r,i,n){for(var o=0;o<n;o++)r[i+o]=e[t+o]}function a(e,t,r){for(var i=0,n=0;n<r;n++)i=(i=e[t+n]+i|0)+(i<<11)+(i>>>2)|0;return i>>>0}Object.defineProperty(t,"__esModule",{value:!0}),t.deduplicate=i;var s=null;t.default=i}.apply(null,i))||(e.exports=n)},kDn6:function(e,t,r){var i,n;i=[r("ajsq"),r("G/ag"),r("Ksvq"),r("ZcSO")],void 0===(n=function(e,t,r,i){return e("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(e){var t=this._attrPairNames;return t[e]?t[e]:t[e]={s:"_"+e+"Setter",g:"_"+e+"Getter"}},postscript:function(e){e&&this.set(e)},_get:function(e,t){return"function"==typeof this[t.g]?this[t.g]():this[e]},get:function(e){return this._get(e,this._getAttrNames(e))},set:function(e,t){if("object"==typeof e){for(var r in e)e.hasOwnProperty(r)&&"_watchCallbacks"!=r&&this.set(r,e[r]);return this}var n,o=this._getAttrNames(e),a=this._get(e,o),s=this[o.s];if("function"==typeof s?n=s.apply(this,Array.prototype.slice.call(arguments,1)):this[e]=t,this._watchCallbacks){var u=this;i(n,function(){u._watchCallbacks(e,a,t)})}return this},_changeAttrValue:function(e,t){var r=this.get(e);return this[e]=t,this._watchCallbacks&&this._watchCallbacks(e,r,t),this},watch:function(e,t){var i=this._watchCallbacks;if(!i){var n=this;i=this._watchCallbacks=function(e,t,r,o){var a=function(i){if(i)for(var o=0,a=(i=i.slice()).length;o<a;o++)i[o].call(n,e,t,r)};a(i["_"+e]),o||a(i["*"])}}t||"function"!=typeof e?e="_"+e:(t=e,e="*");var o=i[e];"object"!=typeof o&&(o=i[e]=[]),o.push(t);var a={};return a.unwatch=a.remove=function(){var e=r.indexOf(o,t);e>-1&&o.splice(e,1)},a}})}.apply(null,i))||(e.exports=n)},kEzy:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("xhoE"),r("qKT0"),r("BEeJ"),r("U+RI")],void 0===(n=function(e,t,r,i,n,o){Object.defineProperty(t,"__esModule",{value:!0});var a=new Float32Array(1),s=new Uint32Array(a.buffer),u=function(e){function t(t){var r=e.call(this,t?20:12)||this;return r._isDataDriven=t,r}return r(t,e),t.prototype.isDataDriven=function(){return this._isDataDriven},t.prototype.add=function(e,t,r,i,n,u,l,c){var f=this.array,p=o.i1616to32(e,t);if(f.push(p),p=o.i8888to32(Math.round(31*r),Math.round(31*i),Math.round(31*n),Math.round(31*u)),f.push(p),p=o.i1616to32(l,0),f.push(p),this._isDataDriven){if(!c)throw new Error("Expecting data driven values.");var h=c.color,d=h[3]*c.opacity*255;f.push(o.i8888to32(h[0]*d,h[1]*d,h[2]*d,d)),a[0]=c.size,f.push(s[0])}},t}(o);t.LineVertexBuffer=u;var l=function(e){function t(t){var r=e.call(this,t?8:4)||this;return r._isDataDriven=t,r}return r(t,e),t.prototype.isDataDriven=function(){return this._isDataDriven},t.prototype.add=function(e,t,r){var i=this.array;if(i.push(o.i1616to32(e,t)),this._isDataDriven){if(!r)throw new Error("Expecting data driven values.");var n=r.color,a=n[3]*r.opacity*255;i.push(o.i8888to32(n[0]*a,n[1]*a,n[2]*a,a))}},t}(o);t.FillVertexBuffer=l;var c=function(e){function t(t){var r=e.call(this,t?12:8)||this;return r._isDataDriven=t,r}return r(t,e),t.prototype.isDataDriven=function(){return this._isDataDriven},t.prototype.add=function(e,t,r,i,n,a,s){var u=this.array,l=this.index,c=o.i1616to32(e,t);if(u.push(c),c=o.i8888to32(Math.round(15*r),Math.round(15*i),n,a),u.push(c),this._isDataDriven){if(!s)throw new Error("Expecting data driven values.");var f=s.color,p=f[3]*s.opacity*255;u.push(o.i8888to32(f[0]*p,f[1]*p,f[2]*p,p))}return l},t}(o);t.OutlineVertexBuffer=c;var f=function(e){function t(t){var r=e.call(this,t?24:16)||this;return r._isDataDriven=t,r}return r(t,e),t.prototype.isDataDriven=function(){return this._isDataDriven},t.prototype.add=function(e,t,r,i,u,l,c,f,p,h,d){var y=this.array,v=o.i1616to32(e,t);if(y.push(v),v=o.i1616to32(Math.round(8*r),Math.round(8*i)),y.push(v),v=o.i8888to32(u/4,l/4,0,0),y.push(v),v=o.i8888to32(Math.ceil(10*h),n.radToByte(c),10*f,Math.min(10*p,255)),y.push(v),this._isDataDriven){if(!d)throw new Error("Expecting data driven values.");var m=d.color,g=m[3]*d.opacity*255;y.push(o.i8888to32(m[0]*g,m[1]*g,m[2]*g,g)),a[0]=d.size,y.push(s[0])}},t}(o);t.SymbolVertexBuffer=f;var p=function(e){function t(){return e.call(this,16)||this}return r(t,e),t.prototype.add=function(e,t,r,i,n,a,s,u,l,c,f){var p=this.array,h=o.i1616to32(2*e+r,2*t+i);p.push(h);var d=a[3]*s*255;h=o.i8888to32(a[0]*d,a[1]*d,a[2]*d,d),p.push(h);var y=c[3]*f*255;h=o.i8888to32(c[0]*y,c[1]*y,c[2]*y,y),p.push(h),h=o.i8888to32(Math.min(32*u,255),Math.min(4*l,255),Math.min(n,255),0),p.push(h)},t}(o);t.CircleVertexBuffer=p}.apply(null,i))||(e.exports=n)},kfwU:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("KY0m"),r("rusB"),r("0LE5"),r("Rdxj"),r("AzkI")],void 0===(n=function(e,t,r,i,n,o,a){function s(e,t){return e.cosAngle<t}function u(e,t){return e.cosAngle>t}function l(e,t){var r=a.acos(e.cosAngle),i=h.fwd,o=h.ortho;return a.directionFromTo(i,e.position1,e.position0),r*(n.vec3.dot(n.vec3.cross(o,e.faceNormal0,e.faceNormal1),i)>0?-1:1)>t}function c(e){for(var t=e.faces.length/3,r=e.faces,i=e.neighbors,n=0,o=0;o<t;o++){var a=i[3*o+0],s=i[3*o+1],u=i[3*o+2],l=r[3*o+0],c=r[3*o+1],f=r[3*o+2];n+=a===p||l<c?1:0,n+=s===p||c<f?1:0,n+=u===p||f<l?1:0}var h=new Int32Array(4*n),d=0;for(o=0;o<t;o++){a=i[3*o+0],s=i[3*o+1],u=i[3*o+2],l=r[3*o+0],c=r[3*o+1],f=r[3*o+2];(a===p||l<c)&&(h[d++]=l,h[d++]=c,h[d++]=o,h[d++]=a),(s===p||c<f)&&(h[d++]=c,h[d++]=f,h[d++]=o,h[d++]=s),(u===p||f<l)&&(h[d++]=f,h[d++]=l,h[d++]=o,h[d++]=u)}return h}function f(e){for(var t=e.faces.length/3,r=e.vertices.position,i=e.faces,o=d.v0,a=d.v1,s=d.v2,u=new Float32Array(3*t),l=0;l<t;l++){var c=i[3*l+0],f=i[3*l+1],p=i[3*l+2];r.getVec(c,o),r.getVec(f,a),r.getVec(p,s),n.vec3.subtract(a,a,o),n.vec3.subtract(s,s,o),n.vec3.cross(o,a,s),n.vec3.normalize(o,o),u[3*l+0]=o[0],u[3*l+1]=o[1],u[3*l+2]=o[2]}return u}Object.defineProperty(t,"__esModule",{value:!0});var p=-1;t.extractEdges=function(e,t,o,d){void 0===d&&(d=y);var v=e.vertices.position,m=e.vertices.componentIndex,g=a.deg2rad(d.anglePlanar),x=a.deg2rad(d.angleSignificantEdge),_=Math.cos(x),b=Math.cos(g),I=h.edge,w=I.position0,T=I.position1,C=I.faceNormal0,S=I.faceNormal1,E=f(e),B=c(e),P=B.length/4,M=t.allocate(P),V=0,A=P,D=o.allocate(A),F=0,N=0,L=0,R=r.range(0,P),O=new Float32Array(P);i.forEach(O,function(e,t,r){v.getVec(B[4*t+0],w),v.getVec(B[4*t+1],T),r[t]=n.vec3.distance(w,T)}),R.sort(function(e,t){return O[t]-O[e]});for(var k=new Array,j=new Array,z=0;z<P;z++){var U=R[z],q=O[U],G=B[4*U+0],Y=B[4*U+1],Q=B[4*U+2],Z=B[4*U+3],W=Z===p;if(v.getVec(G,w),v.getVec(Y,T),W)n.vec3.set(C,E[3*Q+0],E[3*Q+1],E[3*Q+2]),n.vec3.copy(S,C),I.componentIndex=m.get(G),I.cosAngle=n.vec3.dot(C,S);else{if(n.vec3.set(C,E[3*Q+0],E[3*Q+1],E[3*Q+2]),n.vec3.set(S,E[3*Z+0],E[3*Z+1],E[3*Z+2]),I.componentIndex=m.get(G),I.cosAngle=n.vec3.dot(C,S),u(I,b))continue;I.cosAngle<-.9999&&n.vec3.copy(S,C)}N+=q,L++,W||s(I,_)?(t.write(M,V++,I),k.push(q)):l(I,g)&&(o.write(D,F++,I),j.push(q))}var J=new Float32Array(k.reverse()),X=new Float32Array(j.reverse());return{regular:{instancesData:t.trim(M,V),lodInfo:{lengths:J}},silhouette:{instancesData:o.trim(D,F),lodInfo:{lengths:X}},averageEdgeLength:N/L}};var h={edge:{position0:o.vec3f64.create(),position1:o.vec3f64.create(),faceNormal0:o.vec3f64.create(),faceNormal1:o.vec3f64.create(),componentIndex:0,cosAngle:0},ortho:o.vec3f64.create(),fwd:o.vec3f64.create()},d={v0:o.vec3f64.create(),v1:o.vec3f64.create(),v2:o.vec3f64.create()},y={anglePlanar:4,angleSignificantEdge:35}}.apply(null,i))||(e.exports=n)},l8NS:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("NsUs")],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateFunction=function(e,t){var r=i[e.toLowerCase()];if(null==r)throw new Error("Function Not Recognised");if(t.length<r.minParams||t.length>r.maxParams)throw new Error("Invalid Parameter count for call to "+e.toUpperCase());return r.evaluate(t)},t.isStandardized=function(e,t){var r=i[e.toLowerCase()];return null!=r&&t>=r.minParams&&t<=r.maxParams};var i={extract:{minParams:2,maxParams:2,evaluate:function(e){var t=e[0],r=e[1];if(null==r)return null;if(r instanceof Date)switch(t.toUpperCase()){case"SECOND":return r.getSeconds();case"MINUTE":return r.getMinutes();case"HOUR":return r.getHours();case"DAY":return r.getDate();case"MONTH":return r.getMonth()+1;case"YEAR":return r.getFullYear()}throw new Error("Invalid Parameter for call to EXTRACT")}},substring:{minParams:2,maxParams:3,evaluate:function(e){if(2===e.length){var t=e[0],r=e[1];return null==t||null==r?null:t.toString().substring(r-1)}if(3===e.length){t=e[0],r=e[1];var i=e[2];return null==t||null==r||null==i?null:i<=0?"":t.toString().substring(r-1,r+i-1)}}},position:{minParams:2,maxParams:2,evaluate:function(e){var t=e[0],r=e[1];return null==t||null==r?null:r.indexOf(t)+1}},trim:{minParams:2,maxParams:3,evaluate:function(e){var t=3===e.length,i=t?e[1]:" ",n=t?e[2]:e[1];if(null==i||null==n)return null;var o="("+r.escapeString(i)+")";switch(e[0]){case"BOTH":return n.replace(new RegExp("^"+o+"*|"+o+"*$","g"),"");case"LEADING":return n.replace(new RegExp("^"+o+"*","g"),"");case"TRAILING":return n.replace(new RegExp(o+"*$","g"),"")}throw new Error("Invalid Parameter for call to TRIM")}},abs:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.abs(e[0])}},ceiling:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.ceil(e[0])}},floor:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.floor(e[0])}},log:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.log(e[0])}},log10:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.log(e[0])*Math.LOG10E}},sin:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.sin(e[0])}},cos:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.cos(e[0])}},tan:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.tan(e[0])}},asin:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.asin(e[0])}},acos:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.acos(e[0])}},atan:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.atan(e[0])}},sign:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:e[0]>0?1:e[1]<0?-1:0}},power:{minParams:2,maxParams:2,evaluate:function(e){return null==e[0]||null==e[1]?null:Math.pow(e[0],e[1])}},mod:{minParams:2,maxParams:2,evaluate:function(e){return null==e[0]||null==e[1]?null:e[0]%e[1]}},round:{minParams:1,maxParams:2,evaluate:function(e){var t=e[0],r=2===e.length?Math.pow(10,e[1]):1;return null==t?null:Math.round(t*r)/r}},truncate:{minParams:1,maxParams:2,evaluate:function(e){return null==e[0]?null:1===e.length?parseInt(e[0].toFixed(0),10):parseFloat(e[0].toFixed(e[1]))}},char_length:{minParams:1,maxParams:1,evaluate:function(e){return"string"==typeof e[0]||e[0]instanceof String?e[0].length:0}},concat:{minParams:1,maxParams:1/0,evaluate:function(e){for(var t="",r=0;r<e.length;r++){if(null==e[r])return null;t+=e[r].toString()}return t}},lower:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:e[0].toString().toLowerCase()}},upper:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:e[0].toString().toUpperCase()}}}}.apply(null,i))||(e.exports=n)},lbhO:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("Vx27"),r("mu/x")],void 0===(n=function(e,t,r,i,n,o){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="splat",t.scaleFactor=1,t}var o;return r(t,e),o=t,t.prototype.clone=function(){return new o({scaleFactor:this.scaleFactor})},i([n.enumeration.serializable()({pointCloudSplatAlgorithm:"splat"})],t.prototype,"type",void 0),i([n.property({type:Number,value:1,nonNullable:!0,json:{write:!0}})],t.prototype,"scaleFactor",void 0),o=i([n.subclass("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],t)}(n.declared(o.default));t.PointSizeSplatAlgorithm=a,t.default=a}.apply(null,i))||(e.exports=n)},mCA8:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){function r(e,t,r,i,a,u,l,c,f,p,h){return n(e,i,a),I(i,a)<C?1:(v(l,i,a),_(l,l),o(t,i,l,u)<C?2:(v(c,a,u),_(c,c),v(f,u,i),_(f,f),x(r,c,l),_(r,r),s(t,r,l,c,f,p),0))}function i(e,t,r,i,n,o,u,l,c,f){a(e,t,r,i,n,B,P),void 0!==B[0]&&(v(M,B,r),_(M,M),v(V,B,i),_(V,V),v(A,B,n),_(A,A),x(D,V,o),_(D,D),x(F,A,u),_(F,F),x(N,M,l),_(N,N),s(e,D,o,V,M,c),s(e,F,u,A,V,c),s(e,N,l,M,A,c)),void 0!==P[0]&&(v(M,P,r),_(M,M),v(V,P,i),_(V,V),v(A,P,n),_(A,A),x(D,V,o),_(D,D),x(F,A,u),_(F,F),x(N,M,l),_(N,N),s(e,D,o,V,M,c),s(e,F,u,A,V,c),s(e,N,l,M,A,c))}function n(e,t,r){for(var i=I(e.maxVert[0],e.minVert[0]),n=0,o=1;o<7;++o){var a=I(e.maxVert[o],e.minVert[o]);a>i&&(i=a,n=o)}g(t,e.minVert[n]),g(r,e.maxVert[n])}function o(e,t,r,i){for(var n=e.data,o=e.offsetIdx,a=e.strideIdx,s=Number.NEGATIVE_INFINITY,u=0,l=o;l<n.length;l+=a){L[0]=n[l]-t[0],L[1]=n[l+1]-t[1],L[2]=n[l+2]-t[2];var c=r[0]*L[0]+r[1]*L[1]+r[2]*L[2],f=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],p=L[0]*L[0]+L[1]*L[1]+L[2]*L[2]-c*c/f;p>s&&(s=p,u=l)}return g(i,n,u),s}function a(e,t,r,i,n,o,a){l(e,t,R,a,o);var s=w(r,t);R[1]-C<=s&&(o[0]=void 0),R[0]+C>=s&&(a[0]=void 0)}function s(e,t,r,i,n,o){if(!(b(t)<C)){x(O,r,t),x(k,i,t),x(j,n,t),u(e,t,R),U[1]=R[0],z[1]=R[1],q[1]=z[1]-U[1];for(var a=[r,i,n],s=[O,k,j],l=0;l<3;++l){u(e,a[l],R),U[0]=R[0],z[0]=R[1],u(e,s[l],R),U[2]=R[0],z[2]=R[1],q[0]=z[0]-U[0],q[2]=z[2]-U[2];var c=d(q);c<o.quality&&(g(o.b0,a[l]),g(o.b1,t),g(o.b2,s[l]),o.quality=c)}}}function u(e,t,r){var i=e.data,n=e.offsetIdx,o=e.strideIdx;r[0]=Number.POSITIVE_INFINITY,r[1]=Number.NEGATIVE_INFINITY;for(var a=n;a<i.length;a+=o){var s=i[a]*t[0]+i[a+1]*t[1]+i[a+2]*t[2];r[0]=Math.min(r[0],s),r[1]=Math.max(r[1],s)}}function l(e,t,r,i,n){var o=e.data,a=e.offsetIdx,s=e.strideIdx;g(i,o,a),g(n,i),r[0]=w(G,t),r[1]=r[0];for(var u=a+s;u<o.length;u+=s){var l=o[u]*t[0]+o[u+1]*t[1]+o[u+2]*t[2];l<r[0]&&(r[0]=l,g(i,o,u)),l>r[1]&&(r[1]=l,g(n,o,u))}}function c(e,t,r){g(r.center,e),m(r.halfSize,t,.5),r.quaternion[0]=0,r.quaternion[1]=0,r.quaternion[2]=0,r.quaternion[3]=1}function f(e,t,r){g(Y,t),Math.abs(t[0])>Math.abs(t[1])&&Math.abs(t[0])>Math.abs(t[2])?Y[0]=0:Math.abs(t[1])>Math.abs(t[2])?Y[1]=0:Y[2]=0,b(Y)<C&&(Y[0]=Y[1]=Y[2]=1),x(Q,t,Y),_(Q,Q),x(Z,t,Q),_(Z,Z),p(e,t,Q,Z,W,J),v(X,J,W),h(t,Q,Z,W,J,X,r)}function p(e,t,r,i,n,o){u(e,t,R),n[0]=R[0],o[0]=R[1],u(e,r,R),n[1]=R[0],o[1]=R[1],u(e,i,R),n[2]=R[0],o[2]=R[1]}function h(e,t,r,i,n,o,a){K[0]=e[0],K[1]=e[1],K[2]=e[2],K[3]=t[0],K[4]=t[1],K[5]=t[2],K[6]=r[0],K[7]=r[1],K[8]=r[2],T(a.quaternion,K),y($,i,n),m($,$,.5),m(a.center,e,$[0]),m(H,t,$[1]),y(a.center,a.center,H),m(H,r,$[2]),y(a.center,a.center,H),m(a.halfSize,o,.5)}function d(e){return e[0]*e[1]+e[0]*e[2]+e[1]*e[2]}function y(e,t,r){e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2]}function v(e,t,r){e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2]}function m(e,t,r){e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r}function g(e,t,r){void 0===r&&(r=0),e[0]=t[r+0],e[1]=t[r+1],e[2]=t[r+2]}function x(e,t,r){var i=t[0],n=t[1],o=t[2],a=r[0],s=r[1],u=r[2];e[0]=n*u-o*s,e[1]=o*a-i*u,e[2]=i*s-n*a}function _(e,t){var r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(r>0){var i=1/Math.sqrt(r);e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i}}function b(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}function I(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return r*r+i*i+n*n}function w(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function T(e,t){var r=t[0]+t[4]+t[8];if(r>0){var i=Math.sqrt(r+1);e[3]=.5*i,i=.5/i,e[0]=(t[5]-t[7])*i,e[1]=(t[6]-t[2])*i,e[2]=(t[1]-t[3])*i}else{var n=0;t[4]>t[0]&&(n=1),t[8]>t[3*n+n]&&(n=2);var o=(n+1)%3,a=(n+2)%3;i=Math.sqrt(t[3*n+n]-t[3*o+o]-t[3*a+a]+1);e[n]=.5*i,i=.5/i,e[3]=(t[3*o+a]-t[3*a+o])*i,e[o]=(t[3*o+n]+t[3*n+o])*i,e[a]=(t[3*a+n]+t[3*n+a])*i}}Object.defineProperty(t,"__esModule",{value:!0});var C=1e-6,S=[0,0,0],E=[0,0,0];t.computeOBB=function(e,t){var n=e.data,o=e.strideIdx,a=n.length/o;if(!(a<=0)){var s=new te(e);y(S,s.minProj,s.maxProj),m(S,S,.5),v(E,s.maxProj,s.minProj);var u=d(E),l=new re;l.quality=u,a<14&&(e={data:new Float64Array(s.buffer,112,42),size:3,offsetIdx:0,strideIdx:3});var g=[0,0,0],x=[0,0,0],_=[0,0,0],b=[0,0,0],I=[0,0,0],w=[0,0,0],T=[0,0,0];switch(r(s,e,T,g,x,_,b,I,w,l)){case 1:return void c(S,E,t);case 2:return void f(e,b,t)}i(e,T,g,x,_,b,I,w,l),p(e,l.b0,l.b1,l.b2,W,J);var C=[0,0,0];v(C,J,W),l.quality=d(C),l.quality<u?h(l.b0,l.b1,l.b2,W,J,C,t):c(S,E,t)}};var B=[0,0,0],P=[0,0,0],M=[0,0,0],V=[0,0,0],A=[0,0,0],D=[0,0,0],F=[0,0,0],N=[0,0,0],L=[0,0,0],R=[0,0],O=[0,0,0],k=[0,0,0],j=[0,0,0],z=[0,0,0],U=[0,0,0],q=[0,0,0],G=[0,0,0],Y=[0,0,0],Q=[0,0,0],Z=[0,0,0],W=[0,0,0],J=[0,0,0],X=[0,0,0],H=[0,0,0],K=[1,0,0,0,1,0,0,0,1],$=[0,0,0],ee=7,te=function(e){this.minVert=new Array(ee),this.maxVert=new Array(ee);var t=64*ee;this.buffer=new ArrayBuffer(t);var r=0;this.minProj=new Float64Array(this.buffer,r,ee),r+=8*ee,this.maxProj=new Float64Array(this.buffer,r,ee),r+=8*ee;for(var i=0;i<ee;++i)this.minVert[i]=new Float64Array(this.buffer,r,3),r+=24;for(i=0;i<ee;++i)this.maxVert[i]=new Float64Array(this.buffer,r,3),r+=24;for(i=0;i<ee;++i)this.minProj[i]=Number.POSITIVE_INFINITY,this.maxProj[i]=Number.NEGATIVE_INFINITY;var n=new Array(ee),o=new Array(ee),a=e.data,s=e.offsetIdx,u=e.strideIdx;for(i=s;i<a.length;i+=u){var l=a[i];l<this.minProj[0]&&(this.minProj[0]=l,n[0]=i),l>this.maxProj[0]&&(this.maxProj[0]=l,o[0]=i),(l=a[i+1])<this.minProj[1]&&(this.minProj[1]=l,n[1]=i),l>this.maxProj[1]&&(this.maxProj[1]=l,o[1]=i),(l=a[i+2])<this.minProj[2]&&(this.minProj[2]=l,n[2]=i),l>this.maxProj[2]&&(this.maxProj[2]=l,o[2]=i),(l=a[i]+a[i+1]+a[i+2])<this.minProj[3]&&(this.minProj[3]=l,n[3]=i),l>this.maxProj[3]&&(this.maxProj[3]=l,o[3]=i),(l=a[i]+a[i+1]-a[i+2])<this.minProj[4]&&(this.minProj[4]=l,n[4]=i),l>this.maxProj[4]&&(this.maxProj[4]=l,o[4]=i),(l=a[i]-a[i+1]+a[i+2])<this.minProj[5]&&(this.minProj[5]=l,n[5]=i),l>this.maxProj[5]&&(this.maxProj[5]=l,o[5]=i),(l=a[i]-a[i+1]-a[i+2])<this.minProj[6]&&(this.minProj[6]=l,n[6]=i),l>this.maxProj[6]&&(this.maxProj[6]=l,o[6]=i)}for(i=0;i<ee;++i){var c=n[i];g(this.minVert[i],a,c),c=o[i],g(this.maxVert[i],a,c)}},re=function(){this.b0=[1,0,0],this.b1=[0,1,0],this.b2=[0,0,1],this.quality=0}}.apply(null,i))||(e.exports=n)},mkxQ:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("9opi"),r("qKT0"),r("rg9i"),r("Vx27"),r("YT9w"),r("sHoj"),r("Izrp")],void 0===(n=function(e,t,r,i,n,o,a,s,u,l){return function(e){function t(t){var r=e.call(this)||this;return r.type="point-cloud-unique-value",r.field=null,r.fieldTransformType=null,r.colorUniqueValueInfos=null,r.legendOptions=null,r}var c;return i(t,e),c=t,t.prototype.clone=function(){return new c(r({},this.cloneProperties(),{field:o.clone(this.field),fieldTransformType:o.clone(this.fieldTransformType),colorUniqueValueInfos:o.clone(this.colorUniqueValueInfos),legendOptions:o.clone(this.legendOptions)}))},n([a.enumeration.serializable()({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],t.prototype,"type",void 0),n([a.property({json:{write:!0},type:String})],t.prototype,"field",void 0),n([a.property({type:s.fieldTransformTypeKebabDict.apiValues,json:{type:s.fieldTransformTypeKebabDict.jsonValues,read:s.fieldTransformTypeKebabDict.read,write:s.fieldTransformTypeKebabDict.write}})],t.prototype,"fieldTransformType",void 0),n([a.property({type:[l.default],json:{write:!0}})],t.prototype,"colorUniqueValueInfos",void 0),n([a.property({type:u.default,json:{write:!0}})],t.prototype,"legendOptions",void 0),c=n([a.subclass("esri.renderers.PointCloudUniqueValueRenderer")],t)}(a.declared(s))}.apply(null,i))||(e.exports=n)},"mu/x":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("ycL1"),r("0+sO"),r("Vx27")],void 0===(n=function(e,t,r,i,n,o,a){Object.defineProperty(t,"__esModule",{value:!0}),t.typeKebabDictionary=new o.default({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});var s=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r(n,e),i([a.property({type:t.typeKebabDictionary.apiValues,readOnly:!0,nonNullable:!0,json:{type:t.typeKebabDictionary.jsonValues,read:!1,write:t.typeKebabDictionary.write}})],n.prototype,"type",void 0),i([a.subclass("esri.renderers.support.pointCloud.PointSizeAlgorithm")],n)}(a.declared(n));t.PointSizeAlgorithm=s,t.default=s}.apply(null,i))||(e.exports=n)},oigr:function(e,t,r){var i,n;i=[r("G/ag"),r("ajsq")],void 0===(n=function(e,t){var r=/^\s*"([\S\s]*)"\s*$/,i=/""/g,n=/"/g;function o(e,t){var r,i={},n=e.length;for(r=0;r<n;r++)i[e[r]]=t[r];return i}return t(null,{fieldNames:null,delimiter:",",newline:"\r\n",trim:!1,parse:function(t){var n,a,s,u,l,c,f,p,h=[],d=t.split(this.newline),y=this.fieldNames,v=0,m=[],g="",x="";e:for(c=0,s=d.length;c<s;c++)if(e.trim(d[c])){for(f=0,u=(n=d[c].split(this.delimiter)).length;f<u;f++){for(p=-1,g+=x+(a=n[f]),x="";(p=a.indexOf('"',p+1))>=0;)v++;if(v%2==0){if(v>0){if(!(l=r.exec(g))){m=[],g="",v=0;continue e}m.push(l[1].replace(i,'"'))}else m.push(this.trim||!y?e.trim(g):g);g="",v=0}else x=this.delimiter}0===v?(y?h.push(o(y,m)):y=this.fieldNames=m,m=[]):x=this.newline}return h},toCsv:function(e){return this.stringify(this.data,e)},stringify:function(e,t){var r,i,o,a=(t=t||{}).alwaysQuote,s=this.fieldNames,u=this.delimiter,l=this.newline,c="";for(r=-1;r<e.length;r++)for(r>-1&&(c+=l),i=0;i<s.length;i++)null==(o=r<0?s[i]:e[r][s[i]])&&(o=""),"string"!=typeof o&&(o=o.toString()),c+=(i>0?u:"")+(a||o.indexOf('"')>=0||o.indexOf(u)>=0?'"'+o.replace(n,'""')+'"':o);return t.trailingNewline&&(c+=l),c}})}.apply(null,i))||(e.exports=n)},pIuP:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r,i,n){void 0===r&&(r=0),this.TypedArrayConstructor=e,this.elementCount=9;var o=this.TypedArrayConstructor;void 0===i&&(i=9*o.BYTES_PER_ELEMENT);var a=0===t.byteLength?0:r;this.typedBuffer=null==n?new o(t,a):new o(t,a,(n-r)/o.BYTES_PER_ELEMENT),this.typedBufferStride=i/o.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return e.prototype.getMat=function(e,t){for(var r=e*this.typedBufferStride,i=0;i<9;i++)t[i]=this.typedBuffer[r+i];return t},e.prototype.setMat=function(e,t){for(var r=e*this.typedBufferStride,i=0;i<9;i++)this.typedBuffer[r+i]=t[i]},e.prototype.get=function(e,t){return this.typedBuffer[e*this.typedBufferStride+t]},e.prototype.set=function(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r},e.prototype.copyFrom=function(e,t,r){for(var i=this.typedBuffer,n=t.typedBuffer,o=e*this.typedBufferStride,a=r*t.typedBufferStride,s=0;s<9;++s)i[o+s]=n[a+s]},Object.defineProperty(e.prototype,"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0}),e.ElementCount=9,e}();t.BufferViewMat3Impl=r}.apply(null,i))||(e.exports=n)},par7:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("HZ3d"),r("Q2wQ"),r("Gtr7"),r("WYKK"),r("qMld"),r("Vx27"),r("pMLx"),r("3568"),r("u+Ml"),r("+G7i"),r("R3Fd"),r("6kSU"),r("M3W5")],void 0===(n=function(e,t,r,i,n,o,a,s,u,l,c,f,p,h,d,y,v){Object.defineProperty(t,"__esModule",{value:!0});var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.controller=null,t.processor=null,t.remoteClient=null,t.serviceAndViewInfo=null,t.tileStore=null,t.viewState=null,t}return r(t,e),t.prototype.initialize=function(){var e=this;this.watch("updating",function(t){e.remoteClient.invoke("setUpdating",t)})},t.prototype.destroy=function(){this.controller&&this.controller.destroy(),this.processor&&this.processor.destroy()},Object.defineProperty(t.prototype,"updating",{get:function(){var e=this.controller,t=this.processor;return!e||!t||e.updating||t.updating||!1},enumerable:!0,configurable:!0}),t.prototype.startup=function(e){var t=new v(c.fromJSON(e.tileInfo));this.serviceAndViewInfo=e,this.tileStore=new y.default(t)},t.prototype.configure=function(e){return s.safeCast(this._configure(e))},t.prototype.setViewState=function(e){var t=p.fromJSON(e);this._set("viewState",t),this.tileStore.setViewState(t),this.controller&&this.controller.setViewState(t)},t.prototype._configure=function(e){return n(this,void 0,void 0,function(){var t,r,i;return o(this,function(n){switch(n.label){case 0:return[4,u.all([s.safeCast(this._handleControllerConfig(e.controller)),s.safeCast(this._handleProcessorConfig(e.processor))])];case 1:return t=n.sent(),r=t[0],i=t[1],(r||i)&&(this.controller.processor=this.processor),[2]}})})},t.prototype._handleControllerConfig=function(e){return n(this,void 0,void 0,function(){return o(this,function(t){return e?[2,this._createController(e)]:[2,null]})})},t.prototype._handleProcessorConfig=function(e){return n(this,void 0,void 0,function(){var t;return o(this,function(r){return e?(t=this._createProcessor(e),[2,"symbol"===e.type&&e.hasGeometryExpr?f.enableGeometryOperations().then(function(){return t}):t]):[2,null]})})},t.prototype._createController=function(e){return n(this,void 0,void 0,function(){var t,r,i,n,a,s;return o(this,function(o){switch(o.label){case 0:return r=(t=this).remoteClient,i=t.tileStore,n=t.serviceAndViewInfo,a={remoteClient:r,tileStore:i,serviceAndViewInfo:n},[4,h.createController(e,a)];case 1:return s=o.sent(),this.controller&&this.controller.destroy(),s.setViewState(this.viewState),this.controller=s,[2,s]}})})},t.prototype._createProcessor=function(e){return n(this,void 0,void 0,function(){var t,r,i,n,a,s;return o(this,function(o){switch(o.label){case 0:return r=(t=this).remoteClient,i=t.tileStore,n=t.serviceAndViewInfo,a={remoteClient:r,tileStore:i,serviceAndViewInfo:n},[4,d.createProcessor(e.type,a)];case 1:return s=o.sent(),this.processor&&this.processor.destroy(),s.configuration=e,this.processor=s,[2,s]}})})},i([l.property()],t.prototype,"controller",void 0),i([l.property()],t.prototype,"processor",void 0),i([l.property({dependsOn:["controller.updating","processor.updating"]})],t.prototype,"updating",null),i([l.property()],t.prototype,"viewState",void 0),i([l.subclass()],t)}(l.declared(a));t.default=m}.apply(null,i))||(e.exports=n)},qSbo:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("O0KB"),r("qasq"),r("mkxQ"),r("W2ph")],void 0===(n=function(e,t,r,i,n,o){function a(e){for(var t=0,r=0,i=e||[];r<i.length;r++)t|=1<<i[r];return t}function s(e,t){for(var r=0,i=e;r<i.length;r++){var n=i[r];if(n.name===t&&null!=n.attributeValues&&"UInt8"===n.attributeValues.valueType&&3===n.attributeValues.valuesPerElement)return{storageInfo:n,useElevation:!1}}return null}function u(e,t){for(var r=0,i=e;r<i.length;r++){var n=i[r];if(n.name===t){var o="embedded-elevation"===n.encoding;return{storageInfo:o?null:n,useElevation:o}}}return"elevation"===t.toLowerCase()?{storageInfo:null,useElevation:!0}:null}function l(e,t,r,i){if(e&&e.useElevation){for(var n=new Float64Array(i),a=0;a<i;a++)n[a]=r[3*a+2];return n}return e&&t?o.readBinaryAttribute(e.storageInfo,t,i):null}function c(e){return null==e||"none"===e?null:"low-four-bit"===e?function(e){return 15&e}:"high-four-bit"===e?function(e){return(240&e)>>4}:"absolute-value"===e?function(e){return Math.abs(e)}:"modulo-ten"===e?function(e){return e%10}:null}Object.defineProperty(t,"__esModule",{value:!0}),t.getRendererInfo=function(e){var t=e.renderer,r=t&&t.type,i=t&&e.renderer.toJSON()||null,n=null,o=!1;"point-cloud-unique-value"===r?n=u(e.attributeStorageInfo,t.field):"point-cloud-stretch"===r?n=u(e.attributeStorageInfo,t.field):"point-cloud-class-breaks"===r?n=u(e.attributeStorageInfo,t.field):o="point-cloud-rgb"===r?null!=(n=s(e.attributeStorageInfo,t.field)):null!=(n=s(e.attributeStorageInfo,"RGB"));var a=null;return t&&t.colorModulation&&(a=u(e.attributeStorageInfo,t.colorModulation.field)),{rendererJSON:i,isRGBRenderer:o,primaryAttribute:n,modulationAttribute:a}},t.getFilterInfo=function(e){var t=e.filters;return t?t.map(function(t){return{filterJSON:t.toJSON(),attributeInfo:u(e.attributeStorageInfo,t.field)}}):[]},t.evaluateRenderer=function(e,t,o,a,s){var u=e.rendererJSON,f=e.isRGBRenderer,p=e.primaryAttribute,h=e.modulationAttribute,d=l(p,t,a,s),y=l(h,o,a,s),v=null,m=null;if(d&&f)v=d;else if(d&&"pointCloudUniqueValueRenderer"===u.type){var g=(m=n.fromJSON(u)).colorUniqueValueInfos;v=new Uint8Array(3*s);for(var x=c(m.fieldTransformType),_=0;_<s;_++)for(var b=(T=x?x(d[_]):d[_])+"",I=0;I<g.length;I++)if(g[I].values.indexOf(b)>=0){v[3*_]=g[I].color.r,v[3*_+1]=g[I].color.g,v[3*_+2]=g[I].color.b;break}}else if(d&&"pointCloudStretchRenderer"===u.type){var w=(m=i.fromJSON(u)).stops;for(v=new Uint8Array(3*s),x=c(m.fieldTransformType),_=0;_<s;_++){var T=x?x(d[_]):d[_],C=w.length-1;if(T<w[0].value)v[3*_]=w[0].color.r,v[3*_+1]=w[0].color.g,v[3*_+2]=w[0].color.b;else if(T>=w[C].value)v[3*_]=w[C].color.r,v[3*_+1]=w[C].color.g,v[3*_+2]=w[C].color.b;else for(I=1;I<w.length;I++)if(T<w[I].value){var S=(T-w[I-1].value)/(w[I].value-w[I-1].value);v[3*_]=w[I].color.r*S+w[I-1].color.r*(1-S),v[3*_+1]=w[I].color.g*S+w[I-1].color.g*(1-S),v[3*_+2]=w[I].color.b*S+w[I-1].color.b*(1-S);break}}}else if(d&&"pointCloudClassBreaksRenderer"===u.type){var E=(m=r.fromJSON(u)).colorClassBreakInfos;for(v=new Uint8Array(3*s),x=c(m.fieldTransformType),_=0;_<s;_++)for(T=x?x(d[_]):d[_],I=0;I<E.length;I++)if(T>=E[I].minValue&&T<=E[I].maxValue){v[3*_]=E[I].color.r,v[3*_+1]=E[I].color.g,v[3*_+2]=E[I].color.b;break}}else for(v=new Uint8Array(3*s),_=0;_<v.length;_++)v[_]=255;if(y&&m&&m.colorModulation){var B=m.colorModulation.minValue,P=m.colorModulation.maxValue;for(_=0;_<s;_++){var M=(T=y[_])>=P?1:T<=B?.3:.3+.7*(T-B)/(P-B);v[3*_]=M*v[3*_],v[3*_+1]=M*v[3*_+1],v[3*_+2]=M*v[3*_+2]}}return v},t.filterInPlace=function(e,t,r,i){for(var n=e.length/3,o=i.map(function(t,i){return l(r[i].attributeInfo,t,e,n)}),s=0,u=0;u<n;u++){for(var c=!0,f=0;f<r.length&&c;f++){var p=r[f].filterJSON,h=o[f][u];switch(p.type){case"pointCloudValueFilter":var d="exclude"===p.mode;-1!==p.values.indexOf(h)===d&&(c=!1);break;case"pointCloudBitfieldFilter":var y=a(p.requiredSetBits),v=a(p.requiredClearBits);(h&y)===y&&0==(h&v)||(c=!1);break;case"pointCloudReturnFilter":for(var m=15&h,g=h>>>4&15,x=g>1,_=1===m,b=m===g,I=!1,w=0,T=p.includedReturns;w<T.length;w++){var C=T[w];if("last"===C&&b||"firstOfMany"===C&&_&&x||"lastOfMany"===C&&b&&x||"single"===C&&!x){I=!0;break}}I||(c=!1)}}c&&(e[3*s]=e[3*u],e[3*s+1]=e[3*u+1],e[3*s+2]=e[3*u+2],t[3*s]=t[3*u],t[3*s+1]=t[3*u+1],t[3*s+2]=t[3*u+2],s++)}return s},t.getSplatSizeAlgorithm=function(e){var t=e&&e.pointSizeAlgorithm;return t&&"splat"===t.type?t:null},t.getFixedSizeAlgorithm=function(e){var t=e&&e.pointSizeAlgorithm;return t&&"fixed-size"===t.type?t:null},t.rendererUsesFixedSizes=function(e){var t=e&&e.pointSizeAlgorithm;return!(!t||!t.type)&&"fixed-size"===t.type}}.apply(null,i))||(e.exports=n)},qasq:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("2Atf"),r("9opi"),r("qKT0"),r("rg9i"),r("Vx27"),r("YT9w"),r("sHoj"),r("FPyo")],void 0===(n=function(e,t,r,i,n,o,a,s,u,l){return function(e){function t(t){var r=e.call(this)||this;return r.type="point-cloud-stretch",r.field=null,r.legendOptions=null,r.fieldTransformType=null,r.stops=null,r}var c;return i(t,e),c=t,t.prototype.clone=function(){return new c(r({},this.cloneProperties(),{field:o.clone(this.field),fieldTransformType:o.clone(this.fieldTransformType),stops:o.clone(this.stops),legendOptions:o.clone(this.legendOptions)}))},n([a.enumeration.serializable()({pointCloudStretchRenderer:"point-cloud-stretch"})],t.prototype,"type",void 0),n([a.property({json:{write:!0},type:String})],t.prototype,"field",void 0),n([a.property({type:u.default,json:{write:!0}})],t.prototype,"legendOptions",void 0),n([a.property({type:s.fieldTransformTypeKebabDict.apiValues,json:{type:s.fieldTransformTypeKebabDict.jsonValues,read:s.fieldTransformTypeKebabDict.read,write:s.fieldTransformTypeKebabDict.write}})],t.prototype,"fieldTransformType",void 0),n([a.property({type:[l.default],json:{write:!0}})],t.prototype,"stops",void 0),c=n([a.subclass("esri.renderers.PointCloudStretchRenderer")],t)}(a.declared(s))}.apply(null,i))||(e.exports=n)},rfv1:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("Q2wQ"),r("HZ3d"),r("xdHJ"),r("ma1f"),r("H1tY"),r("qsST"),r("jEml"),r("lRq4"),r("+6sX")],void 0===(n=function(e,t,r,i,n,o,a,s,u,l,c){function f(e,t){return d.minX=t[0],d.minY=t[1],d.maxX=t[2],d.maxY=t[3],e.search(d)}Object.defineProperty(t,"__esModule",{value:!0});var p=[],h=s.getLogger("esri.layers.graphics.data.FeatureStore"),d={minX:0,minY:0,maxX:0,maxY:0},y=function(){function e(e){this._featuresById=new n.default,this._boundsByFeature=new n.default,this._featuresByBounds=new n.default,this._index=u(9,a("csp-restrictions")?function(e){return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}}:["[0]","[1]","[2]","[3]"]),this._geometryInfo=e}return Object.defineProperty(e.prototype,"geometryType",{get:function(){return this._geometryInfo.geometryType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasM",{get:function(){return this._geometryInfo.hasM},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasZ",{get:function(){return this._geometryInfo.hasZ},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numFeatures",{get:function(){return this._featuresById.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullBounds",{get:function(){if(!this.numFeatures)return null;var e=l.create(l.NEGATIVE_INFINITY);return this._boundsByFeature.forEach(function(t){t&&(e[0]=Math.min(t[0],e[0]),e[1]=Math.min(t[1],e[1]),e[2]=Math.max(t[2],e[2]),e[3]=Math.max(t[3],e[3]))}),e},enumerable:!0,configurable:!0}),e.prototype.setEngine=function(e){this._engine=e},e.prototype.add=function(e){this._add(e,p),this._index.load(p),this._clearCache(),p.length=0},e.prototype.addMany=function(e){for(var t=0,r=e;t<r.length;t++){var i=r[t];this._add(i,p)}this._index.load(p),this._clearCache(),p.length=0},e.prototype.clear=function(){this._featuresById.clear(),this._boundsByFeature.clear(),this._featuresByBounds.clear(),this._index.clear(),this._clearCache()},e.prototype.removeManyById=function(e){for(var t=0,r=e;t<r.length;t++){var i=r[t],n=this._featuresById.get(i);if(n){var o=this._boundsByFeature.get(n);o&&(this._index.remove(o),this._featuresByBounds.delete(o)),this._boundsByFeature.delete(n)}this._featuresById.delete(i)}this._clearCache()},e.prototype.forEachBounds=function(e,t){for(var r=0,i=e;r<i.length;r++){var n=i[r],o=this._boundsByFeature.get(n);o&&t(o,n)}},e.prototype.getFeature=function(e){return this._featuresById.get(e)},e.prototype.has=function(e){return this._featuresById.has(e)},e.prototype.forEach=function(e){this._featuresById.forEach(function(t){return e(t)})},e.prototype.forEachInBounds=function(e,t){for(var r=0,i=f(this._index,e);r<i.length;r++){var n=i[r];t(this._featuresByBounds.get(n))}},e.prototype.transferIds=function(e,t){for(var r=[],i=0,n=t;i<n.length;i++){var o=n[i],a=this._featuresById.get(o);a&&(this._remove(a),r.push(a))}e.addMany(r),this._clearCache()},e.prototype.transferIdRange=function(e,t,r){for(var i=[],n=t;n<r;n++){var o=this._featuresById.get(n);o&&(this._remove(o),i.push(o))}e.addMany(i),this._clearCache()},e.prototype.transferIf=function(e,t){var r=this,i=[];this._featuresById.forEach(function(e,n){t(e)&&(r._remove(e),i.push(e))}),e.addMany(i),this._clearCache()},e.prototype.transferAll=function(e){var t=this,r=[];this._featuresById.forEach(function(e,i){t._remove(e),r.push(e)}),e.addMany(r),this._clearCache()},e.prototype._clearCache=function(){this._engine&&this._engine.clearCache()},e.prototype._add=function(e,t){if(e){var r=e.objectId;if(null==r)return void h.error(new o("featurestore:invalid-feature","feature id is missing",{feature:e}));var i,n=this._featuresById.get(r);if(n&&(i=this._boundsByFeature.get(n))&&(this._index.remove(i),this._boundsByFeature.delete(n),this._featuresByBounds.delete(i)),!e.geometry)return this._boundsByFeature.set(e,null),void this._featuresById.set(r,e);i=c.getBoundsOptimizedGeometry(i||l.create(),e.geometry,this._geometryInfo.hasZ,this._geometryInfo.hasM),this._boundsByFeature.set(e,i),this._featuresByBounds.set(i,e),this._featuresById.set(r,e),t.push(i)}},e.prototype._remove=function(e){var t;e&&((t=this._boundsByFeature.get(e))&&(this._index.remove(t),this._boundsByFeature.delete(e),this._featuresByBounds.delete(t)),this._featuresById.delete(e.objectId))},e}();t.default=y}.apply(null,i))||(e.exports=n)},sYb8:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("QDcU"),r("ycL1"),r("rg9i"),r("Vx27"),r("1dvD")],void 0===(n=function(e,t,r,i,n,o,a,s,u){Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.description=null,t.label=null,t.minValue=0,t.maxValue=0,t.color=null,t}var o;return r(t,e),o=t,t.prototype.clone=function(){return new o({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:a.clone(this.color)})},i([s.property({type:String,json:{write:!0}})],t.prototype,"description",void 0),i([s.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),i([s.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],t.prototype,"minValue",void 0),i([s.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],t.prototype,"maxValue",void 0),i([s.property({type:n,json:{type:[u.Integer],write:!0}})],t.prototype,"color",void 0),o=i([s.subclass("esri.renderers.support.pointCloud.ColorClassBreakInfo")],t)}(s.declared(o));t.ColorClassBreakInfo=l,t.default=l}.apply(null,i))||(e.exports=n)},tI6k:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EXTRUDE_SCALE=64,t.PICTURE_FILL_COLOR=4294967295,t.TILE_SIZE=512,t.ANGLE_FACTOR_256=256/360,t.DEBUG_LABELS=!1,t.COLLISION_BUCKET_SIZE=128,t.DOT_DENSITY_MAX_FIELDS=8,t.COLLISION_MAX_ZOOM_DELTA=3,t.COLLISION_EARLY_REJECT_BUCKET_SIZE=16,t.COLLISION_BOX_PADDING=8,t.COLLISION_TILE_BOX_SIZE=t.TILE_SIZE/t.COLLISION_BUCKET_SIZE,t.COLLISION_PLACEMENT_PADDING=8,t.HEURISTIC_GLYPHS_PER_LINE=50,t.HEURISTIC_GLYPHS_PER_FEATURE=10,t.GLYPH_SIZE=24,t.TEXT_LINE_HEIGHT=1.2*t.GLYPH_SIZE,t.TEXT_MAX_WIDTH=10*t.GLYPH_SIZE,t.TEXT_SPACING=0,t.AVERAGE_GLYPH_MOSAIC_ITEM={metrics:{width:15,height:17,left:0,top:-7,advance:14}},t.TEXTURE_BINDING_SPRITE_ATLAS=0,t.TEXTURE_BINDING_GLYPH_ATLAS=1,t.TEXTURE_BINDING_HIGHLIGHT_0=2,t.TEXTURE_BINDING_HIGHLIGHT_1=3,t.TEXTURE_BINDING_RENDERER_0=4,t.TEXTURE_BINDING_RENDERER_1=5,t.MAX_FILTERS=2,t.FILTER_FLAG_0=1,t.EFFECT_FLAG_0=2}.apply(null,i))||(e.exports=n)},tZaU:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("idNY"),r("qMld")],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._deferreds=[],this._values=[]}return e.prototype.push=function(e){var t=this;return i.create(function(r,i){t._deferreds.push({resolve:r,reject:i}),t._values.push(e)})},e.prototype.unshift=function(e){var t=this;return i.create(function(r,i){t._deferreds.unshift({resolve:r,reject:i}),t._values.unshift(e)})},Object.defineProperty(e.prototype,"length",{get:function(){return this._deferreds.length},enumerable:!0,configurable:!0}),e.prototype.process=function(){return 0!==this.length&&(this._deferreds.shift().resolve(this._values.shift()),!0)},e.prototype.cancelAll=function(){for(var e=new r,t=0,i=this._deferreds;t<i.length;t++)i[t].reject(e);this._deferreds.length=0,this._values.length=0},e}();t.PromiseQueue=n}.apply(null,i))||(e.exports=n)},v7zm:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(e,t,r,i){this._tag=0,this._dataType=99,this._data=e,this._dataView=t,this._pos=r||0,this._end=i||e.byteLength}return e.prototype.clone=function(){return new e(this._data,this._dataView,this._pos,this._end)},e.prototype.pos=function(){return this._pos},e.prototype.next=function(e){for(;;){if(this._pos===this._end)return!1;var t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0},e.prototype.empty=function(){return this._pos>=this._end},e.prototype.tag=function(){return this._tag},e.prototype.getInt32=function(){return this._decodeVarint()},e.prototype.getInt64=function(){return this._decodeVarint()},e.prototype.getUInt32=function(){var e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))},e.prototype.getUInt64=function(){return this._decodeVarint()},e.prototype.getSInt32=function(){var e=this.getUInt32();return e>>>1^-(1&e)|0},e.prototype.getSInt64=function(){return this._decodeSVarint()},e.prototype.getBool=function(){var e=0!==this._data[this._pos];return this._skip(1),e},e.prototype.getEnum=function(){return this._decodeVarint()},e.prototype.getFixed64=function(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+4294967296*e.getUint32(t+4,!0);return this._skip(8),r},e.prototype.getSFixed64=function(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+4294967296*e.getInt32(t+4,!0);return this._skip(8),r},e.prototype.getDouble=function(){var e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e},e.prototype.getFixed32=function(){var e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e},e.prototype.getSFixed32=function(){var e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e},e.prototype.getFloat=function(){var e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e},e.prototype.getString=function(){var e=this._getLength(),t=this._pos,r=this._toString(this._data,t,t+e);return this._skip(e),r},e.prototype.getBytes=function(){var e=this._getLength(),t=this._pos,r=this._toBytes(this._data,t,t+e);return this._skip(e),r},e.prototype.getMessage=function(){var t=this._getLength(),r=this._pos,i=new e(this._data,this._dataView,r,r+t);return this._skip(t),i},e.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}},e.prototype._skip=function(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e},e.prototype._decodeVarint=function(){var e,t=this._data,r=this._pos,i=0;if(this._end-r>=10)do{if(i|=127&(e=t[r++]),0==(128&e))break;if(i|=(127&(e=t[r++]))<<7,0==(128&e))break;if(i|=(127&(e=t[r++]))<<14,0==(128&e))break;if(i|=(127&(e=t[r++]))<<21,0==(128&e))break;if(i+=268435456*(127&(e=t[r++])),0==(128&e))break;if(i+=34359738368*(127&(e=t[r++])),0==(128&e))break;if(i+=4398046511104*(127&(e=t[r++])),0==(128&e))break;if(i+=562949953421312*(127&(e=t[r++])),0==(128&e))break;if(i+=72057594037927940*(127&(e=t[r++])),0==(128&e))break;if(i+=0x8000000000000000*(127&(e=t[r++])),0==(128&e))break;throw new Error("Varint too long!")}while(0);else{for(var n=1;r!==this._end&&0!=(128&(e=t[r]));)++r,i+=(127&e)*n,n*=128;if(r===this._end)throw new Error("Varint overrun!");++r,i+=e*n}return this._pos=r,i},e.prototype._decodeSVarint=function(){var e=this._decodeVarint();return e%2?-(e+1)/2:e/2},e.prototype._getLength=function(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()},e.prototype._toString=function(e,t,r){var i="",n="";r=Math.min(this._end,r);for(var o=t;o<r;++o){var a=e[o];128&a?n+="%"+a.toString(16):(i+=decodeURIComponent(n)+String.fromCharCode(a),n="")}return n.length&&(i+=decodeURIComponent(n)),i},e.prototype._toBytes=function(e,t,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,t,r-t)},e}()}.apply(null,i))||(e.exports=n)},vavG:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("H1tY"),r("+j0K")],void 0===(n=function(e,t,r,i){return function(){function e(t,i){if(this._layerByName={},this.styleJSON=t,this.version=parseFloat(t.version),this.sprite=i?i.spriteUrl:t.sprite,this.glyphs=i?i.glyphsUrl:t.glyphs,r("stable-symbol-rendering")){var n=(t.layers||[]).filter(function(e){return e.layout&&e.layout["text-font"]})[0];n&&(t.layers||[]).forEach(function(e){e.layout&&e.layout["text-font"]&&(e.layout["text-font"]=n.layout["text-font"])})}if(this.layers=(t.layers||[]).map(e._create),this.layers)for(var o=void 0,a=0;a<this.layers.length;a++)o=this.layers[a],this._layerByName[o.id.toLowerCase()]=o;this._identifyRefLayers()}return e.prototype.getStyleLayerId=function(e){return e>=this.layers.length?null:this.layers[e].id},e.prototype.getLayoutProperties=function(e){var t=this._layerByName[e.toLowerCase()];return t?t.layout:null},e.prototype.getPaintProperties=function(e){var t=this._layerByName[e.toLowerCase()];return t?t.paint:null},e.prototype.setPaintProperties=function(t,r){var i=this._layerByName[t.toLowerCase()];if(!i)return"";var n=this.layers.indexOf(i);this.styleJSON.layers[n].paint=r;var o={id:i.id,type:i.typeName,source:i.source,sourceLayer:i["source-layer"],minzoom:i.minzoom,maxzoom:i.maxzoom,filter:i.filter,layout:i.layout,paint:r},a=e._recreateLayer(o,i);return this.layers[n]=a,this._layerByName[i.id.toLowerCase()]=a,i.id},e.prototype.setLayoutProperties=function(t,r){var i=this._layerByName[t.toLowerCase()];if(!i)return"";var n=this.layers.indexOf(i);this.styleJSON.layers[n].layout=r;var o={id:i.id,type:i.typeName,source:i.source,sourceLayer:i["source-layer"],minzoom:i.minzoom,maxzoom:i.maxzoom,filter:i.filter,layout:r,paint:i.paint},a=e._recreateLayer(o,i);return this.layers[n]=a,this._layerByName[i.id.toLowerCase()]=a,i.id},e.prototype._identifyRefLayers=function(){for(var e=[],t=[],r=0,i=0,n=this.layers;i<n.length;i++){var o=n[i];if(1===o.type){var a=o,s=o.sourceLayer;s+="|"+JSON.stringify(o.layout&&o.layout.visibility),s+="|"+JSON.stringify(o.minzoom),s+="|"+JSON.stringify(o.maxzoom),s+="|"+JSON.stringify(o.filter),(a.hasDataDrivenFill||a.hasDataDrivenOutline)&&(s+="|"+JSON.stringify(r)),e.push({key:s,layer:o})}if(2===o.type){var u=o;s=o.sourceLayer;s+="|"+JSON.stringify(o.layout&&o.layout.visibility),s+="|"+JSON.stringify(o.minzoom),s+="|"+JSON.stringify(o.maxzoom),s+="|"+JSON.stringify(o.filter),s+="|"+JSON.stringify(o.layout&&o.layout["line-cap"]),s+="|"+JSON.stringify(o.layout&&o.layout["line-join"]),u.hasDataDrivenLine&&(s+="|"+JSON.stringify(r)),t.push({key:s,layer:o})}++r}this._assignRefLayers(e),this._assignRefLayers(t)},e.prototype._assignRefLayers=function(e){e.sort(function(e,t){return e.key<t.key?-1:e.key>t.key?1:0});for(var t,r,i=e.length,n=0;n<i;n++){var o=e[n];if(o.key===t)o.layer.refLayerId=r;else if(t=o.key,r=o.layer.id,1===o.layer.type&&!o.layer.getPaintProperty("fill-outline-color"))for(var a=n+1;a<i;a++){var s=e[a];if(s.key!==t)break;if(s.layer.getPaintProperty("fill-outline-color")){e[n]=s,e[a]=o,r=s.layer.id;break}}}},e._create=function(e,t,r){var n=1-(1+t)*(1/(r.length+1));switch(e.type){case"background":return new i.BackgroundStyleLayer(0,e,n);case"fill":return new i.FillStyleLayer(1,e,n);case"line":return new i.LineStyleLayer(2,e,n);case"symbol":return new i.SymbolStyleLayer(3,e,n);case"raster":throw new Error("Unsupported vector tile raster layer");case"circle":return new i.CircleStyleLayer(4,e,n)}throw new Error("Unknown vector tile layer")},e._recreateLayer=function(e,t){switch(e.type){case"background":return new i.BackgroundStyleLayer(0,e,t.z);case"fill":return new i.FillStyleLayer(1,e,t.z);case"line":return new i.LineStyleLayer(2,e,t.z);case"symbol":return new i.SymbolStyleLayer(3,e,t.z);case"raster":throw new Error("Unsupported vector tile raster layer");case"circle":return new i.CircleStyleLayer(4,e,t.z)}},e}()}.apply(null,i))||(e.exports=n)},vjUK:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){function r(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t/e.length}function i(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t}function n(e){for(var t=r(e),i=e.length,n=0,o=0,a=e;o<a.length;o++){var s=a[o];n+=Math.pow(s-t,2)}return i>1?n/(i-1):0}Object.defineProperty(t,"__esModule",{value:!0}),t.aggregateFunction=function(e,t){var r=o[e.toLowerCase()];if(null==r)throw new Error("Function Not Recognised");if(t.length<r.minParams||t.length>r.maxParams)throw new Error("Invalid Parameter count for call to "+e.toUpperCase());return r.evaluate(t)},t.isAggregate=function(e,t){var r=o[e.toLowerCase()];return null!=r&&t>=r.minParams&&t<=r.maxParams};var o={min:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.min.apply(Math,e[0])}},max:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.max.apply(Math,e[0])}},avg:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:r(e[0])}},sum:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:i(e[0])}},stddev:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.sqrt(n(e[0]))}},count:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:e[0].length}},var:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:n(e[0])}}}}.apply(null,i))||(e.exports=n)},vlC2:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("iHt0")],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.vec3f32=r}.apply(null,i))||(e.exports=n)},wCvz:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("xhoE"),r("qMld"),r("ADZV"),r("8V7H"),r("EuvN"),r("fdzS"),r("0LE5"),r("vlC2"),r("Z4y+"),r("W2ph"),r("1RVI"),r("qSbo"),r("mmEe"),r.dj.m(e)],void 0===(n=function(e,t,r,i,n,o,a,s,u,l,c,f,p,h,d,y){Object.defineProperty(t,"__esModule",{value:!0});var v=function(){function e(){}return e.prototype._process=function(e){var t=this._transform(e);return i.resolve({result:t,transferList:[t.points.buffer,t.rgb.buffer]})},e.prototype._transform=function(e){var t=this.readGeometry(e.schema,e.geometryBuffer),r=t.length/3,i=h.evaluateRenderer(e.rendererInfo,e.primaryAttribute,e.modulationAttribute,t,r);e.filterInfo&&e.filterInfo.length>0&&(r=h.filterInPlace(t,i,e.filterInfo,e.filterAttributes)),3*r<i.length&&(i=new Uint8Array(i.buffer.slice(0,3*r))),this._applyElevationOffsetInPlace(t,r,e.elevationOffset);var n=this._transformCoordinates(t,r,e.obb,c.fromJSON(e.inSR),c.fromJSON(e.outSR));return{obb:e.obb,points:n,rgb:i}},e.prototype.readGeometry=function(e,t){if(null==e.encoding||""===e.encoding){for(var r=f.createGeometryDataIndex(t,e,!1),i=f.createTypedView(t,r.vertexAttributes.position),n=r.header.fields,o=[n.offsetX,n.offsetY,n.offsetZ],a=[n.scaleX,n.scaleY,n.scaleZ],s=i.length/3,u=new Float64Array(3*s),l=0;l<s;l++)u[3*l]=i[3*l]*a[0]+o[0],u[3*l+1]=i[3*l+1]*a[1]+o[1],u[3*l+2]=i[3*l+2]*a[2]+o[2];return u}if("lepcc-xyz"===e.encoding)return p.decodeXYZ(t).result},e.prototype._transformCoordinates=function(e,t,r,i,n){if(!d.bufferToBuffer(e,i,0,e,n,0,t))throw Error("Can't reproject");var o=l.vec3f32.fromValues(r.center[0],r.center[1],r.center[2]),s=l.vec3f32.create(),c=l.vec3f32.create();a.quat.conjugate(m,r.quaternion);for(var f=new Float32Array(3*t),p=0;p<t;p++)s[0]=e[3*p]-o[0],s[1]=e[3*p+1]-o[1],s[2]=e[3*p+2]-o[2],u.vec3.transformQuat(c,s,m),r.halfSize[0]=Math.max(r.halfSize[0],Math.abs(c[0])),r.halfSize[1]=Math.max(r.halfSize[1],Math.abs(c[1])),r.halfSize[2]=Math.max(r.halfSize[2],Math.abs(c[2])),f[3*p]=s[0],f[3*p+1]=s[1],f[3*p+2]=s[2];return f},e.prototype._applyElevationOffsetInPlace=function(e,t,r){if(0!==r)for(var i=0;i<t;i++)e[3*i+2]+=r},e}(),m=s.quatf32.create(),g=function(t){function a(){var r=t.call(this)||this;return r._thread=void 0,o.open(n.getAbsMid("./PointCloudWorker",e,y)).then(function(e){void 0===r._thread?r._thread=e:e.close()}),r}return r(a,t),a.prototype.destroy=function(){this._thread&&this._thread.close(),this._thread=null},a.prototype.transform=function(e,t){return this._thread?this._thread.invoke("_process",e,{transferList:t}):i.resolve(this._transform(e))},a}(v);t.PointCloudWorker=g,t.default=function(){return new v}}.apply(null,i))||(e.exports=n)},wURW:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){var r,i,n,o;Object.defineProperty(t,"__esModule",{value:!0}),(i=r=t.VectorRole||(t.VectorRole={}))[i.ENTRY=1]="ENTRY",i[i.EXIT=2]="EXIT",i[i.CAP=3]="CAP",(o=n=t.CapPosition||(t.CapPosition={}))[o.START=1]="START",o[o.END=2]="END",t.SYSTEM_MAG_LIMIT=3.8,t.MITER_SAFE_RADS=2*Math.acos(1/t.SYSTEM_MAG_LIMIT);var a=t.SYSTEM_MAG_LIMIT*t.SYSTEM_MAG_LIMIT,s=-1,u=8/(2*Math.PI);function l(e){var t,r={items:new Array,count:0};for(t=0;t<e;++t)r.items.push(void 0);return r}t.allocTriangles=function(e){var t,r={items:new Array,count:0};for(t=0;t<e;++t)r.items.push({v1:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v2:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v3:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]}});return r},t.allocExtrudeVectors=function(){var e=function(e){var t,r={items:new Array,count:0};for(t=0;t<30;++t)r.items.push({vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]});return r}(),t={};return t[r.ENTRY]=l(20),t[r.EXIT]=l(20),t[r.CAP]=l(20),{vectors:e,lists:t}},t.copyExtrudeVectors=function(e,t){var i;for(i=0;i<t.vectors.count;++i)e.vectors.items[i].vector[0]=t.vectors.items[i].vector[0],e.vectors.items[i].vector[1]=t.vectors.items[i].vector[1],e.vectors.items[i].texCoords[0]=t.vectors.items[i].texCoords[0],e.vectors.items[i].texCoords[1]=t.vectors.items[i].texCoords[1],e.vectors.items[i].direction[0]=t.vectors.items[i].direction[0],e.vectors.items[i].direction[1]=t.vectors.items[i].direction[1],e.vectors.items[i].base=t.vectors.items[i].base;e.vectors.count=t.vectors.count;var n=t.lists[r.ENTRY],o=e.lists[r.ENTRY],a=t.lists[r.EXIT],s=e.lists[r.EXIT],u=t.lists[r.CAP],l=e.lists[r.CAP];for(i=0;i<n.count;++i)o.items[i]=n.items[i];for(o.count=n.count,i=0;i<a.count;++i)s.items[i]=a.items[i];for(s.count=a.count,i=0;i<u.count;++i)l.items[i]=u.items[i];l.count=u.count,e.capCenter=t.capCenter};var c={vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0],base:void 0};function f(e,t){c.vector[0]=e.vector[0],c.vector[1]=e.vector[1],c.texCoords[0]=e.texCoords[0],c.texCoords[1]=e.texCoords[1],c.direction[0]=e.direction[0],c.direction[1]=e.direction[1],c.base=e.base,e.vector[0]=t.vector[0],e.vector[1]=t.vector[1],e.texCoords[0]=t.texCoords[0],e.texCoords[1]=t.texCoords[1],e.direction[0]=t.direction[0],e.direction[1]=t.direction[1],e.base=t.base,t.vector[0]=c.vector[0],t.vector[1]=c.vector[1],t.texCoords[0]=c.texCoords[0],t.texCoords[1]=c.texCoords[1],t.direction[0]=c.direction[0],t.direction[1]=c.direction[1],t.base=c.base}t.swapExtrudeVectors=f;var p,h=[];for(p=0;p<32;++p)h.push([void 0,void 0]);var d=function(e){var t,r={items:new Array,count:0};for(t=0;t<8;++t)r.items.push([void 0,void 0]);return r}();function y(e,t){return e[0]*t[0]+e[1]*t[1]}function v(e){return Math.sqrt(y(e,e))}function m(e,t){var r=v(t);return e[0]=t[0]/r,e[1]=t[1]/r,e}function g(e,t){return e[0]=-t[1],e[1]=t[0],e}function x(e,t){return e[0]*t[1]-e[1]*t[0]}function _(e,t){return e[0]=-t[0],e[1]=-t[1],e}function b(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function I(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function w(e,t,r){return i=e,o=r,((n=t)[0]-i[0])*(o[1]-i[1])-(o[0]-i[0])*(n[1]-i[1])<0;var i,n,o}function T(e,t){var r=y(e,t);return.999<r?0:r<-.999?Math.PI:Math.acos(r)}function C(e,t,r,i,n){if(0!==i){var o,a=v(t),s=(n?-1:1)*T(b(h[0],t,1/a),b(h[1],r,1/a))/i,u=Math.cos(s),l=Math.sin(s),c=t[0],f=t[1];for(o=0;o<i-1;++o){var p=c;c=u*p-l*f,f=l*p+u*f,e.items[o][0]=c,e.items[o][1]=f}e.count=i-1}else e.count=0}function S(e){var t,r=e.count,i=Math.floor(r/2);for(t=0;t<i;++t){var n=e.items[t];e.items[t]=e.items[r-t-1],e.items[r-t-1]=n}}t.length=v,t.normalize=m,t.getNumberOfSlices=function(e){return Math.max(Math.round(e*u),1)},t.getRads=T,t.reverse=S;var E=[void 0,void 0],B=[void 0,void 0],P=[0,0],M=[0,0],V=[0,0],A=[0,0],D=Math.cos(Math.PI/4),F=Math.sin(Math.PI/4),N=Math.sqrt(2),L=function(){function e(e){this._distanceAlongCorrection=e.distanceAlongCorrection}return e.prototype.bridge=function(e,t,i){var n,o,a,s,u=t.vectors,l=t.lists[r.EXIT],c=i.vectors,p=i.lists[r.ENTRY];if(l.count===p.count+1)n=l.items,o=u.items,a=p.items,s=c.items;else if(p.count===l.count+1)n=p.items,o=c.items,a=l.items,s=u.items;else{if(l.count!==p.count)return void(e.count=0);n=p.items,o=c.items,a=l.items,s=u.items}var h,d=l.count+p.count-2;for(e.count=d,E[0]=n,E[1]=a,B[0]=o,B[1]=s,h=0;h<d;++h){var y=e.items[h],v=(h+0)%2,m=Math.floor((h+0)/2),g=B[v][E[v][m]];y.v1.vector[0]=g.vector[0],y.v1.vector[1]=g.vector[1],y.v1.texCoords[0]=g.texCoords[0],y.v1.texCoords[1]=g.texCoords[1],y.v1.direction[0]=g.direction[0],y.v1.direction[1]=g.direction[1],y.v1.base=g.base;var x=(h+1)%2,_=Math.floor((h+1)/2),b=B[x][E[x][_]];y.v2.vector[0]=b.vector[0],y.v2.vector[1]=b.vector[1],y.v2.texCoords[0]=b.texCoords[0],y.v2.texCoords[1]=b.texCoords[1],y.v2.direction[0]=b.direction[0],y.v2.direction[1]=b.direction[1],y.v2.base=b.base;var I=(h+2)%2,T=Math.floor((h+2)/2),C=B[I][E[I][T]];y.v3.vector[0]=C.vector[0],y.v3.vector[1]=C.vector[1],y.v3.texCoords[0]=C.texCoords[0],y.v3.texCoords[1]=C.texCoords[1],y.v3.direction[0]=C.direction[0],y.v3.direction[1]=C.direction[1],y.v3.base=C.base;var S=y.v1.base&&y.v1.base.point||P,D=y.v2.base&&y.v2.base.point||P,F=y.v3.base&&y.v3.base.point||P;M[0]=S[0]+y.v1.vector[0],M[1]=S[1]+y.v1.vector[1],V[0]=D[0]+y.v2.vector[0],V[1]=D[1]+y.v2.vector[1],A[0]=F[0]+y.v3.vector[0],A[1]=F[1]+y.v3.vector[1],w(M,V,A)||f(y.v2,y.v3)}},e.prototype.pie=function(e,t){if(0!==t.lists[r.CAP].count){if(1===t.lists[r.CAP].count)return void(e.count=0);var i;for(e.count=t.lists[r.CAP].count-1,i=0;i<e.count;++i){var n=e.items[i],o=t.lists[r.CAP].items[i],a=t.vectors.items[o];n.v1.vector[0]=a.vector[0],n.v1.vector[1]=a.vector[1],n.v1.texCoords[0]=a.texCoords[0],n.v1.texCoords[1]=a.texCoords[1],n.v1.direction[0]=a.direction[0],n.v1.direction[1]=a.direction[1],n.v1.base=a.base;var s=t.lists[r.CAP].items[i+1],u=t.vectors.items[s];n.v2.vector[0]=u.vector[0],n.v2.vector[1]=u.vector[1],n.v2.texCoords[0]=u.texCoords[0],n.v2.texCoords[1]=u.texCoords[1],n.v2.direction[0]=u.direction[0],n.v2.direction[1]=u.direction[1],n.v2.base=u.base;var l=t.capCenter,c=t.vectors.items[l];n.v3.vector[0]=c.vector[0],n.v3.vector[1]=c.vector[1],n.v3.texCoords[0]=c.texCoords[0],n.v3.texCoords[1]=c.texCoords[1],n.v3.direction[0]=c.direction[0],n.v3.direction[1]=c.direction[1],n.v3.base=c.base;var p=n.v1.base&&n.v1.base.point||P,h=n.v2.base&&n.v2.base.point||P,d=n.v3.base&&n.v3.base.point||P;M[0]=p[0]+n.v1.vector[0],M[1]=p[1]+n.v1.vector[1],V[0]=h[0]+n.v2.vector[0],V[1]=h[1]+n.v2.vector[1],A[0]=d[0]+n.v3.vector[0],A[1]=d[1]+n.v3.vector[1],w(M,V,A)||f(n.v2,n.v3)}}else e.count=0},e.prototype.buttCap=function(e,t,r){this.fastMiterJoin(e,t,r)},e.prototype.roundCap=function(e,t,i,o,a,s){void 0===s&&(s=0),this.fastMiterJoin(e,t,i);var u=o===n.START?0:1,l=o===n.START?1:0;e.capCenter=e.vectors.count;var c=e.vectors.items[e.capCenter];c.vector[0]=0,c.vector[1]=0,c.texCoords[0]=0,c.texCoords[1]=0,c.direction[0]=0,c.direction[1]=0,++e.vectors.count,C(d,e.vectors.items[u].vector,e.vectors.items[l].vector,a,!1);var f=e.vectors.count,p=e.lists[r.CAP];p.items[0]=u;var h,y=e.vectors.items[u].texCoords[1],v=e.vectors.items[l].texCoords[1];for(h=0;h<d.count;++h){var m=s*(1-Math.abs(d.count/2-h)/(d.count/2)),g=y+h/(d.count-1)*(v-y),x=d.items[h],_=e.vectors.items[f+h];_.vector[0]=x[0],_.vector[1]=x[1],_.texCoords[0]=m,_.texCoords[1]=g,_.direction[0]=0,_.direction[1]=0,p.items[h+1]=f+h}p.items[d.count+1]=l,p.count=d.count+2,e.vectors.count=f+d.count},e.prototype.squareCap=function(e,t,r,i){this.fastMiterJoin(e,t,r);var o=i===n.START?0:1,a=i===n.START?1:0,s=h[0],u=h[1],l=h[2],c=h[3],f=h[4],p=e.vectors.items[o].vector;s[0]=D*p[0]-F*p[1],s[1]=F*p[0]+D*p[1],b(c,s,N),u[0]=D*s[0]-F*s[1],u[1]=F*s[0]+D*s[1],l[0]=D*u[0]-F*u[1],l[1]=F*u[0]+D*u[1],b(f,l,N);var d=e.vectors.items[o];d.vector[0]=c[0],d.vector[1]=c[1];var y=e.vectors.items[a];y.vector[0]=f[0],y.vector[1]=f[1]},e.prototype.squareCapForDashedLines=function(e,t,i,o){if(o===n.START){var a=g(h[0],i),s=_(h[4],a),u=h[1],l=h[2],c=h[3];u[0]=D*a[0]-F*a[1],u[1]=F*a[0]+D*a[1],l[0]=D*u[0]-F*u[1],l[1]=F*u[0]+D*u[1],c[0]=D*l[0]-F*l[1],c[1]=F*l[0]+D*l[1],(f=h[5])[0]=0,f[1]=0,e.capCenter=0,(p=e.vectors.items)[0].vector[0]=f[0],p[0].vector[1]=f[1],p[0].direction[0]=0,p[0].direction[1]=0,p[0].texCoords[0]=0,p[0].texCoords[1]=0,p[1].vector[0]=a[0],p[1].vector[1]=a[1],p[1].direction[0]=0,p[1].direction[1]=0,p[1].texCoords[0]=0,p[1].texCoords[1]=-1,p[2].vector[0]=u[0]*N,p[2].vector[1]=u[1]*N,p[2].direction[0]=0,p[2].direction[1]=0,p[2].texCoords[0]=-1,p[2].texCoords[1]=-1,p[3].vector[0]=c[0]*N,p[3].vector[1]=c[1]*N,p[3].direction[0]=0,p[3].direction[1]=0,p[3].texCoords[0]=-1,p[3].texCoords[1]=1,p[4].vector[0]=s[0],p[4].vector[1]=s[1],p[4].direction[0]=0,p[4].direction[1]=0,p[4].texCoords[0]=0,p[4].texCoords[1]=1,e.vectors.count=5,e.lists[r.CAP].count=4,e.lists[r.CAP].items[0]=1,e.lists[r.CAP].items[1]=2,e.lists[r.CAP].items[2]=3,e.lists[r.CAP].items[3]=4,e.lists[r.ENTRY].count=0,e.lists[r.EXIT].count=3,e.lists[r.EXIT].items[0]=1,e.lists[r.EXIT].items[1]=0,e.lists[r.EXIT].items[2]=4}else{var f,p;a=g(h[0],i),s=_(h[4],a),u=h[1],l=h[2],c=h[3],u[0]=D*s[0]-F*s[1],u[1]=F*s[0]+D*s[1],l[0]=D*u[0]-F*u[1],l[1]=F*u[0]+D*u[1],c[0]=D*l[0]-F*l[1],c[1]=F*l[0]+D*l[1],(f=h[5])[0]=0,f[1]=0,e.capCenter=0,(p=e.vectors.items)[0].vector[0]=f[0],p[0].vector[1]=f[1],p[0].direction[0]=0,p[0].direction[1]=0,p[0].texCoords[0]=0,p[0].texCoords[1]=0,p[1].vector[0]=s[0],p[1].vector[1]=s[1],p[1].direction[0]=0,p[1].direction[1]=0,p[1].texCoords[0]=0,p[1].texCoords[1]=1,p[2].vector[0]=u[0]*N,p[2].vector[1]=u[1]*N,p[2].direction[0]=0,p[2].direction[1]=0,p[2].texCoords[0]=1,p[2].texCoords[1]=1,p[3].vector[0]=c[0]*N,p[3].vector[1]=c[1]*N,p[3].direction[0]=0,p[3].direction[1]=0,p[3].texCoords[0]=1,p[3].texCoords[1]=-1,p[4].vector[0]=a[0],p[4].vector[1]=a[1],p[4].direction[0]=0,p[4].direction[1]=0,p[4].texCoords[0]=0,p[4].texCoords[1]=-1,e.vectors.count=5,e.lists[r.CAP].count=4,e.lists[r.CAP].items[0]=1,e.lists[r.CAP].items[1]=2,e.lists[r.CAP].items[2]=3,e.lists[r.CAP].items[3]=4,e.lists[r.ENTRY].count=3,e.lists[r.ENTRY].items[0]=4,e.lists[r.ENTRY].items[1]=0,e.lists[r.ENTRY].items[2]=1,e.lists[r.EXIT].count=0}},e.prototype.fastMiterJoin=function(e,t,i){var n=g(h[0],i),o=n,a=_(h[1],n),u=e.vectors.items[0];u.vector[0]=o[0],u.vector[1]=o[1],u.texCoords[0]=0,u.texCoords[1]=s,u.direction[0]=0,u.direction[1]=0;var l=e.vectors.items[1];l.vector[0]=a[0],l.vector[1]=a[1],l.texCoords[0]=0,l.texCoords[1]=1,l.direction[0]=0,l.direction[1]=0,e.vectors.count=2;var c=e.lists[r.ENTRY];c.items[0]=0,c.items[1]=1,c.count=2;var f=e.lists[r.EXIT];f.items[0]=0,f.items[1]=1,f.count=2,e.lists[r.CAP].count=0,e.capCenter=void 0},e.prototype.miterJoin=function(e,t,i){var n=g(h[0],t),o=g(h[1],i),a=h[2];a[0]=n[0]+o[0],a[1]=n[1]+o[1];var u=m(h[3],a),l=y(u,n);u=b(h[4],u,1/l);var c=_(h[5],u);if(this._distanceAlongCorrection){(d=e.vectors.items[0]).vector[0]=u[0],d.vector[1]=u[1],d.texCoords[0]=0,d.texCoords[1]=s,d.direction[0]=t[0],d.direction[1]=t[1],(v=e.vectors.items[1]).vector[0]=c[0],v.vector[1]=c[1],v.texCoords[0]=0,v.texCoords[1]=1,v.direction[0]=t[0],v.direction[1]=t[1];var f=e.vectors.items[2];f.vector[0]=u[0],f.vector[1]=u[1],f.texCoords[0]=0,f.texCoords[1]=s,f.direction[0]=i[0],f.direction[1]=i[1];var p=e.vectors.items[3];p.vector[0]=c[0],p.vector[1]=c[1],p.texCoords[0]=0,p.texCoords[1]=1,p.direction[0]=i[0],p.direction[1]=i[1],e.vectors.count=4,(x=e.lists[r.ENTRY]).items[0]=0,x.items[1]=1,x.count=2,(I=e.lists[r.EXIT]).items[0]=2,I.items[1]=3,I.count=2}else{var d,v,x,I;(d=e.vectors.items[0]).vector[0]=u[0],d.vector[1]=u[1],d.texCoords[0]=0,d.texCoords[1]=s,d.direction[0]=0,d.direction[1]=0,(v=e.vectors.items[1]).vector[0]=c[0],v.vector[1]=c[1],v.texCoords[0]=0,v.texCoords[1]=1,v.direction[0]=0,v.direction[1]=0,e.vectors.count=2,(x=e.lists[r.ENTRY]).items[0]=0,x.items[1]=1,x.count=2,(I=e.lists[r.EXIT]).items[0]=0,I.items[1]=1,I.count=2}e.lists[r.CAP].count=0,e.capCenter=void 0},e.prototype.bevelJoin=function(e,t,i,n){var o=n*n,u=x(t,i),l=0<u?[s,1]:[1,s],c=l[0],f=l[1],p=0<u?_(h[0],g(h[1],t)):g(h[2],t),d=0<u?_(h[3],g(h[4],i)):g(h[5],i),v=h[6];v[0]=p[0]+d[0],v[1]=p[1]+d[1];var w=m(h[7],v),T=_(h[8],w),C=y(w,p),E=x(w,p),B=Math.abs(E/C),P=1+B*B,M=P<a?[B,this._distanceAlongCorrection]:[Math.sqrt(a-1),!0],V=M[0],A=M[1],D=P<o?[B,this._distanceAlongCorrection]:[Math.sqrt(o-1),!0],F=D[0],N=D[1];if(N&&A){I((j=e.vectors.items[0]).vector,_(h[9],p),b(h[10],_(h[11],t),V)),j.texCoords[0]=0,j.texCoords[1]=c,j.direction[0]=this._distanceAlongCorrection?t[0]:0,j.direction[1]=this._distanceAlongCorrection?t[1]:0,I((z=e.vectors.items[1]).vector,_(h[12],d),b(h[13],i,V)),z.texCoords[0]=0,z.texCoords[1]=c,z.direction[0]=this._distanceAlongCorrection?i[0]:0,z.direction[1]=this._distanceAlongCorrection?i[1]:0,(R=e.vectors.items[2]).vector[0]=0,R.vector[1]=0,R.texCoords[0]=0,R.texCoords[1]=0,R.direction[0]=0,R.direction[1]=0,I((O=e.vectors.items[3]).vector,p,b(h[14],t,F)),O.texCoords[0]=0,O.texCoords[1]=f,O.direction[0]=this._distanceAlongCorrection?t[0]:0,O.direction[1]=this._distanceAlongCorrection?t[1]:0;var L=e.vectors.items[4];I(L.vector,d,b(h[15],_(h[16],i),F)),L.texCoords[0]=0,L.texCoords[1]=f,L.direction[0]=this._distanceAlongCorrection?i[0]:0,L.direction[1]=this._distanceAlongCorrection?i[1]:0,e.vectors.count=5,(U=e.lists[r.ENTRY]).items[0]=0,U.items[1]=2,U.items[2]=3,U.count=3,(q=e.lists[r.EXIT]).items[0]=1,q.items[1]=2,q.items[2]=4,q.count=3,P<o?((k=e.lists[r.CAP]).count=0,e.capCenter=void 0):((k=e.lists[r.CAP]).items[0]=3,k.items[1]=4,k.count=2,e.capCenter=2)}else if(!N&&A)I((j=e.vectors.items[0]).vector,_(h[9],p),b(h[10],_(h[11],t),V)),j.texCoords[0]=0,j.texCoords[1]=c,j.direction[0]=this._distanceAlongCorrection?t[0]:0,j.direction[1]=this._distanceAlongCorrection?t[1]:0,I((z=e.vectors.items[1]).vector,_(h[12],d),b(h[13],i,V)),z.texCoords[0]=0,z.texCoords[1]=c,z.direction[0]=this._distanceAlongCorrection?i[0]:0,z.direction[1]=this._distanceAlongCorrection?i[1]:0,(R=e.vectors.items[2]).vector[0]=0,R.vector[1]=0,R.texCoords[0]=0,R.texCoords[1]=0,R.direction[0]=0,R.direction[1]=0,b((O=e.vectors.items[3]).vector,w,1/C),O.texCoords[0]=0,O.texCoords[1]=f,O.direction[0]=0,O.direction[1]=0,e.vectors.count=4,(U=e.lists[r.ENTRY]).items[0]=0,U.items[1]=2,U.items[2]=3,U.count=3,(q=e.lists[r.EXIT]).items[0]=1,q.items[1]=2,q.items[2]=3,q.count=3,e.lists[r.CAP].count=0,e.capCenter=void 0;else if(N&&!A){var R,O,k;b((j=e.vectors.items[0]).vector,T,1/C),j.texCoords[0]=0,j.texCoords[1]=c,j.direction[0]=0,j.direction[1]=0,(z=e.vectors.items[1]).vector[0]=0,z.vector[1]=0,z.texCoords[0]=0,z.texCoords[1]=0,z.direction[0]=0,z.direction[1]=0,I((R=e.vectors.items[2]).vector,p,b(h[9],t,F)),R.texCoords[0]=0,R.texCoords[1]=f,R.direction[0]=this._distanceAlongCorrection?t[0]:0,R.direction[1]=this._distanceAlongCorrection?t[1]:0,I((O=e.vectors.items[3]).vector,d,b(h[10],_(h[11],i),F)),O.texCoords[0]=0,O.texCoords[1]=f,O.direction[0]=this._distanceAlongCorrection?i[0]:0,O.direction[1]=this._distanceAlongCorrection?i[1]:0,e.vectors.count=4,(U=e.lists[r.ENTRY]).items[0]=0,U.items[1]=1,U.items[2]=2,U.count=3,(q=e.lists[r.EXIT]).items[0]=0,q.items[1]=1,q.items[2]=3,q.count=3,P<o?((k=e.lists[r.CAP]).count=0,e.capCenter=void 0):((k=e.lists[r.CAP]).items[0]=2,k.items[1]=3,k.count=2,e.capCenter=1)}else if(!N&&!A){var j,z,U,q;b((j=e.vectors.items[0]).vector,T,1/C),j.texCoords[0]=0,j.texCoords[1]=c,j.direction[0]=0,j.direction[1]=0,b((z=e.vectors.items[1]).vector,w,1/C),z.texCoords[0]=0,z.texCoords[1]=f,z.direction[0]=0,z.direction[1]=0,e.vectors.count=2,(U=e.lists[r.ENTRY]).items[0]=0,U.items[1]=1,U.count=2,(q=e.lists[r.EXIT]).items[0]=0,q.items[1]=1,q.count=2,e.lists[r.CAP].count=0,e.capCenter=void 0}u<0&&(S(e.lists[r.ENTRY]),S(e.lists[r.EXIT]))},e.prototype.roundJoin=function(e,t,i,n){var o=x(t,i),u=0<o?[s,1]:[1,s],l=u[0],c=u[1],f=0<o?_(h[0],g(h[1],t)):g(h[2],t),p=0<o?_(h[3],g(h[4],i)):g(h[5],i),v=h[6];v[0]=f[0]+p[0],v[1]=f[1]+p[1];var w=m(h[7],v),T=_(h[8],w),E=y(w,f),B=x(w,f),P=Math.abs(B/E),M=1+P*P<a?[P,this._distanceAlongCorrection]:[Math.sqrt(a-1),!0],V=M[0];if(M[1]){(D=e.vectors.items[0]).vector[0]=f[0],D.vector[1]=f[1],D.texCoords[0]=0,D.texCoords[1]=c,D.direction[0]=0,D.direction[1]=0,(F=e.vectors.items[1]).vector[0]=p[0],F.vector[1]=p[1],F.texCoords[0]=0,F.texCoords[1]=c,F.direction[0]=0,F.direction[1]=0,I((N=e.vectors.items[2]).vector,_(h[9],f),b(h[10],_(h[11],t),V)),N.texCoords[0]=0,N.texCoords[1]=l,N.direction[0]=this._distanceAlongCorrection?t[0]:0,N.direction[1]=this._distanceAlongCorrection?t[1]:0,I((L=e.vectors.items[3]).vector,_(h[12],p),b(h[13],i,V)),L.texCoords[0]=0,L.texCoords[1]=l,L.direction[0]=this._distanceAlongCorrection?i[0]:0,L.direction[1]=this._distanceAlongCorrection?i[1]:0;var A=e.vectors.items[4];A.vector[0]=0,A.vector[1]=0,A.texCoords[0]=0,A.texCoords[1]=0,A.direction[0]=0,A.direction[1]=0,e.vectors.count=5,(R=e.lists[r.ENTRY]).items[0]=2,R.items[1]=4,R.items[2]=0,R.count=3,(O=e.lists[r.EXIT]).items[0]=3,O.items[1]=4,O.items[2]=1,O.count=3,e.capCenter=4}else{var D,F,N,L,R,O;(D=e.vectors.items[0]).vector[0]=f[0],D.vector[1]=f[1],D.texCoords[0]=0,D.texCoords[1]=c,D.direction[0]=0,D.direction[1]=0,(F=e.vectors.items[1]).vector[0]=p[0],F.vector[1]=p[1],F.texCoords[0]=0,F.texCoords[1]=c,F.direction[0]=0,F.direction[1]=0,b((N=e.vectors.items[2]).vector,T,1/E),N.texCoords[0]=0,N.texCoords[1]=l,N.direction[0]=0,N.direction[1]=0,(L=e.vectors.items[3]).vector[0]=0,L.vector[1]=0,L.texCoords[0]=0,L.texCoords[1]=0,L.direction[0]=0,L.direction[1]=0,e.vectors.count=4,(R=e.lists[r.ENTRY]).items[0]=2,R.items[1]=3,R.items[2]=0,R.count=3,(O=e.lists[r.EXIT]).items[0]=2,O.items[1]=3,O.items[2]=1,O.count=3,e.capCenter=3}C(d,f,p,n,o<0);var k,j=e.vectors.count,z=e.lists[r.CAP];for(k=z.items[0]=0;k<d.count;++k){var U=d.items[k],q=e.vectors.items[j+k];q.vector[0]=U[0],q.vector[1]=U[1],q.texCoords[0]=0,q.texCoords[1]=c,q.direction[0]=0,q.direction[1]=0,z.items[k+1]=j+k}z.items[d.count+1]=1,z.count=d.count+2,e.vectors.count=j+d.count,o<0&&(S(e.lists[r.ENTRY]),S(e.lists[r.EXIT]))},e.prototype.unitRoundJoin=function(e,t,i,n){var o=x(t,i),a=0<o?[s,1]:[1,s],u=a[0],l=a[1],c=0<o?_(h[0],g(h[1],t)):g(h[2],t),f=0<o?_(h[3],g(h[4],i)):g(h[5],i),p=e.vectors.items[0];p.vector[0]=c[0],p.vector[1]=c[1],p.texCoords[0]=0,p.texCoords[1]=l,p.direction[0]=0,p.direction[1]=0;var y=e.vectors.items[1];y.vector[0]=f[0],y.vector[1]=f[1],y.texCoords[0]=0,y.texCoords[1]=l,y.direction[0]=0,y.direction[1]=0;var v=e.vectors.items[2];_(v.vector,c),v.texCoords[0]=0,v.texCoords[1]=u,v.direction[0]=0,v.direction[1]=0;var m=e.vectors.items[3];_(m.vector,f),m.texCoords[0]=0,m.texCoords[1]=u,m.direction[0]=0,m.direction[1]=0;var b=e.vectors.items[4];b.vector[0]=0,b.vector[1]=0,b.texCoords[0]=0,b.texCoords[1]=0,b.direction[0]=0,b.direction[1]=0,e.vectors.count=5;var I=e.lists[r.ENTRY];I.items[0]=2,I.items[1]=0,I.count=2;var w=e.lists[r.EXIT];w.items[0]=3,w.items[1]=1,w.count=2,e.capCenter=4,C(d,c,f,n,o<0);var T,E=e.vectors.count,B=e.lists[r.CAP];for(T=B.items[0]=0;T<d.count;++T){var P=d.items[T],M=e.vectors.items[E+T];M.vector[0]=P[0],M.vector[1]=P[1],M.texCoords[0]=0,M.texCoords[1]=l,M.direction[0]=0,M.direction[1]=0,B.items[T+1]=E+T}B.items[d.count+1]=1,B.count=d.count+2,e.vectors.count=E+d.count,o<0&&(S(e.lists[r.ENTRY]),S(e.lists[r.EXIT]))},e.prototype.rectJoin=function(e,t,i){var n=g(h[0],t),o=g(h[1],i),a=e.vectors.items[0];a.vector[0]=n[0],a.vector[1]=n[1],a.texCoords[0]=0,a.texCoords[1]=s,a.direction[0]=0,a.direction[1]=0;var u=e.vectors.items[1];u.vector[0]=o[0],u.vector[1]=o[1],u.texCoords[0]=0,u.texCoords[1]=s,u.direction[0]=0,u.direction[1]=0;var l=e.vectors.items[2];_(l.vector,n),l.texCoords[0]=0,l.texCoords[1]=1,l.direction[0]=0,l.direction[1]=0;var c=e.vectors.items[3];_(c.vector,o),c.texCoords[0]=0,c.texCoords[1]=1,c.direction[0]=0,c.direction[1]=0,e.vectors.count=4;var f=e.lists[r.ENTRY];f.items[0]=0,f.items[1]=2,f.count=2;var p=e.lists[r.EXIT];p.items[0]=1,p.items[1]=3,p.count=2,e.capCenter=void 0},e}();t.Tessellator=L}.apply(null,i))||(e.exports=n)},weYu:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("xf8T"),r("SgdR"),r("jaBu"),r("qysZ"),r("VIrK"),r("bH65")],void 0===(n=function(e,t,r,i,n,o,a,s){function u(e,t,r){r*=.5;var i=Math.sin(r);return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=Math.cos(r),e}function l(e,t,r){var i=t[0],n=t[1],o=t[2],a=t[3],s=r[0],u=r[1],l=r[2],c=r[3];return e[0]=i*c+a*s+n*l-o*u,e[1]=n*c+a*u+o*s-i*l,e[2]=o*c+a*l+i*u-n*s,e[3]=a*c-i*s-n*u-o*l,e}function c(e,t,r,i){var n,a,s,u,l,c=t[0],f=t[1],p=t[2],h=t[3],d=r[0],y=r[1],v=r[2],m=r[3];return(a=c*d+f*y+p*v+h*m)<0&&(a=-a,d=-d,y=-y,v=-v,m=-m),1-a>o.EPSILON?(n=Math.acos(a),s=Math.sin(n),u=Math.sin((1-i)*n)/s,l=Math.sin(i*n)/s):(u=1-i,l=i),e[0]=u*c+l*d,e[1]=u*f+l*y,e[2]=u*p+l*v,e[3]=u*h+l*m,e}function f(e,t){var r,i=t[0]+t[4]+t[8];if(i>0)r=Math.sqrt(i+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var n=0;t[4]>t[0]&&(n=1),t[8]>t[3*n+n]&&(n=2);var o=(n+1)%3,a=(n+2)%3;r=Math.sqrt(t[3*n+n]-t[3*o+o]-t[3*a+a]+1),e[n]=.5*r,r=.5/r,e[3]=(t[3*o+a]-t[3*a+o])*r,e[o]=(t[3*o+n]+t[3*n+o])*r,e[a]=(t[3*a+n]+t[3*n+a])*r}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},t.setAxisAngle=u,t.getAxisAngle=function(e,t){var r=2*Math.acos(t[3]),i=Math.sin(r/2);return i>o.EPSILON?(e[0]=t[0]/i,e[1]=t[1]/i,e[2]=t[2]/i):(e[0]=1,e[1]=0,e[2]=0),r},t.multiply=l,t.rotateX=function(e,t,r){r*=.5;var i=t[0],n=t[1],o=t[2],a=t[3],s=Math.sin(r),u=Math.cos(r);return e[0]=i*u+a*s,e[1]=n*u+o*s,e[2]=o*u-n*s,e[3]=a*u-i*s,e},t.rotateY=function(e,t,r){r*=.5;var i=t[0],n=t[1],o=t[2],a=t[3],s=Math.sin(r),u=Math.cos(r);return e[0]=i*u-o*s,e[1]=n*u+a*s,e[2]=o*u+i*s,e[3]=a*u-n*s,e},t.rotateZ=function(e,t,r){r*=.5;var i=t[0],n=t[1],o=t[2],a=t[3],s=Math.sin(r),u=Math.cos(r);return e[0]=i*u+n*s,e[1]=n*u-i*s,e[2]=o*u+a*s,e[3]=a*u-o*s,e},t.calculateW=function(e,t){var r=t[0],i=t[1],n=t[2];return e[0]=r,e[1]=i,e[2]=n,e[3]=Math.sqrt(Math.abs(1-r*r-i*i-n*n)),e},t.slerp=c,t.random=function(e){var t=o.RANDOM(),r=o.RANDOM(),i=o.RANDOM(),n=Math.sqrt(1-t),a=Math.sqrt(t);return e[0]=n*Math.sin(2*Math.PI*r),e[1]=n*Math.cos(2*Math.PI*r),e[2]=a*Math.sin(2*Math.PI*i),e[3]=a*Math.cos(2*Math.PI*i),e},t.invert=function(e,t){var r=t[0],i=t[1],n=t[2],o=t[3],a=r*r+i*i+n*n+o*o,s=a?1/a:0;return e[0]=-r*s,e[1]=-i*s,e[2]=-n*s,e[3]=o*s,e},t.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},t.fromMat3=f,t.fromEuler=function(e,t,r,i){var n=.5*Math.PI/180;t*=n,r*=n,i*=n;var o=Math.sin(t),a=Math.cos(t),s=Math.sin(r),u=Math.cos(r),l=Math.sin(i),c=Math.cos(i);return e[0]=o*u*c-a*s*l,e[1]=a*s*c+o*u*l,e[2]=a*u*l-o*s*c,e[3]=a*u*c+o*s*l,e},t.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},t.copy=s.copy,t.set=s.set,t.add=s.add,t.mul=l,t.scale=s.scale,t.dot=s.dot,t.lerp=s.lerp,t.length=s.length,t.len=t.length,t.squaredLength=s.squaredLength,t.sqrLen=t.squaredLength,t.normalize=s.normalize,t.exactEquals=s.exactEquals,t.equals=s.equals,t.rotationTo=function(e,r,i){var n=a.dot(r,i);return n<-.999999?(a.cross(p,h,r),a.len(p)<1e-6&&a.cross(p,d,r),a.normalize(p,p),u(e,p,Math.PI),e):n>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(a.cross(p,r,i),e[0]=p[0],e[1]=p[1],e[2]=p[2],e[3]=1+n,t.normalize(e,e))};var p=n.create(),h=n.fromValues(1,0,0),d=n.fromValues(0,1,0);t.sqlerp=function(e,t,r,i,n,o){return c(y,t,n,o),c(v,r,i,o),c(e,y,v,2*o*(1-o)),e};var y=i.create(),v=i.create();t.setAxes=function(e,r,i,n){var o=m;return o[0]=i[0],o[3]=i[1],o[6]=i[2],o[1]=n[0],o[4]=n[1],o[7]=n[2],o[2]=-r[0],o[5]=-r[1],o[8]=-r[2],t.normalize(e,f(e,o))};var m=r.create()}.apply(null,i))||(e.exports=n)},xfOW:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("xhoE"),r("qKT0"),r("U+RI")],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return e.call(this,12)||this}return r(t,e),t.prototype.add=function(e,t,r){var i=this.array;i.push(e),i.push(t),i.push(r)},t}(n);t.TriangleIndexBuffer=o;var a=function(e){function t(){return e.call(this,4)||this}return r(t,e),t.prototype.add=function(e){this.array.push(e)},t}(n);t.PointElementMemoryBuffer=a}.apply(null,i))||(e.exports=n)},yBJI:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("rjU6"),r("+nCE"),r("Kfys")],void 0===(n=function(e,t,r,i,n){function o(e){switch(e){case 5120:return Int8Array;case 5126:return Float32Array;case 5124:return Int32Array;case 5122:return Int16Array;case 5121:return Uint8Array;case 5125:return Uint32Array;case 5123:return Uint16Array}throw new Error("Unhandled data type: "+e)}return function(){function e(t,a,s,u,l){void 0===s&&(s=null),void 0===u&&(u=e.DefaultOffsets),void 0===l&&(l=e.DefaultIndices),this.preinterleaved=!0,this.primitiveType="triangle",this._positionData=null;var c=n.getStride(a)/4,f=t.length/c;this._hasDefaultIndices=l===e.DefaultIndices,this._hasDefaultIndices&&(l=i.generateDefaultIndexArray(f));for(var p={},h=0,d=a;h<d.length;h++){var y=d[h],v=new(o(y.type))(t.buffer),m=n.getBytesPerElement(y.type),g=y.count,x=y.offset/m,_=y.stride/m;p[y.name]={data:v,size:g,offsetIdx:x,strideIdx:_}}s&&(this._positionData=s,p.position={data:s.data,size:3,offsetIdx:0,strideIdx:3}),this._id=i.getNewId(),this._vertexData=t,this._vertexAttributes=p,this._layout=a,this._indexData=l,this._componentOffsets=r.createOffsets(u),this._gpuMemoryUsage=t.byteLength+(this._hasDefaultIndices?0:l.byteLength),this._indexCount=l.length}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentOffsets",{get:function(){return this._componentOffsets},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indexCount",{get:function(){return this._indexCount},enumerable:!0,configurable:!0}),e.prototype.toRenderData=function(){var e={id:this._id.toString(),preinterleaved:!0,indexData:this._hasDefaultIndices?null:this._indexData,indexCount:this._indexCount,vertexData:this._vertexData,layout:this._layout};return this._vertexData=null,this._indexData=null,this._vertexAttributes={position:this._vertexAttributes.position},e},e.prototype.getIndices=function(e){return"position"===e&&this._positionData?this._positionData.indices:this._indexData},e.prototype.getAttribute=function(e){return this._vertexAttributes[e]},e.prototype.estimateGpuMemoryUsage=function(){return this._gpuMemoryUsage},Object.defineProperty(e.prototype,"hasPositionData",{get:function(){return!!this._positionData},enumerable:!0,configurable:!0}),e.DefaultOffsets=new Uint32Array(0),e.DefaultIndices=new Uint32Array(0),e}()}.apply(null,i))||(e.exports=n)},"yre/":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("jZlN"),r("pcDC"),r("Z4y+"),r("KQcO")],void 0===(n=function(e,t,r,i,n,o){function a(e,t,r,i){return t}function s(e,t,r,i){switch(r){case 0:return f(e,t+i,0);case 1:return p(e,t+i,1)}}function u(e,t,r,i){switch(r){case 0:return f(e,t+i,0);case 1:return p(e,t+i,1);case 2:return f(e,t,2)}}function l(e,t,r,i){switch(r){case 0:return f(e,t+i,0);case 1:return p(e,t+i,1);case 2:return f(e,t,3)}}function c(e,t,r,i){switch(r){case 0:return f(e,t+i,0);case 1:return p(e,t+i,1);case 2:case 3:return f(e,t,3)}}function f(e,t,r){var i=e.translate,n=e.scale;return i[r]+t*n[r]}function p(e,t,r){var i=e.translate,n=e.scale;return i[r]-t*n[r]}Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function e(e){this.options=e,this.geometryTypes=["point","multipoint","polyline","polygon"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=a,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0}return e.prototype.createFeatureResult=function(){return{exceededTransferLimit:!1,features:[],fields:[],hasM:!1,hasZ:!1,geometryType:null,objectIdFieldName:null,globalIdFieldName:null,geometryProperties:null,geohashFieldName:null,spatialReference:null,transform:null}},e.prototype.finishFeatureResult=function(e){this.options.applyTransform&&(e.transform=null)},e.prototype.createSpatialReference=function(){return new n},e.prototype.addField=function(e,t){e.fields.push(o.fromJSON(t))},e.prototype.addFeature=function(e,t){var r=this.options.maxStringAttributeLength?this.options.maxStringAttributeLength:0;if(r>0)for(var i in t.attributes){var n=t.attributes[i];"string"==typeof n&&n.length>r&&delete t.attributes[i]}e.features.push(t)},e.prototype.prepareFeatures=function(e){switch(this.options.applyTransform&&e.transform&&(this.transform=e.transform,this.applyTransform=this.deriveApplyTransform(e)),this.vertexDimension=2,e.hasZ&&this.vertexDimension++,e.hasM&&this.vertexDimension++,e.geometryType){case"point":this.addCoordinate=this.addCoordinatePoint.bind(this),this.createGeometry=this.createPointGeometry.bind(this);break;case"polygon":this.addCoordinate=this.addCoordinatePolygon.bind(this),this.createGeometry=this.createPolygonGeometry.bind(this);break;case"polyline":this.addCoordinate=this.addCoordinatePolyline.bind(this),this.createGeometry=this.createPolylineGeometry.bind(this);break;case"multipoint":this.addCoordinate=this.addCoordinateMultipoint.bind(this),this.createGeometry=this.createMultipointGeometry.bind(this);break;default:i.neverReached(e.geometryType)}},e.prototype.createFeature=function(e){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,{uid:r.generateUID(),objectId:null,attributes:{},geometry:null,visible:!0}},e.prototype.addLength=function(e,t,r){0===this.lengths.length&&(this.toAddInCurrentPath=t),this.lengths.push(t)},e.prototype.createPointGeometry=function(e){var t={type:"point",x:0,y:0,spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM};return t.hasZ&&(t.z=0),t.hasM&&(t.m=0),t},e.prototype.addCoordinatePoint=function(e,t,r,i){switch(t=this.applyTransform(this.transform,t,i,0),i){case 0:e.x=t;break;case 1:e.y=t;break;case 2:e.hasZ?e.z=t:e.m=t;break;case 3:e.m=t}},e.prototype.transformPathLikeValue=function(e,t){var r=0;return t<=1&&(r=this.previousCoordinate[t],this.previousCoordinate[t]+=e),this.applyTransform(this.transform,e,t,r)},e.prototype.addCoordinatePolyline=function(e,t,r,i){this.dehydratedAddPointsCoordinate(e.paths,t,r,i)},e.prototype.addCoordinatePolygon=function(e,t,r,i){this.dehydratedAddPointsCoordinate(e.rings,t,r,i)},e.prototype.addCoordinateMultipoint=function(e,t,r){0===r&&e.points.push([]);var i=this.transformPathLikeValue(t,r);e.points[e.points.length-1].push(i)},e.prototype.createPolygonGeometry=function(e){return{type:"polygon",rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},e.prototype.createPolylineGeometry=function(e){return{type:"polyline",paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},e.prototype.createMultipointGeometry=function(e){return{type:"multipoint",points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},e.prototype.dehydratedAddPointsCoordinate=function(e,t,r,i){if(null===this.coordinateBuffer){var n=this.lengths.reduce(function(e,t){return e+t},0);this.coordinateBuffer=new Float64Array(n*this.vertexDimension)}0===i&&0==this.toAddInCurrentPath--&&(e.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);var o=this.transformPathLikeValue(t,i),a=e[e.length-1];0===i&&a.push(new Float64Array(this.coordinateBuffer.buffer,this.coordinateBufferPtr*Float64Array.BYTES_PER_ELEMENT,this.vertexDimension)),this.coordinateBuffer[this.coordinateBufferPtr++]=o},e.prototype.deriveApplyTransform=function(e){var t=e.hasZ,r=e.hasM;return t&&r?c:t?u:r?l:s},e}();t.Context=h}.apply(null,i))||(e.exports=n)},zDti:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("Q2wQ"),r("HZ3d"),r("0+sO"),r("qMld"),r("8uEs"),r("d466"),r("Lzvl"),r("fw2w"),r("nrlZ"),r("Fzzg"),r("+6sX"),r("Jvs9"),r("Q2Em"),r("V1i6")],void 0===(n=function(e,t,r,i,n,o,a,s,u,l,c,f,p,h,d,y){function v(e,n,o){return i(this,void 0,void 0,function(){var i,a,c,f,p;return r(this,function(r){switch(r.label){case 0:return e?(i=e.where,e.where=i=i&&i.trim(),(!i||/^1 *= *1$/.test(i)||n&&n===i)&&(e.where=null),e.geometry?[4,m(e)]:[2,e]):[2,null];case 1:return a=r.sent(),e.distance=0,e.units=null,"esriSpatialRelEnvelopeIntersects"===e.spatialRel&&(c=e.geometry.spatialReference,(a=s.getGeometryExtent(a)).spatialReference=c),e.geometry=a,[4,d.checkProjectionSupport(a.spatialReference,o)];case 2:return r.sent(),[4,l.normalizeCentralMeridian(u.fromJSON(a))];case 3:return f=r.sent(),[4,d.project(f[0].toJSON(),f[0].spatialReference,o)];case 4:if(!(p=r.sent()))throw t.QUERY_ENGINE_EMPTY_RESULT;return p.spatialReference=o,e.geometry=p,[2,e]}})})}function m(e){var t=e.geometry,r=e.distance,i=e.units;if(null==r)return o.resolve(t);var n=t.spatialReference,s=i&&g.fromJSON(i)||a.getUnitString(n);return(n&&(c.isGeographic(n)||c.isWebMercator(n))?o.resolve(t):d.checkProjectionSupport(n,c.WGS84).then(function(){return d.project(t,c.WGS84)})).then(function(e){return y.getGeodesicBufferOperator().then(function(t){return t(e,r,s).toJSON()})})}Object.defineProperty(t,"__esModule",{value:!0});var g=new n.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});t.QUERY_ENGINE_EMPTY_RESULT=Object.freeze({});var x=new h.default,_=new h.default,b={esriGeometryPoint:p.convertToPoint,esriGeometryPolyline:p.convertToPolyline,esriGeometryPolygon:p.convertToPolygon,esriGeometryMultipoint:p.convertToMultipoint};t.getCentroid=function(e,t,r){if("esriGeometryPolygon"!==e.geometryType)return null;if(!t.centroid&&!t.geometry)return null;if(t.centroid||(t.centroid=f.getCentroidOptimizedGeometry(new h.default,t.geometry,e.hasZ,e.hasM)),r){var i=p.quantizeOptimizedGeometry(_,t.centroid,e.hasZ,e.hasM,"esriGeometryPoint",r);return p.convertToPoint(i,e.hasZ,e.hasM)}return p.convertToPoint(t.centroid,e.hasZ,e.hasM)},t.getGeometry=function(e,t,r,i){var n="coords"in t?t:t.geometry;if(!n)return null;if(r){var o=p.generalizeOptimizedGeometry(x,n,e.hasZ,e.hasM,e.geometryType,r);return i?(o=p.quantizeOptimizedGeometry(_,o,e.hasZ,e.hasM,e.geometryType,i),b[e.geometryType](o,e.hasZ,e.hasM)):b[e.geometryType](o,e.hasZ,e.hasM)}if(i)return o=p.quantizeOptimizedGeometry(_,n,e.hasZ,e.hasM,e.geometryType,i),b[e.geometryType](o,e.hasZ,e.hasM);return b[e.geometryType](n,e.hasZ,e.hasM)},t.normalizeQuery=function(e,t,n){return i(this,void 0,void 0,function(){var i,o,a,s,u;return r(this,function(r){if(i=e.outFields,o=e.orderByFields,a=e.groupByFieldsForStatistics,s=e.outStatistics,i)for(u=0;u<i.length;u++)i[u]=i[u].trim();if(o)for(u=0;u<o.length;u++)o[u]=o[u].trim();if(a)for(u=0;u<a.length;u++)a[u]=a[u].trim();if(s)for(u=0;u<s.length;u++)s[u].onStatisticField&&(s[u].onStatisticField=s[u].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),[2,v(e,t,n)]})})},t.normalizeFilter=function(e,t,n){return i(this,void 0,void 0,function(){return r(this,function(r){return[2,v(e,t,n)]})})},t.cleanFromGeometryEngine=function(e){return e&&I in e?JSON.parse(JSON.stringify(e,w)):e};var I="_geVersion",w=function(e,t){return e!==I?t:void 0}}.apply(null,i))||(e.exports=n)},zlCF:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r,i,n){void 0===r&&(r=0),this.TypedArrayConstructor=e,this.elementCount=1;var o=this.TypedArrayConstructor;void 0===i&&(i=o.BYTES_PER_ELEMENT);var a=0===t.byteLength?0:r;this.typedBuffer=null==n?new o(t,a):new o(t,a,(n-r)/o.BYTES_PER_ELEMENT),this.typedBufferStride=i/o.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}return e.prototype.get=function(e){return this.typedBuffer[e*this.typedBufferStride]},e.prototype.set=function(e,t){this.typedBuffer[e*this.typedBufferStride]=t},Object.defineProperty(e.prototype,"buffer",{get:function(){return this.typedBuffer.buffer},enumerable:!0,configurable:!0}),e.ElementCount=1,e}();t.BufferViewScalarImpl=r}.apply(null,i))||(e.exports=n)}}]);
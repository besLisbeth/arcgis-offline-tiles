(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/layers/support/popupUtils":"I6zq","esri/views/3d/layers/ImageryLayerView3D":"t7z+","esri/views/layers/ImageryLayerView":"yx9Y"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{I6zq:function(e,t,i){var a,r;a=[i.dj.c(e.i),t,i("Q2wQ"),i("HZ3d"),i("ll/V"),i("LxLY"),i("k7g7")],void 0===(r=function(e,t,i,a,r,n,p){Object.defineProperty(t,"__esModule",{value:!0}),t.getRequiredFields=function(e,t){return void 0===t&&(t=e.popupTemplate),a(this,void 0,void 0,function(){var a,l,o,s,u,d,c,h,y,f,m;return i(this,function(i){switch(i.label){case 0:return n.isSome(t)?[4,t.getRequiredFields(e.fields)]:[2,[]];case 1:return a=i.sent(),l=t.lastEditInfoEnabled,o=e.objectIdField,s=e.typeIdField,r.includes(a,"*")?[2,["*"]]:(d=p.fixFields,c=[e.fields],y=(h=a).concat,f=[[s]],(m=l)?[4,p.getFeatureEditFields(e)]:[3,3]);case 2:m=i.sent(),i.label=3;case 3:return(u=d.apply(void 0,c.concat([y.apply(h,f.concat([m||null]))])))&&o&&p.hasField(e.fields,o)&&-1===u.indexOf(o)&&u.push(o),[2,u]}})})},t.getFetchPopupTemplate=function(e,t){return e.popupTemplate?e.popupTemplate:n.isSome(t)&&t.defaultPopupTemplateEnabled&&n.isSome(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}}.apply(null,a))||(e.exports=r)},"t7z+":function(e,t,i){var a,r;a=[i.dj.c(e.i),t,i("9opi"),i("qKT0"),i("8MXS"),i("Vx27"),i("FRff"),i("yx9Y")],void 0===(r=function(e,t,i,a,r,n,p,l){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.updateWhenStationary=!0,t}return i(t,e),t.prototype.initialize=function(){var e=this;this.handles.add([r.whenOnce(this.view.basemapTerrain,"ready",function(){return e.initializeMaximumDataResolution()}),this.layer.watch("exportImageServiceParameters.version",function(t){e.doRefresh()})])},t.prototype.initializeMaximumDataResolution=function(){var e=this.view.basemapTerrain.spatialReference,t=this.layer.fullExtent;t&&e.equals(t.spatialReference)&&(this.maximumDataResolution={x:this.layer.pixelSizeX,y:this.layer.pixelSizeY})},t.prototype.processResult=function(e,t){if(t.imageElement)e.image=t.imageElement;else{e.image=document.createElement("canvas"),e.pixelData=t.pixelData;var i=e.image,a=i.getContext("2d"),r=this.layer.applyFilter(e.pixelData).pixelBlock;i.width=r.width,i.height=r.height;var n=a.createImageData(r.width,r.height),p=r.getAsRGBA();n.data.set(p),a.putImageData(n,0,0)}},t.prototype.updateImage=function(e){if(e&&e.pixelData){var t=e.image,i=t.getContext("2d"),a=this.layer.applyFilter(e.pixelData).pixelBlock,r=i.createImageData(a.width,a.height),n=a.getAsRGBA();return t.width=a.width,t.height=a.height,r.data.set(n),i.putImageData(r,0,0),!0}return!1},a([n.property()],t.prototype,"layer",void 0),a([n.subclass("esri.views.3d.layers.ImageryLayerView3D")],t)}(n.declared(p,l))}.apply(null,a))||(e.exports=r)},yx9Y:function(e,t,i){var a,r;a=[i.dj.c(e.i),t,i("9opi"),i("qKT0"),i("Q2wQ"),i("HZ3d"),i("ma1f"),i("LxLY"),i("qMld"),i("Vx27"),i("IpeC"),i("7XLS"),i("I6zq")],void 0===(r=function(e,t,i,a,r,n,p,l,o,s,u,d,c){return function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.prototype.fetchPopupFeatures=function(e,t){return n(this,void 0,void 0,function(){var i,a,n,s,d,h;return r(this,function(r){switch(r.label){case 0:if(i=this.layer,!e)return[2,o.reject(new p("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:i}))];if(a=i.popupEnabled,n=c.getFetchPopupTemplate(i,t),!a||!l.isSome(n))throw new p("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:a,popupTemplate:n});return[4,n.getRequiredFields()];case 1:return s=r.sent(),(d=new u).geometry=e,d.outFields=s,h={rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0,layerView:this,popupTemplate:n},[2,i.queryVisibleRasters(d,h).then(function(e){return e})]}})})},a([s.property()],t.prototype,"layer",void 0),a([s.subclass("esri.views.layers.ImageryLayerView")],t)}(s.declared(d))}.apply(null,a))||(e.exports=r)}}]);
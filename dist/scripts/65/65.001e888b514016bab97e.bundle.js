(function(){(this||window).webpackJsonp.registerAbsMids({"esri/renderers/support/clickToleranceUtils":"/E+R","esri/views/3d/layers/support/popupUtils3D":"2r2d","esri/core/requireUtils":"ADZV","esri/views/3d/layers/MapImageLayerView3D":"QYP8","esri/views/layers/MapImageLayerView":"xNtg"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{"/E+R":function(e,t,r){var a,n;a=[r.dj.c(e.i),t],void 0===(n=function(e,t){function r(e,t){return t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):t&&t.yoffset?Math.max(e,Math.abs(t.yoffset)):e}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateTolerance=function(e){if(!e)return 6;if("simple"===e.type)return r(6,e.symbol);if("unique-value"===e.type){var t=6;return e.uniqueValueInfos.forEach(function(e){t=r(t,e.symbol)}),t}if("class-breaks"===e.type){var a=6;return e.classBreakInfos.forEach(function(e){a=r(a,e.symbol)}),a}return e.type,6}}.apply(null,a))||(e.exports=n)},"2r2d":function(e,t,r){var a,n;a=[r.dj.c(e.i),t,r("xhoE"),r("qKT0"),r("TMur"),r("LxLY"),r("8uEs"),r("/E+R")],void 0===(n=function(e,t,r,a,n,i,o,s){function u(e,t,r){var a=r.get("basemapTerrain"),i=r.get("basemapTerrain.overlayManager"),s=i?i.overlayPixelSizeInMapUnits(e):1,u=a&&!a.spatialReference.equals(r.spatialReference)?o.getMetersPerUnitForSR(a.spatialReference)/o.getMetersPerUnitForSR(r.spatialReference):t*s,l=e.x-u,c=e.y-u,p=e.x+u,f=e.y+u,y=r.spatialReference;return new n.Extent({xmin:Math.min(l,p),ymin:Math.min(c,f),xmax:Math.max(l,p),ymax:Math.max(c,f),spatialReference:y})}Object.defineProperty(t,"__esModule",{value:!0}),t.createQueryGeometry=u,t.intersectsDrapedGeometry=function(e,t,r){var a=r.toMap(e);return i.isNone(a)?null:u(a,s.calculateTolerance(),r).intersects(t)?a:null}}.apply(null,a))||(e.exports=n)},ADZV:function(e,t,r){var a,n;a=[r.dj.c(e.i),t,r("qMld")],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.when=function e(t,a){return Array.isArray(a)?r.create(function(e){t(a,function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e(t)})}):e(t,[a]).then(function(e){return e[0]})},t.getAbsMid=function(e,t,r){return t.toAbsMid?t.toAbsMid(e):r.id.replace(/\/[^\/]*$/gi,"/")+e}}.apply(null,a))||(e.exports=n)},QYP8:function(e,t,r){var a,n;a=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("Vx27"),r("VTDq"),r("FRff"),r("2r2d"),r("xNtg")],void 0===(n=function(e,t,r,a,n,i,o,s,u){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._exportImageParameters=null,t._imageVersion=null,t.updateWhenStationary=!0,t}return r(t,e),t.prototype.initialize=function(){var e=this;this._exportImageParameters=new i.ExportImageParameters({layer:this.layer}),this.handles.add(this._exportImageParameters.watch("version",function(t){e._imageVersion!==t&&(e._imageVersion=t,e.refetch())}))},t.prototype.destroy=function(){this._exportImageParameters&&(this._exportImageParameters.layer=null,this._exportImageParameters.destroy(),this._exportImageParameters=null)},t.prototype.createFetchPopupFeaturesQueryGeometry=function(e,t){return s.createQueryGeometry(e,t,this.view)},t.prototype.beforeFetch=function(){this._exportImageParameters.scale!==this.view.scale&&(this._exportImageParameters.scale=this.view.scale),this._imageVersion=this._exportImageParameters.version},a([n.subclass("esri.views.3d.layers.MapImageLayerView3D")],t)}(n.declared(o,u))}.apply(null,a))||(e.exports=n)},xNtg:function(e,t,r){var a,n;a=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("Q2wQ"),r("HZ3d"),r("WYKK"),r("ma1f"),r("qMld"),r("Vx27"),r("/E+R"),r("7XLS")],void 0===(n=function(e,t,r,a,n,i,o,s,u,l,c,p){return function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.fetchPopupFeatures=function(e){return i(this,void 0,void 0,function(){var t,r,a,i=this;return n(this,function(n){return t=this.layer,e?(r=this.get("view.scale"),a=t.allSublayers.toArray().filter(function(e){var t=0===e.minScale||r<=e.minScale,a=0===e.maxScale||r>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&t&&a}),[2,u.eachAlways(a.map(function(t){return o.safeCast(t.popupTemplate.getRequiredFields()).then(function(r){var a=t.createQuery(),n=c.calculateTolerance(t.renderer);return a.geometry=i.createFetchPopupFeaturesQueryGeometry(e,n),a.outFields=r,t.queryFeatures(a).then(function(e){return e.features})})})).then(function(e){return[].concat.apply([],e.map(function(e){return e.value}).filter(Boolean))})]):[2,u.reject(new s("mapimagelayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:t}))]})})},a([l.property()],t.prototype,"layer",void 0),a([l.subclass("esri.views.layers.MapImageLayerView")],t)}(l.declared(p))}.apply(null,a))||(e.exports=n)}}]);
(function(){(this||window).webpackJsonp.registerAbsMids({"esri/core/requireUtils":"ADZV","esri/layers/ElevationLayer":"GAgw","esri/layers/support/LercWorker":"S+mV"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{ADZV:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r("qMld")],void 0===(o=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.when=function e(t,n){return Array.isArray(n)?r.create(function(e){t(n,function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e(t)})}):e(t,[n]).then(function(e){return e[0]})},t.getAbsMid=function(e,t,r){return t.toAbsMid?t.toAbsMid(e):r.id.replace(/\/[^\/]*$/gi,"/")+e}}.apply(null,n))||(e.exports=o)},GAgw:function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r("2Atf"),r("9opi"),r("qKT0"),r("gyO4"),r("eMAb"),r("zp6E"),r("ma1f"),r("qMld"),r("Vx27"),r("MFVu"),r("0RER"),r("WhPF"),r("FEX1"),r("QJ8R"),r("EtsK"),r("S+mV")],void 0===(o=function(e,t,n,o,i,a,p,u,l,c,s,d,y,h,f,v,m,g){return function(e){function t(t){var r=e.call(this)||this;return r.copyright=null,r.heightModelInfo=null,r.path=null,r.opacity=1,r.operationalLayerType="ArcGISTiledElevationServiceLayer",r.type="elevation",r.url=null,r.version=null,r._lercWorker=g.acquireInstance(),r}return o(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?n({url:e},t):e},t.prototype.destroy=function(){g.releaseInstance(this._lercWorker),this._lercWorker=null},Object.defineProperty(t.prototype,"minScale",{get:function(){},set:function(e){this.constructed&&p.deprecated(this.declaredClass+".minScale support has been removed.","","4.5")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxScale",{get:function(){},set:function(e){this.constructed&&p.deprecated(this.declaredClass+".maxScale support has been removed.","","4.5")},enumerable:!0,configurable:!0}),t.prototype.readVersion=function(e,t){var r=t.currentVersion;return r||(r=9.3),r},t.prototype.load=function(){var e=this;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:function(e){for(var t=0;t<e.typeKeywords.length;t++)if("elevation 3d layer"===e.typeKeywords[t].toLowerCase())return!0;throw new l("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"})}}).then(function(){return e._fetchImageService()},function(){return e._fetchImageService()})),this.when()},t.prototype.fetchTile=function(e,t,r,n){var o=this;return void 0===n&&(n=0),this.load().then(function(){return o._fetchTileAvailability(e,t,r)}).then(function(){return u(o.getTileUrl(e,t,r),{responseType:"array-buffer"})}).then(function(e){return o._lercWorker.decode(e.data,{noDataValue:n,returnFileInfo:!0})}).then(function(e){return{values:e.pixelData,width:e.width,height:e.height,maxZError:e.fileInfo.maxZError,noDataValue:e.noDataValue,minValue:e.minValue,maxValue:e.maxValue}})},t.prototype.getTileUrl=function(e,t,r){var o=!this.tilemapCache&&this.supportsBlankTile,i=a.objectToQuery(n({},this.parsedUrl.query,{blankTile:!o&&null}));return this.parsedUrl.path+"/tile/"+e+"/"+t+"/"+r+(i?"?"+i:"")},t.prototype.queryElevation=function(e,t){var r=this;return this._importElevationQuery().then(function(n){return(new n.ElevationQuery).query(r,e,t)})},t.prototype.createElevationSampler=function(e,t){var r=this;return this._importElevationQuery().then(function(n){return(new n.ElevationQuery).createSampler(r,e,t)})},t.prototype.importLayerViewModule=function(e){switch(e.type){case"2d":return c.reject(new l("elevation-layer:view-not-supported","ElevationLayer is only supported in 3D"));case"3d":return c.create(function(e){return Promise.all([r.e(0),r.e(6),r.e(9),r.e(72)]).then(function(){var t=[r("ujdx")];e.apply(null,t)}.bind(this)).catch(r.oe)})}},t.prototype._fetchTileAvailability=function(e,t,r){return this.tilemapCache?this.tilemapCache.fetchAvailability(e,t,r):c.resolve("unknown")},t.prototype._fetchImageService=function(){var e=this;return c.resolve().then(function(){if(e.resourceInfo)return e.resourceInfo;var t={query:n({f:"json"},e.parsedUrl.query),responseType:"json"};return u(e.parsedUrl.path,t)}).then(function(t){t.ssl&&(e.url=e.url.replace(/^http:/i,"https:")),e.read(t.data,{origin:"service",url:e.parsedUrl})})},t.prototype._importElevationQuery=function(){return c.create(function(e){r.e(34).then(function(){var t=[r("T16p")];e.apply(null,t)}.bind(this)).catch(r.oe)})},i([s.property({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),i([s.property({readOnly:!0,type:d})],t.prototype,"heightModelInfo",void 0),i([s.property({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],t.prototype,"path",void 0),i([s.property({type:["show","hide"]})],t.prototype,"listMode",void 0),i([s.property({json:{read:!1,write:!1}})],t.prototype,"minScale",null),i([s.property({json:{read:!1,write:!1}})],t.prototype,"maxScale",null),i([s.property({json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"opacity",void 0),i([s.property({type:["ArcGISTiledElevationServiceLayer"]})],t.prototype,"operationalLayerType",void 0),i([s.property()],t.prototype,"resourceInfo",void 0),i([s.property({json:{read:!1},value:"elevation",readOnly:!0})],t.prototype,"type",void 0),i([s.property(m.url)],t.prototype,"url",void 0),i([s.property()],t.prototype,"version",void 0),i([s.reader("version",["currentVersion"])],t.prototype,"readVersion",null),i([s.subclass("esri.layers.ElevationLayer")],t)}(s.declared(y,h,f,v))}.apply(null,n))||(e.exports=o)},"S+mV":function(e,t,r){var n,o;n=[r.dj.c(e.i),t,r("xhoE"),r("qMld"),r("ADZV"),r("8V7H"),r.dj.m(e)],void 0===(o=function(e,t,n,o,i,a,p){function u(){return o.create(function(e){r.e(89).then(function(){var t=[r("Rc7o")];e.apply(null,t)}.bind(this)).catch(r.oe)})}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(){}return e.prototype._decode=function(e){return u().then(function(t){var r=(0,t.decode)(e.buffer,e.options);return{result:r,transferList:[r.pixelData.buffer]}})},e}(),c=function(t){function r(r){var n=t.call(this)||this;return n.scheduler=r,n._thread=void 0,a.open(i.getAbsMid("./LercWorker",e,p),{strategy:"dedicated",scheduler:r}).then(function(e){void 0===n._thread?n._thread=e:e.close()}),n}return n(r,t),r.prototype.destroy=function(){this._thread&&this._thread.close(),this._thread=null},r.prototype.decode=function(e,t){return e&&0!==e.byteLength?this._thread?this._thread.invoke("_decode",{buffer:e,options:t},{transferList:[e]}):u().then(function(r){return(0,r.decode)(e,t)}):o.resolve(null)},r}(l),s=new Map;t.acquireInstance=function(e){var t=s.get(e);return t||(t={instance:new c(e),ref:0},s.set(e,t)),++t.ref,t.instance},t.releaseInstance=function(e){if(null!=e){var t=e.scheduler,r=s.get(t);r&&--r.ref<=0&&(r.instance.destroy(),s.delete(t))}},t.default=function(){return new l}}.apply(null,n))||(e.exports=o)}}]);
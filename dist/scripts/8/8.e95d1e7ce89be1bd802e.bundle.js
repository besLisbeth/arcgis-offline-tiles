(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/2d/engine/webgl/util/Writer":"3vQA","esri/views/3d/layers/support/FastSymbolUpdates":"3w6h","esri/views/2d/engine/webgl/color":"4F/P","esri/views/2d/engine/webgl/SymbolProperties":"7AYJ","esri/views/3d/support/debugFlags":"Dk48","esri/views/2d/engine/webgl/number":"Dos2","esri/views/2d/engine/webgl/visualVariablesUtils":"G59t","esri/views/2d/engine/webgl/enums":"JNkf","esri/views/webgl/Texture":"Zp3t","esri/views/2d/engine/webgl/Utils":"apbF","esri/views/2d/engine/webgl/WGLDisplayObject":"azm3","esri/views/2d/engine/webgl/collisions/Metric":"fVTS","esri/views/2d/engine/webgl/util/serializationUtils":"flWe","esri/views/2d/engine/webgl/WGLDisplayRecord":"hNI9","esri/views/2d/engine/webgl/mesh/VertexBuffer":"ph8t","esri/views/2d/engine/webgl/collisions/BoundingBox":"x84Q","esri/views/2d/engine/webgl/MeshData":"yai7"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"3vQA":function(e,t,i){var r,n;r=[i.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){this._pos=0;var i=t?this._roundToNearest(t,e.BYTES_PER_ELEMENT):40;this._array=new ArrayBuffer(i),this._buffer=new e(this._array),this._ctor=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this._pos},enumerable:!0,configurable:!0}),e.prototype._roundToNearest=function(e,t){var i=Math.round(e);return i+(t-i%t)},e.prototype._ensureSize=function(e){if(this._pos+e>=this._buffer.length){var t=this._roundToNearest(1.5*(this._array.byteLength+e*this._buffer.BYTES_PER_ELEMENT),this._buffer.BYTES_PER_ELEMENT),i=new ArrayBuffer(t),r=new this._ctor(i);r.set(this._buffer,0),this._array=i,this._buffer=r}},e.prototype.writeF32=function(e){this._ensureSize(1);var t=this._pos;return new Float32Array(this._array,4*this._pos,1)[0]=e,this._pos++,t},e.prototype.push=function(e){this._ensureSize(1);var t=this._pos;return this._buffer[this._pos++]=e,t},e.prototype.writeRegion=function(e){this._ensureSize(e.length);var t=this._pos;return this._buffer.set(e,this._pos),this._pos+=e.length,t},e.prototype.buffer=function(){var e=this._array.slice(0,4*this._pos);return this.destroy(),e},e.prototype.destroy=function(){this._array=null,this._buffer=null},e}();t.default=i}.apply(null,r))||(e.exports=n)},"3w6h":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("pcDC"),i("YX1r"),i("51bw"),i("FXVB"),i("1m5D"),i("0LE5"),i("Rdxj"),i("4oaH"),i("Dk48")],void 0===(n=function(e,t,i,r,n,o,s,a,l,u,p){function c(e){return null!=e}function f(e){return"number"==typeof e}function h(e){return"string"==typeof e}function d(e){return null==e||h(e)}function _(e,t){e&&e.push(t),v(t)}function v(e){}function E(e,t,i,r){void 0===r&&(r=s.mat4f64.create());var n=e||0,a=t||0,l=i||0;return 0!==n&&o.mat4.rotateZ(r,r,-n/180*Math.PI),0!==a&&o.mat4.rotateX(r,r,a/180*Math.PI),0!==l&&o.mat4.rotateY(r,r,l/180*Math.PI),r}function T(e,t,i,r,n){var o=e.minSize,s=e.maxSize;if(e.expression)return _(n,"Could not convert size info: expression not supported"),!1;if(e.useSymbolValue){var a=r.symbolSize[i];return t.minSize[i]=a,t.maxSize[i]=a,t.offset[i]=t.minSize[i],t.factor[i]=0,t.type[i]=1,!0}if(c(e.field))return c(e.stops)?2===e.stops.length&&f(e.stops[0].size)&&f(e.stops[1].size)?(y(e.stops[0].size,e.stops[1].size,e.stops[0].value,e.stops[1].value,t,i),t.type[i]=1,!0):(_(n,"Could not convert size info: stops only supported with 2 elements"),!1):f(o)&&f(s)&&c(e.minDataValue)&&c(e.maxDataValue)?(y(o,s,e.minDataValue,e.maxDataValue,t,i),t.type[i]=1,!0):null!=u.meterIn[e.valueUnit]?(t.minSize[i]=-1/0,t.maxSize[i]=1/0,t.offset[i]=0,t.factor[i]=1/u.meterIn[e.valueUnit],t.type[i]=1,!0):"unknown"===e.valueUnit?(_(n,"Could not convert size info: proportional size not supported"),!1):(_(n,"Could not convert size info: scale-dependent size not supported"),!1);if(!c(e.field)){if(e.stops&&e.stops[0]&&f(e.stops[0].size))return t.minSize[i]=e.stops[0].size,t.maxSize[i]=e.stops[0].size,t.offset[i]=t.minSize[i],t.factor[i]=0,t.type[i]=1,!0;if(f(o))return t.minSize[i]=o,t.maxSize[i]=o,t.offset[i]=o,t.factor[i]=0,t.type[i]=1,!0}return _(n,"Could not convert size info: unsupported variant of sizeInfo"),!1}function y(e,t,i,r,n,o){var s=Math.abs(r-i)>0?(t-e)/(r-i):0;n.minSize[o]=s>0?e:t,n.maxSize[o]=s>0?t:e,n.offset[o]=e-i*s,n.factor[o]=s}function m(e,t,i,r){if(e.normalizationField||e.valueRepresentation)return _(r,"Could not convert size info: unsupported property"),null;if(!d(e.field))return _(r,"Could not convert size info: field is not a string"),null;if(t.size){if(e.field)if(t.size.field){if(e.field!==t.size.field)return _(r,"Could not convert size info: multiple fields in use"),null}else t.size.field=e.field}else t.size={field:e.field,minSize:[0,0,0],maxSize:[0,0,0],offset:[0,0,0],factor:[0,0,0],type:[0,0,0]};var n;switch(e.axis){case"width":return(n=T(e,t.size,0,i,r))?t:null;case"height":return(n=T(e,t.size,2,i,r))?t:null;case"depth":return(n=T(e,t.size,1,i,r))?t:null;case"width-and-depth":return(n=T(e,t.size,0,i,r))&&T(e,t.size,1,i,r),n?t:null;case null:case void 0:case"all":return(n=(n=(n=T(e,t.size,0,i,r))&&T(e,t.size,1,i,r))&&T(e,t.size,2,i,r))?t:null;default:return _(r,'Could not convert size info: unknown axis "'+e.axis+'""'),null}}function I(e,t,i){for(var r=0;r<3;++r){var n=t.unitInMeters;1===e.type[r]&&(n*=t.modelSize[r],e.type[r]=2),e.minSize[r]=e.minSize[r]/n,e.maxSize[r]=e.maxSize[r]/n,e.offset[r]=e.offset[r]/n,e.factor[r]=e.factor[r]/n}var o;if(0!==e.type[0])o=0;else if(0!==e.type[1])o=1;else{if(0===e.type[2])return _(i,"No size axis contains a valid size or scale"),!1;o=2}for(r=0;r<3;++r)0===e.type[r]&&(e.minSize[r]=e.minSize[o],e.maxSize[r]=e.maxSize[o],e.offset[r]=e.offset[o],e.factor[r]=e.factor[o],e.type[r]=e.type[o]);return!0}function S(e,t,i){e[4*t+0]=i.r/255,e[4*t+1]=i.g/255,e[4*t+2]=i.b/255,e[4*t+3]=i.a}function L(e,t,i){if(e.normalizationField)return _(i,"Could not convert color info: unsupported property"),null;if(h(e.field)){if(!e.stops)return _(i,"Could not convert color info: missing stops or colors"),null;if(e.stops.length>8)return _(i,"Could not convert color info: too many color stops"),null;t.color={field:e.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};for(var r=e.stops,n=0;n<8;++n){var o=r[Math.min(n,r.length-1)];t.color.values[n]=o.value,S(t.color.colors,n,o.color)}}else{if(!(e.stops&&e.stops.length>=0))return _(i,"Could not convert color info: no field and no colors/stops"),null;var s=e.stops&&e.stops.length>=0&&e.stops[0].color;t.color={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};for(n=0;n<8;n++)t.color.values[n]=1/0,S(t.color.colors,n,s)}return t}function g(e,t,i){if(e.normalizationField)return _(i,"Could not convert opacity info: unsupported property"),null;if(h(e.field)){if(!e.stops)return _(i,"Could not convert opacity info: missing stops or opacities"),null;if(e.stops.length>8)return _(i,"Could not convert opacity info: too many opacity stops"),null;t.opacity={field:e.field,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]};for(var r=e.stops,n=0;n<8;++n){var o=r[Math.min(n,r.length-1)];t.opacity.values[n]=o.value,t.opacity.opacityValues[n]=o.opacity}}else{if(!(e.stops&&e.stops.length>=0))return _(i,"Could not convert opacity info: no field and no opacities/stops"),null;var s=e.stops&&e.stops.length>=0&&e.stops[0].opacity;t.opacity={field:null,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]};for(n=0;n<8;n++)t.opacity.values[n]=1/0,t.opacity.opacityValues[n]=s}return t}function x(e,t,i,r){var n=2===i&&"arithmetic"===e.rotationType;t.offset[i]=n?90:0,t.factor[i]=n?-1:1,t.type[i]=1}function O(e,t,i){if(!h(e.field))return _(i,"Could not convert rotation info: field is not a string"),null;if(t.rotation){if(e.field)if(t.rotation.field){if(e.field!==t.rotation.field)return _(i,"Could not convert rotation info: multiple fields in use"),null}else t.rotation.field=e.field}else t.rotation={field:e.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};switch(e.axis){case"tilt":return x(e,t.rotation,0),t;case"roll":return x(e,t.rotation,1),t;case null:case void 0:case"heading":return x(e,t.rotation,2),t;default:return _(i,'Could not convert rotation info: unknown axis "'+e.axis+'""'),null}}function C(e,t,r){if(!e)return null;var n=!t.supportedTypes||!!t.supportedTypes.size,o=!t.supportedTypes||!!t.supportedTypes.color,s=!t.supportedTypes||!!t.supportedTypes.rotation,a=!!t.supportedTypes&&!!t.supportedTypes.opacity;D&&(r=r||[]);var l=e.reduce(function(e,l){if(!e)return e;if(l.valueExpression)return _(r,"Could not convert visual variables: arcade expressions not supported"),null;switch(l.type){case"size":return n?m(l,e,t,r):e;case"color":return o?L(l,e,r):e;case"opacity":return a?g(l,e,r):e;case"rotation":return s?O(l,e,r):e;default:return i.neverReached(l),null}},{size:null,color:null,opacity:null,rotation:null});return!(e.length>0&&l)||l.size||l.color||l.opacity||l.rotation?l&&l.size&&!I(l.size,t,r)?null:l:null}function b(e){return e&&null!=e.size}function M(e,t,i){if(!!e!=!!t)return!1;if(e&&e.field!==t.field)return!1;if(e&&"rotation"===i)for(var r=e,n=t,o=0;o<3;o++)if(r.type[o]!==n.type[o]||r.offset[o]!==n.offset[o]||r.factor[o]!==n.factor[o])return!1;return!0}function V(e,t){var i={vvSizeEnabled:!1,vvSizeMinSize:null,vvSizeMaxSize:null,vvSizeOffset:null,vvSizeFactor:null,vvSizeValue:null,vvColorEnabled:!1,vvColorValues:null,vvColorColors:null,vvOpacityEnabled:!1,vvOpacityValues:null,vvOpacityOpacities:null,vvSymbolAnchor:null,vvSymbolRotationMatrix:null},s=b(e);return e&&e.size?(i.vvSizeEnabled=!0,i.vvSizeMinSize=e.size.minSize,i.vvSizeMaxSize=e.size.maxSize,i.vvSizeOffset=e.size.offset,i.vvSizeFactor=e.size.factor):e&&s&&(i.vvSizeValue=t.transformation.scale),e&&s&&(i.vvSymbolAnchor=t.transformation.anchor,i.vvSymbolRotationMatrix=n.mat3f64.create(),o.mat4.identity(w),E(t.transformation.rotation[2],t.transformation.rotation[0],t.transformation.rotation[1],w),r.mat3.fromMat4(i.vvSymbolRotationMatrix,w)),e&&e.color&&(i.vvColorEnabled=!0,i.vvColorValues=e.color.values,i.vvColorColors=e.color.colors),e&&e.opacity&&(i.vvOpacityEnabled=!0,i.vvOpacityValues=e.opacity.values,i.vvOpacityOpacities=e.opacity.opacityValues),i}Object.defineProperty(t,"__esModule",{value:!0});var R,D=!1,A=!1;t.convertVisualVariables=C,t.initFastSymbolUpdatesState=function(e,t){if(A)return{enabled:!1};if(!e)return{enabled:!1};if(p.DISABLE_FAST_UPDATES)return{enabled:!1};var i=C(e.visualVariables,t);return i?{enabled:!0,visualVariables:i,materialParameters:V(i,t),requiresShaderTransformation:b(i)}:{enabled:!1}},t.updateFastSymbolUpdatesState=function(e,t,i){if(!t||!e.enabled)return!1;var r=e.visualVariables,n=C(t.visualVariables,i);return!!n&&!!(M(r.size,n.size,"size")&&M(r.color,n.color,"color")&&M(r.rotation,n.rotation,"rotation"))&&(e.visualVariables=n,e.materialParameters=V(n,i),e.requiresShaderTransformation=b(n),!0)},t.getMaterialParams=V,function(e){function t(e,t,i){return e<t?t:e>i?i:e}var i=s.mat4f64.create(),r=l.vec3f64.create();e.evaluateModelTransform=function(e,n,s){if(!e.vvSizeEnabled)return s;o.mat4.copy(i,s);var a=e.vvSymbolRotationMatrix;o.mat4.set(w,a[0],a[1],a[2],0,a[3],a[4],a[5],0,a[6],a[7],a[8],0,0,0,0,1),o.mat4.multiply(i,i,w);for(var l=0;l<3;++l){var u=e.vvSizeOffset[l]+n[0]*e.vvSizeFactor[l];r[l]=t(u,e.vvSizeMinSize[l],e.vvSizeMaxSize[l])}return o.mat4.scale(i,i,r),o.mat4.translate(i,i,e.vvSymbolAnchor),i},e.evaluateModelTransformScale=function(e,i,r){if(!i.vvSizeEnabled)return a.vec3.set(e,1,1,1);for(var n=0;n<3;++n){var o=i.vvSizeOffset[n]+r[0]*i.vvSizeFactor[n];e[n]=t(o,i.vvSizeMinSize[n],i.vvSizeMaxSize[n])}return e}}(R||(R={}));var w=s.mat4f64.create();t.evaluateModelTransform=R.evaluateModelTransform,t.evaluateModelTransformScale=R.evaluateModelTransformScale}.apply(null,r))||(e.exports=n)},"4F/P":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("Dos2")],void 0===(n=function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.white=[255,255,255,1];var r=[0,0,0,0];function n(e,t){return Array.isArray(t)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]):(e[0]=t.r,e[1]=t.g,e[2]=t.b,e[3]=t.a),e}function o(e,t,i){void 0===t&&(t=0),void 0===i&&(i=!1);var r=e[t+3];return e[t+0]*=r,e[t+1]*=r,e[t+2]*=r,i||(e[t+3]*=255),e}t.premultiplyAlpha=o,t.copyAndPremultiply=function(e){return o(n([],e))},t.premultiplyAlphaUint32=function(e){return o(n(r,e)),i.i8888to32(r[0],r[1],r[2],r[3])},t.premultiplyAlphaRGBA=function(e){var t=e.r,r=e.g,n=e.b,o=e.a,s=t*o,a=r*o,l=n*o,u=255*o;return i.i8888to32(s,a,l,u)}}.apply(null,r))||(e.exports=n)},"7AYJ":function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("SyoC")],void 0===(n=function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.color=[0,0,0,0],this.haloColor=[0,0,0,0],this.haloSize=0,this.size=12,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}return e.prototype.acquire=function(e,t,i,r,n,o,s,a,l){this.color=e,this.haloColor=t,this.haloSize=i,this.size=r,this.angle=n,this.offsetX=o,this.offsetY=s,this.hAnchor=a,this.vAnchor=l},e.prototype.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0,this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0,this.haloSize=0,this.size=0,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0},e.pool=new i(e),e}();t.TextProperties=r}.apply(null,r))||(e.exports=n)},Dk48:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("9opi"),i("qKT0"),i("Gtr7"),i("Vx27")],void 0===(n=function(e,t,i,r,n,o){return new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,t.SCENEVIEW_LOCKING_LOG=!1,t.HIGHLIGHTS_GRID_OPTIMIZATION_DISABLED=!1,t.HIGHLIGHTS_VISUALIZE_BLOCKS=!1,t.HIGHLIGHTS_PROFILE_TO_CONSOLE=!1,t.DECONFLICTOR_SHOW_OUTLINES=!1,t.DECONFLICTOR_SHOW_GRID=!1,t.LABELS_SHOW_BORDER=!1,t.OVERLAY_DRAW_TEST_TEXTURE=!1,t.OVERLAY_SHOW_CENTER=!1,t.TESTS_LIMIT_FEATURE_TILE_TREE_THROTTLING=!1,t.TESTS_DISABLE_UPDATE_THROTTLE_THRESHOLDS=!1,t.DISABLE_DECONFLICTOR_VISIBILITY_OFFSET=!1,t.DISABLE_POI_UPDATE_ON_SURFACE_GEOMETRY_CHANGES=!1,t.DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES=!1,t.DRAW_MESH_GEOMETRY_NORMALS=!1,t.FEATURE_TILE_FETCH_SHOW_TILES=!1,t.FEATURE_TILE_TREE_SHOW_TILES=!1,t.ENABLE_PROFILE_DEPTH_RANGE=!1,t.DISABLE_FAST_UPDATES=!1,t.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,t.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,t}return i(t,e),r([o.property()],t.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0),r([o.property()],t.prototype,"SCENEVIEW_LOCKING_LOG",void 0),r([o.property()],t.prototype,"HIGHLIGHTS_GRID_OPTIMIZATION_DISABLED",void 0),r([o.property()],t.prototype,"HIGHLIGHTS_VISUALIZE_BLOCKS",void 0),r([o.property()],t.prototype,"HIGHLIGHTS_PROFILE_TO_CONSOLE",void 0),r([o.property()],t.prototype,"DECONFLICTOR_SHOW_OUTLINES",void 0),r([o.property()],t.prototype,"DECONFLICTOR_SHOW_GRID",void 0),r([o.property()],t.prototype,"LABELS_SHOW_BORDER",void 0),r([o.property()],t.prototype,"OVERLAY_DRAW_TEST_TEXTURE",void 0),r([o.property()],t.prototype,"OVERLAY_SHOW_CENTER",void 0),r([o.property()],t.prototype,"TESTS_LIMIT_FEATURE_TILE_TREE_THROTTLING",void 0),r([o.property()],t.prototype,"TESTS_DISABLE_UPDATE_THROTTLE_THRESHOLDS",void 0),r([o.property()],t.prototype,"DISABLE_DECONFLICTOR_VISIBILITY_OFFSET",void 0),r([o.property()],t.prototype,"DISABLE_POI_UPDATE_ON_SURFACE_GEOMETRY_CHANGES",void 0),r([o.property()],t.prototype,"DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES",void 0),r([o.property()],t.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0),r([o.property()],t.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0),r([o.property()],t.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0),r([o.property()],t.prototype,"ENABLE_PROFILE_DEPTH_RANGE",void 0),r([o.property()],t.prototype,"DISABLE_FAST_UPDATES",void 0),r([o.property()],t.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0),r([o.property()],t.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0),r([o.subclass()],t)}(o.declared(n)))}.apply(null,r))||(e.exports=n)},Dos2:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("qsST")],void 0===(n=function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var r=new Float32Array(1),n=new Uint32Array(r.buffer),o=i.getLogger("esri.views.2d.engine.webgl.number");function s(e,t,i){var r=Math.max(Math.min(e,i),t);return r!==e&&o.warn("Value of "+e+" exceeded rendering limitations and was clamped to "+r),r}t.i8=function(e){return s(e,-128,127)},t.i16=function(e){return s(e,-32768,32767)},t.i32=function(e){return s(e,-2147483648,2147483647)},t.u8=function(e){return s(e,0,255)},t.u16=function(e){return s(e,0,65535)},t.u32=function(e){return s(e,0,4294967295)},t.nextHighestPowerOfTwo=function(e){var t=e;t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16;var i=++t>>1;return e-i<t-e?i:t},t.toUint32=function(e){return r[0]=e,n[0]},t.toFloat32=function(e){return n[0]=e,r[0]},t.i1616to32=function(e,t){return 65535&e|t<<16},t.i8888to32=function(e,t,i,r){return 255&e|(255&t)<<8|(255&i)<<16|r<<24},t.i8816to32=function(e,t,i){return 255&e|(255&t)<<8|i<<16},t.numTo32=function(e){return 0|e}}.apply(null,r))||(e.exports=n)},G59t:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("jBNx"),i("4F/P"),i("JNkf"),i("apbF"),i("3w6h")],void 0===(n=function(e,t,i,r,n,o,s){function a(e){return o.isNumber(e.minDataValue)&&o.isNumber(e.maxDataValue)&&null!=e.minSize&&null!=e.maxSize?n.WGLVVFlag.SIZE_MINMAX_VALUE:(e.expression&&"view.scale"===e.expression||e.valueExpression&&"$view.scale"===e.valueExpression)&&Array.isArray(e.stops)?n.WGLVVFlag.SIZE_SCALE_STOPS:(null!=e.field||e.expression&&"view.scale"!==e.expression||e.valueExpression&&"$view.scale"!==e.valueExpression)&&Array.isArray(e.stops)?n.WGLVVFlag.SIZE_FIELD_STOPS:(null!=e.field||e.expression&&"view.scale"!==e.expression||e.valueExpression&&"$view.scale"!==e.valueExpression)&&null!=e.valueUnit?n.WGLVVFlag.SIZE_UNIT_VALUE:n.WGLVVFlag.NONE}function l(e){return{value:e.value,size:i.toPt(e.size)}}function u(e){return e.map(function(e){return l(e)})}function p(e){if("string"==typeof e||"number"==typeof e)return i.toPt(e);var t=e;return{type:"size",expression:t.expression,stops:u(t.stops)}}function c(e){var t={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if(o.isString(e.field)){if(!e.stops)return null;if(8<e.stops.length)return null;for(var i=e.stops,r=0;r<8;++r){var n=i[Math.min(r,i.length-1)];t.values[r]=n.value,t.opacities[r]=n.opacity}}else{if(!(e.stops&&0<=e.stops.length))return null;var s=e.stops&&0<=e.stops.length&&e.stops[0].opacity;for(r=0;r<8;r++)t.values[r]=1/0,t.opacities[r]=s}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getTypeOfSizeVisualVariable=a,t.getVisualVariableSizeValueRepresentationRatio=function(e,t){if(!e||!t)return e;switch(t){case"radius":case"distance":return 2*e;case"diameter":case"width":return e;case"area":return Math.sqrt(e)}return e},t.stopToSizeStop=l,t.normalizeSizeStops=u,t.normalizeSizeElement=p,t.getVisualVariablesFields=function(e){var t=e&&0<e.length?{}:null;return t&&e.forEach(function(e){var i=e.type;e.field&&(t[i]=e.field)}),t},t.convertVisualVariables=function(e){var t=e&&0<e.length?{}:null,o=t?{}:null;if(!t)return{vvFields:t,vvRanges:o};for(var l=0,f=e;l<f.length;l++){var h=f[l],d=h.type;if(h.field&&(t[d]=h.field),"size"===d){o.size||(o.size={});var _=h;switch(a(_)){case n.WGLVVFlag.SIZE_MINMAX_VALUE:o.size.minMaxValue={minDataValue:_.minDataValue,maxDataValue:_.maxDataValue,minSize:p(_.minSize),maxSize:p(_.maxSize)};break;case n.WGLVVFlag.SIZE_SCALE_STOPS:o.size.scaleStops={stops:u(_.stops)};break;case n.WGLVVFlag.SIZE_FIELD_STOPS:for(var v=[],E=[],T=u(_.stops),y=T.length,m=0;m<6;m++){var I=T[Math.min(m,y-1)];v.push(I.value),E.push(i.pt2px(I.size))}o.size.fieldStops={values:v,sizes:E};break;case n.WGLVVFlag.SIZE_UNIT_VALUE:o.size.unitValue={unit:_.valueUnit,valueRepresentation:_.valueRepresentation}}}else if("color"===d){var S=s.convertVisualVariables([h],{modelSize:null,symbolSize:null,unitInMeters:1,transformation:null});for(o.color=S.color,m=0;m<32;m+=4)r.premultiplyAlpha(o.color.colors,m,!0)}else if("opacity"===d)o.opacity=c(h);else if("rotation"===d){var L=h;o.rotation={type:L.rotationType}}}return{vvFields:t,vvRanges:o}}}.apply(null,r))||(e.exports=n)},JNkf:function(e,t,i){var r,n;r=[i.dj.c(e.i),t],void 0===(n=function(e,t){var i,r,n,o,s,a,l,u,p,c;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.WGLGeometryType||(t.WGLGeometryType={}))[i.FILL=0]="FILL",i[i.LINE=1]="LINE",i[i.MARKER=2]="MARKER",i[i.TEXT=3]="TEXT",i[i.LABEL=4]="LABEL",(r=t.WGLGeometryTransactionStatus||(t.WGLGeometryTransactionStatus={}))[r.SUCCEEDED=0]="SUCCEEDED",r[r.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY",(n=t.WGLDrawPhase||(t.WGLDrawPhase={}))[n.NONE=0]="NONE",n[n.MAP=1]="MAP",n[n.LABEL=2]="LABEL",n[n.LABEL_ALPHA=4]="LABEL_ALPHA",n[n.HITTEST=8]="HITTEST",n[n.HIGHLIGHT=16]="HIGHLIGHT",n[n.CLIP=32]="CLIP",n[n.DEBUG=64]="DEBUG",n[n.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES",(o=t.VVType||(t.VVType={}))[o.SIZE=0]="SIZE",o[o.COLOR=1]="COLOR",o[o.OPACITY=2]="OPACITY",o[o.ROTATION=3]="ROTATION",(s=t.WGLVVFlag||(t.WGLVVFlag={}))[s.NONE=0]="NONE",s[s.OPACITY=1]="OPACITY",s[s.COLOR=2]="COLOR",s[s.ROTATION=4]="ROTATION",s[s.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",s[s.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",s[s.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",s[s.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE",(a=t.WGLVVTarget||(t.WGLVVTarget={}))[a.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",a[a.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",a[a.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",a[a.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE",(l=t.CapType||(t.CapType={}))[l.UNKNOWN=0]="UNKNOWN",l[l.BUTT=1]="BUTT",l[l.ROUND=2]="ROUND",l[l.SQUARE=3]="SQUARE",(u=t.JoinType||(t.JoinType={}))[u.UNKNOWN=0]="UNKNOWN",u[u.MITER=1]="MITER",u[u.BEVEL=2]="BEVEL",u[u.ROUND=3]="ROUND",(p=t.Alignment||(t.Alignment={}))[p.SCREEN=0]="SCREEN",p[p.MAP=1]="MAP",(c=t.MosaicType||(t.MosaicType={}))[c.SPRITE=0]="SPRITE",c[c.GLYPH=1]="GLYPH"}.apply(null,r))||(e.exports=n)},Zp3t:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("H1tY")],void 0===(n=function(e,t,i){function r(e){return null!=e&&"type"in e&&"compressed"===e.type}return function(){function e(t,r,n){this._context=null,this._glName=null,this._id=-1,this._desc=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._boundToUnits=new Set,this._context=t,this._desc={pixelFormat:r.pixelFormat,internalFormat:r.internalFormat,dataType:r.dataType,target:r.target?r.target:3553,samplingMode:r.samplingMode?r.samplingMode:9729,wrapMode:r.wrapMode?r.wrapMode:10497,maxAnisotropy:r.maxAnisotropy,flipped:void 0!==r.flipped&&r.flipped,hasMipmap:void 0!==r.hasMipmap&&r.hasMipmap,unpackAlignment:r.unpackAlignment?r.unpackAlignment:4,width:r.width,height:r.height,preMultiplyAlpha:void 0!==r.preMultiplyAlpha&&r.preMultiplyAlpha,textureCoordinateScaleFactor:r.textureCoordinateScaleFactor||null},this._id=++e._nextId,i("esri-webgl-debug")&&t.instanceCounter.incrementCount(0),this.setData(n)}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;if(this._context){if(this._glName){var t=this._context.gl;this._boundToUnits.forEach(function(t){e._context.bindTexture(null,t)}),t.deleteTexture(this._glName),this._glName=null}i("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(0),this._context=null}},e.prototype.resize=function(e,t){var i=this._desc;i.width===e&&i.height===t||(i.width=e,i.height=t,this.setData(null))},e.prototype.setData=function(t){var i=this._context.gl;this._glName||(this._glName=i.createTexture()),void 0===t&&(t=null),null===t&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var n=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var o=this._desc;e._validateTexture(o),i.pixelStorei(i.UNPACK_ALIGNMENT,o.unpackAlignment),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,o.flipped?1:0),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.preMultiplyAlpha?1:0);var s=o.pixelFormat,a=o.internalFormat?o.internalFormat:s;if(t instanceof ImageData||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement)o.width&&o.height,i.texImage2D(i.TEXTURE_2D,0,a,s,o.dataType,t),o.hasMipmap&&this.generateMipmap(),void 0===this._desc.width&&(this._desc.width=t.width),void 0===this._desc.height&&(this._desc.height=t.height);else{null!=o.width&&o.height,i.DEPTH24_STENCIL8&&a===i.DEPTH_STENCIL&&(a=i.DEPTH24_STENCIL8);var l=o.width,u=o.height;if(r(t)){var p=Math.round(Math.log(Math.max(l,u))/Math.LN2)+1;o.hasMipmap=o.hasMipmap&&p===t.levels.length;for(var c=0;;++c){var f=t.levels[Math.min(c,t.levels.length-1)];if(i.compressedTexImage2D(i.TEXTURE_2D,c,a,l,u,0,f),1===l&&1===u||!o.hasMipmap)break;l=Math.max(1,l>>1),u=Math.max(1,u>>1)}}else if(t)i.texImage2D(i.TEXTURE_2D,0,a,l,u,0,s,o.dataType,t),o.hasMipmap&&this.generateMipmap();else for(c=0;i.texImage2D(i.TEXTURE_2D,c,a,l,u,0,s,o.dataType,null),(1!==l||1!==u)&&o.hasMipmap;++c)l=Math.max(1,l>>1),u=Math.max(1,u>>1)}e._applySamplingMode(i,this._desc),e._applyWrapMode(i,this._desc),e._applyAnisotropicFilteringParameters(this._context,this._desc),this._context.bindTexture(n,0)},e.prototype.updateData=function(e,t,i,r,n,o){this._glName;var s=this._context.gl,a=this._desc,l=this._context.getBoundTexture(0);this._context.bindTexture(this,0),t<0||i<0||r>a.width||n>a.height||t+r>a.width||a.height,o instanceof ImageData||o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement?s.texSubImage2D(s.TEXTURE_2D,e,t,i,a.pixelFormat,a.dataType,o):s.texSubImage2D(s.TEXTURE_2D,e,t,i,r,n,a.pixelFormat,a.dataType,o),this._context.bindTexture(l,0)},e.prototype.generateMipmap=function(){var t=this._desc;t.hasMipmap||(t.hasMipmap=!0,e._validateTexture(t)),9729===t.samplingMode?(this._samplingModeDirty=!0,t.samplingMode=9985):9728===t.samplingMode&&(this._samplingModeDirty=!0,t.samplingMode=9984);var i=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var r=this._context.gl;r.generateMipmap(r.TEXTURE_2D),this._context.bindTexture(i,0)},e.prototype.setSamplingMode=function(t){t!==this._desc.samplingMode&&(this._desc.samplingMode=t,e._validateTexture(this._desc),this._samplingModeDirty=!0)},e.prototype.setWrapMode=function(t){t!==this._desc.wrapMode&&(this._desc.wrapMode=t,e._validateTexture(this._desc),this._wrapModeDirty=!0)},e.prototype.applyChanges=function(){var t=this._context.gl,i=this._desc;this._samplingModeDirty&&(e._applySamplingMode(t,i),this._samplingModeDirty=!1),this._wrapModeDirty&&(e._applyWrapMode(t,i),this._wrapModeDirty=!1)},e.prototype.setBoundToUnit=function(e,t){t?this._boundToUnits.add(e):this._boundToUnits.delete(e)},e._isPowerOfTwo=function(e){return 0==(e&e-1)},e._validateTexture=function(t){t.width<0||t.height,e._isPowerOfTwo(t.width)&&e._isPowerOfTwo(t.height)||("number"==typeof t.wrapMode?t.wrapMode:33071===t.wrapMode.s&&t.wrapMode.t,t.hasMipmap)},e._applySamplingMode=function(e,t){var i=t.samplingMode,r=t.samplingMode;9985===i||9987===i?(i=9729,t.hasMipmap||(r=9729)):9984!==i&&9986!==i||(i=9728,t.hasMipmap||(r=9728)),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r)},e._applyWrapMode=function(e,t){"number"==typeof t.wrapMode?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t.wrapMode)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t.wrapMode.s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t.wrapMode.t))},e._applyAnisotropicFilteringParameters=function(e,t){if(null!=t.maxAnisotropy){var i=e.capabilities.textureFilterAnisotropic;if(i){var r=e.gl;r.texParameterf(r.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy)}}},e._nextId=0,e}()}.apply(null,r))||(e.exports=n)},apbF:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("2Atf"),i("B2KM"),i("T8lH"),i("ma1f"),i("qsST"),i("jBNx"),i("u90+"),i("3568"),i("4F/P"),i("JNkf"),i("7AYJ"),i("AzkI"),i("Zp3t")],void 0===(n=function(e,t,i,r,n,o,s,a,l,u,p,c,f,h,d){var _;Object.defineProperty(t,"__esModule",{value:!0});var v=s.getLogger("esri.views.2d.engine.webgl.Utils");function E(e){for(var t={},i=0,r=e;i<r.length;i++){var n=r[i];t[n.name]=n.strideInBytes}return t}t.C_HITTEST_SEARCH_SIZE=4,t.C_VBO_GEOMETRY="geometry",t.C_VBO_PERINSTANCE="per_instance",t.C_VBO_PERINSTANCE_VV="per_instance_vv",t.C_VBO_VISIBILITY="visibility",t.C_VBO_VISIBILITY_RANGE="visibilityRange",t.C_ICON_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,strideInBytes:24,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_ICON_VERTEX_DEF_VV=[{name:t.C_VBO_GEOMETRY,strideInBytes:40,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_FILL_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,strideInBytes:32,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_FILL_VERTEX_DEF_VV=[{name:t.C_VBO_GEOMETRY,strideInBytes:40,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_FILL_VERTEX_DEF_DD=[{name:t.C_VBO_GEOMETRY,strideInBytes:40,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_LINE_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,strideInBytes:32,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_LINE_VERTEX_DEF_VV=[{name:t.C_VBO_GEOMETRY,strideInBytes:44,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_TEXT_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,strideInBytes:24,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_TEXT_VERTEX_DEF_VV=[{name:t.C_VBO_GEOMETRY,strideInBytes:40,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_LABEL_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,strideInBytes:24,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0},{name:t.C_VBO_VISIBILITY_RANGE,strideInBytes:2,divisor:0}],t.C_ICON_STRIDE_SPEC=E(t.C_ICON_VERTEX_DEF),t.C_ICON_STRIDE_SPEC_VV=E(t.C_ICON_VERTEX_DEF_VV),t.C_FILL_STRIDE_SPEC=E(t.C_FILL_VERTEX_DEF),t.C_FILL_STRIDE_SPEC_VV=E(t.C_FILL_VERTEX_DEF_VV),t.C_FILL_STRIDE_SPEC_DD=E(t.C_FILL_VERTEX_DEF_DD),t.C_LINE_STRIDE_SPEC=E(t.C_LINE_VERTEX_DEF),t.C_LINE_STRIDE_SPEC_VV=E(t.C_LINE_VERTEX_DEF_VV),t.C_TEXT_STRIDE_SPEC=E(t.C_TEXT_VERTEX_DEF),t.C_TEXT_STRIDE_SPEC_VV=E(t.C_TEXT_VERTEX_DEF_VV),t.C_LABEL_STRIDE_SPEC=E(t.C_LABEL_VERTEX_DEF),t.getStrides=function(e,i,r){switch(e){case c.WGLGeometryType.MARKER:return i?t.C_ICON_STRIDE_SPEC_VV:t.C_ICON_STRIDE_SPEC;case c.WGLGeometryType.FILL:return r?t.C_FILL_STRIDE_SPEC_DD:i?t.C_FILL_STRIDE_SPEC_VV:t.C_FILL_STRIDE_SPEC;case c.WGLGeometryType.LINE:return i?t.C_LINE_STRIDE_SPEC_VV:t.C_LINE_STRIDE_SPEC;case c.WGLGeometryType.TEXT:return i?t.C_TEXT_STRIDE_SPEC_VV:t.C_TEXT_STRIDE_SPEC;case c.WGLGeometryType.LABEL:return t.C_LABEL_STRIDE_SPEC}return null};var T=[t.C_VBO_GEOMETRY,t.C_VBO_VISIBILITY],y=[t.C_VBO_GEOMETRY,t.C_VBO_VISIBILITY],m=[t.C_VBO_GEOMETRY,t.C_VBO_VISIBILITY],I=[t.C_VBO_GEOMETRY,t.C_VBO_VISIBILITY],S=[t.C_VBO_GEOMETRY,t.C_VBO_VISIBILITY,t.C_VBO_VISIBILITY_RANGE];function L(e){switch(e){case c.WGLGeometryType.MARKER:return T;case c.WGLGeometryType.FILL:return y;case c.WGLGeometryType.LINE:return m;case c.WGLGeometryType.TEXT:return I;case c.WGLGeometryType.LABEL:return S}return null}function g(e){switch(e%4){case 0:case 2:return 4;case 1:case 3:return 1}}function x(e){switch(e){case"esriSMS":return"simple-marker";case"esriPMS":return"picture-marker";case"esriSLS":return"simple-line";case"esriPLS":return"picture-line";case"esriSFS":return"simple-fill";case"esriPFS":return"picture-fill";case"esriTS":return"text"}return e}function O(e){return"string"==typeof e}t.getNamedBuffers=L,t.strideToPackingFactor=g,t.allocateTypedArrayBuffer=function(e,t){switch(t%4){case 0:case 2:return new Uint32Array(Math.floor(e*t/4));case 1:case 3:return new Uint8Array(e*t)}},t.allocateTypedArrayBufferwithData=function(e,t){switch(t%4){case 0:case 2:return new Uint32Array(e);case 1:case 3:return new Uint8Array(e)}},t.normalizeSymbolType=x,t.isMarkerSymbol=function(e){var t=x(e.type);if(t){switch(t){case"simple-marker":case"picture-marker":case"CIMPointSymbol":return!0}return!1}},t.isFillSymbol=function(e){var t=x(e.type);if(t){switch(t){case"simple-fill":case"picture-fill":case"CIMPolygonSymbol":return!0}return!1}},t.isLineSymbol=function(e){var t=x(e.type);if(t){switch(t){case"simple-line":case"picture-line":case"CIMLineSymbol":return!0}return!1}},t.isPictureSymbol=function(e){var t=x(e.type);if(t){switch(t){case"picture-marker":case"picture-line":case"picture-fill":return!0}return!1}return!1},t.isTextSymbol=function(e){var t=x(e.type);if(t){switch(t){case"text":case"CIMTextSymbol":return!0}return!1}},t.getTextProperties=function(e){return f.TextProperties.pool.acquire(e.color?p.copyAndPremultiply(e.color):[255,255,255,255],e.haloColor?p.copyAndPremultiply(e.haloColor):[255,255,255,255],a.pt2px(e.haloSize),a.pt2px(e.font.size),e.angle*Math.PI/180,e.xoffset/e.font.size,e.yoffset/e.font.size,"left"===e.horizontalAlignment?0:"right"===e.horizontalAlignment?1:.5,"top"===e.verticalAlignment?0:"bottom"===e.verticalAlignment?1:.5)},t.isDefined=function(e){return null!=e},t.isNumber=function(e){return"number"==typeof e},t.isString=O,t.isStringOrNull=function(e){return null==e||O(e)},t.lerp=function(e,t,i){return e+(t-e)*i};var C=function(){function e(){this._arr=[],this._push=this._push.bind(this)}return e.prototype._push=function(e,t){this._arr.push(t)},e.prototype.getKeys=function(e){return this._arr.length=0,e&&e.forEach(this._push),this._arr},e}();t.KeysGetter=C;var b=function(){function e(){this._arr=[],this._push=this._push.bind(this)}return e.prototype._push=function(e,t){this._arr.push(e)},e.prototype.getValues=function(e){return this._arr.length=0,e&&e.forEach(this._push),this._arr},e}();function M(e){var t={};switch(e){case"esriGeometryPoint":return function(e,i,r,n){return l.hydratePoint(i,t,e,r,n)};case"esriGeometryPolygon":return function(e,i,r,n){return l.hydratePolygon(i,t,e,r,n)};case"esriGeometryPolyline":return function(e,i,r,n){return l.hydratePolyline(i,t,e,r,n)};case"esriGeometryMultipoint":return function(e,i,r,n){return l.hydrateMultipoint(i,t,e,r,n)};default:return v.error(new o("mapview-arcade","Unable to handle geometryType: "+e)),function(e,t,i,r){return e}}}t.ValuesGetter=b,t.getCapType=function(e,t){switch(e){case"butt":return c.CapType.BUTT;case"round":return t?c.CapType.SQUARE:c.CapType.ROUND;case"square":return c.CapType.SQUARE;default:return v.error(new o("mapview-invalid-type","Cap type "+e+" is not a valid option. Defaulting to round")),c.CapType.ROUND}},t.getJoinType=function(e){switch(e){case"miter":return c.JoinType.MITER;case"bevel":return c.JoinType.BEVEL;case"round":return c.JoinType.ROUND;default:return v.error(new o("mapview-invalid-type","Join type "+e+" is not a valid option. Defaulting to round")),c.JoinType.ROUND}},t.getVVType=function(e){switch(e){case"opacity":return c.VVType.OPACITY;case"color":return c.VVType.COLOR;case"rotation":return c.VVType.ROTATION;case"size":return c.VVType.SIZE;default:return v.error("Cannot interpret unknown vv: "+e),null}},t.createHydrateFactory=M,t.getTransformParams=function(e){return{transform:e.transform,hasZ:e.hasZ,hasM:e.hasM}},t.createArcadeFunction=function(e,t,i){var o=t.fields,s=t.spatialReference,a=t.hasGeometryExpr,l=t.geometryType,p=u.createFunction(e),c=new n,f=new r({viewingMode:null,scale:null}),h={},d={vars:{$feature:c,$view:null},spatialReference:s},_={fields:o},v=M(l);return function(e,t,r){if(a){var n=t.transform,o=t.hasZ,l=t.hasM,E=v(e.geometry,n,o,l);E.spatialReference=s,c.repurposeFromGraphicLikeObject(E,e.attributes,_)}else c.repurposeFromGraphicLikeObject(e.geometry,e.attributes,_);r?((d.vars.$view=f).attributes.viewingMode=r.viewingMode,f.attributes.scale=r.scale):d.vars.$view=h;var T=u.executeFunction(p,d);return i?i(T):T}},t.copyMeshData=function(e,t,i,r,n,o,s){for(var a in o)for(var l=o[a].stride,u=g(l),p=o[a].data,c=i[a].data,f=l*n.vertexCount/u,h=l*e/u,d=l*n.vertexFrom/u,_=0;_<f;++_)c[_+h]=p[_+d];var v=n.indexCount;for(_=0;_<v;++_)r[_+t]=s[_+n.indexFrom]-n.vertexFrom+e},t.C_VBO_INFO=((_={})[t.C_VBO_GEOMETRY]=35044,_[t.C_VBO_VISIBILITY]=35044,_[t.C_VBO_VISIBILITY_RANGE]=35048,_),t.createGeometryData=function(e,t){for(var i=[],r=0;r<5;++r){for(var n={},o=0,s=L(r);o<s.length;o++){var a=s[o];n[a]={data:t(r,a)}}i.push({data:e(r),buffers:n})}return i},t.resampleHermite=function(e,t,i,r,n,o,s){void 0===s&&(s=!0);for(var a=t/n,l=i/o,u=Math.ceil(a/2),p=Math.ceil(l/2),c=0;c<o;c++)for(var f=0;f<n;f++){for(var h=4*(f+(s?o-c-1:c)*n),d=0,_=0,v=0,E=0,T=0,y=0,m=0,I=(c+.5)*l,S=Math.floor(c*l);S<(c+1)*l;S++)for(var L=Math.abs(I-(S+.5))/p,g=(f+.5)*a,x=L*L,O=Math.floor(f*a);O<(f+1)*a;O++){var C=Math.abs(g-(O+.5))/u,b=Math.sqrt(x+C*C);-1<=b&&b<=1&&0<(d=2*b*b*b-3*b*b+1)&&(m+=d*e[3+(C=4*(O+S*t))],v+=d,e[C+3]<255&&(d=d*e[C+3]/250),E+=d*e[C],T+=d*e[C+1],y+=d*e[C+2],_+=d)}r[h]=E/_,r[h+1]=T/_,r[h+2]=y/_,r[h+3]=m/v}},t.createTextureFromTexelData=function(e,t){var i,r;return r=h.isPowerOfTwo(t.width)&&h.isPowerOfTwo(t.height)?(i=!0,9987):(i=!1,9729),new d(e,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,hasMipmap:i,samplingMode:r,wrapMode:33071,flipped:!0},t)},t.geometryToMappedGeometry=function(e){return{vertexFrom:void 0,vertexTo:void 0,geometry:e}};var V=new Map;t.createProgramDescriptor=function(e,t){if(!V.has(e)){var r=function(e){var t={},r=function(r){var n=e[r],o=0;t[r]=n.map(function(e){var t=i({},e,{normalized:e.normalized||!1,divisor:e.divisor||0,offset:o,stride:0});return o+=e.count*function(e){switch(e){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5126:case 5124:case 5125:return 4}}(e.type),t}),t[r].forEach(function(e){return e.stride=o})};for(var n in e)r(n);return t}(t),n={strides:function(e){var t={};for(var i in e){var r=e[i];t[i]=r.length?r[0].stride:0}return t}(r),bufferLayouts:r,attributes:function(e){var t={};for(var i in e)for(var r=0,n=e[i];r<n.length;r++){var o=n[r];t[o.name]=o.location}return t}(t)};V.set(e,n)}return V.get(e)}}.apply(null,r))||(e.exports=n)},azm3:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("tI6k"),i("hNI9"),i("fVTS"),i("flWe")],void 0===(n=function(e,t,i,r,n,o){return function(){function e(e){this.insertAfter=null,this.filterFlags=0,this.id=e,this.displayRecords=[],this.metrics=[]}return e.prototype.copy=function(){var t=new e(this.id);return t.set(this),t},e.prototype.clone=function(){var t=new e(this.id);return t.displayRecords=this.displayRecords.map(function(e){return e.clone()}),t.metrics=this.metrics.map(function(e){return e.clone()}),t.insertAfter=this.insertAfter,t.filterFlags=this.filterFlags,t},e.prototype.set=function(e){this.id=e.id,this.displayRecords=e.displayRecords,this.metrics=e.metrics,this.insertAfter=e.insertAfter,this.filterFlags=e.filterFlags},e.prototype.getLabelVisibility=function(e){var t=!e.filter||!!(this.filterFlags&i.FILTER_FLAG_0),r=!e.effect||e.effect.excludedLabelsVisible||!!(this.filterFlags&i.EFFECT_FLAG_0);return t&&r},e.prototype.setFilterFlag=function(e,t){var i=1<<e;t?this.filterFlags|=i:this.filterFlags&=~i},e.prototype.serialize=function(e){return e.push(this.id),e.push(this.filterFlags),o.serializeList(e,this.metrics),o.serializeList(e,this.displayRecords),e},e.deserialize=function(t){var i=t.readInt32(),s=new e(i);s.filterFlags=t.readInt32();var a={id:i},l=o.deserializeList(t,n.default);return l.length&&(s.metrics=l),s.displayRecords=o.deserializeList(t,r,a),s},e}()}.apply(null,r))||(e.exports=n)},fVTS:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("qsST"),i("ab6c"),i("tI6k"),i("x84Q"),i("flWe")],void 0===(n=function(e,t,i,r,n,o,s){Object.defineProperty(t,"__esModule",{value:!0});var a=i.getLogger("esri/views/2d/engine/webgl/collisions/Metric"),l=function(){function e(e,t,i,n,o){this.id=e,this.range=t,this.boxes=null,this.minZoom=-1,this.vv=0,this.size=0,this.directionX=0,this.directionY=0,this.offsetX=0,this.offsetY=0,this.anchor=r.vec2f32.fromValues(i,n),this.baseZoom=o}return e.prototype.add=function(e){this.bounds?(this.boxes?this.boxes.push(e):(this.boxes=[this.bounds,e],this.bounds=this.bounds.clone()),this.bounds.extend(e)):this.bounds=e},e.prototype.computeIndex=function(){var e=this.bounds,t=this.anchor[0],i=this.anchor[1],r=Math.floor(t/n.COLLISION_BUCKET_SIZE),o=Math.floor(i/n.COLLISION_BUCKET_SIZE),s=0;(r>n.COLLISION_TILE_BOX_SIZE||o>n.COLLISION_TILE_BOX_SIZE)&&(r=n.COLLISION_TILE_BOX_SIZE,o=n.COLLISION_TILE_BOX_SIZE,s=1),(r<0||o<0)&&(o=r=0,s=1);var a=e.halfWidth+Math.abs(e.center[0]),l=e.halfHeight+Math.abs(e.center[1]),u=2*Math.max(a,l),p=u-t%n.COLLISION_BUCKET_SIZE,c=u-i%n.COLLISION_BUCKET_SIZE;this.xBucket=r,this.yBucket=o,this.xOverflow=Math.ceil(Math.abs(p/n.COLLISION_BUCKET_SIZE))+s,this.yOverflow=Math.ceil(Math.abs(c/n.COLLISION_BUCKET_SIZE))+s},e.prototype.findCollisionDelta=function(e){var t=this.bounds.findCollisionDelta(e.bounds),i=this.boxes&&this.boxes.length,r=e.boxes&&e.boxes.length;return Math.abs(t)>n.COLLISION_MAX_ZOOM_DELTA||!i&&!r?t:i&&r?this._boxesToBoxes(e):i?this._boxesToBox(e):this._boxToBoxes(e)},e.prototype.computeOffset=function(e){e||a.error("mapview-labeling","Unable to compute label offset. Expected an evaluator function but found "+e);var t=e(this.vv),i=isNaN(this.vv)||isNaN(t)?this.size:t;this.offsetX=this.directionX*(i/2+n.COLLISION_PLACEMENT_PADDING),this.offsetY=this.directionY*(i/2+n.COLLISION_PLACEMENT_PADDING)},e.prototype.setVV=function(e,t,i,r){this.vv=e,this.size=t,this.directionX=i,this.directionY=r},e.prototype.clone=function(){var t=new e(this.id,this.range,this.anchor[0],this.anchor[1],this.baseZoom);return t.minZoom=this.minZoom,this.bounds&&(t.bounds=this.bounds.clone()),this.boxes&&(t.boxes=this.boxes.map(function(e){return e.clone()})),t.xBucket=this.xBucket,t.yBucket=this.yBucket,t.xOverflow=this.xOverflow,t.yOverflow=this.yOverflow,t.vv=this.vv,t.size=this.size,t.directionX=this.directionX,t.directionY=this.directionY,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},e.prototype._boxToBoxes=function(e){for(var t=-1/0,i=0,r=e.boxes;i<r.length;i++){var n=r[i],o=this.bounds.findCollisionDelta(n);t=Math.max(o,t)}return t},e.prototype._boxesToBox=function(e){for(var t=this.boxes[0].findCollisionDelta(e.bounds),i=1;i<this.boxes.length;i++){var r=this.boxes[i].findCollisionDelta(e.bounds);t=Math.max(r,t)}return t},e.prototype._boxesToBoxes=function(e){for(var t=-1/0,i=0;i<this.boxes.length;i++)for(var r=this.boxes[i],n=0,o=e.boxes;n<o.length;n++){var s=o[n],a=r.findCollisionDelta(s);t=Math.max(a,t)}return t},e.prototype.serialize=function(e){return e.push(this.id),this.bounds.serialize(e),e.push(this.range.from),e.push(this.range.count),e.push(this.anchor[0]),e.push(this.anchor[1]),e.push(this.baseZoom),e.writeF32(this.vv),e.push(this.size),e.push(this.directionX),e.push(this.directionY),e.push(this.offsetX),e.push(this.offsetY),s.serializeList(e,this.boxes),e},e.deserialize=function(t){var i=t.readInt32(),r=o.default.deserialize(t),n={from:t.readInt32(),count:t.readInt32()},a=t.readInt32(),l=t.readInt32(),u=t.readInt32(),p=t.readF32(),c=t.readInt32(),f=t.readInt32(),h=t.readInt32(),d=t.readInt32(),_=t.readInt32(),v=s.deserializeList(t,o.default),E=new e(i,n,a,l,u);return E.bounds=r,E.boxes=v,E.computeIndex(),E.setVV(p,c,f,h),E.offsetX=d,E.offsetY=_,E},e}();t.default=l}.apply(null,r))||(e.exports=n)},flWe:function(e,t,i){var r,n;r=[i.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.serializeList=function(e,t){if(null!==t){e.push(t.length);for(var i=0,r=t;i<r.length;i++)r[i].serialize(e);return e}e.push(0)},t.deserializeList=function(e,t,i){for(var r=e.readInt32(),n=new Array(r),o=0;o<n.length;o++)n[o]=t.deserialize(e,i);return n}}.apply(null,r))||(e.exports=n)},hNI9:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("yai7"),i("apbF")],void 0===(n=function(e,t,i,r){return function(){function e(e,t,i,r,n){void 0===r&&(r=0),void 0===n&&(n=0),this.id=e,this.geometryType=t,this.materialKey=i,this.minZoom=r,this.maxZoom=n,this.meshData=null,this.symbolLevel=0,this.zOrder=0,this.vertexFrom=0,this.vertexCount=0,this.indexFrom=0,this.indexCount=0}return Object.defineProperty(e.prototype,"sortKey",{get:function(){return void 0===this._sortKey&&this._computeSortKey(),this._sortKey},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return this.copy()},e.prototype.copy=function(){var t=new e(this.id,this.geometryType,this.materialKey);return t.vertexFrom=this.vertexFrom,t.vertexCount=this.vertexCount,t.indexFrom=this.indexFrom,t.indexCount=this.indexCount,t.zOrder=this.zOrder,t.symbolLevel=this.symbolLevel,t.meshData=this.meshData,t.minZoom=this.minZoom,t.maxZoom=this.maxZoom,t},e.prototype.setMeshDataFromBuffers=function(e,t,n){var o=new i;for(var s in t){for(var a=t[s].stride,l=t[s].data,u=[],p=r.strideToPackingFactor(a),c=0;c<a*e.vertexCount/p;++c)u[c]=l[c+a*e.vertexFrom/p];o.vertexData.set(s,u)}for(c=o.indexData.length=0;c<e.indexCount;++c)o.indexData[c]=n[c+e.indexFrom]-e.vertexFrom;o.vertexCount=e.vertexCount,this.meshData=o},e.prototype.readMeshDataFromBuffers=function(e,t){for(var n in this.meshData?this.meshData.clear():this.meshData=new i,e){for(var o=e[n].stride,s=e[n].data,a=[],l=r.strideToPackingFactor(o),u=0;u<o*this.vertexCount/l;++u)a[u]=s[u+o*this.vertexFrom/l];this.meshData.vertexData.set(n,a)}for(u=this.meshData.indexData.length=0;u<this.indexCount;++u)this.meshData.indexData[u]=t[u+this.indexFrom]-this.vertexFrom;this.meshData.vertexCount=this.vertexCount},e.prototype.writeMeshDataToBuffers=function(e,t,i,n){for(var o in t)for(var s=t[o].stride,a=this.meshData.vertexData.get(o),l=t[o].data,u=r.strideToPackingFactor(s),p=0;p<s*this.meshData.vertexCount/u;++p)l[p+s*e/u]=a[p];for(p=0;p<this.meshData.indexData.length;++p)n[p+i]=this.meshData.indexData[p]+e;this.vertexFrom=e,this.vertexCount=this.meshData.vertexCount,this.indexFrom=i,this.indexCount=this.meshData.indexData.length},e.writeAllMeshDataToBuffers=function(e,t,i){for(var r=0,n=0,o=0,s=e;o<s.length;o++){var a=s[o];a.writeMeshDataToBuffers(r,t,n,i),r+=a.vertexCount,n+=a.indexCount}},e.prototype._computeSortKey=function(){this._sortKey=(31&this.symbolLevel)<<12|(127&this.zOrder)<<4|7&this.geometryType},e.prototype.serialize=function(e){return e.push(this.geometryType),e.push(this.materialKey),e.push(this.symbolLevel),e.push(this.zOrder),e.push(this.vertexFrom),e.push(this.vertexCount),e.push(this.indexFrom),e.push(this.indexCount),e.push(this.minZoom),e.push(this.maxZoom),e},e.deserialize=function(t,i){var r=t.readInt32(),n=t.readInt32(),o=new e(i.id,r,n);return o.symbolLevel=t.readInt32(),o.zOrder=t.readInt32(),o.vertexFrom=t.readInt32(),o.vertexCount=t.readInt32(),o.indexFrom=t.readInt32(),o.indexCount=t.readInt32(),o.minZoom=t.readInt32(),o.maxZoom=t.readInt32(),o},e}()}.apply(null,r))||(e.exports=n)},ph8t:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("apbF")],void 0===(n=function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,i){this.data=e,this.stride=t,this.vertexCount=i}return e.decode=function(t){return new e(i.allocateTypedArrayBufferwithData(t.data,t.stride),t.stride,t.vertexCount)},e.fromVertexVector=function(t){return new e(i.allocateTypedArrayBufferwithData(t.data.buffer(),t.stride),t.stride,t.vertexCount)},e}();t.default=r;var n=function(){function e(e,t,i){this.geometryType=e,this.indexBuffer=new Uint32Array(t),this.namedBuffers=i}return e.decode=function(t){var i=t.geometryType,n=t.indexBuffer,o={};for(var s in t.namedBuffers)o[s]=r.decode(t.namedBuffers[s]);return new e(i,n,o)},e.fromVertexVectors=function(t){var i=t.geometryType,n=t.indexVector.buffer(),o={};for(var s in t.namedVectors)o[s]=r.fromVertexVector(t.namedVectors[s]);return new e(i,n,o)},e}();t.VertexBuffers=n}.apply(null,r))||(e.exports=n)},x84Q:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i("ab6c"),i("AzkI")],void 0===(n=function(e,t,i,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r,n){this.center=i.vec2f32.fromValues(e,t),this.centerT=i.vec2f32.create(),this.halfWidth=r/2,this.halfHeight=n/2,this.width=r,this.height=n}return Object.defineProperty(e.prototype,"x",{get:function(){return this.center[0]},set:function(e){this.center[0]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.center[1]},set:function(e){this.center[1]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blX",{get:function(){return this.center[0]-this.halfWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blY",{get:function(){return this.center[1]-this.halfHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trX",{get:function(){return this.center[0]+this.halfWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trY",{get:function(){return this.center[1]+this.halfHeight},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.serialize=function(e){return e.writeF32(this.center[0]),e.writeF32(this.center[1]),e.push(this.width),e.push(this.height),e},e.prototype.findCollisionDelta=function(e){var t=Math.abs(e.centerT[0]-this.centerT[0]),i=Math.abs(e.centerT[1]-this.centerT[1]),n=(e.halfWidth+this.halfWidth)/t,o=(e.halfHeight+this.halfHeight)/i,s=Math.min(n,o);return r.log2(s)},e.prototype.extend=function(e){var t=Math.min(this.blX,e.blX),i=Math.min(this.blY,e.blY),r=Math.max(this.trX,e.trX),n=Math.max(this.trY,e.trY);this.width=r-t,this.height=n-i,this.halfWidth=this.width/2,this.halfHeight=this.height/2,this.x=t+this.halfWidth,this.y=i+this.halfHeight},e.deserialize=function(t){return new e(t.readF32(),t.readF32(),t.readInt32(),t.readInt32())},e}();t.default=n}.apply(null,r))||(e.exports=n)},yai7:function(e,t,i){var r,n;r=[i.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(){this.vertexData=new Map,this.vertexCount=0,this.indexData=[]}return e.prototype.clear=function(){this.vertexData.clear(),this.vertexCount=0,this.indexData=[]},e.prototype.update=function(e,t,i){for(var r in e)this.vertexData.set(r,e[r]);for(var r in this.vertexData)null===e[r]&&this.vertexData.delete(r);this.vertexCount=t,this.indexData=i},e}()}.apply(null,r))||(e.exports=n)}}]);
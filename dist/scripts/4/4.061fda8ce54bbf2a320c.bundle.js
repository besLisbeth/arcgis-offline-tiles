(function(){(this||window).webpackJsonp.registerAbsMids({"esri/tasks/support/RelationshipQuery":"531e","esri/core/requireUtils":"ADZV","esri/layers/support/FeatureProcessing":"B0tL","esri/layers/support/FeatureTemplate":"L0gI","esri/layers/support/TimeInfo":"N6pD","esri/layers/graphics/editingSupport":"OVIK","esri/layers/support/Relationship":"PSUj","esri/renderers/support/styleUtils":"PhdM","esri/tasks/support/AttachmentQuery":"TsGx","esri/layers/support/FeatureIndex":"U8ed","esri/layers/support/labelingInfo":"UN5d","esri/layers/support/FeatureType":"V+oH","esri/layers/FeatureLayer":"Zvuv","esri/layers/support/FeatureReduction":"aWt5","esri/TimeSpan":"bXTo","esri/support/popupUtils":"begh","esri/layers/mixins/TemporalLayer":"c/mu","esri/layers/support/FeatureReductionSelection":"fQaS","esri/geometry/support/normalizeUtils":"fw2w","esri/layers/support/TimeReference":"gRHS","esri/layers/support/timeUtils":"ml7j","esri/tasks/support/FeatureSet":"w1v0","esri/layers/graphics/sources/MemorySource":"zqTD"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[4,91],{"531e":function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("TMur"),r("ycL1"),r("rg9i"),r("Vx27")],void 0===(o=function(e,t,r,i,o,n,a,s){return function(e){function t(t){var r=e.call(this,t)||this;return r.gdbVersion=null,r.geometryPrecision=void 0,r.historicMoment=null,r.maxAllowableOffset=void 0,r.objectIds=null,r.outFields=null,r.outSpatialReference=null,r.relationshipId=void 0,r.returnGeometry=!1,r.source=null,r.where=null,r}var n;return r(t,e),n=t,t.prototype._writeHistoricMoment=function(e,t){t.historicMoment=e&&e.getTime()},t.prototype.clone=function(){return new n(a.clone({gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&this.historicMoment.getTime(),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,source:this.source,where:this.where}))},i([s.property({type:String,json:{write:!0}})],t.prototype,"gdbVersion",void 0),i([s.property({type:Number,json:{write:!0}})],t.prototype,"geometryPrecision",void 0),i([s.property({type:Date})],t.prototype,"historicMoment",void 0),i([s.writer("historicMoment")],t.prototype,"_writeHistoricMoment",null),i([s.property({type:Number,json:{write:!0}})],t.prototype,"maxAllowableOffset",void 0),i([s.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),i([s.property({type:[String],json:{write:!0}})],t.prototype,"outFields",void 0),i([s.property({type:o.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],t.prototype,"outSpatialReference",void 0),i([s.property({json:{write:!0}})],t.prototype,"relationshipId",void 0),i([s.property({json:{write:!0}})],t.prototype,"returnGeometry",void 0),i([s.property({json:{write:!0}})],t.prototype,"source",void 0),i([s.property({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],t.prototype,"where",void 0),n=i([s.subclass("esri.tasks.support.RelationshipQuery")],t)}(s.declared(n))}.apply(null,i))||(e.exports=o)},ADZV:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("qMld")],void 0===(o=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.when=function e(t,i){return Array.isArray(i)?r.create(function(e){t(i,function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e(t)})}):e(t,[i]).then(function(e){return e[0]})},t.getAbsMid=function(e,t,r){return t.toAbsMid?t.toAbsMid(e):r.id.replace(/\/[^\/]*$/gi,"/")+e}}.apply(null,i))||(e.exports=o)},B0tL:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("Gtr7"),r("rg9i"),r("Vx27"),r("KQcO"),r("k7g7")],void 0===(o=function(e,t,r,i,o,n,a,s,p){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.fromWorker=function(e){if(!e)return null;var t=JSON.parse(e),r=new o;return r.fields=t.fields&&t.fields.map(function(e){return s.fromJSON(e)}),r.options=t.options,r.process=new(Function.bind.apply(Function,[void 0].concat(t.process.args,[t.process.body]))),r},Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new o(n.clone({fields:this.fields,options:this.options,process:this.process}))},t.prototype.getField=function(e){return p.getField(this.fields,e)},t.prototype.refresh=function(){this.notifyChange("version")},t.prototype.toWorker=function(){var e=this.process.toString();return JSON.stringify({fields:this.fields,options:this.options,process:{body:e.substring(e.indexOf("{")+1,e.lastIndexOf("}")),args:e.slice(e.indexOf("(")+1,e.indexOf(")")).match(/([^\s,]+)/g)}})},i([a.property({type:[s]})],t.prototype,"fields",void 0),i([a.property()],t.prototype,"options",void 0),i([a.property()],t.prototype,"process",void 0),i([a.property({readOnly:!0,dependsOn:["process","options","fields"]})],t.prototype,"version",null),o=i([a.subclass("esri.layers.support.FeatureProcessing")],t)}(a.declared(o))}.apply(null,i))||(e.exports=o)},L0gI:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("ycL1"),r("0+sO"),r("rg9i"),r("Vx27")],void 0===(o=function(e,t,r,i,o,n,a,s){var p=new n.default({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});return function(e){function t(t){var r=e.call(this,t)||this;return r.name=null,r.description=null,r.drawingTool=null,r.prototype=null,r.thumbnail=null,r}return r(t,e),t.prototype.writeDrawingTool=function(e,t){t.drawingTool=p.toJSON(e)},t.prototype.writePrototype=function(e,t){t.prototype=a.fixJson(a.clone(e),!0)},t.prototype.writeThumbnail=function(e,t){t.thumbnail=a.fixJson(a.clone(e))},i([s.property({json:{write:!0}})],t.prototype,"name",void 0),i([s.property({json:{write:!0}})],t.prototype,"description",void 0),i([s.property({json:{read:p.read,write:p.write}})],t.prototype,"drawingTool",void 0),i([s.writer("drawingTool")],t.prototype,"writeDrawingTool",null),i([s.property({json:{write:!0}})],t.prototype,"prototype",void 0),i([s.writer("prototype")],t.prototype,"writePrototype",null),i([s.property({json:{write:!0}})],t.prototype,"thumbnail",void 0),i([s.writer("thumbnail")],t.prototype,"writeThumbnail",null),i([s.subclass("esri.layers.support.FeatureTemplate")],t)}(s.declared(o))}.apply(null,i))||(e.exports=o)},N6pD:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("9gfz"),r("bXTo"),r("ycL1"),r("rg9i"),r("Vx27"),r("gRHS"),r("ml7j")],void 0===(o=function(e,t,r,i,o,n,a,s,p,l,u){return function(e){function t(t){var r=e.call(this)||this;return r.cumulative=!1,r.endField=null,r.hasLiveData=!1,r.interval=null,r.offset=null,r.startField=null,r.timeReference=null,r.timeExtent=null,r.trackIdField=null,r.useTime=void 0,r}var a;return r(t,e),a=t,t.prototype.readInterval=function(e,t){var r=t.timeInterval,i=u.timeUnitKebabDictionary.fromJSON(t.timeIntervalUnits);return r&&i?new n({value:r,unit:i}):null},t.prototype.writeInterval=function(e,t){if(e){var r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null},t.prototype.readOffset=function(e,t){var r=t.exportOptions.timeOffset,i=u.timeUnitKebabDictionary.fromJSON(t.exportOptions.timeOffsetUnits);return r&&i?new n({value:r,unit:i}):null},t.prototype.writeOffset=function(e,t){if(t.exportOptions||(t.exportOptions={}),e){var r=e.toJSON();t.exportOptions.timeOffset=r.value,t.exportOptions.timeOffsetUnits=r.unit}else t.exportOptions.timeOffset=null,t.exportOptions.timeOffsetUnits=null},t.prototype.readTimeExtent=function(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;var r=t.timeExtent[0],i=t.timeExtent[1];return new o({start:r,end:i})},t.prototype.writeTimeExtent=function(e,t,r){e&&e.start&&e.end?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null},t.prototype.clone=function(){var e=this,t=e.cumulative,r=e.endField,i=e.hasLiveData,o=e.interval,n=e.offset,p=e.startField,l=e.timeReference,u=e.timeExtent,d=e.trackIdField,y=e.useTime;return new a({cumulative:t,endField:r,hasLiveData:i,interval:o,offset:n,startField:p,timeReference:s.clone(l),timeExtent:s.clone(u),trackIdField:d,useTime:y})},i([p.property({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],t.prototype,"cumulative",void 0),i([p.property({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],t.prototype,"endField",void 0),i([p.property({type:Boolean,json:{write:!0}})],t.prototype,"hasLiveData",void 0),i([p.property({type:n,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,"interval",void 0),i([p.reader("interval",["timeInterval","timeIntervalUnits"])],t.prototype,"readInterval",null),i([p.writer("interval")],t.prototype,"writeInterval",null),i([p.property({type:n,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,"offset",void 0),i([p.reader("offset",["exportOptions.timeOffset","exportOptions.timeOffset"])],t.prototype,"readOffset",null),i([p.writer("offset")],t.prototype,"writeOffset",null),i([p.property({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],t.prototype,"startField",void 0),i([p.property({type:l,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,"timeReference",void 0),i([p.property({type:o,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,"timeExtent",void 0),i([p.reader("timeExtent")],t.prototype,"readTimeExtent",null),i([p.writer("timeExtent")],t.prototype,"writeTimeExtent",null),i([p.property({type:String,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,"trackIdField",void 0),i([p.property({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],t.prototype,"useTime",void 0),a=i([p.subclass("esri.layers.support.TimeInfo")],t)}(p.declared(a))}.apply(null,i))||(e.exports=o)},OVIK:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("Q2wQ"),r("HZ3d"),r("2Atf"),r("jZlN"),r("ma1f"),r("rg9i"),r("qMld"),r("fw2w")],void 0===(o=function(e,t,r,i,o,n,a,s,p,l){function u(e){return e&&null!=e.applyEdits}function d(e,t){return i(this,void 0,void 0,function(){return r(this,function(r){return"'addFeatures', 'updateFeatures' or 'deleteFeatures' parameter is required",t&&(t.addFeatures||t.deleteFeatures||t.updateFeatures||t.addFeatures.length||t.deleteFeatures.length||t.updateFeatures.length)?((t=o({},t)).addFeatures=t.addFeatures||[],t.updateFeatures=t.updateFeatures||[],t.deleteFeatures=t.deleteFeatures||[],t.addFeatures=t.addFeatures.map(c),t.updateFeatures=t.updateFeatures.map(c),[2,y(t)]):[2,p.reject(new a(e.type+"-layer:missing-parameters","'addFeatures', 'updateFeatures' or 'deleteFeatures' parameter is required"))]})})}function y(e){return i(this,void 0,void 0,function(){var t,i,o,n,a,s;return r(this,function(r){switch(r.label){case 0:return t=e.addFeatures,i=e.updateFeatures,o=t.concat(i).map(function(e){return e.geometry}),[4,l.normalizeCentralMeridian(o)];case 1:return n=r.sent(),a=t.length,s=i.length,n.slice(0,a).forEach(function(t,r){e.addFeatures[r].geometry=t}),n.slice(a,a+s).forEach(function(t,r){e.updateFeatures[r].geometry=t}),[2,e]}})})}function c(e){var t=new n;return e.attributes||(e.attributes={}),t.geometry=e.geometry,t.attributes=e.attributes,t}Object.defineProperty(t,"__esModule",{value:!0}),t.isEditableLayer=function(e){return!0===e.get("capabilities.operations.supportsEditing")},t.applyEdits=function(e,t){return i(this,void 0,void 0,function(){var i,o,n,l,y,c,f,h,m;return r(this,function(r){switch(r.label){case 0:return n={edits:t,result:p.create(function(e,t){i=e,o=t})},e.emit("apply-edits",n),[4,e.load()];case 1:return r.sent(),u(l=e.source)?e.editingEnabled?[4,d(e,t)]:[2,p.reject(new a(e.type+"-layer:editing-disabled","Editing is disabled for layer",{layer:e}))]:[2,p.reject(new a(e.type+"-layer:no-editing-support","Layer source does not support applyEdits capability",{layer:e}))];case 2:y=r.sent(),r.label=3;case 3:return r.trys.push([3,5,,6]),[4,l.applyEdits(y)];case 4:return c=r.sent(),((h={addedFeatures:(f=function(e){return e.filter(function(e){return!e.error}).map(s.clone)})(c.addFeatureResults),updatedFeatures:f(c.updateFeatureResults),deletedFeatures:f(c.deleteFeatureResults)}).addedFeatures.length||h.updatedFeatures.length||h.deletedFeatures.length)&&e.emit("edits",h),i(h),[2,c];case 5:throw m=r.sent(),o(m),m;case 6:return[2]}})})}}.apply(null,i))||(e.exports=o)},PSUj:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("ycL1"),r("0+sO"),r("Vx27")],void 0===(o=function(e,t,r,i,o,n,a){var s=new n.default({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"});return function(e){function t(t){var r=e.call(this,t)||this;return r.cardinality=null,r.id=null,r.keyField=null,r.name=null,r.relatedTableId=null,r}return r(t,e),i([a.property({json:{read:s.read,write:s.write}})],t.prototype,"cardinality",void 0),i([a.property({json:{read:!0,write:!0}})],t.prototype,"id",void 0),i([a.property({json:{read:!0,write:!0}})],t.prototype,"keyField",void 0),i([a.property({json:{read:!0,write:!0}})],t.prototype,"name",void 0),i([a.property({json:{read:!0,write:!0}})],t.prototype,"relatedTableId",void 0),i([a.subclass("esri.layers.support.Relationship")],t)}(a.declared(o))}.apply(null,i))||(e.exports=o)},PhdM:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("Q2wQ"),r("HZ3d"),r("WYKK"),r("V2ZO")],void 0===(o=function(e,t,r,i,o,n){Object.defineProperty(t,"__esModule",{value:!0}),t.loadStyleRenderer=function(e,t){return i(this,void 0,void 0,function(){var i,a,s;return r(this,function(r){switch(r.label){case 0:return(i=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin))&&"unique-value"===i.type&&i.styleOrigin?[4,o.result(i.populateFromStyle())]:[3,2];case 1:!1===(a=r.sent()).ok&&(s=a.error,t&&t.messages&&t.messages.push(new n("renderer:style-reference","Failed to create unique value renderer from style reference: "+s.message,{error:s,context:t})),e.clear("renderer",t.origin)),r.label=2;case 2:return[2]}})})}}.apply(null,i))||(e.exports=o)},TsGx:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("ycL1"),r("rg9i"),r("Vx27")],void 0===(o=function(e,t,r,i,o,n,a){return function(e){function t(t){var r=e.call(this,t)||this;return r.attachmentTypes=null,r.globalIds=null,r.num=null,r.objectIds=null,r.returnMetadata=!1,r.size=null,r.start=null,r.where=null,r}var o;return r(t,e),o=t,t.prototype.writeStart=function(e,t,r){t.resultOffset=this.start,t.resultRecordCount=this.num||10},t.prototype.clone=function(){return new o(n.clone({attachmentTypes:this.attachmentTypes,where:this.where,globalIds:this.globalIds,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))},i([a.property({type:[String],json:{write:!0}})],t.prototype,"attachmentTypes",void 0),i([a.property({type:[Number],json:{write:!0}})],t.prototype,"globalIds",void 0),i([a.property({type:Number,json:{read:{source:"resultRecordCount"}}})],t.prototype,"num",void 0),i([a.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),i([a.property({type:Boolean,json:{default:!1,write:!0}})],t.prototype,"returnMetadata",void 0),i([a.property({type:[Number],json:{write:!0}})],t.prototype,"size",void 0),i([a.property({type:Number,json:{read:{source:"resultOffset"}}})],t.prototype,"start",void 0),i([a.writer("start"),a.writer("num")],t.prototype,"writeStart",null),i([a.property({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],t.prototype,"where",void 0),o=i([a.subclass("esri.tasks.support.AttachmentQuery")],t)}(a.declared(o))}.apply(null,i))||(e.exports=o)},U8ed:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("ycL1"),r("Vx27")],void 0===(o=function(e,t,r,i,o,n){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t){return e.call(this,t)||this}var o;return r(t,e),o=t,t.prototype.clone=function(){var e=this,t=e.name,r=e.fields,i=e.isAscending,n=e.isUnique,a=e.description;return new o({name:t,fields:r,isAscending:i,isUnique:n,description:a})},i([n.property({constructOnly:!0})],t.prototype,"name",void 0),i([n.property({constructOnly:!0})],t.prototype,"fields",void 0),i([n.property({constructOnly:!0})],t.prototype,"isAscending",void 0),i([n.property({constructOnly:!0})],t.prototype,"isUnique",void 0),i([n.property({constructOnly:!0})],t.prototype,"description",void 0),o=i([n.subclass("esri.layers.support.FeatureIndex")],t)}(n.declared(o));t.FeatureIndex=a,t.default=a}.apply(null,i))||(e.exports=o)},UN5d:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("5WBt")],void 0===(o=function(e,t,r){function i(e,t){if(!t)return e;for(var r=e.toLowerCase(),i=0;i<t.length;i++){var o=t[i].name;if(o.toLowerCase()===r)return o}return e}Object.defineProperty(t,"__esModule",{value:!0});var o=/\[([^\[\]]+)\]/gi;t.reader=function(e,t,n){var a=this;return e?e.map(function(e){var s=new r;if(s.read(e,n),s.labelExpression){var p=t.fields||t.layerDefinition&&t.layerDefinition.fields||a.fields;s.labelExpression=s.labelExpression.replace(o,function(e,t){return"["+i(t,p)+"]"})}return s}):null}}.apply(null,i))||(e.exports=o)},"V+oH":function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("ycL1"),r("rg9i"),r("Vx27"),r("ZsQS"),r("L0gI")],void 0===(o=function(e,t,r,i,o,n,a,s,p){return function(e){function t(t){var r=e.call(this,t)||this;return r.id=null,r.name=null,r.domains=null,r.templates=null,r}return r(t,e),t.prototype.readDomains=function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];switch(i.type){case"range":t[r]=s.RangeDomain.fromJSON(i);break;case"codedValue":t[r]=s.CodedValueDomain.fromJSON(i);break;case"inherited":t[r]=s.InheritedDomain.fromJSON(i)}}return t},t.prototype.writeDomains=function(e,t){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]&&e[i].toJSON());n.fixJson(r),t.domains=r},t.prototype.readTemplates=function(e){return e&&e.map(function(e){return new p(e)})},t.prototype.writeTemplates=function(e,t){t.templates=e&&e.map(function(e){return e.toJSON()})},i([a.property({json:{write:!0}})],t.prototype,"id",void 0),i([a.property({json:{write:!0}})],t.prototype,"name",void 0),i([a.property({json:{write:!0}})],t.prototype,"domains",void 0),i([a.reader("domains")],t.prototype,"readDomains",null),i([a.writer("domains")],t.prototype,"writeDomains",null),i([a.property({json:{write:!0}})],t.prototype,"templates",void 0),i([a.reader("templates")],t.prototype,"readTemplates",null),i([a.writer("templates")],t.prototype,"writeTemplates",null),i([a.subclass("esri.layers.support.FeatureType")],t)}(a.declared(o))}.apply(null,i))||(e.exports=o)},Zvuv:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("2Atf"),r("9opi"),r("qKT0"),r("dxjN"),r("Q2wQ"),r("HZ3d"),r("ll/V"),r("ifLZ"),r("OXG3"),r("zp6E"),r("+AWJ"),r("WYKK"),r("y4WC"),r("ma1f"),r("eIBl"),r("0+sO"),r("qsST"),r("EUqE"),r("qMld"),r("jfWY"),r("Vx27"),r("N7S/"),r("MFVu"),r("Z4y+"),r("0RER"),r("OVIK"),r("zqTD"),r("2fnV"),r("FEX1"),r("QJ8R"),r("WaJo"),r("OXmT"),r("c/mu"),r("8CIp"),r("EtsK"),r("U8ed"),r("B0tL"),r("aWt5"),r("fQaS"),r("L0gI"),r("V+oH"),r("KQcO"),r("k7g7"),r("5WBt"),r("UN5d"),r("BZGX"),r("PSUj"),r("hz/Y"),r("PhdM"),r("begh"),r("HqJa"),r("TsGx"),r("w1v0"),r("IpeC"),r("531e")],void 0===(o=function(e,t,i,o,n,a,s,p,l,u,d,y,c,f,h,m,v,g,b,w,F,x,T,S,j,I,O,M,R,D,E,_,q,A,P,C,L,N,G,U,V,Q,k,J,z,W,Z,B,K,H,X,Y,$,ee,te,re,ie){function oe(e){return e&&ne(e)}function ne(e){return e&&e.isInstanceOf&&e.isInstanceOf(h)}function ae(e,t,r){return!!(e&&e.hasOwnProperty(t)?e[t]:r)}var se=new g.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),pe="FeatureLayer",le=b.getLogger("esri.layers.FeatureLayer");return function(e){function t(t){var r=e.call(this)||this;return r._handles=new v,r.capabilities=null,r.copyright=null,r.displayField=null,r.definitionExpression=null,r.dynamicDataSource=null,r.editFieldsInfo=null,r.editingEnabled=!0,r.elevationInfo=null,r.featureReduction=null,r.fields=null,r.fullExtent=null,r.gdbVersion=null,r.geometryProperties=null,r.geometryType=null,r.hasM=void 0,r.hasZ=void 0,r.heightModelInfo=null,r.historicMoment=null,r.isTable=!1,r.labelsVisible=!0,r.labelingInfo=null,r.layerId=void 0,r.legendEnabled=!0,r.maxRecordCount=void 0,r.tileMaxRecordCount=void 0,r.minScale=0,r.maxScale=0,r.objectIdField=null,r.path=null,r.popupEnabled=!0,r.popupTemplate=null,r.relationships=null,r.returnM=void 0,r.returnZ=void 0,r.screenSizePerspectiveEnabled=!0,r.serviceDefinitionExpression=null,r.spatialReference=I.WGS84,r.templates=null,r.timeInfo=null,r.title=null,r.sublayerTitleMode="item-title",r.trackIdField=null,r.type="feature",r.typeIdField=null,r.types=null,r.indexes=new(h.ofType(N.FeatureIndex)),r.userIsAdmin=!1,r.version=void 0,r.visible=!0,r.when().then(function(){return r._setOutFields()}),r}return o(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?i({url:e},t):e},t.prototype.load=function(){var e=this;if(!(this.portalItem&&this.portalItem.loaded&&this.source)){var t=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]}).catch(function(e){return e}).then(function(){if(e.url&&null==e.layerId&&/FeatureServer|MapServer\/*$/i.test(e.url))return e._fetchFirstLayerId().then(function(t){null!=t&&(e.layerId=t)})}).then(function(){if(!e.url&&!e._hasMemorySource())throw new m("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return e.createGraphicsSource().then(function(t){return e._initLayerProperties(t)})});return this.addResolvingPromise(t),this.when()}this.addResolvingPromise(this.createGraphicsSource().then(function(t){return e._initLayerProperties(t)}))},t.prototype.readCapabilities=function(e,t){return t=t.layerDefinition||t,{data:this._readDataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),editing:this._readEditingCapabilities(t)}},t.prototype.readEditingEnabled=function(e,t){return"Query"!==t.capabilities},t.prototype.writeEditingEnabled=function(e,t,r,i){e||(t.capabilities="Query")},Object.defineProperty(t.prototype,"fieldsMap",{get:function(){var e=this.fields,t=new Map;if(!e)return t;for(var r=0,i=e;r<i.length;r++){var o=(s=i[r])&&s.name&&s.name.trim();o&&(t.set(o,s),t.set(o.toLowerCase(),s))}if(this.processing&&this.processing.fields)for(var n=0,a=this.processing.fields;n<a.length;n++){var s,p=(s=a[n])&&s.name&&s.name.trim();p&&(t.set(p,s),t.set(p.toLowerCase(),s))}return t},enumerable:!0,configurable:!0}),t.prototype.readIsTable=function(e,t){return"Table"===(t=t&&t.layerDefinition||t).type},Object.defineProperty(t.prototype,"hasService",{get:function(){return!this._hasMemorySource()},enumerable:!0,configurable:!0}),t.prototype.readMinScale=function(e,t){return t.effectiveMinScale||e||0},t.prototype.readMaxScale=function(e,t){return t.effectiveMaxScale||e||0},t.prototype.readObjectIdFieldFromService=function(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields)for(var r=0,i=t.fields;r<i.length;r++){var o=i[r];if("esriFieldTypeOID"===o.type)return o.name}},Object.defineProperty(t.prototype,"outFields",{set:function(e){Array.isArray(e)?this._setOutFields(e):this._set("outFields",null)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parsedUrl",{get:function(){var e=this.url?x.urlToObject(this.url):null;if(null!=e)if(null!=this.layerId)e.path=x.join(e.path,this.layerId.toString());else if(null!=this.dynamicDataSource){var t={source:B.sourceToJSON(this.dynamicDataSource)};e.query={layer:JSON.stringify(t)}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultPopupTemplate",{get:function(){return this.createPopupTemplate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{set:function(e){z.fixRendererFields(e,this.fields),this._set("renderer",e)},enumerable:!0,configurable:!0}),t.prototype.readRenderer=function(e,t,r){var i,o,n=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(n)(i=H.read(n,t,r)||void 0)||le.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r});else if(t.defaultSymbol)$.read(t.defaultSymbol,t,r),t.types&&t.types.length?(i=new d.UniqueValueRenderer({defaultSymbol:o,field:t.typeIdField}),t.types.forEach(function(e){n.addUniqueValueInfo(e.id,$.read(e.symbol,e,r))})):i=new d.SimpleRenderer({symbol:o});else if("Table"!==t.type){switch(t.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":o=new c.SimpleMarkerSymbol;break;case"esriGeometryPolyline":o=new c.SimpleLineSymbol;break;case"esriGeometryPolygon":o=new c.SimpleFillSymbol}i=o&&new d.SimpleRenderer({symbol:o})}return i},t.prototype.writeRenderer=function(e,t,r,i){H.writeTarget(e,t,r,i)},Object.defineProperty(t.prototype,"source",{set:function(e){var t=this._get("source");t!==e&&(oe(t)&&this._resetMemorySource(t),oe(e)&&this._initMemorySource(e),this._set("source",e))},enumerable:!0,configurable:!0}),t.prototype.castSource=function(e){return e?Array.isArray(e)||ne(e)?new R.default({layer:this,items:e}):e:null},t.prototype.readSource=function(e,t){var r=te.fromJSON(t.featureSet);return new R.default({layer:this,items:r&&r.features||[]})},t.prototype.readTemplates=function(e,t){var r=t.editFieldsInfo,i=r&&r.creatorField,o=r&&r.editorField;return e=e&&e.map(function(e){return Q.fromJSON(e)}),this._fixTemplates(e,i),this._fixTemplates(e,o),e},t.prototype.readTitle=function(e,t){var r=t.layerDefinition&&t.layerDefinition.name||t.name,i=t.title||t.layerDefinition&&t.layerDefinition.title;if(r){var o=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?C.titleFromUrlAndName(this.url,r):r;var n=r||this.url&&C.parse(this.url).title;if(!n)return;return"item-title-and-service-name"===this.sublayerTitleMode&&o&&(n=o+" - "+n),C.cleanTitle(n)}if("item-title"===this.sublayerTitleMode&&i)return i},t.prototype.readTitleFromWebMap=function(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name},t.prototype.readTypeIdField=function(e,t){if(e=(t=t.layerDefinition||t).typeIdField){var r=this.getField(e,t.fields);r&&(e=r.name)}return e},t.prototype.readTypes=function(e,t){var r=this;e=(t=t.layerDefinition||t).types;var i=t.editFieldsInfo,o=i&&i.creatorField,n=i&&i.editorField;return e&&e.map(function(e){return e=k.fromJSON(e),r._fixTemplates(e.templates,o),r._fixTemplates(e.templates,n),e})},Object.defineProperty(t.prototype,"url",{set:function(e){var t=C.sanitizeUrlWithLayerId(this,e,le);this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)},enumerable:!0,configurable:!0}),t.prototype.writeUrl=function(e,t,r,i){C.writeUrlWithLayerId(this,e,null,t,i)},t.prototype.readVersion=function(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3},t.prototype.readVisible=function(e,t){return t.layerDefinition&&null!=t.layerDefinition.defaultVisibility?!!t.layerDefinition.defaultVisibility:null!=t.visibility?!!t.visibility:void 0},t.prototype.addAttachment=function(e,t){var r=this;return this.load().then(function(){return r._checkAttachmentSupport(e)}).then(function(){return"addAttachment"in r.source?r.source.addAttachment(e,t):F.reject(new m(pe,"Layer source does not support addAttachment capability"))})},t.prototype.updateAttachment=function(e,t,r){var i=this;return this.load().then(function(){return i._checkAttachmentSupport(e)}).then(function(){return"updateAttachment"in i.source?i.source.updateAttachment(e,t,r):F.reject(new m(pe,"Layer source does not support updateAttachment capability"))})},t.prototype.applyEdits=function(e){return f.safeCast(M.applyEdits(this,e))},t.prototype.on=function(e,t){return this.inherited(arguments)},t.prototype.createPopupTemplate=function(e){return Y.createPopupTemplate(this,e)},t.prototype.createGraphicsSource=function(){var e=this;return this._hasMemorySource()?(this.emit("graphics-source-create",{graphicsSource:this.source}),this.source.load()):F.create(function(e){return Promise.all([r.e(5),r.e(88)]).then(function(){var t=[r("FN+y")];e.apply(null,t)}.bind(this)).catch(r.oe)}).then(function(t){return new t.default({layer:e}).load()}).then(function(t){return e.emit("graphics-source-create",{graphicsSource:t}),t})},t.prototype.createQuery=function(){var e=new re,t=this.get("capabilities.data");return e.gdbVersion=this.gdbVersion,e.historicMoment=this.historicMoment,e.returnGeometry=!0,t&&(t.supportsZ&&null!=this.returnZ&&(e.returnZ=this.returnZ),t.supportsM&&null!=this.returnM&&(e.returnM=this.returnM)),e.outFields=["*"],e.where=this.definitionExpression||"1=1",e.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,e},t.prototype.deleteAttachments=function(e,t){var r=this;return this.load().then(function(){return r._checkAttachmentSupport(e)}).then(function(){return"deleteAttachments"in r.source?r.source.deleteAttachments(e,t):F.reject(new m(pe,"Layer source does not support deleteAttachments capability"))})},t.prototype.getFeatureType=function(e){var t=this.typeIdField,r=this.types;if(!t||!e)return null;var i=e.attributes?e.attributes[t]:void 0;if(null==i)return null;var o=null;return r.some(function(e){var t=e.id;return null!=t&&(t.toString()===i.toString()&&(o=e),!!o)}),o},t.prototype.getFieldDomain=function(e,t){var r,i=this,o=!1,n=t&&t.feature,a=n&&n.attributes,s=this.typeIdField&&a&&a[this.typeIdField];return null!=s&&this.types&&(o=this.types.some(function(t){return t.id==s&&((r=t.domains&&t.domains[e])&&"inherited"===r.type&&(r=i._getLayerDomain(e)),!0)})),o||r||(r=this._getLayerDomain(e)),r},t.prototype.getField=function(e,t){return t?z.getField(t,e):this.fieldsMap.get(e)||this.fieldsMap.get(e.toLowerCase())},t.prototype.queryAttachments=function(e){var t=this;return this.load().then(function(){if(!t.get("capabilities.data.supportsAttachment"))return F.reject(new m(pe,"this layer doesn't support attachments"));var r=e.attachmentTypes,i=e.objectIds,o=e.globalIds,n=e.num,a=e.size,s=e.start,p=e.where;if(!t.get("capabilities.operations.supportsQueryAttachments")){var l=i&&i.length>1,u=r&&r.length,d=o&&o.length,y=a&&a.length;if(l||u||d||y||n||s||p)return F.reject(new m(pe,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e))}return i&&i.length||p?"queryAttachments"in t.source?t.source.queryAttachments(e):F.reject(new m(pe,"Layer source does not support queryAttachments capability",e)):F.reject(new m(pe,"'objectIds' or 'where' are required to perform attachment query",e))})},t.prototype.queryFeatures=function(e,t){var r=this;return this.load().then(function(){return r.source.queryFeatures(e||r.createQuery(),t)}).then(function(e){if(e&&e.features)for(var t=0,i=e.features;t<i.length;t++){var o=i[t];o.layer=o.sourceLayer=r}return e})},t.prototype.queryObjectIds=function(e,t){var r=this;return this.load().then(function(){return r.source.queryObjectIds?r.source.queryObjectIds(e||r.createQuery(),t):F.reject(new m(pe,"Layer source does not support queryObjectIds capability"))})},t.prototype.queryFeatureCount=function(e,t){var r=this;return this.load().then(function(){return r.source.queryFeatureCount?r.source.queryFeatureCount(e||r.createQuery(),t):F.reject(new m(pe,"Layer source does not support queryFeatureCount capability"))})},t.prototype.queryExtent=function(e,t){var r=this;return this.load().then(function(){return r.source.queryExtent?r.source.queryExtent(e||r.createQuery(),t):F.reject(new m(pe,"Layer source does not support queryExtent capability"))})},t.prototype.queryRelatedFeatures=function(e){var t=this;return this.load().then(function(){return"queryRelatedFeatures"in t.source?t.source.queryRelatedFeatures(e):F.reject(new m(pe,"Layer source does not support queryRelatedFeatures capability"))})},t.prototype.read=function(e,t){var r=e.featureCollection;if(r){var i=r.layers;i&&1===i.length&&(this.inherited(arguments,[i[0],t]),null!=r.showLegend&&this.inherited(arguments,[{showLegend:r.showLegend},t]))}this.inherited(arguments,[e,t]),t&&"service"===t.origin&&this.revert(["objectIdField","fields","timeInfo"],"service")},t.prototype.write=function(e,t){return t&&("web-scene"===t.origin||"web-map"===t.origin)&&t.messages&&this.isTable?(t.messages.push(new m("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' using a Table source cannot written to web scenes",{layer:this})),null):this.inherited(arguments)},t.prototype.importLayerViewModule=function(e){switch(e.type){case"2d":return F.create(function(e){return Promise.all([r.e(23),r.e(95)]).then(function(){var t=[r("/Ck8")];e.apply(null,t)}.bind(this)).catch(r.oe)});case"3d":return F.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(3),r.e(42)]).then(function(){var t=[r("/lv9")];e.apply(null,t)}.bind(this)).catch(r.oe)})}},t.prototype._checkAttachmentSupport=function(e){var t=e.attributes,r=this.objectIdField;return this.get("capabilities.data.supportsAttachment")?e?t?t[r]?void 0:F.reject(new m(pe,"feature is missing the identifying attribute "+r)):F.reject(new m(pe,"'attributes' are required on a feature to query attachments")):F.reject(new m(pe,"A feature is required to add/delete/update attachments")):F.reject(new m(pe,"this layer doesn't support attachments"))},t.prototype._getLayerDomain=function(e){if(!this.fields)return null;var t=null;return this.fields.some(function(r){return r.name===e&&(t=r.domain),!!t}),t},t.prototype._fetchFirstLayerId=function(){return y(this.url,{query:{f:"json"},responseType:"json"}).then(function(e){var t=e.data;if(t)return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0})},t.prototype._initLayerProperties=function(e){return p(this,void 0,void 0,function(){return s(this,function(t){return this._set("source",e),e.layerDefinition&&this.read(e.layerDefinition,{origin:"service",url:this.parsedUrl}),this._verifySource(),this._verifyFields(),z.fixRendererFields(this.renderer,this.fields),z.fixTimeInfoFields(this.timeInfo,this.fields),[2,X.loadStyleRenderer(this,{origin:"service"})]})})},t.prototype._verifyFields=function(){var e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField,this.isTable||this._hasMemorySource()||-1!==e.search(/\/FeatureServer\//i)||this.fields&&this.fields.some(function(e){return"geometry"===e.type})},t.prototype._fixTemplates=function(e,t){e&&e.forEach(function(e){var r=e.prototype&&e.prototype.attributes;r&&t&&delete r[t]})},t.prototype._verifySource=function(){if(this._hasMemorySource()){if(this.url)throw new m("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new m("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")},t.prototype._initMemorySource=function(e){var t=this;e.forEach(function(e){e.layer=t,e.sourceLayer=t}),this._handles.add([e.on("after-add",function(e){e.item.layer=t,e.item.sourceLayer=t}),e.on("after-remove",function(e){e.item.layer=null,e.item.sourceLayer=null})],"fl-source")},t.prototype._resetMemorySource=function(e){e.forEach(function(e){e.layer=null,e.sourceLayer=null}),this._handles.remove("fl-source")},t.prototype._hasMemorySource=function(){return!(this.url||!this.source)},t.prototype._readDataCapabilities=function(e){return{supportsAttachment:ae(e,"hasAttachments",!1),supportsM:ae(e,"hasM",!1),supportsZ:ae(e,"hasZ",!1)}},t.prototype._readOperationsCapabilities=function(e,t){var r=e?e.toLowerCase().split(",").map(function(e){return e.trim()}):[],i=-1!==r.indexOf("editing"),o=i&&-1!==r.indexOf("create"),n=i&&-1!==r.indexOf("delete"),a=i&&-1!==r.indexOf("update");return i&&!(o||n||a)&&(o=n=a=!0),{supportsCalculate:ae(t,"supportsCalculate",!1),supportsTruncate:ae(t,"supportsTruncate",!1),supportsValidateSql:ae(t,"supportsValidateSql",!1),supportsAdd:o,supportsDelete:n,supportsEditing:i,supportsQuery:-1!==r.indexOf("query"),supportsQueryAttachments:ae(t.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:ae(t,"supportsAttachmentsResizing",!1),supportsUpdate:a,supportsExceedsLimitStatistics:ae(t,"supportsExceedsLimitStatistics",!1)}},t.prototype._readQueryCapabilities=function(e){var t=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,i=e.archivingInfo,o=(e.supportedQueryFormats||"").split(",").reduce(function(e,t){var r=t.toLowerCase().trim();return r&&e.add(r),e},new Set);return{supportsStatistics:ae(t,"supportsStatistics",e.supportsStatistics),supportsCentroid:ae(t,"supportsReturningGeometryCentroid",!1),supportsDistance:ae(t,"supportsQueryWithDistance",!1),supportsDistinct:ae(t,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:ae(t,"supportsReturningQueryExtent",!1),supportsGeometryProperties:ae(t,"supportsReturningGeometryProperties",!1),supportsHavingClause:ae(t,"supportsHavingClause",!1),supportsOrderBy:ae(t,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:ae(t,"supportsPagination",!1),supportsQuantization:ae(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:ae(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:ae(e,"supportsReturningQueryGeometry",!1),supportsResultType:ae(t,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:ae(t,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:ae(t,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:ae(e,"useStandardizedQueries",!1),supportsQueryByOthers:ae(r,"allowOthersToQuery",!0),supportsHistoricMoment:ae(i,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:o.has("pbf"),supportsDisjointSpatialRelationship:ae(t,"supportsDisjointSpatialRel",!1)}},t.prototype._readQueryRelatedCapabilities=function(e){var t=e.advancedQueryCapabilities,r=ae(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:ae(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r}},t.prototype._readEditingCapabilities=function(e){var t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:ae(e,"allowGeometryUpdates",!0),supportsGlobalId:ae(e,"supportsApplyEditsWithGlobalIds",!1),supportsRollbackOnFailure:ae(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:ae(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:ae(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:ae(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:ae(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:ae(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:ae(t,"allowOthersToUpdate",!0)}},t.prototype._setOutFields=function(e){if(void 0===e&&(e=this._get("outFields")),e&&e.length){if(l.includes(e,"*"))return void this._set("outFields",["*"]);if(!this.loaded)return void this._set("outFields",e);for(var t=0,r=e;t<r.length;t++){var i=r[t];z.hasField(this.fields,i)||le.error(new m("feature-layer:invalid-field","Invalid field "+i+" found in outFields",{layer:this,outFields:e}))}this._set("outFields",z.fixFields(this.fields,e))}},n([T.property({readOnly:!0,json:{read:!1}})],t.prototype,"capabilities",void 0),n([T.reader("service","capabilities",["advancedQueryCapabilities","archivingInfo","supportsStatistics","supportsAdvancedQueries","hasAttachments","hasM","hasZ","supportsAttachmentsResizing","supportsCalculate","supportsTruncate","supportsValidateSql","supportsCoordinatesQuantization","supportsQuantizationEditMode","useStandardizedQueries","ownershipBasedAccessControlForFeatures","allowGeometryUpdates","supportsApplyEditsWithGlobalIds","supportsRollbackOnFailureParameter","allowUpdateWithoutMValues","supportsAttachmentsByUploadId","capabilities","supportedQueryFormats","supportsExceedsLimitStatistics"])],t.prototype,"readCapabilities",null),n([T.property({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),n([T.property({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),n([T.property({type:String,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],t.prototype,"definitionExpression",void 0),n([T.property({readOnly:!0,json:{read:$.read}})],t.prototype,"defaultSymbol",void 0),n([T.property()],t.prototype,"dynamicDataSource",void 0),n([T.property({readOnly:!0})],t.prototype,"editFieldsInfo",void 0),n([T.property({type:Boolean})],t.prototype,"editingEnabled",void 0),n([T.reader(["portal-item","web-map","web-scene"],"editingEnabled",["capabilities"])],t.prototype,"readEditingEnabled",null),n([T.writer(["portal-item","web-map","web-scene"],"editingEnabled")],t.prototype,"writeEditingEnabled",null),n([T.property(L.elevationInfo)],t.prototype,"elevationInfo",void 0),n([T.property({types:{key:"type",base:U.default,typeMap:{selection:V.default}},json:{origins:{"web-scene":{read:{source:"layerDefinition.featureReduction"},write:{target:"layerDefinition.featureReduction"}}}}})],t.prototype,"featureReduction",void 0),n([T.property({type:[J],json:{origins:{service:{read:!0}},read:{source:"layerDefinition.fields"}}})],t.prototype,"fields",void 0),n([T.property({readOnly:!0,dependsOn:["fields","processing"]})],t.prototype,"fieldsMap",null),n([T.property({type:S,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],t.prototype,"fullExtent",void 0),n([T.property()],t.prototype,"gdbVersion",void 0),n([T.property({readOnly:!0})],t.prototype,"geometryProperties",void 0),n([T.property({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:se.read}},read:{source:"layerDefinition.geometryType",reader:se.read}}})],t.prototype,"geometryType",void 0),n([T.property({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],t.prototype,"hasM",void 0),n([T.property({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],t.prototype,"hasZ",void 0),n([T.property({readOnly:!0,type:j})],t.prototype,"heightModelInfo",void 0),n([T.property({type:Date})],t.prototype,"historicMoment",void 0),n([T.property({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],t.prototype,"id",void 0),n([T.property({readOnly:!0})],t.prototype,"isTable",void 0),n([T.reader("service","isTable",["type"]),T.reader("isTable",["layerDefinition.type"])],t.prototype,"readIsTable",null),n([T.property({dependsOn:["loaded","url","source"],readOnly:!0})],t.prototype,"hasService",null),n([T.property(L.labelsVisible)],t.prototype,"labelsVisible",void 0),n([T.property({type:[W],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:Z.reader},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:Z.reader},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],t.prototype,"labelingInfo",void 0),n([T.property({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],t.prototype,"layerId",void 0),n([T.property(L.legendEnabled)],t.prototype,"legendEnabled",void 0),n([T.property({type:["show","hide"]})],t.prototype,"listMode",void 0),n([T.property({type:Number,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.maxRecordCount"}}})],t.prototype,"maxRecordCount",void 0),n([T.property({type:Number,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.tileMaxRecordCount"}}})],t.prototype,"tileMaxRecordCount",void 0),n([T.property({type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}})],t.prototype,"minScale",void 0),n([T.reader("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),n([T.property({type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}})],t.prototype,"maxScale",void 0),n([T.reader("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),n([T.property({type:String})],t.prototype,"objectIdField",void 0),n([T.reader("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),T.reader("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),n([T.property({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],t.prototype,"operationalLayerType",void 0),n([T.property()],t.prototype,"outFields",null),n([T.property({readOnly:!0,dependsOn:["layerId"]})],t.prototype,"parsedUrl",null),n([T.property({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],t.prototype,"path",void 0),n([T.property(L.popupEnabled)],t.prototype,"popupEnabled",void 0),n([T.property({type:u,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],t.prototype,"popupTemplate",void 0),n([T.property({readOnly:!0,dependsOn:["fields","title"]})],t.prototype,"defaultPopupTemplate",null),n([T.property({type:G})],t.prototype,"processing",void 0),n([T.property({type:[K],readOnly:!0})],t.prototype,"relationships",void 0),n([T.property({types:d.rendererTypes,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],t.prototype,"renderer",null),n([T.reader("service","renderer",["drawingInfo.renderer","defaultSymbol","type"]),T.reader("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol","layerDefinition.type"])],t.prototype,"readRenderer",null),n([T.writer("renderer")],t.prototype,"writeRenderer",null),n([T.property()],t.prototype,"resourceInfo",void 0),n([T.property({type:Boolean})],t.prototype,"returnM",void 0),n([T.property({type:Boolean})],t.prototype,"returnZ",void 0),n([T.property(L.screenSizePerspectiveEnabled)],t.prototype,"screenSizePerspectiveEnabled",void 0),n([T.property()],t.prototype,"source",null),n([T.cast("source")],t.prototype,"castSource",null),n([T.reader("portal-item","source",["featureSet"]),T.reader("web-map","source",["featureSet"])],t.prototype,"readSource",null),n([T.property({readOnly:!0,json:{origins:{service:{read:{source:"definitionExpression"}}}}})],t.prototype,"serviceDefinitionExpression",void 0),n([T.property({type:I,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],t.prototype,"spatialReference",void 0),n([T.property({type:[Q]})],t.prototype,"templates",void 0),n([T.reader("templates",["editFieldsInfo","creatorField","editorField","templates"])],t.prototype,"readTemplates",null),n([T.property()],t.prototype,"timeInfo",void 0),n([T.property()],t.prototype,"title",void 0),n([T.reader("service","title",["name"]),T.reader("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],t.prototype,"readTitle",null),n([T.reader("web-map","title",["layerDefinition.name","title"])],t.prototype,"readTitleFromWebMap",null),n([T.property({type:String})],t.prototype,"sublayerTitleMode",void 0),n([T.property({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),n([T.property({json:{read:!1}})],t.prototype,"type",void 0),n([T.property({type:String,readOnly:!0})],t.prototype,"typeIdField",void 0),n([T.reader("service","typeIdField"),T.reader("typeIdField",["layerDefinition.typeIdField"])],t.prototype,"readTypeIdField",null),n([T.property({type:[k]})],t.prototype,"types",void 0),n([T.reader("service","types",["types"]),T.reader("types",["layerDefinition.types"])],t.prototype,"readTypes",null),n([T.property({type:h.ofType(N.FeatureIndex),readOnly:!0})],t.prototype,"indexes",void 0),n([T.property(L.url)],t.prototype,"url",null),n([T.writer("url")],t.prototype,"writeUrl",null),n([T.property({readOnly:!0})],t.prototype,"userIsAdmin",void 0),n([T.property({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),n([T.reader("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),n([T.property({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],t.prototype,"visible",void 0),n([T.reader("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],t.prototype,"readVisible",null),n([a(0,T.cast(ee))],t.prototype,"queryAttachments",null),n([a(0,T.cast(re))],t.prototype,"queryFeatures",null),n([a(0,T.cast(re))],t.prototype,"queryObjectIds",null),n([a(0,T.cast(re))],t.prototype,"queryFeatureCount",null),n([a(0,T.cast(re))],t.prototype,"queryExtent",null),n([a(0,T.cast(ie))],t.prototype,"queryRelatedFeatures",null),n([T.subclass("esri.layers.FeatureLayer")],t)}(T.declared(O,E,_,A,q,D,w,P))}.apply(null,i))||(e.exports=o)},aWt5:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("ycL1"),r("Vx27")],void 0===(o=function(e,t,r,i,o,n){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=null,t}return r(t,e),i([n.property({type:["selection"],readOnly:!0,json:{read:!1,write:!0}})],t.prototype,"type",void 0),i([n.subclass("esri.layers.support.FeatureReduction")],t)}(n.declared(o));t.FeatureReduction=a,t.default=a}.apply(null,i))||(e.exports=o)},bXTo:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("ycL1"),r("Vx27"),r("ml7j")],void 0===(o=function(e,t,r,i,o,n,a){return function(e){function t(t){var r=e.call(this)||this;return r.value=0,r.unit=null,r}return r(t,e),i([n.property({type:Number,json:{write:!0}})],t.prototype,"value",void 0),i([n.property({type:a.timeUnitKebabDictionary.apiValues,json:{type:a.timeUnitKebabDictionary.jsonValues,read:a.timeUnitKebabDictionary.read,write:a.timeUnitKebabDictionary.write}})],t.prototype,"unit",void 0),i([n.subclass("esri.TimeSpan")],t)}(n.declared(o))}.apply(null,i))||(e.exports=o)},begh:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("2Atf"),r("I08w"),r("ifLZ"),r("O4In"),r("Ctes"),r("BwRt")],void 0===(o=function(e,t,r,i,o,n,a,s){function p(e,t){var r=e;if(t.ignoreFieldTypes&&(e=e.filter(function(e){return-1===t.ignoreFieldTypes.indexOf(e.type)})),0===e.length)return null;var i=t.maximumFields&&e.length>t.maximumFields;return i&&(e=e.slice(0,t.maximumFields)),e===r&&(e=e.slice()),e.sort(l),{fields:e,limitExceeded:i}}function l(e,t){return"oid"===e.type?-1:"oid"===t.type?1:f(e)?-1:f(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function u(e){return e.map(function(e){return new a({fieldName:e.name,label:e.alias,format:d(e),visible:!0})})}function d(e){switch(e.type){case"small-integer":case"integer":case"single":return new s({digitSeparator:!0,places:0});case"double":return new s({digitSeparator:!0,places:2});case"date":return new s({dateFormat:"long-month-day-year"});default:return null}}function y(e){var t=[new n.FieldsContent,new n.AttachmentsContent];return e&&t.push(new n.TextContent({text:"<small>"+i.tooManyFields+"</small>"})),t}function c(e,t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(f(o))return e+": {"+o.name+"}"}return e}function f(e){return"name"===(e.name&&e.name.toLowerCase())||"name"===(e.alias&&e.alias.toLowerCase())||void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.createPopupTemplate=function(e,t){var i=e.fields,n=e.title;if(!i)return null;var a=p(i,r({},h,t));if(!a)return null;var s=c(n,a.fields),l=y(a.limitExceeded),d=u(a.fields);return new o({title:s,content:l,fieldInfos:d})};var h={ignoreFieldTypes:["geometry","blob","raster","guid","xml"],maximumFields:75}}.apply(null,i))||(e.exports=o)},"c/mu":function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("Gtr7"),r("Vx27"),r("N6pD"),r("k7g7")],void 0===(o=function(e,t,r,i,o,n,a,s){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"timeInfo",{set:function(e){s.fixTimeInfoFields(e,this.fields),this._set("timeInfo",e)},enumerable:!0,configurable:!0}),i([n.property({value:null,type:a,json:{write:!0}})],t.prototype,"timeInfo",null),i([n.subclass("esri.layers.mixins.TemporalLayer")],t)}(n.declared(o))}.apply(null,i))||(e.exports=o)},fQaS:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("Vx27"),r("aWt5")],void 0===(o=function(e,t,r,i,o,n){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="selection",t}return r(t,e),i([o.property({type:["selection"]})],t.prototype,"type",void 0),i([o.subclass("esri.layers.support.FeatureReductionSelection")],t)}(o.declared(n.default));t.FeatureReductionSelection=a,t.default=a}.apply(null,i))||(e.exports=o)},fw2w:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("0J3i"),r("ma1f"),r("qsST"),r("qMld"),r("Vt+U"),r("aYWh"),r("Z4y+"),r("nrlZ"),r("vtMp"),r("xuSL")],void 0===(o=function(e,t,r,i,o,n,a,s,p,l,u,d){function y(e){return"polygon"===e.type}function c(e){return"polygon"===e[0].type}function f(e){return"polyline"===e[0].type}function h(e){return y(e)?e.rings:e.paths}function m(e,t){return Math.ceil((e-t)/(2*t))}function v(e,t){for(var r=0,i=h(e);r<i.length;r++)for(var o=0,n=i[r];o<n.length;o++){n[o][0]+=t}return e}function g(e){for(var t=[],r=0,i=0,o=0;o<e.length;o++){for(var n=e[o],a=null,s=0;s<n.length;s++)a=n[s],t.push(a),0===s?i=r=a[0]:(r=Math.min(r,a[0]),i=Math.max(i,a[0]));a&&t.push([(r+i)/2,0])}return t}function b(e,t){if(!(e instanceof s||e instanceof a)){var r="straightLineDensify: the input geometry is neither polyline nor polygon";throw j.error(r),new i(r)}for(var o=[],n=0,p=h(e);n<p.length;n++){var l=p[n],u=[];o.push(u),u.push([l[0][0],l[0][1]]);for(var d=0;d<l.length-1;d++){var c=l[d][0],f=l[d][1],m=l[d+1][0],v=l[d+1][1],g=Math.sqrt((m-c)*(m-c)+(v-f)*(v-f)),b=(v-f)/g,w=(m-c)/g,F=g/t;if(F>1){for(var x=1;x<=F-1;x++){var T=x*t,S=w*T+c,I=b*T+f;u.push([S,I])}var O=(g+Math.floor(F-1)*t)/2,M=w*O+c,R=b*O+f;u.push([M,R])}u.push([m,v])}}return y(e)?new a({rings:o,spatialReference:e.spatialReference}):new s({paths:o,spatialReference:e.spatialReference})}function w(e,t,r){if(t){var i=b(e,1e6);e=u.webMercatorToGeographic(i,!0)}return r&&(e=v(e,r)),e}function F(e,t,r){var i;if(Array.isArray(e)){if((i=e[0])>t){var o=m(i,t);e[0]=i+o*(-2*t)}else if(i<r){o=m(i,r);e[0]=i+o*(-2*r)}}else if((i=e.x)>t){o=m(i,t);e=e.clone().offset(o*(-2*t),0)}else if(i<r){o=m(i,r);e=e.clone().offset(o*(-2*r),0)}return e}function x(e,t){for(var r=-1,i=0;i<t.cutIndexes.length;i++)!function(i){for(var o=t.cutIndexes[i],n=t.geometries[i],a=h(n),s=0;s<a.length;s++)!function(e){var t=a[e];t.some(function(r){if(r[0]<180)return!0;for(var i=0,o=0;o<t.length;o++){var a=t[o][0];i=a>i?a:i}for(var s=-360*m(i=Number(i.toFixed(9)),180),p=0;p<t.length;p++){var l=n.getPoint(e,p);n.setPoint(e,p,l.clone().offset(s,0))}return!0})}(s);if(o===r){if(c(e))for(var p=0,l=h(n);p<l.length;p++){var u=l[p];e[o]=e[o].addRing(u)}else if(f(e))for(var d=0,y=h(n);d<y.length;d++){var v=y[d];e[o]=e[o].addPath(v)}}else r=o,e[o]=n}(i);return e}function T(){return S||(S=new d({url:r.geometryServiceUrl})),S}Object.defineProperty(t,"__esModule",{value:!0});var S,j=o.getLogger("esri.geometry.support.normalizeUtils"),I={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new s({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:p.WebMercator}),minus180Line:new s({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:p.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new s({paths:[[[180,-180],[180,180]]],spatialReference:p.WebMercator}),minus180Line:new s({paths:[[[-180,-180],[-180,180]]],spatialReference:p.WebMercator})}};t.straightLineDensify=b,t.normalizeCentralMeridian=function e(t,r,i){if(!Array.isArray(t))return e([t],r);r||(r=T());for(var o,p,d,y,c,f,h,g,b=0,S=[],j=[],O=0,M=t;O<M.length;O++){var R=M[O];if(R)if(o||(o=R.spatialReference,p=l.getInfo(o),d=o.isWebMercator,y=I[f=d?102100:4326].maxX,c=I[f].minX,h=I[f].plus180Line,g=I[f].minus180Line),p)if("mesh"===R.type)j.push(R);else if("point"===R.type)j.push(F(R.clone(),y,c));else if("multipoint"===R.type){var D=R.clone();D.points=D.points.map(function(e){return F(e,y,c)}),j.push(D)}else if("extent"===R.type){var E=(_=R.clone())._normalize(!1,!1,p);j.push(E.rings?new a(E):E)}else if(R.extent){var _,q=m((_=R.extent).xmin,c)*(2*y),A=0===q?R.clone():v(R.clone(),q);_.offset(q,0),_.intersects(h)&&_.xmax!==y?(b=_.xmax>b?_.xmax:b,A=w(A,d),S.push(A),j.push("cut")):_.intersects(g)&&_.xmin!==c?(b=_.xmax*(2*y)>b?_.xmax*(2*y):b,A=w(A,d,360),S.push(A),j.push("cut")):j.push(A)}else j.push(R.clone());else j.push(R);else j.push(R)}for(var P=m(b,y),C=-90,L=P,N=new s;P>0;){var G=360*P-180;N.addPath([[G,C],[G,-1*C]]),C*=-1,P--}if(S.length>0&&L>0)return r.cut(S,N,i).then(function(e){return x(S,e)}).then(function(e){for(var o=[],n=[],a=0;a<j.length;a++){var s=j[a];if("cut"!==s)n.push(s);else{var p=e.shift(),l=t[a];"polygon"===l.type&&l.rings&&l.rings.length>1&&p.rings.length>=l.rings.length?(o.push(p),n.push("simplify")):n.push(d?u.geographicToWebMercator(p):p)}}return o.length?r.simplify(o,i).then(function(e){for(var t=[],r=0;r<n.length;r++){var i=n[r];"simplify"!==i?t.push(i):t.push(d?u.geographicToWebMercator(e.shift()):e.shift())}return t}):n});for(var U=[],V=0;V<j.length;V++){var Q=j[V];if("cut"!==Q)U.push(Q);else{var k=S.shift();U.push(!0===d?u.geographicToWebMercator(k):k)}}return n.resolve(U)},t.getDenormalizedExtent=function(e){var t;if(!e)return null;var r=e.extent;if(!r)return null;var i=e.spatialReference&&l.getInfo(e.spatialReference);if(!i)return r;var o,n=i.valid,a=n[0],s=n[1],p=2*s,u=r.width,d=r.xmin,y=r.xmax;if(d=(t=[y,d])[0],y=t[1],"extent"===e.type||0===u||u<=s||u>p||d<a||y>s)return r;switch(e.type){case"polygon":if(!(e.rings.length>1))return r;o=g(e.rings);break;case"polyline":if(!(e.paths.length>1))return r;o=g(e.paths);break;case"multipoint":o=e.points}for(var c=r.clone(),f=0;f<o.length;f++){var h=o[f][0];h<0?(h+=s,y=Math.max(h,y)):(h-=s,d=Math.min(h,d))}return c.xmin=d,c.xmax=y,c.width<u?(c.xmin-=s,c.xmax-=s,c):r},t.normalizeMapX=function(e,t){var r=l.getInfo(t);if(r){var i=r.valid,o=i[0],n=i[1],a=n-o;if(e<o)for(;e<o;)e+=a;if(e>n)for(;e>n;)e-=a}return e}}.apply(null,i))||(e.exports=o)},gRHS:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("ycL1"),r("Vx27")],void 0===(o=function(e,t,r,i,o,n){return function(e){function t(t){var r=e.call(this)||this;return r.respectsDaylightSaving=!1,r.timezone=null,r}var o;return r(t,e),o=t,t.prototype.readRespectsDaylightSaving=function(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving},t.prototype.clone=function(){var e=this.respectsDaylightSaving,t=this.timezone;return new o({respectsDaylightSaving:e,timezone:t})},i([n.property({type:Boolean,json:{write:!0}})],t.prototype,"respectsDaylightSaving",void 0),i([n.reader("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],t.prototype,"readRespectsDaylightSaving",null),i([n.property({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],t.prototype,"timezone",void 0),o=i([n.subclass("esri.layers.support.TimeReference")],t)}(n.declared(o))}.apply(null,i))||(e.exports=o)},ml7j:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("0+sO")],void 0===(o=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.timeUnitKebabDictionary=r.strict()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:null})}.apply(null,i))||(e.exports=o)},w1v0:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("qKT0"),r("9opi"),r("TMur"),r("jZlN"),r("ycL1"),r("0+sO"),r("Vx27"),r("Z4y+"),r("Lzvl"),r("KQcO")],void 0===(o=function(e,t,r,i,o,n,a,s,p,l,u,d){var y=new s.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent"}),c=function(e){function t(t){var r=e.call(this,t)||this;return r.displayFieldName=null,r.exceededTransferLimit=!1,r.features=[],r.fields=null,r.geometryType=null,r.hasM=!1,r.hasZ=!1,r.queryGeometry=null,r.spatialReference=null,r}return i(t,e),t.prototype.readFeatures=function(e,t){for(var r=l.fromJSON(t.spatialReference),i=[],o=0;o<e.length;o++){var a=e[o],s=n.fromJSON(a),p=a.geometry&&a.geometry.spatialReference;s.geometry&&!p&&(s.geometry.spatialReference=r),i.push(s)}return i},t.prototype.writeGeometryType=function(e,t,r,i){if(e)y.write(e,t,r,i);else{var o=this.features;if(o)for(var n=0,a=o;n<a.length;n++){var s=a[n];if(s&&s.geometry)return void y.write(s.geometry.type,t,r,i)}}},t.prototype.writeSpatialReference=function(e,t,r,i){if(e)t.spatialReference=e.toJSON();else{var o=this.features;if(o)for(var n=0,a=o;n<a.length;n++){var s=a[n];s&&s.geometry&&s.geometry.spatialReference&&(t.spatialReference=s.geometry.spatialReference.toJSON())}}},t.prototype.toJSON=function(e){var t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var i=t.features[r];if(i.geometry){var o=e&&e[r];i.geometry=o&&o.toJSON()||i.geometry}}return t},t.prototype.quantize=function(e){for(var t=e.scale,r=t[0],i=t[1],o=e.translate,n=o[0],a=o[1],s=this.features,p=this._getQuantizationFunction(this.geometryType,function(e){return Math.round((e-n)/r)},function(e){return Math.round((a-e)/i)}),l=0,u=s.length;l<u;l++)p(s[l].geometry)||(s.splice(l,1),l--,u--);return this.transform=e,this},t.prototype.unquantize=function(){var e=this,t=e.geometryType,r=e.features,i=e.transform;if(!i)return this;for(var o=i.translate,n=o[0],a=o[1],s=i.scale,p=s[0],l=s[1],u=this._getHydrationFunction(t,function(e){return e*p+n},function(e){return a-e*l}),d=0,y=r;d<y.length;d++){var c=y[d].geometry;c&&u(c)}return this},t.prototype._quantizePoints=function(e,t,r){for(var i,o,n=[],a=0,s=e.length;a<s;a++){var p=e[a];if(a>0){var l=t(p[0]),u=r(p[1]);l===i&&u===o||(n.push([l-i,u-o]),i=l,o=u)}else i=t(p[0]),o=r(p[1]),n.push([i,o])}return n.length>0?n:null},t.prototype._getQuantizationFunction=function(e,t,r){var i=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var o=u.isPolygon(e)?e.rings:e.paths,n=[],a=0,s=o.length;a<s;a++){var p=o[a],l=i._quantizePoints(p,t,r);l&&n.push(l)}return n.length>0?(u.isPolygon(e)?e.rings=n:e.paths=n,e):null}:"multipoint"===e?function(e){var o;return(o=i._quantizePoints(e.points,t,r)).length>0?(e.points=o,e):null}:"extent"===e?function(e){return e}:void 0},t.prototype._getHydrationFunction=function(e,t,r){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?function(e){for(var i,o,n=u.isPolygon(e)?e.rings:e.paths,a=0,s=n.length;a<s;a++)for(var p=n[a],l=0,d=p.length;l<d;l++){var y=p[l];l>0?(i+=y[0],o+=y[1]):(i=y[0],o=y[1]),y[0]=t(i),y[1]=r(o)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?function(e){for(var i,o,n=e.points,a=0,s=n.length;a<s;a++){var p=n[a];a>0?(i+=p[0],o+=p[1]):(i=p[0],o=p[1]),p[0]=t(i),p[1]=r(o)}}:void 0},r([p.property({type:String,json:{write:!0}})],t.prototype,"displayFieldName",void 0),r([p.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"exceededTransferLimit",void 0),r([p.property({type:[n],json:{write:!0}})],t.prototype,"features",void 0),r([p.reader("features")],t.prototype,"readFeatures",null),r([p.property({type:[d],json:{write:!0}})],t.prototype,"fields",void 0),r([p.property({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:y.read}}})],t.prototype,"geometryType",void 0),r([p.writer("geometryType")],t.prototype,"writeGeometryType",null),r([p.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasM",void 0),r([p.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasZ",void 0),r([p.property({types:o.geometryTypes,json:{read:u.fromJSON,write:!0}})],t.prototype,"queryGeometry",void 0),r([p.property({type:l,json:{write:!0}})],t.prototype,"spatialReference",void 0),r([p.writer("spatialReference")],t.prototype,"writeSpatialReference",null),r([p.property({json:{write:!0}})],t.prototype,"transform",void 0),r([p.subclass("esri.tasks.support.FeatureSet")],t)}(p.declared(a));return c.prototype.toJSON.isDefaultToJSON=!0,c||(c={}),c}.apply(null,i))||(e.exports=o)},zqTD:function(e,t,r){var i,o;i=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("TMur"),r("jZlN"),r("Gtr7"),r("y4WC"),r("ma1f"),r("H1tY"),r("R7Ts"),r("qsST"),r("qMld"),r("ADZV"),r("8V7H"),r("Vx27"),r("1dvD"),r("pxEq"),r("w1v0"),r.dj.m(e)],void 0===(o=function(e,t,i,o,n,a,s,p,l,u,d,y,c,f,h,m,v,g,b,w){Object.defineProperty(t,"__esModule",{value:!0});var F=0,x=y.getLogger("esri.layers.graphics.sources.MemorySource"),T=function(t){function s(){var e=null!==t&&t.apply(this,arguments)||this;return e._idToClientGraphic=null,e.type="memory",e}return i(s,t),s.prototype.load=function(){var t,i=this;return t=u("esri-webpack")?c.create(function(e){return Promise.all([r.e(2),r.e(3),r.e(11),r.e(13),r.e(69)]).then(function(){var t=[r("fhRm")];e.apply(null,t)}.bind(this)).catch(r.oe)}):c.resolve(),this.addResolvingPromise(t.then(function(){return h.open(f.getAbsMid("./support/MemorySourceWorker",e,w),{strategy:u("esri-workers-for-memory-layers")?"dedicated":"local"}).then(function(e){i._connection=e;var t=i.layer,r=t.fields,o=t.spatialReference,a=t.objectIdField,s=t.hasM,p=t.hasZ,l=t.timeInfo,u="defaults"===i.layer.originOf("spatialReference"),d=i._prepareAddFeatures(i.items);i.on("before-changes",function(e){x.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),e.preventDefault()});var y={features:d.features,fields:r&&r.map(function(e){return e.toJSON()}),geometryType:n.typeKebabDictionary.toJSON(i.workerGeometryType),hasM:s,hasZ:p,objectIdField:a,spatialReference:u?null:o&&o.toJSON(),timeInfo:l?l.toJSON():null};return e.invoke("load",y).then(function(e){for(var t=0,r=e.warnings;t<r.length;t++){var o=r[t];x.warn(o.message,{layer:i.layer})}e.featureErrors.length&&x.warn("Encountered "+e.featureErrors.length+" validation errors while loading features",e.featureErrors);var a=e.layerDefinition;i._geometryTypeRequiresClientGraphicMapping(d.inferredGeometryType)&&(a.geometryType=n.typeKebabDictionary.toJSON(d.inferredGeometryType)),i.layerDefinition=a,i._requiresClientGraphicMapping()&&(i._idToClientGraphic=new Map),d.finish(e.assignedObjectIds)})})})),this.when()},Object.defineProperty(s.prototype,"workerGeometryType",{get:function(){var e=this.layer&&this.layer.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null},enumerable:!0,configurable:!0}),s.prototype.applyEdits=function(e){var t=this;return this.load().then(function(){return t._applyEdits(e)})},s.prototype.openPorts=function(){var e=this;return this.load().then(function(){return e._connection.openPorts()})},s.prototype.queryFeatures=function(e){var t=this;return this.load().then(function(){return t._connection.invoke("queryFeatures",e?e.toJSON():null)}).then(function(e){var r=b.fromJSON(e);if(!t._requiresClientGraphicMapping())return r;for(var i=t.layer.objectIdField,o=0,n=r.features;o<n.length;o++){var a=n[o],s=a.attributes[i],p=t._idToClientGraphic.get(s);p&&(a.geometry=p.geometry)}return r.geometryType=t.layer.geometryType,r})},s.prototype.queryFeaturesJSON=function(e){var t=this;return this._requiresClientGraphicMapping()?c.reject(new l("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)")):this.load().then(function(){return t._connection.invoke("queryFeatures",e?e.toJSON():null)})},s.prototype.queryFeatureCount=function(e){var t=this;return this.load().then(function(){return t._connection.invoke("queryFeatureCount",e?e.toJSON():null)})},s.prototype.queryObjectIds=function(e){var t=this;return this.load().then(function(){return t._connection.invoke("queryObjectIds",e?e.toJSON():null)})},s.prototype.queryExtent=function(e){var t=this;return this.load().then(function(){return t._connection.invoke("queryExtent",e?e.toJSON():null)}).then(function(e){return{count:e.count,extent:n.Extent.fromJSON(e.extent)}})},s.prototype._applyEdits=function(e){var t=this;if(!this._connection)throw new l("feature-layer-source:edit-failure","Memory source not loaded");var r=this.layer.objectIdField,i=null,o=[],n=[];if(e.addFeatures&&(i=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(var a=0,s=e.deleteFeatures;a<s.length;a++){"objectId"in(d=s[a])&&null!=d.objectId?o.push(d.objectId):"attributes"in d&&null!=d.attributes[r]&&o.push(d.attributes[r])}if(e.updateFeatures)for(var p=0,u=e.updateFeatures;p<u.length;p++){var d=u[p];n.push(this._serializeFeature(d))}return this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:n,deletes:o}).then(function(e){var r=e.fullExtent,o=e.featureEditResults;if(t.fullExtent=r,i&&i.finish(o.uidToObjectId),t._idToClientGraphic)for(var n=0,a=o.deleteResults;n<a.length;n++){var s=a[n];s.success&&t._idToClientGraphic.delete(s.objectId)}return t._createEditsResult(o)})},s.prototype._createEditsResult=function(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[]}},s.prototype._createFeatureEditResult=function(e){var t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new l("feature-layer-source:edit-failure",t.description,{code:t.code}):null}},s.prototype._prepareAddFeatures=function(e){for(var t=new Map,r=new Array(e.length),i=null,o=0;o<e.length;o++){var n=e[o],a=this._serializeFeature(n);!i&&n.geometry&&(i=n.geometry.type),r[o]=a,t.set(""+a.uid,n)}var s=this;return{features:r,inferredGeometryType:i,finish:function(e){var r=s.layerDefinition.objectIdField;for(var i in e){var o=e[i],n=t.get(i);n&&(n.attributes||(n.attributes={}),-1===o?delete n.attributes[r]:n.attributes[r]=o,s._addIdToClientGraphic(n))}}}},s.prototype._addIdToClientGraphic=function(e){if(this._idToClientGraphic){var t=this.layerDefinition.objectIdField,r=e.attributes&&e.attributes[t];null!=r&&this._idToClientGraphic.set(r,e)}},s.prototype._requiresClientGraphicMapping=function(){var e=this.layer.geometryType||this.layerDefinition.geometryType;return this._geometryTypeRequiresClientGraphicMapping(e)},s.prototype._geometryRequiresClientGraphicMapping=function(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)},s.prototype._geometryTypeRequiresClientGraphicMapping=function(e){return"mesh"===e||"multipatch"===e||"extent"===e},s.prototype._serializeFeature=function(e){var t=e.attributes,r=this._geometryForSerialization(e),i=(F++).toString();return r?{uid:i,geometry:r.toJSON(),attributes:t}:{uid:i,attributes:t}},s.prototype._geometryForSerialization=function(e){var t=e.geometry;return t?this._geometryRequiresClientGraphicMapping(t)?n.Polygon.fromExtent(t.extent):t:null},o([g.shared({Type:a,ensureType:v.ensureType(a)})],s.prototype,"itemType",void 0),o([m.property()],s.prototype,"type",void 0),o([m.property({constructOnly:!0})],s.prototype,"layer",void 0),o([m.property({readOnly:!0,dependsOn:["layer.geometryType"]})],s.prototype,"workerGeometryType",null),o([m.property()],s.prototype,"layerDefinition",void 0),o([m.subclass("esri.layers.graphics.sources.MemorySource")],s)}(m.declared(s,p,d));t.MemorySource=T,t.default=T}.apply(null,i))||(e.exports=o)}}]);
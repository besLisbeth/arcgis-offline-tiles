(function(){(this||window).webpackJsonp.registerAbsMids({"esri/layers/graphics/data/timeSupport":"/61J","esri/layers/graphics/dehydratedFeatureComparison":"/Vvo","esri/views/2d/layers/features/support/ClusterStore":"0SZq","esri/core/sql/WhereClause":"1eyA","esri/tasks/geometry/cut":"2QEt","esri/layers/graphics/data/BoundsStore":"2xGR","esri/layers/graphics/data/QueryEngineCapabilities":"4/qq","esri/form/elements/inputs/RadioButtonsInput":"4QoD","esri/tasks/support/RelationshipQuery":"531e","esri/form/elements/inputs/Input":"5c1C","esri/tasks/operations/pbfOptimizedFeatureSet":"6/KI","esri/layers/support/AggregateField":"6huW","esri/layers/graphics/data/AttributesBuilder":"700l","esri/form/elements/inputs/DateTimePickerInput":"7mbE","esri/geohash/geohashUtils":"8pdz","esri/views/2d/layers/features/controllers/StreamController":"A4oT","esri/tasks/operations/query":"B16N","esri/views/2d/layers/features/controllers/BaseController":"Btct","esri/layers/support/OutStatistic":"DS8v","esri/layers/graphics/centroid":"Fzzg","esri/tasks/operations/pbfQueryUtils":"G+Sd","esri/geometry/geometryAdapters/json":"H9Hv","esri/tasks/operations/zscale":"HoQt","esri/geohash/GeohashTree":"JOu6","esri/form/FormTemplate":"JZak","esri/geometry/support/GeographicTransformationStep":"MbkH","esri/layers/support/TimeInfo":"N6pD","esri/form/elements/inputs/TextBoxInput":"NO20","esri/layers/support/FeatureReductionCluster":"Nskv","esri/form/elements/inputs/TextAreaInput":"NuLN","esri/geometry/support/GeographicTransformation":"OkCb","esri/layers/support/Relationship":"PSUj","esri/renderers/support/styleUtils":"PhdM","esri/layers/graphics/data/projectionSupport":"Q2Em","esri/form/elements/support/inputs":"QmSy","esri/tasks/support/AttachmentQuery":"TsGx","esri/form/elements/inputs/ComboBoxInput":"TznG","esri/layers/support/FeatureIndex":"U8ed","esri/layers/support/labelingInfo":"UN5d","esri/layers/graphics/data/spatialQuerySupport":"V1i6","esri/geometry/support/aaBoundingBox":"WRgd","esri/views/2d/layers/features/controllers/support/DispatchQueue":"Wuf+","esri/tasks/operations/pbfFeatureServiceParser":"YhCz","esri/layers/graphics/data/attributeSupport":"Ytki","esri/layers/graphics/data/executeTileQuery":"ZGAQ","esri/core/ItemCache":"ZHL0","esri/layers/support/fieldProperties":"ZJpS","esri/layers/support/featureReductionUtils":"Zb3b","esri/layers/graphics/dehydratedFeatures":"ZcgO","esri/layers/graphics/data/QueryEngine":"ZooB","esri/layers/FeatureLayer":"Zvuv","esri/layers/graphics/sources/connections/StreamConnection":"aROD","esri/layers/support/FeatureReduction":"aWt5","esri/form/support/elements":"aXZa","esri/form/elements/inputs/TextInput":"aiV9","esri/layers/mixins/TemporalLayer":"c/mu","esri/tasks/operations/urlUtils":"cGHk","esri/layers/graphics/data/QueryEngineResult":"d81A","esri/form/elements/inputs/AttachmentInput":"f+jp","esri/form/elements/AttachmentElement":"f0Ez","esri/layers/support/FeatureReductionSelection":"fQaS","esri/core/sql/WhereGrammar":"fsiH","esri/geometry/support/normalizeUtils":"fw2w","esri/layers/support/TimeReference":"gRHS","esri/layers/graphics/sources/connections/GeoEventConnection":"gSUo","esri/layers/graphics/contains":"gT/q","esri/layers/graphics/data/StreamFeatureManager":"gsnf","esri/form/elements/inputs/BarcodeScannerInput":"hySu","esri/core/sql/sql92grammar":"ixhC","esri/TimeInterval":"kKuP","esri/core/sql/StandardizedFunctions":"l8NS","esri/form/elements/RelationshipElement":"nbtx","esri/views/2d/layers/features/support/pixelBuffering":"oWCy","esri/form/elements/FieldElement":"rQqI","esri/layers/graphics/data/FeatureStore":"rfv1","esri/form/elements/GroupElement":"sBRY","esri/tasks/geometry/simplify":"sqdO","esri/layers/support/PromiseQueue":"tZaU","esri/core/sql/AggregateFunctions":"vjUK","esri/tasks/support/FeatureSet":"w1v0","esri/geometry/pe":"w7fK","esri/geometry/projection":"wIC5","esri/views/2d/layers/graphics/graphicsUtils":"wjMf","esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":"yLD6","esri/form/ExpressionInfo":"ykst","esri/tasks/operations/pbfDehydratedFeatureSet":"yre/","esri/layers/graphics/data/utils":"zDti","esri/form/elements/Element":"zF2V","esri/layers/graphics/sources/MemorySource":"zqTD","esri/core/sql/WhereClauseCache":"ztx9"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[29,5,6,7,9,144],{"/61J":function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getTimeExtent=function(e,t){if(!e)return null;var r=t.featureAdapter,n=e.startTimeField,i=e.endTimeField,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;if(n&&i)t.forEach((function(e){var t=r.getAttribute(e,n),s=r.getAttribute(e,i);null==t||isNaN(t)||(o=Math.min(o,t)),null==s||isNaN(s)||(a=Math.max(a,s))}));else{var s=n||i;t.forEach((function(e){var t=r.getAttribute(e,s);null==t||isNaN(t)||(o=Math.min(o,t),a=Math.max(a,t))}))}return{start:o,end:a}},t.getTimeOperator=function(e,t,r){if(!t||!e)return null;var n=e.startTimeField,i=e.endTimeField;if(!n&&!i)return null;var o=t.start,a=t.end;return null===o&&null===a?null:void 0===o&&void 0===a?function(){return!1}:n&&i?function(e,t,r,n,i){if(null!=n&&null!=i&&n===i){var o=n;return function(n){return o>=e.getAttribute(n,t)&&o<=e.getAttribute(n,r)}}return null!=n&&null!=i?function(o){return a=n,s=i,u=e.getAttribute(o,t),l=e.getAttribute(o,r),!(u>s||l<a);var a,s,u,l}:null!=n?function(t){return!(e.getAttribute(t,r)<n)}:null!=i?function(r){return!(e.getAttribute(r,t)>i)}:void 0}(r,n,i,o,a):function(e,t,r,n){return null!=r&&null!=n&&r===n?function(n){return e.getAttribute(n,t)===r}:null!=r&&null!=n?function(i){return e.getAttribute(i,t)>=r&&e.getAttribute(i,t)<=n}:null!=r?function(n){return e.getAttribute(n,t)>=r}:null!=n?function(r){return e.getAttribute(r,t)<=n}:void 0}(r,n||i,o,a)}}.apply(null,n))||(e.exports=i)},"/Vvo":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("pcDC"),r("LxLY")],void 0===(i=function(e,t,r,n){function i(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],i=t[r];if(n.length!==i.length)return!1;for(var o=0;o<n.length;o++)if(n[o]!==i[o])return!1}return!0}function o(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1;return!0}function a(e,t){return e===t||e&&t&&e.equals(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.equals=function(e,t){return e===t||null!=e&&null!=t&&e.objectId===t.objectId&&!!function(e,t){if(e===t)return!0;if(n.isNone(e)||n.isNone(t))return!1;if(e.type!==t.type)return!1;switch(e.type){case"point":return function(e,t){return!!a(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}(e,t);case"extent":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!a(e.spatialReference,t.spatialReference)&&e.xmin===t.xmin&&e.ymin===t.ymin&&e.zmin===t.zmin&&e.xmax===t.xmax&&e.ymax===t.ymax&&e.zmax===t.zmax}(e,t);case"polyline":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!a(e.spatialReference,t.spatialReference)&&o(e.paths,t.paths)}(e,t);case"polygon":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!a(e.spatialReference,t.spatialReference)&&o(e.rings,t.rings)}(e,t);case"multipoint":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!a(e.spatialReference,t.spatialReference)&&i(e.points,t.points)}(e,t);case"mesh":return!1;default:return void r.neverReached(e)}}(e.geometry,t.geometry)&&!!function(e,t){if(e===t)return!0;if(!e||!t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var i=0,o=r;i<o.length;i++){var a=o[i];if(e[a]!==t[a])return!1}return!0}(e.attributes,t.attributes)}}.apply(null,n))||(e.exports=i)},"0SZq":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("TMur"),r("H1tY"),r("LxLY"),r("qMld"),r("jBNx"),r("JOu6"),r("8pdz"),r("nrlZ"),r("vtMp"),r("/COu"),r("Jvs9"),r("rfv1"),r("Q2Em"),r("ZooB"),r("zDti"),r("sCbS"),r("WEAo"),r("tI6k")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,p,d,f,h,y,v,m,_,g,b){Object.defineProperty(t,"__esModule",{value:!0});var x=function(e){return o.andThen(e,(function(e){return"cluster"!==e.type?null:r.__assign(r.__assign({},e),{clusterRadius:s.pt2px(e.clusterRadius/2)})}))};function S(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,s,u;return r.__generator(this,(function(r){for(i=[],o=0,s=e;o<s.length;o++)u=s[o],i.push(w(u,t,n));return[2,a.all(i)]}))}))}function w(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a;return r.__generator(this,(function(r){switch(r.label){case 0:return"onStatisticValueExpression"in e.outStatistic?(o=(i=e).outStatistic.onStatisticValueExpression,a=i,[4,_.createRendererExpression(o,t,n)]):[3,2];case 1:return a.expression=r.sent(),[2,i];case 2:return[2,e]}}))}))}var I=function(e){function t(t,r,n,i,o){var a=this,s=new f.default([],[r,n]);return(a=e.call(this,s,i,null,t)||this).invalid=!1,a.canDelete=!1,a.geohashBoundsInfo=o,a}return r.__extends(t,e),Object.defineProperty(t.prototype,"count",{get:function(){return this.attributes.cluster_count},enumerable:!0,configurable:!0}),t.create=function(e,r,n,i,o,a,s){var u=new t(r,n,i,a,s);return u.localId=e.createLocalId(u.objectId,!0),u.tileLevel=o,u},t.prototype.update=function(e,t,r,n,i){return this.geometry.coords[0]=e,this.geometry.coords[1]=t,this.tileLevel=r,this.attributes=n,this.geohashBoundsInfo=i,this.referenceId=null,this.invalid=!1,this},t.prototype.toJSON=function(){return{objectId:this.objectId,referenceId:this.referenceId,attributes:r.__assign(r.__assign({},this.attributes),{clusterId:this.objectId}),geometry:{x:this.geometry.coords[0],y:this.geometry.coords[1]}}},t}(d.default),T=function(e){function t(t,r,i,o){var a=e.call(this,t)||this;return a._deferredDeletionQueue=[],a._invalidated=!1,a._aggregateFieldsHash=null,a._geohashLevel=0,a._aggregateValueRanges={},a._aggregateValueRangesChanged=!1,a._aggregateFields=[],a._hasAggregateValueExpression=!1,a._hasViewExpression=!1,a._$view={scale:0,viewingMode:"none"},a._clusters=new Map,a._tiles=new Map,a._spatialReference=r,a._attributeStore=i,a._featureReduction=x(o),a._projectionSupportCheck=y.checkProjectionSupport(r,n.SpatialReference.WGS84),a}return r.__extends(t,e),t.prototype.setScale=function(e){var t=e!==this._$view.scale&&this._hasViewExpression,r=this._featureReduction;this._$view.scale=e,o.isSome(r)&&t&&(this._tree=new u.GeohashTree(this._aggregateFields),this._unindexFeatures(),this._reindexFeatures(!0))},t.prototype.update=function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,a,s,l,c,p,d,f,h,y,v,m=this;return r.__generator(this,(function(r){switch(r.label){case 0:return i=this._featureReduction,a=o.andThen(t.featureReduction,x),s=t.aggregateFields.reduce((function(e,t){return e+JSON.stringify(t)}),""),l=null===i&&t.featureReduction,c=s!==this._aggregateFieldsHash,p=l||c,c?(d=this,[4,S(t.aggregateFields,this._spatialReference,n)]):[3,2];case 1:for(d._aggregateFields=r.sent(),this._hasViewExpression=!1,f=0,h=this._aggregateFields;f<h.length;f++)"onStatisticValueExpression"in(y=h[f]).outStatistic&&(v=y,this._hasAggregateValueExpression=!0,this._hasViewExpression=this._hasViewExpression||v.expression.referencesScale());r.label=2;case 2:return[4,this._projectionSupportCheck];case 3:return r.sent(),this._featureReduction=a,this._aggregateFieldsHash=s,this._aggregateValueRanges={},this._invalidated=!0,o.isNone(a)?(this._tree=null,[2]):(o.isSome(i)&&i.clusterRadius!==a.clusterRadius&&this._clusters.forEach((function(e){return e.canDelete=!0})),p&&(this._tree=new u.GeohashTree(t.aggregateFields),this._unindexFeatures()),(p||e)&&this._reindexFeatures(c),this._handleClusterUpdates(),this._tiles.forEach((function(e){return m._getClustersForTile(e,0,a.clusterRadius,null,!1)})),[2])}}))}))},t.prototype._ensureAggregateFields=function(e){if(this._hasAggregateValueExpression)for(var t=this._$view,r=0,n=this._aggregateFields;r<n.length;r++){var i=n[r];if("onStatisticValueExpression"in i.outStatistic){var o=i,a=o.expression,s=o.outStatistic.onStatisticField;e.attributes[s]=g.callWithOptimizedFeature(a,e,{$view:t},this.geometryInfo)}}},t.prototype._unindexFeatures=function(){this._featuresById.forEach((function(e){e.geohashIndexed=!1}))},t.prototype._reindexFeatures=function(e){var t=this;this._featuresById.forEach((function(r){r.geohashX||r.geohashY||t._setGeohash(r),e&&t._ensureAggregateFields(r),t._attributeStore.isVisible(r)?t._insertIntoIndex(r):t._removeFromIndex(r)}))},t.prototype.onTileUpdate=function(e){var t=this,r=e.added,n=e.removed;if(r.length){var i=Math.max.apply(Math,r.map((function(e){return e.level})));this._setGeohashLevel(i),r.forEach((function(e){return t._tiles.set(e.key.id,e)}))}if(!o.isNone(this._featureReduction)){var a=this._featureReduction.clusterRadius;n.forEach((function(e){t._tiles.delete(e.key.id),t._markTileClustersForDeletion(e,a)}))}},t.prototype.sweepClusters=function(){var e=this;this._clusters.forEach((function(t,r){t.canDelete&&(e._attributeStore.freeLocalId(t.objectId),e._clusters.delete(r))}));for(var t=0,r=this._deferredDeletionQueue;t<r.length;t++){var n=r[t];this._attributeStore.addLocalId(n)}this._deferredDeletionQueue=[]},t.prototype.executeTileQuery=function(t,n,i){return r.__awaiter(this,void 0,void 0,(function(){var a,s,u;return r.__generator(this,(function(r){switch(r.label){case 0:return o.isNone(this._featureReduction)?[2,e.prototype.executeTileQuery.call(this,t,n,i)]:[4,this._projectionSupportCheck];case 1:return r.sent(),this._handleClusterUpdates(),a=this._featureReduction.clusterRadius,s=this._getTransforms(t,n),u=this._getClustersForTile(t,i.pixelBuffer,a,s),this._aggregateValueRangesChanged&&(this.events.emit("valueRangesChanged",{valueRanges:this._aggregateValueRanges}),this._aggregateValueRangesChanged=!1),[2,u]}}))}))},t.prototype.getAggregate=function(e){var t=null;return this._clusters.forEach((function(r){r.localId===e&&(t=r.toJSON())})),t},t.prototype.getAggregateValueRanges=function(){return this._aggregateValueRanges},t.prototype._getClustersForTile=function(e,t,a,s,u){var l=this;void 0===u&&(u=!0),t=Math.max(t,50);for(var c=2*a,d=new Set,f=this._getGeohashLevel(e.key.level),h=Math.pow(2,e.key.level)*Math.ceil(b.TILE_SIZE/c),_=Math.ceil(t/c)+2,g=Math.ceil(b.TILE_SIZE/c)+2*_,x=e.key,S=x.row,w=x.col*b.TILE_SIZE,I=S*b.TILE_SIZE,T=Math.floor(w/c)-_,E=Math.floor(I/c)-_,M=T+g,P=E+g,F=new Array,O=e.tileInfoView.getLODInfoAt(e.key.level),R=T;R<=M;R++)for(var N=function(t){var a,c,_=R;O.wrap&&(_=R<0?R+h:R%h);var g=O.wrap&&R<0,b=O.wrap&&R%h!==R,x=j._lookupCluster(O,e.key.level,_,t,f);if(o.isSome(x)){var S=o.andThen(s,(function(e){return g?e.left:b?e.right:e.tile}));if(u&&o.isNone(S))return"continue";if(!x.count)return"continue";if(u&&1===x.count){var w=x.geohashBoundsInfo,I=w.xLL,T=w.yLL,E=w.xTR,M=w.yTR,P=w.level,N=o.unwrap(j._tree).findSingleOccupancyNode(I,T,E,M,P),A=o.unwrap(N).getLngLatBounds(),C={x:A[0],y:A[1]},k={x:A[2],y:A[3]},G=0,D=0,L=0,z=0;if(j._spatialReference.isWebMercator)G=(a=p.lngLatToXY(C.x,C.y))[0],D=a[1],L=(c=p.lngLatToXY(k.x,k.y))[0],z=c[1];else{var q=y.project(C,n.SpatialReference.WGS84,j._spatialReference),B=y.project(k,n.SpatialReference.WGS84,j._spatialReference);if(!q||!B)return i("esri-2d-debug"),"continue";G=q.x,D=q.y,L=B.x,z=B.y}var V=[G,D,L,z],Q=null;if(j.forEachInBounds(V,(function(e){l._attributeStore.isVisible(e)&&(Q&&i("esri-2d-debug"),Q=e)})),!Q)return i("esri-2d-debug"),"continue";var U=m.getGeometry(j.geometryInfo.geometryType,j.geometryInfo.hasZ,j.geometryInfo.hasM,Q.geometry,0,o.unwrap(S)),Z=r.__assign(r.__assign({},Q.attributes),x.attributes);x.referenceId=Q.localId,d.add(x.objectId),F.push(new v.Feature(Z,x.localId,U))}else u&&(d.add(x.objectId),U=m.getGeometry(j.geometryInfo.geometryType,j.geometryInfo.hasZ,j.geometryInfo.hasM,x.geometry,0,o.unwrap(S)),F.push(new v.Feature(x.attributes,x.localId,U)))}},j=this,A=E;A<=P;A++)N(A);return{features:F,objectIds:d}},t.prototype._getGeohashLevel=function(e){return Math.min(Math.ceil(e/2+2),12)},t.prototype._setGeohashLevel=function(e){var t=this,r=this._geohashLevel,n=this._getGeohashLevel(e),i=2*(Math.floor(n/2)+1)-1,a=this._tree;this._geohashLevel=i,o.isNone(a)||(i>r?(a.dropLevels(0),this._featuresById.forEach((function(e){e.geohashIndexed&&(t._setGeohash(e),a.insert(e,t._geohashLevel),e.geohashIndexed=!0)}))):i<r&&a.dropLevels(this._geohashLevel))},t.prototype._insertIntoIndex=function(e){e.geohashIndexed||(this._invalidated=!0,e.geohashIndexed=!0,o.unwrap(this._tree).insert(e,this._geohashLevel))},t.prototype._removeFromIndex=function(e){e.geohashIndexed&&(this._invalidated=!0,o.unwrap(this._tree).remove(e,this._geohashLevel),e.geohashIndexed=!1)},t.prototype._handleClusterUpdates=function(){var e=this;this._invalidated&&this._clusters.size&&this._clusters.forEach((function(t){o.isSome(t)&&(t.invalid=t.invalid||e._invalidated)})),this._invalidated=!1},t.prototype._getTransforms=function(e,t){var n={originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[e.bounds[0],e.bounds[3]]},i=c.getInfo(t);if(!i)return{tile:n,left:null,right:null};var o=i.valid,a=o[0],s=o[1];return{tile:n,left:r.__assign(r.__assign({},n),{translate:[s,e.bounds[3]]}),right:r.__assign(r.__assign({},n),{translate:[a-s+e.bounds[0],e.bounds[3]]})}},t.prototype._getClusterId=function(e,t,r){return(15&e)<<28|(16383&t)<<14|16383&r},t.prototype._markForDeletion=function(e,t,r){var n=this._getClusterId(e,t,r);if(this._clusters.has(n)){var i=this._clusters.get(n);o.isSome(i)?i.canDelete=!0:this._clusters.delete(n)}},t.prototype._getClusterBounds=function(e,t,r){if(o.isNone(this._featureReduction))return null;var n=this._featureReduction.clusterRadius,i=2*n,a=r%2?t*i:t*i+n,s=r*i,u=a/b.TILE_SIZE,l=s/b.TILE_SIZE,c=(a+i)/b.TILE_SIZE,p=(s-i)/b.TILE_SIZE;return[e.getXForColumn(u),e.getYForRow(l),e.getXForColumn(c),e.getYForRow(p)]},t.prototype._lookupCluster=function(e,t,i,a,s){var u,c;if(o.isNone(this._featureReduction)||o.isNone(this._tree))return null;var d=this._getClusterId(t,i,a),f=this._clusters.get(d);if(f&&o.isSome(f)&&!f.invalid&&!f.canDelete)return f;var h=this._getClusterBounds(e,i,a),v=h[0],m=h[1],_=h[2],g=h[3],b={x:v,y:m},x={x:_,y:g},S=0,w=0,T=0,E=0;if(this._spatialReference.isWebMercator)S=(u=p.xyToLngLat(b.x,b.y))[0],w=u[1],T=(c=p.xyToLngLat(x.x,x.y))[0],E=c[1];else{var M=y.project(b,this._spatialReference,n.SpatialReference.WGS84),P=y.project(x,this._spatialReference,n.SpatialReference.WGS84);if(!M||!P)return null;S=M.x,w=M.y,T=P.x,E=P.y}S>T&&(T=180);var F={geohashX:0,geohashY:0},O={geohashX:0,geohashY:0};l.setGeohashXY(F,w,S,s),l.setGeohashXY(O,E,T,s);var R=F.geohashX,N=F.geohashY,j=O.geohashX,A=O.geohashY,C={xLL:R,yLL:N,xTR:j,yTR:A,level:s},k=this._tree.getRegionStatistics(R,N,j,A,s),G=k.count,D=k.xTotal,L=k.yTotal,z=G?D/G:0,q=G?L/G:0;if(o.isSome(f)&&f.canDelete){var B=this._attributeStore.removeLocalId(f.objectId);this._deferredDeletionQueue.push(B)}var V=o.isSome(f)&&!f.canDelete&&f.invalid,Q=r.__assign({cluster_count:G},k.attributes),U=this._attributeStore,Z=V?f.update(z,q,t,Q,C):I.create(U,d,z,q,t,Q,C);return 0===G&&(Z.geometry.coords[0]=(v+_)/2,Z.geometry.coords[1]=(m+g)/2),this._attributeStore.setAttributeData(Z.localId,Z,this.geometryInfo,null),this._clusters.set(d,Z),this._updateAggregateValueRangeForCluster(Z,Z.tileLevel),Z},t.prototype._updateAggregateValueRangeForCluster=function(e,t){var r=this._aggregateValueRanges[t]||{minValue:1/0,maxValue:0},n=r.minValue,i=r.maxValue;r.minValue=Math.min(n,e.count),r.maxValue=Math.max(i,e.count),this._aggregateValueRanges[t]=r,n===r.minValue&&i===r.maxValue||(this._aggregateValueRangesChanged=!0)},t.prototype._markTileClustersForDeletion=function(e,t){for(var r=2*t,n=Math.ceil(b.TILE_SIZE/r),i=e.key,o=i.row,a=i.col*b.TILE_SIZE,s=o*b.TILE_SIZE,u=Math.floor(a/r),l=Math.floor(s/r),c=u;c<u+n;c++)for(var p=l;p<l+n;p++)this._markForDeletion(e.key.level,c,p)},t.prototype._setGeohash=function(e){var t=e.geometry;if(t&&t.coords.length){var r={x:t.coords[0],y:t.coords[1]},o=y.project(r,this._spatialReference,n.SpatialReference.WGS84);o?l.setGeohashXY(e,o.y,o.x,12):i("esri-2d-debug")}},t.prototype._add=function(t){var r=this._featuresById.get(t.objectId);e.prototype._add.call(this,t),this._ensureAggregateFields(t),o.isSome(this._featureReduction)&&o.isSome(this._tree)&&(r?(t.geohashIndexed=r.geohashIndexed,t.geohashX=r.geohashX,t.geohashY=r.geohashY):this._setGeohash(t),!t.geohashIndexed&&this._attributeStore.isVisible(t)&&this._insertIntoIndex(t))},t.prototype._remove=function(t){return o.isSome(this._featureReduction)&&o.isSome(this._tree)&&this._removeFromIndex(t),e.prototype._remove.call(this,t)},t}(h.default);t.ClusterStore=T}.apply(null,n))||(e.exports=i)},"1eyA":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("H1tY"),r("R2Zq"),r("vjUK"),r("l8NS"),r("fsiH")],void 0===(i=function(e,t,r,n,i,o,a){Object.defineProperty(t,"__esModule",{value:!0});var s=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,u=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,l=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,c=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,p=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;function d(e,t){return(e+="").length>=t?e:new Array(t-e.length+1).join("0")+e}function f(e,t,r,n,i,o,a,s,u){if(void 0===r&&(r="0"),void 0===n&&(n="0"),void 0===i&&(i="0"),void 0===o&&(o="0"),void 0===a&&(a=""),void 0===s&&(s="0"),void 0===u&&(u="0"),"+"===a||"-"===a){var l=d(parseInt(e,10),4)+"-"+d(parseInt(t,10),2)+"-"+d(parseInt(r,10),2),c="";parseFloat(o)<10&&(c="0");var p=d(parseInt(n,10),2)+":"+d(parseInt(i,10),2)+":"+(c+parseFloat(o).toString()),f=""+a+d(parseInt(s,10),2)+":"+d(parseInt(u,10),2);return new Date(l+"T"+p+f)}return new Date(parseInt(e,10),parseInt(t,10)-1,parseInt(r,10),parseInt(n,10),parseInt(i,10),parseFloat(o))}var h=function(){function e(){}return e.makeBool=function(e){return _(e)},e.featureValue=function(e,t,r,n){return F(e,t,r,n)},e.equalsNull=function(e){return null===e},e.applyLike=function(e,t,r){return I(e,t,r)},e.ensureArray=function(e){return g(e)},e.applyIn=function(e,t){return w(e,t)},e.currentDate=function(){var e=new Date;return e.setHours(0,0,0,0),e},e.makeSqlInterval=function(e,t,r){return o.SqlInterval.createFromValueAndQualifer(e,t,r)},e.convertInterval=function(e){return e instanceof o.SqlInterval?e.valueInMilliseconds():e},e.currentTimestamp=function(){return new Date},e.compare=function(e,t,r){return E(e,t,r)},e.calculate=function(e,t,r){return P(e,t,r)},e.makeComparable=function(e){return T(e)},e.evaluateFunction=function(e,t){return o.evaluateFunction(e,t)},e.lookup=function(e,t){var r=t[e];return void 0===r?null:r},e.between=function(e,t){return null==e||null==t[0]||null==t[1]?null:e>=t[0]&&e<=t[1]},e.notbetween=function(e,t){return null==e||null==t[0]||null==t[1]?null:e<t[0]||e>t[1]},e.ternaryNot=function(e){return b(e)},e.ternaryAnd=function(e,t){return x(e,t)},e.ternaryOr=function(e,t){return S(e,t)},e}(),y=function(){function e(e,t){this.fieldsIndex=t,this.datefields={},this.parameters={},this.parseTree=a.WhereGrammar.parse(e);var r=this.extractExpressionInfo(t),n=r.isStandardized,i=r.isAggregate,o=r.referencedFieldNames;this.referencedFieldNames=o,this.isStandardized=n,this.isAggregate=i}return e.create=function(t,r){return new e(t,r)},Object.defineProperty(e.prototype,"fieldNames",{get:function(){return this.referencedFieldNames},enumerable:!0,configurable:!0}),e.prototype.testSet=function(e,r){void 0===r&&(r=t.defaultAttributeAdapter);for(var n={},i=function(t){n[t]=e.map((function(e){return r.getAttribute(e,t)}))},o=0,a=this.fieldNames;o<a.length;o++)i(a[o]);return!!this.evaluateNode(this.parseTree,{attributes:n},t.defaultAttributeAdapter)},e.prototype.calculateValue=function(e,r){void 0===r&&(r=t.defaultAttributeAdapter);var n=this.evaluateNode(this.parseTree,e,r);return n instanceof o.SqlInterval?n.valueInMilliseconds()/864e5:n},e.prototype.calculateValueCompiled=function(e,n){return void 0===n&&(n=t.defaultAttributeAdapter),null!=this.parseTree._compiledVersion?this.parseTree._compiledVersion(e,this.parameters,n,this.datefields):r("csp-restrictions")?this.calculateValue(e,n):(this.compileMe(),this.parseTree._compiledVersion(e,this.parameters,n,this.datefields))},e.prototype.testFeature=function(e,r){return void 0===r&&(r=t.defaultAttributeAdapter),!!this.evaluateNode(this.parseTree,e,r)},e.prototype.testFeatureCompiled=function(e,n){return void 0===n&&(n=t.defaultAttributeAdapter),null!=this.parseTree._compiledVersion?!!this.parseTree._compiledVersion(e,this.parameters,n,this.datefields):r("csp-restrictions")?this.testFeature(e,n):(this.compileMe(),!!this.parseTree._compiledVersion(e,this.parameters,n,this.datefields))},e.prototype.getFunctions=function(){var e=[];return this.visitAll(this.parseTree,(function(t){"function"===t.type&&e.push(t.name.toLowerCase())})),M(e)},e.prototype.getExpressions=function(){var e=new Map;return this.visitAll(this.parseTree,(function(t){if("function"===t.type){var r=t.name.toLowerCase(),n=t.args.value[0];if("column_ref"===n.type){var i=n.column,o=r+"-"+i;e.has(o)||e.set(o,{aggregateType:r,field:i})}}})),n.valuesOfMap(e)},e.prototype.getVariables=function(){var e=[];return this.visitAll(this.parseTree,(function(t){"param"===t.type&&e.push(t.value.toLowerCase())})),M(e)},e.prototype.compileMe=function(){var e="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","datefields",e).bind(h)},e.prototype.extractExpressionInfo=function(e){var t=this,r=[],n=!0,a=!0;return this.visitAll(this.parseTree,(function(s){switch(s.type){case"column_ref":var u=e.get(s.column),l=u&&u.name;!u||"date"!==u.type&&"esriFieldTypeDate"!==u.type||(t.datefields[u.name]=1),void 0!==l?(r.push(l),s.column=l):r.push(s.column);break;case"function":var c=s.name,p=s.args.value.length;n&&(n=o.isStandardized(c,p)),a&&(a=i.isAggregate(c,p))}})),{referencedFieldNames:M(r),isStandardized:n,isAggregate:a}},e.prototype.visitAll=function(e,t){if(null!=e)switch(t(e),e.type){case"when_clause":this.visitAll(e.operand,t),this.visitAll(e.value,t);break;case"case_expression":for(var r=0,n=e.clauses;r<n.length;r++){var i=n[r];this.visitAll(i,t)}"simple"===e.format&&this.visitAll(e.operand,t),null!==e.else&&this.visitAll(e.else,t);break;case"expr_list":for(var o=0,a=e.value;o<a.length;o++)i=a[o],this.visitAll(i,t);break;case"unary_expr":this.visitAll(e.expr,t);break;case"binary_expr":this.visitAll(e.left,t),this.visitAll(e.right,t);break;case"function":this.visitAll(e.args,t)}},e.prototype.evaluateNodeToJavaScript=function(e){switch(e.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(e.value)+", "+JSON.stringify(e.qualifier)+","+JSON.stringify(e.op)+")";case"case_expression":var t="";if("simple"===e.format){var r="this.makeComparable("+this.evaluateNodeToJavaScript(e.operand)+")";t="( ";for(var n=0;n<e.clauses.length;n++)t+=" ("+r+" === this.makeComparable("+this.evaluateNodeToJavaScript(e.clauses[n].operand)+")) ? ("+this.evaluateNodeToJavaScript(e.clauses[n].value)+") : ";null!==e.else?t+=this.evaluateNodeToJavaScript(e.else):t+="null",t+=" )"}else{for(t="( ",n=0;n<e.clauses.length;n++)t+=" this.makeBool("+this.evaluateNodeToJavaScript(e.clauses[n].operand)+")===true ? ("+this.evaluateNodeToJavaScript(e.clauses[n].value)+") : ";null!==e.else?t+=this.evaluateNodeToJavaScript(e.else):t+="null",t+=" )"}return t;case"param":return"this.lookup("+JSON.stringify(e.value.toLowerCase())+",lookups)";case"expr_list":for(var i="[",o=0,a=e.value;o<a.length;o++){var s=a[o];"["!==i&&(i+=","),i+=this.evaluateNodeToJavaScript(s)}return i+"]";case"unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(e.expr)+")";case"binary_expr":switch(e.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case"IS":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")";case"ISNOT":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+"))";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+")))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")";case"*":case"-":case"+":case"/":return"this.calculate("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")"}throw new Error("Not Supported Operator "+e.operator);case"null":case"bool":case"string":case"number":return JSON.stringify(e.value);case"date":return"(new Date("+m(e.value).getTime().toString()+"))";case"timestamp":return"(new Date("+v(e.value).getTime().toString()+"))";case"current_time":return"date"===e.mode?"this.currentDate()":"this.currentTimestamp()";case"column_ref":return"this.featureValue(feature,"+JSON.stringify(e.column)+",datefields,attributeAdapter)";case"function":return"this.evaluateFunction("+JSON.stringify(e.name)+","+this.evaluateNodeToJavaScript(e.args)+")"}throw new Error("Unsupported sql syntax "+e.type)},e.prototype.evaluateNode=function(e,t,r){switch(e.type){case"interval":var n=this.evaluateNode(e.value,t,r);return o.SqlInterval.createFromValueAndQualifer(n,e.qualifier,e.op);case"case_expression":if("simple"===e.format){for(var a=T(this.evaluateNode(e.operand,t,r)),s=0;s<e.clauses.length;s++)if(a===T(this.evaluateNode(e.clauses[s].operand,t,r)))return this.evaluateNode(e.clauses[s].value,t,r);if(null!==e.else)return this.evaluateNode(e.else,t,r)}else{for(s=0;s<e.clauses.length;s++)if(_(this.evaluateNode(e.clauses[s].operand,t,r)))return this.evaluateNode(e.clauses[s].value,t,r);if(null!==e.else)return this.evaluateNode(e.else,t,r)}return null;case"param":return this.parameters[e.value.toLowerCase()];case"expr_list":for(var u=[],l=0,c=e.value;l<c.length;l++){var p=c[l];u.push(this.evaluateNode(p,t,r))}return u;case"unary_expr":return b(this.evaluateNode(e.expr,t,r));case"binary_expr":switch(e.operator){case"AND":return x(this.evaluateNode(e.left,t,r),this.evaluateNode(e.right,t,r));case"OR":return S(this.evaluateNode(e.left,t,r),this.evaluateNode(e.right,t,r));case"IS":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return null===this.evaluateNode(e.left,t,r);case"ISNOT":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return null!==this.evaluateNode(e.left,t,r);case"IN":var d=g(this.evaluateNode(e.right,t,r));return w(this.evaluateNode(e.left,t,r),d);case"NOT IN":return d=g(this.evaluateNode(e.right,t,r)),b(w(this.evaluateNode(e.left,t,r),d));case"BETWEEN":var f=this.evaluateNode(e.left,t,r),h=this.evaluateNode(e.right,t,r);return null==f||null==h[0]||null==h[1]?null:f>=T(h[0])&&f<=T(h[1]);case"NOTBETWEEN":return f=this.evaluateNode(e.left,t,r),h=this.evaluateNode(e.right,t,r),null==f||null==h[0]||null==h[1]?null:f<T(h[0])||f>T(h[1]);case"LIKE":return I(this.evaluateNode(e.left,t,r),this.evaluateNode(e.right,t,r),e.escape);case"NOT LIKE":return b(I(this.evaluateNode(e.left,t,r),this.evaluateNode(e.right,t,r),e.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return E(e.operator,this.evaluateNode(e.left,t,r),this.evaluateNode(e.right,t,r));case"-":case"+":case"*":case"/":return P(e.operator,this.evaluateNode(e.left,t,r),this.evaluateNode(e.right,t,r))}case"null":case"bool":case"string":case"number":return e.value;case"date":return m(e.value);case"timestamp":return v(e.value);case"current_time":var y=new Date;return"date"===e.mode&&y.setHours(0,0,0,0),y;case"column_ref":return F(t,e.column,this.datefields,r);case"function":var M=this.evaluateNode(e.args,t,r);return this.isAggregate?i.aggregateFunction(e.name,M):o.evaluateFunction(e.name,M)}throw new Error("Unsupported sql syntax "+e.type)},e}();function v(e){var t=u.exec(e);if(null!==t)return f(t[1],t[2],t[3],t[4],t[5],t[6]);if(null!==(t=l.exec(e)))return f(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9]);if(null!==(t=c.exec(e)))return f(t[1],t[2],t[3],t[4],t[5],"0",t[6],t[7],t[8]);if(null!==(t=p.exec(e)))return f(t[1],t[2],t[3],t[4],t[5]);if(null!==(t=s.exec(e)))return f(t[1],t[2],t[3]);throw new Error("SQL Invalid Timestamp")}function m(e){var t=s.exec(e);if(null===t)throw new Error("SQL Invalid Date");var r=t[1],n=t[2],i=t[3];return new Date(parseInt(r,10),parseInt(n,10)-1,parseInt(i,10))}function _(e){return!0===e}function g(e){return Array.isArray(e)?e:[e]}function b(e){return null!==e?!0!==e:null}function x(e,t){return null!=e&&null!=t?!0===e&&!0===t:!1!==e&&!1!==t&&null}function S(e,t){return null!=e&&null!=t?!0===e||!0===t:!0===e||!0===t||null}function w(e,t){if(null==e)return null;for(var r=!1,n=0,i=t;n<i.length;n++){var o=i[n];if(null==o)r=null;else if(e===o){r=!0;break}}return r}function I(e,t,r){if(null==e)return null;for(var n=t,i=r,o="",a=0,s=0;s<n.length;s++){var u=n.charAt(s);switch(a){case 0:u===i?a=1:"-[]/{}()*+?.\\^$|".indexOf(u)>=0?o+="\\"+u:o+="%"===u?".*":"_"===u?".":u;break;case 1:"-[]/{}()*+?.\\^$|".indexOf(u)>=0?o+="\\"+u:o+=u,a=0}}return new RegExp("^"+o+"$").test(e)}function T(e){return e instanceof Date?e.valueOf():e}function E(e,t,r){if(null==t||null==r)return null;var n=T(t),i=T(r);switch(e){case"<>":return n!==i;case"=":return n===i;case">":return n>i;case"<":return n<i;case">=":return n>=i;case"<=":return n<=i}}function M(e){for(var t=[],r={},n=0,i=e;n<i.length;n++){var o=i[n],a=o.toLowerCase();void 0===r[a]&&(t.push(o),r[a]=1)}return t}function P(e,t,r){if(t instanceof o.SqlInterval)if(r instanceof Date)switch(e){case"+":return new Date(t.valueInMilliseconds()+r.getTime());case"-":return t.valueInMilliseconds()-r.getTime();case"*":return t.valueInMilliseconds()*r.getTime();case"/":return t.valueInMilliseconds()/r.getTime()}else if(r instanceof o.SqlInterval)switch(e){case"+":return o.SqlInterval.createFromMilliseconds(t.valueInMilliseconds()+r.valueInMilliseconds());case"-":return o.SqlInterval.createFromMilliseconds(t.valueInMilliseconds()-r.valueInMilliseconds());case"*":return t.valueInMilliseconds()*r.valueInMilliseconds();case"/":return t.valueInMilliseconds()/r.valueInMilliseconds()}else t=t.valueInMilliseconds();else if(r instanceof o.SqlInterval)if(t instanceof Date)switch(e){case"+":return new Date(r.valueInMilliseconds()+t.getTime());case"-":return new Date(t.getTime()-r.valueInMilliseconds());case"*":return t.getTime()*r.valueInMilliseconds();case"/":return t.getTime()/r.valueInMilliseconds()}else r=r.valueInMilliseconds();else if(t instanceof Date&&"number"==typeof r)switch(r=24*r*60*60*1e3,t=t.getTime(),e){case"+":return new Date(t+r);case"-":return new Date(t-r);case"*":return new Date(t*r);case"/":return new Date(t/r)}else if(r instanceof Date&&"number"==typeof t)switch(t=24*t*60*60*1e3,r=r.getTime(),e){case"+":return new Date(t+r);case"-":return new Date(t-r);case"*":return new Date(t*r);case"/":return new Date(t/r)}switch(e){case"+":return t+r;case"-":return t-r;case"*":return t*r;case"/":return t/r}}function F(e,t,r,n){var i=n.getAttribute(e,t);return null!=i&&1===r[t]?new Date(i):i}t.WhereClause=y,t.defaultAttributeAdapter={getAttribute:function(e,t){var r;return((r=e)&&"object"==typeof r.attributes?e.attributes:e)[t]}}}.apply(null,n))||(e.exports=i)},"2QEt":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("TMur"),r("zp6E"),r("jfWY"),r("Lzvl")],void 0===(i=function(e,t,r,n,i,o,a){Object.defineProperty(t,"__esModule",{value:!0}),t.cut=function(e,t,s,u){return r.__awaiter(this,void 0,void 0,(function(){var l,c,p,d,f,h,y;return r.__generator(this,(function(v){switch(v.label){case 0:return l="string"==typeof e?o.urlToObject(e):e,c=t[0].spatialReference,p=r.__assign(r.__assign({},u),{query:r.__assign(r.__assign({},l.query),{f:"json",sr:JSON.stringify(c),target:JSON.stringify({geometryType:a.getJsonType(t[0]),geometries:t}),cutter:JSON.stringify(s)})}),[4,i(l.path+"/cut",p)];case 1:return d=v.sent(),f=d.data,h=f.cutIndexes,y=f.geometries,[2,{cutIndexes:h,geometries:(void 0===y?[]:y).map((function(e){return n.fromJSON(e).set(c)}))}]}}))}))}}.apply(null,n))||(e.exports=i)},"2xGR":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("H1tY"),r("jEml"),r("2Kdy")],void 0===(i=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0});var i={minX:0,minY:0,maxX:0,maxY:0},o=function(){function e(){var e=this;this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=n(9,r("csp-restrictions")?function(e){return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}}:["[0]","[1]","[2]","[3]"]),this._loadIndex=function(){if(e._indexInvalid){var t=new Array(e._idByBounds.size),r=0;e._idByBounds.forEach((function(e,n){t[r++]=n})),e._indexInvalid=!1,e._index.clear(),e._index.load(t)}else e._boundsToLoad.length&&(e._index.load(e._boundsToLoad.filter((function(t){return e._idByBounds.has(t)}))),e._boundsToLoad.length=0)}}return e.prototype.clear=function(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()},e.prototype.delete=function(e){var t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))},e.prototype.forEachInBounds=function(e,t){this._loadIndex();for(var r=0,n=function(e,t){return i.minX=t[0],i.minY=t[1],i.maxX=t[2],i.maxY=t[3],e.search(i)}(this._index,e);r<n.length;r++){var o=n[r];t(this._idByBounds.get(o))}},e.prototype.get=function(e){return this._boundsById.get(e)},e.prototype.has=function(e){return this._boundsById.has(e)},e.prototype.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)},e.prototype.set=function(e,t){if(!this._indexInvalid){var r=this._boundsById.get(e);r&&(this._index.remove(r),this._idByBounds.delete(r))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))},e}();t.BoundsStore=o}.apply(null,n))||(e.exports=i)},"4/qq":function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}}.apply(null,n))||(e.exports=i)},"4QoD":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("Vx27"),r("5c1C")],void 0===(i=function(e,t,r,n,i){return function(e){function t(t){var r=e.call(this,t)||this;return r.type="radio-buttons",r}var i;return r.__extends(t,e),i=t,t.prototype.clone=function(){return new i},r.__decorate([n.property({type:["radio-buttons"],json:{read:!1,write:!0}})],t.prototype,"type",void 0),i=r.__decorate([n.subclass("esri.form.elements.inputs.RadioButtonsInput")],t)}(i)}.apply(null,n))||(e.exports=i)},"531e":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("TMur"),r("ycL1"),r("rg9i"),r("Vx27"),r("1dvD")],void 0===(i=function(e,t,r,n,i,o,a,s){var u=function(e){function t(t){var r=e.call(this,t)||this;return r.gdbVersion=null,r.geometryPrecision=void 0,r.historicMoment=null,r.maxAllowableOffset=void 0,r.objectIds=null,r.outFields=null,r.outSpatialReference=null,r.relationshipId=void 0,r.returnGeometry=!1,r.returnM=void 0,r.returnZ=void 0,r.source=null,r.where=null,r}var i;return r.__extends(t,e),i=t,t.prototype._writeHistoricMoment=function(e,t){t.historicMoment=e&&e.getTime()},t.prototype.clone=function(){return new i(o.clone({gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&this.historicMoment.getTime(),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,source:this.source,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))},r.__decorate([a.property({type:String,json:{write:!0}})],t.prototype,"gdbVersion",void 0),r.__decorate([a.property({type:Number,json:{write:!0}})],t.prototype,"geometryPrecision",void 0),r.__decorate([a.property({type:Date})],t.prototype,"historicMoment",void 0),r.__decorate([a.writer("historicMoment")],t.prototype,"_writeHistoricMoment",null),r.__decorate([a.property({type:Number,json:{write:!0}})],t.prototype,"maxAllowableOffset",void 0),r.__decorate([a.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),r.__decorate([a.property({type:[String],json:{write:!0}})],t.prototype,"outFields",void 0),r.__decorate([a.property({type:n.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],t.prototype,"outSpatialReference",void 0),r.__decorate([a.property({json:{write:!0}})],t.prototype,"relationshipId",void 0),r.__decorate([a.property({json:{write:!0}})],t.prototype,"returnGeometry",void 0),r.__decorate([a.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"returnM",void 0),r.__decorate([a.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"returnZ",void 0),r.__decorate([a.property({json:{write:!0}})],t.prototype,"source",void 0),r.__decorate([a.property({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],t.prototype,"where",void 0),i=r.__decorate([a.subclass("esri.tasks.support.RelationshipQuery")],t)}(i.JSONSupport);return u.from=s.default(u),u}.apply(null,n))||(e.exports=i)},"5c1C":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ycL1"),r("Vx27")],void 0===(i=function(e,t,r,n,i){return function(e){function t(t){var r=e.call(this,t)||this;return r.type=null,r}return r.__extends(t,e),r.__decorate([i.property()],t.prototype,"type",void 0),r.__decorate([i.subclass("esri.form.elements.inputs.Input")],t)}(n.JSONSupport)}.apply(null,n))||(e.exports=i)},"6/KI":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("8uEs"),r("nrlZ"),r("/COu"),r("xJgq"),r("Jvs9")],void 0===(i=function(e,t,r,n,i,o,a){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e){this.options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"]}return e.prototype.createFeatureResult=function(){return new o.default},e.prototype.prepareFeatures=function(){},e.prototype.finishFeatureResult=function(e){if(e&&e.features&&e.hasZ&&this.options.sourceSpatialReference&&e.spatialReference&&!n.equals(e.spatialReference,this.options.sourceSpatialReference)&&!e.spatialReference.vcsWkid){var t=r.getMetersPerVerticalUnitForSR(this.options.sourceSpatialReference)/r.getMetersPerVerticalUnitForSR(e.spatialReference);if(1!==t)for(var i=0,o=e.features;i<o.length;i++){var a=o[i];if(a.geometry&&a.geometry.coords)for(var s=a.geometry.coords,u=2;u<s.length;u+=3)s[u]*=t}}},e.prototype.addFeature=function(e,t){e.features.push(t)},e.prototype.createFeature=function(){return new i.default},e.prototype.createSpatialReference=function(){return{wkid:0}},e.prototype.createGeometry=function(){return new a.default},e.prototype.addField=function(e,t){e.fields.push(t)},e.prototype.addCoordinate=function(e,t){e.coords.push(t)},e.prototype.addCoordinatePoint=function(e,t){e.coords.push(t)},e.prototype.addLength=function(e,t){e.lengths.push(t)},e.prototype.createPointGeometry=function(){return new a.default},e}();t.Context=s}.apply(null,n))||(e.exports=i)},"6huW":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ycL1"),r("Vx27"),r("DS8v")],void 0===(i=function(e,t,r,n,i,o){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name=null,t}var n;return r.__extends(t,e),n=t,t.prototype.clone=function(){return new n({name:this.name,outStatistic:this.outStatistic.clone()})},r.__decorate([i.property({type:String,json:{write:!0}})],t.prototype,"name",void 0),r.__decorate([i.property({type:o,json:{write:!0}})],t.prototype,"outStatistic",void 0),n=r.__decorate([i.subclass("esri.layers.support.AggregateField")],t)}(n.JSONSupport)}.apply(null,n))||(e.exports=i)},"700l":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("LxLY"),r("Ytki")],void 0===(i=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,r){this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=e.returnDistinctValues,this.fieldsIndex=r,this.featureAdapter=t;var i=e.outFields;if(i&&-1===i.indexOf("*")){this.outFields=i;for(var o=0,a=0,s=i;a<s.length;a++){var u=s[a],l=n.getExpressionFromFieldName(u),c=this.fieldsIndex.get(l),p=c?null:n.getWhereClause(l,r),d=c?c.name:n.getAliasFromFieldName(u)||"FIELD_EXP_"+o++;this._fieldDataCache.set(u,{alias:d,clause:p})}}}return e.prototype.getAttributes=function(e){var t=this._processAttributesForOutFields(e);return this._processAttributesForDistinctValues(t)},e.prototype.getFieldValue=function(e,t,r){var i=r?r.name:t,o=null;return this._fieldDataCache.has(i)?o=this._fieldDataCache.get(i).clause:r||(o=n.getWhereClause(t,this.fieldsIndex),this._fieldDataCache.set(i,{alias:i,clause:o})),r?this.featureAdapter.getAttribute(e,i):o.calculateValue(e,this.featureAdapter)},e.prototype.validateItem=function(e,t){return this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:n.getWhereClause(t,this.fieldsIndex)}),this._fieldDataCache.get(t).clause.testFeature(e,this.featureAdapter)},e.prototype.validateItems=function(e,t){return this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:n.getWhereClause(t,this.fieldsIndex)}),this._fieldDataCache.get(t).clause.testSet(e,this.featureAdapter)},e.prototype._processAttributesForOutFields=function(e){var t=this.outFields;if(!t||!t.length)return this.featureAdapter.getAttributes(e);for(var r={},n=0,i=t;n<i.length;n++){var o=i[n],a=this._fieldDataCache.get(o),s=a.alias,u=a.clause;r[s]=u?u.calculateValue(e,this.featureAdapter):this.featureAdapter.getAttribute(e,s)}return r},e.prototype._processAttributesForDistinctValues=function(e){if(r.isNone(e)||!this.returnDistinctValues)return e;var t=this.outFields,n=[];if(t)for(var i=0,o=t;i<o.length;i++){var a=o[i],s=this._fieldDataCache.get(a).alias;n.push(e[s])}else for(var s in e)n.push(e[s]);var u=(t||["*"]).join(",")+"="+n.join(","),l=this._returnDistinctMap.get(u)||0;return this._returnDistinctMap.set(u,++l),l>1?null:e},e}();t.default=i}.apply(null,n))||(e.exports=i)},"7mbE":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("Vx27"),r("5c1C")],void 0===(i=function(e,t,r,n,i){function o(e){return null!=e?new Date(e):null}function a(e){return e?e.getTime():null}return function(e){function t(t){var r=e.call(this,t)||this;return r.includeTime=null,r.max=null,r.min=null,r.type="datetime-picker",r}var i;return r.__extends(t,e),i=t,t.prototype.readMax=function(e,t){return o(t.max)},t.prototype.writeMax=function(e,t){t.max=a(e)},t.prototype.readMin=function(e,t){return o(t.min)},t.prototype.writeMin=function(e,t){t.min=a(e)},t.prototype.clone=function(){return new i({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})},r.__decorate([n.property({type:Boolean,json:{write:!0}})],t.prototype,"includeTime",void 0),r.__decorate([n.property({type:Date,json:{type:Number,write:!0}})],t.prototype,"max",void 0),r.__decorate([n.reader("max")],t.prototype,"readMax",null),r.__decorate([n.writer("max")],t.prototype,"writeMax",null),r.__decorate([n.property({type:Date,json:{type:Number,write:!0}})],t.prototype,"min",void 0),r.__decorate([n.reader("min")],t.prototype,"readMin",null),r.__decorate([n.writer("min")],t.prototype,"writeMin",null),r.__decorate([n.property({type:["datetime-picker"],json:{read:!1,write:!0}})],t.prototype,"type",void 0),i=r.__decorate([n.subclass("esri.form.elements.inputs.DateTimePickerInput")],t)}(i)}.apply(null,n))||(e.exports=i)},"8pdz":function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=new Float64Array(2),n=new Float64Array(2);function i(e){return e<=57?e-48:e<=104?e-88:e<=107?e-89:e<=110?e-90:e-91}function o(e){return"0123456789bcdefghjkmnpqrstuvwxyz"[e]}function a(e){return(e[0]+e[1])/2}function s(e,t,r){return e[0]=t,e[1]=r,e}function u(e,t){var r=a(e),n=t,i=!t;e[0]=i*e[0]+n*r,e[1]=i*r+n*e[1]}function l(e,t){var r=t>a(e);return u(e,r),r}function c(e,t){for(var o=s(r,-90,90),l=s(n,-180,180),c=0;c<t.length;c++){var p=i(t.charCodeAt(c));c%2==0?(u(l,!!(16&p)),u(l,!!(4&p)),u(l,!!(1&p)),u(o,!!(8&p)),u(o,!!(2&p))):(u(o,!!(16&p)),u(o,!!(4&p)),u(o,!!(1&p)),u(l,!!(8&p)),u(l,!!(2&p)))}return e[0]=a(o),e[1]=a(l),e}function p(e,t,i){for(var a="",u=s(r,-90,90),c=s(n,-180,180),p=0;p<i;p++){var d=0;p%2?(d|=l(u,e)<<4,d|=l(c,t)<<3,d|=l(u,e)<<2,d|=l(c,t)<<1,d|=l(u,e)<<0):(d|=l(c,t)<<4,d|=l(u,e)<<3,d|=l(c,t)<<2,d|=l(u,e)<<1,d|=l(c,t)<<0),a+=o(d)}return a}function d(e){var t=Math.floor(5*e/2);return 180/Math.pow(2,t)}function f(e){var t=Math.ceil(5*e/2);return 360/Math.pow(2,t)}function h(e,t){return t?1&e|(4&e)>>1|(16&e)>>2:(2&e)>>1|(8&e)>>2}function y(e,t){return t?(2&e)>>1|(8&e)>>2:1&e|(4&e)>>1|(16&e)>>2}function v(e,t,r){var n=!((e.length-1)%2),a=e.substring(0,e.length-1),s=i(e.charCodeAt(e.length-1)),u=0,l=0,c=0,p=0;n?(u=8,l=4,c=1&s|(4&s)>>1|(16&s)>>2,p=(2&s)>>1|(8&s)>>2):(u=4,l=8,p=1&s|(4&s)>>1|(16&s)>>2,c=(2&s)>>1|(8&s)>>2);var d=c+t,f=p+r,h=Math.floor(d/u),y=Math.floor(f/l),m=o(function(e,t,r){return r?1&e|(1&t)<<1|(2&e)<<1|(2&t)<<2|(4&e)<<2:1&t|(1&e)<<1|(2&t)<<1|(2&e)<<2|(4&t)<<2}(d-h*u,f-y*l,n));return e.length>1&&(h||y)?v(a,h,y)+m:a+m}t.decodeBase32Char=i,t.encodeBase32Char=o,t.decodeGeohash=c,t.convertGeohash32ToXY=function(e,t){for(var r=0,n=0,o=30,a=30,s=0;s<t.length;s++){var u=i(t.charCodeAt(s)),l=s%2==0;r|=h(u,l)<<(o-=l?3:2),n|=y(u,l)<<(a-=l?2:3)}return{geohashX:r,geohashY:n}},t.decodeGeohashXY=function(e,t){for(var r=-90,n=90,i=-180,o=180,a=0;a<t;a++){for(var s=Math.ceil((a+1)/2),u=Math.floor((a+1)/2),l=1-a%2,c=30-(3*s+2*u),p=30-(2*s+3*u),d=3*l+2*(1-l),f=2*l+3*(1-l),h=3*l+7*(1-l)<<p,y=(7*l+3*(1-l)<<c&e.geohashX)>>c,v=(h&e.geohashY)>>p,m=d-1;m>=0;m--){var _=(i+o)/2,g=y&1<<m?1:0;i=(1-g)*i+g*_,o=(1-g)*_+g*o}for(m=f-1;m>=0;m--){var b=(r+n)/2,x=v&1<<m?1:0;r=(1-x)*r+x*b,n=(1-x)*b+x*n}}return[i,r,o,n]},t.setGeohashXY=function(e,t,r,n){n%2&&(n+=1);for(var i=0,o=0,a=-90,s=90,u=-180,l=180,c=0;c<n/2;c++){for(var p=0;p<5;p++){var d=(u+l)/2,f=r>d?1:0;i|=f<<29-(p+5*c),u=(1-f)*u+f*d,l=(1-f)*d+f*l}for(p=0;p<5;p++){var h=(a+s)/2,y=t>h?1:0;o|=y<<29-(p+5*c),a=(1-y)*a+y*h,s=(1-y)*h+y*s}}e.geohashX=i,e.geohashY=o},t.encodeGeohash=p,t.latDistPerGeohash=d,t.lonDistPerGeohash=f,t.unpackXBits=h,t.unpackYBits=y,t.getRelativeGeohash=v,t.getIntersectingGeohashes=function(e,t,r,n,i){for(var o=Math.abs(r-e),a=Math.abs(n-t),s=d(i),u=f(i),l=Math.ceil(a/u),c=Math.ceil(o/s),h=p(e,t,i),y=new Array,m=0;m<l;m++)for(var _=0;_<c;_++)y.push(v(h,m,_));return y},t.forEachIntersectingGeohash=function(e,t,r,n,i,o){for(var a=Math.abs(r-e),s=Math.abs(n-t),u=d(i),l=f(i),h=Math.ceil(s/l),y=Math.ceil(a/u),m=p(e,t,i),_=0;_<h;_++)for(var g=0;g<y;g++){var b=v(m,_,g),x=c([0,0],b),S=x[0],w=x[1],I=S-u/2,T=w-l/2,E=S+u/2,M=w+l/2,P=u*l,F=Math.max(e,I),O=Math.max(t,T),R=Math.min(r,E)-F,N=Math.min(n,M)-O;o(b,Math.abs(R*N)/P)}}}.apply(null,n))||(e.exports=i)},A4oT:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("H1tY"),r("R2Zq"),r("LxLY"),r("qMld"),r("Vx27"),r("+6sX"),r("ZGAQ"),r("rfv1"),r("gsnf"),r("gSUo"),r("Btct"),r("Wuf+")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,p,d,f,h,y){Object.defineProperty(t,"__esModule",{value:!0});var v=function(){function e(e,t){this.store=e,this.onUpdate=t}return e.prototype.add=function(e){this.store.add(e)},e.prototype.forEach=function(e){this.store.forEach(e)},e.prototype.removeById=function(e){return this.store.removeById(e)},e.prototype.update=function(e,t){this.onUpdate(e,t)},Object.defineProperty(e.prototype,"size",{get:function(){return this.store.numFeatures},enumerable:!0,configurable:!0}),e}(),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="stream",t._tileDispatchMap=new Map,t._updateIntervalId=0,t}return r.__extends(t,e),t.prototype.initialize=function(){var e=this,t=this.service,r=t.source,n=t.objectIdField,i=t.timeInfo,o=t.purgeOptions,a=t.serviceFilter,s=t.geometryType,u=t.spatialReference;this.connection=new f.default(r,u,this.spatialReference,s,a),this._set("store",new p.default(this.geometryInfo)),this._set("streamFeatureManager",new d.default(new v(this.store,(function(t,r){return e._onUpdate(t,r)})),n,i,o)),this.connection.on("feature",(function(t){return e._onFeature(t)})),["connectionStatus","errorString"].forEach((function(t){e.watch("connection."+t,(function(r){return e.remoteClient.invoke("setProperty",{propertyName:t,value:r})}))})),this._updateIntervalId=setInterval((function(){return e.streamFeatureManager.checkForUpdates()}),64),this._shouldPushDataReceived=this.service.enableDataReceived},t.prototype.destroy=function(){clearInterval(this._updateIntervalId),this.connection.destroy(),this.queryEngine.destroy(),this._tileDispatchMap.forEach((function(e){return e.destroy()}))},Object.defineProperty(t.prototype,"queryEngine",{get:function(){return this._createQueryEngine(this.store)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return this._tempQueryEngine&&!!this._tempQueryEngine.featureStore.numFeatures||this._anyUpdatesQueued()},enumerable:!0,configurable:!0}),t.prototype.update=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.validateConfig(e),JSON.stringify(this.service.serviceFilter),t=this.renderer.getAttributeHash(),this._set("config",e),[4,this.updatePixelBuffer()];case 1:return r.sent(),JSON.stringify(this.service.serviceFilter),"heatmap"===this.renderer.type?[2]:t===this.renderer.getAttributeHash()?[3,3]:(n=this.queryEngine.featureStore,[4,this.attributeStore.setAttributeBindings(this.renderer,this.arcadeInfo)]);case 2:r.sent(),n.forEach((function(e){return i.attributeStore.setAttributeData(e.localId,e,i.geometryInfo,i.viewParams)})),r.label=3;case 3:return[4,this.attributeStore.updateFilters(this)];case 4:return r.sent(),[4,this.attributeStore.sendUpdates()];case 5:return r.sent(),[2]}}))}))},t.prototype.invalidate=function(){this._repushActiveTiles()},t.prototype.onEdits=function(){},t.prototype.queryFeatures=function(e){return this.queryEngine.executeQuery(e)},t.prototype.queryFeatureCount=function(e){return this.queryEngine.executeQueryForCount(e)},t.prototype.queryObjectIds=function(e){return this.queryEngine.executeQueryForIds(e)},t.prototype.queryExtent=function(e){return this.queryEngine.executeQueryForExtent(e)},t.prototype.queryLatestObservations=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){if(!this.service.timeInfo.trackIdField)throw new n("mapview-no-trackIdField","queryLatestObservation can only be used with services that define a TrackIdField");return[2,this.queryEngine.executeQueryForLatestObservations(e)]}))}))},t.prototype.queryStatistics=function(){throw new n("Method not implemented.")},t.prototype.refresh=function(){},t.prototype.setViewState=function(t){var r=this,n=this.viewState&&this.viewState.scale;e.prototype.setViewState.call(this,t),n!==this.viewState.scale&&this.attributeStore.hasScaleExpr&&(this.queryEngine.featureStore.forEach((function(e){return r.attributeStore.setAttributeData(e.localId,e,r.geometryInfo,r.viewParams)})),this.attributeStore.sendUpdates())},t.prototype.onTileUpdate=function(e){var t=this,r=e.added;e.removed.forEach((function(e){return t._handleTileRemove(e)})),r.forEach((function(e){return t._handleTileAdd(e)}))},t.prototype.enableEvent=function(e){"data-received"===e.name&&(this._shouldPushDataReceived=e.value)},t.prototype._onFeature=function(e){this._shouldPushDataReceived&&this.remoteClient.invoke("emitEvent",{name:"data-received",event:{attributes:e.attributes,centroid:e.centroid,geometry:e.geometry}});try{var t=this.geometryInfo,r=t.geometryType,n=t.hasM,o=t.hasZ,a=l.convertFromFeature(e,r,o,n,this.service.objectIdField);this.streamFeatureManager.add(a)}catch(e){i("esri-2d-debug")}},t.prototype._createStoreWithFeatures=function(e){if(a.isNone(e))return null;var t=this._createFeatureStore();return t.addMany(e),t},t.prototype._onUpdate=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o=this;return r.__generator(this,(function(r){switch(r.label){case 0:return a.isSome(e)&&e.forEach((function(e){return o.onFeatureAdd(e)})),n=this._createStoreWithFeatures(e),i=this._createStoreWithFeatures(t),this.attributeStore.sendUpdates(),this.processor.supportsTileUpdates?[4,this._updateActiveTiles(n,i)]:[3,2];case 1:return r.sent(),[3,3];case 2:this._repushActiveTiles(),r.label=3;case 3:return a.isSome(t)&&t.forEach((function(e){return o.onFeatureRemove(e)})),[2]}}))}))},t.prototype._handleTileAdd=function(e){if(this._tileDispatchMap.has(e.id))(t=this._tileDispatchMap.get(e.id)).up();else{var t=new y.default;this._tileDispatchMap.set(e.id,t)}this._queryTileFeatures(e,!0,this.queryEngine)},t.prototype._handleTileRemove=function(e){var t=this._tileDispatchMap.get(e.id);t&&(t.destroy(),this._tileDispatchMap.delete(e.id))},t.prototype._anyUpdatesQueued=function(){return o.valuesOfMap(this._tileDispatchMap).some((function(e){return e.hasAction()}))},t.prototype._updateActiveTiles=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o=this;return r.__generator(this,(function(r){switch(r.label){case 0:return n=a.applySome(e,(function(e){return o._createQueryEngine(e)})),i=a.applySome(t,(function(e){return o._createQueryEngine(e)})),[4,s.all(this.tileStore.tiles.map((function(e){return o._queryTileFeatures(e,!1,n,i)})))];case 1:return r.sent(),[2]}}))}))},t.prototype._repushActiveTiles=function(){for(var e=0,t=this.tileStore.tiles;e<t.length;e++){var r=t[e];this._queryTileFeatures(r,!0,this.queryEngine)}},t.prototype._queryTileFeatures=function(e,t,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,u,l,p,d,f,h,y,v,m,_,g,b=this;return r.__generator(this,(function(x){switch(x.label){case 0:return o={hasZ:!1,hasM:!1,transform:{originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[e.bounds[0],e.bounds[3]]}},u=this.queryInfo,l=u.returnCentroid,p=u.returnGeometry,d=this._pixelBuffer,f={returnCentroid:l,returnGeometry:p,pixelBuffer:d,returnOutline:this.returnOutline},this._tileDispatchMap.has(e.id)?(h=this._tileDispatchMap.get(e.id),[4,a.applySome(n,(function(t){return t.featureStore.executeTileQuery(e,b.spatialReference,f)}))]):[2];case 1:return y=x.sent(),v=a.mapOr(y,[],(function(e){return e.features})),m=a.mapOr(i,[],(function(t){return c.executeTileQueryForIds(t,e,f)})).map((function(e){return b.attributeStore.getLocalId(e)})),_=s.createResolver(),g=function(n){return r.__awaiter(b,void 0,void 0,(function(){var i;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.processor.onTileData(e,{addOrUpdate:v,remove:m,clear:t,transformParams:o},{signal:n})];case 1:return r.sent(),[3,3];case 2:return i=r.sent(),s.throwIfNotAbortError(i),[3,3];case 3:return _.resolve(),[2]}}))}))},h.enqueue(g),[2,_.promise]}}))}))},r.__decorate([u.property()],t.prototype,"connection",void 0),r.__decorate([u.property()],t.prototype,"service",void 0),r.__decorate([u.property({readOnly:!0})],t.prototype,"store",void 0),r.__decorate([u.property({readOnly:!0})],t.prototype,"streamFeatureManager",void 0),r.__decorate([u.property({readOnly:!0,dependsOn:["store","service","config"]})],t.prototype,"queryEngine",null),r.__decorate([u.property()],t.prototype,"updating",null),r.__decorate([u.subclass("esri.views.2d.layers.features.controllers.StreamController")],t)}(h.default);t.default=m}.apply(null,n))||(e.exports=i)},B16N:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("zp6E"),r("LxLY"),r("qMld"),r("jfWY"),r("Lzvl"),r("fw2w"),r("xJgq"),r("G+Sd"),r("cGHk"),r("HoQt"),r("2Kdy")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,p,d){function f(e,t){var r=e.geometry,n=e.toJSON(),i=n;if(r&&(i.geometry=JSON.stringify(r),i.geometryType=s.getJsonType(r),i.inSR=r.spatialReference.wkid||JSON.stringify(r.spatialReference)),n.groupByFieldsForStatistics&&(i.groupByFieldsForStatistics=n.groupByFieldsForStatistics.join(",")),n.objectIds&&(i.objectIds=n.objectIds.join(",")),n.orderByFields&&(i.orderByFields=n.orderByFields.join(",")),!n.outFields||t&&(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)?delete i.outFields:-1!==n.outFields.indexOf("*")?i.outFields="*":i.outFields=n.outFields.join(","),n.outSR?i.outSR=n.outSR.wkid||JSON.stringify(n.outSR):r&&(n.returnGeometry||n.returnCentroid)&&(i.outSR=i.inSR),n.returnGeometry&&delete n.returnGeometry,n.outStatistics&&(i.outStatistics=JSON.stringify(n.outStatistics)),n.pixelSize&&(i.pixelSize=JSON.stringify(n.pixelSize)),n.quantizationParameters&&(i.quantizationParameters=JSON.stringify(n.quantizationParameters)),n.source&&(i.layer=JSON.stringify({source:n.source}),delete n.source),n.timeExtent){var o=n.timeExtent,a=o.start,u=o.end;null==a&&null==u||(i.time=a===u?a:(null==a?"null":a)+","+(null==u?"null":u)),delete n.timeExtent}return i}function h(e,t,o,s,l){void 0===s&&(s={});var c="string"==typeof e?a.urlToObject(e):e,d=t.geometry?[t.geometry]:[];return s.responseType="pbf"===o?"array-buffer":"json",u.normalizeCentralMeridian(d,null,s).then((function(e){var a=e&&e[0];i.isSome(a)&&((t=t.clone()).geometry=a);var u=p.mapParameters(r.__assign(r.__assign(r.__assign(r.__assign({},c.query),{f:o}),l),f(t,l)));return n(c.path+"/query",r.__assign(r.__assign({},s),{query:u}))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.queryToQueryStringParameters=f,t.executeQuery=function(e,t,n,i){var o;return r.__awaiter(this,void 0,void 0,(function(){var a,s;return r.__generator(this,(function(r){switch(r.label){case 0:return(null===(o=t.timeExtent)||void 0===o?void 0:o.isEmpty)?(s={data:{features:[]}},[3,3]):[3,1];case 1:return[4,h(e,t,"json",i)];case 2:s=r.sent(),r.label=3;case 3:return a=s,d.applyFeatureSetZUnitScaling(t,n,a.data),[2,a]}}))}))},t.executeQueryPBF=function(e,t,r,n){var i;return(null===(i=t.timeExtent)||void 0===i?void 0:i.isEmpty)?o.resolve({data:new l.default}):h(e,t,"pbf",n).then((function(e){var t,n;return t=c.parsePBFFeatureQuery(e.data,r),(n=e).data=t,n}))},t.executeQueryForIds=function(e,t,r){var n;return(null===(n=t.timeExtent)||void 0===n?void 0:n.isEmpty)?o.resolve({data:{objectIds:[]}}):h(e,t,"json",r,{returnIdsOnly:!0})},t.executeQueryForCount=function(e,t,r){var n;return(null===(n=t.timeExtent)||void 0===n?void 0:n.isEmpty)?o.resolve({data:{count:0}}):h(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})},t.executeQueryForExtent=function(e,t,r){var n;return(null===(n=t.timeExtent)||void 0===n?void 0:n.isEmpty)?o.resolve({data:{count:0,extent:null}}):h(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}).then((function(e){var t=e.data;if(t.hasOwnProperty("extent"))return e;if(t.features)throw new Error("Layer does not support extent calculation.");if(t.hasOwnProperty("count"))throw new Error("Layer does not support extent calculation.");return e}))},t.runQuery=h}.apply(null,n))||(e.exports=i)},Btct:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("7MDj"),r("H1tY"),r("qsST"),r("LxLY"),r("qMld"),r("Vx27"),r("Ytki"),r("ZooB"),r("I90O"),r("hz/Y"),r("IpeC"),r("YaB4"),r("lvbU"),r("0SZq"),r("oWCy")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,p,d,f,h,y,v,m,_){Object.defineProperty(t,"__esModule",{value:!0});var g=a.getLogger("esri.views.2d.layers.features.controllers.BaseController"),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._availableFields=[],t._pixelBuffer=0,t.config=null,t.filters=new Array(y.definitions.MAX_FILTERS),t.processor=null,t.remoteClient=null,t.service=null,t.tileStore=null,t}return r.__extends(t,e),t.prototype.initialize=function(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))]),this._initAttributeStore()},t.prototype.startup=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this._initAttributeStore(),[4,this.attributeStore.setAttributeBindings(this.renderer,this.arcadeInfo)];case 1:return e.sent(),[4,u.all([this.attributeStore.updateFilters(this),this.updatePixelBuffer()])];case 2:return e.sent(),[2]}}))}))},t.prototype.destroy=function(){this.attributeStore&&this.attributeStore.destroy()},Object.defineProperty(t.prototype,"arcadeInfo",{get:function(){return{geometryType:this.service.geometryType,fields:this.service.fields,spatialReference:this.spatialReference}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"featureReduction",{get:function(){return this.config.featureReduction},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fieldsIndex",{get:function(){return new d(this.service.fields)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"geometryInfo",{get:function(){return{geometryType:this.service.geometryType,hasZ:!1,hasM:!1}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"returnCentroid",{get:function(){return this._get("returnCentroid")||function(e,t,r){if("esriGeometryPolygon"===t&&e.labelingInfo)return!0;if("esriGeometryPolygon"!==t)return!1;function n(e){if(!e)return!1;var t=e.type;return"simple-marker"===t||"picture-marker"===t||"text"===t||"web-style"===t||"cim"===t}switch(r.type){case"simple":return n(r.symbol);case"unique-value":return n(r.defaultSymbol)||r.uniqueValueInfos.some((function(e){return n(e.symbol)}));case"class-breaks":return n(r.defaultSymbol)||r.classBreakInfos.some((function(e){return n(e.symbol)}));case"dot-density":return!1;default:return!0}}(this.config,this.service.geometryType,this.renderer)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"returnOutline",{get:function(){return function(e,t){switch(e){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryMultipoint":return!0;case"esriGeometryPolygon":return function(e){var t=e&&e.getSymbols();return"backgroundFillSymbol"in e&&null!=e.backgroundFillSymbol&&"outline"in e.backgroundFillSymbol&&null!=e.backgroundFillSymbol.outline||t.some((function(e){return"outline"in e&&null!=e.outline}))}(t)}}(this.service.geometryType,this.renderer)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"queryInfo",{get:function(){return{returnCentroid:this.returnCentroid,returnGeometry:!0,outFields:this.availableFields,definitionExpression:this.config.definitionExpression,gdbVersion:this.config.gdbVersion,historicMoment:this.config.historicMoment}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{get:function(){return this.config?f.fromJSON(this.config.renderer):(g.error("mapview-controller","Unable to create renderer for undefined configuration"),null)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"availableFields",{get:function(){var e=this,t=this.config.availableFields.filter((function(t){return-1===e._availableFields.indexOf(t)}));return this._availableFields=r.__spreadArrays(this._availableFields,t),this._availableFields},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spatialReference",{get:function(){return this.tileStore.tileScheme.spatialReference},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewParams",{get:function(){return{viewingMode:"",scale:this.viewState&&this.viewState.scale||1}},enumerable:!0,configurable:!0}),t.prototype.getObjectId=function(e){return this.attributeStore.getFeatureId(e)},t.prototype.getAggregate=function(e){return null},t.prototype.getAggregateValueRanges=function(){return{}},t.prototype.getLocalId=function(e){return this.attributeStore.getLocalId(e)},t.prototype.mapValidLocalIds=function(e){var t=this;return e.map((function(e){return t.attributeStore.getLocalId(e)})).filter((function(e){return null!=e}))},t.prototype.setViewState=function(e){this._set("viewState",e)},t.prototype.updatePixelBuffer=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return[4,_.computePxBuffer(this.renderer,this.service.geometryType)];case 1:return e=t.sent(),this._pixelBuffer=Math.max(this._pixelBuffer,e),[2]}}))}))},t.prototype.setHighlight=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return[2,this.attributeStore.setHighlight(e)]}))}))},t.prototype.validateConfig=function(e){for(var t=0,r=e.filters;t<r.length;t++){var i=r[t];if(s.isSome(i)&&i.where)try{c.validateWhere(this.fieldsIndex,i.where)}catch(e){throw new n("mapview-bad-filter",e.message,{filter:i,missingFields:e.details})}}},t.prototype.onFeatureAdd=function(e){e.localId=this.attributeStore.createLocalId(e.objectId),this.attributeStore.setAttributeData(e.localId,e,this.geometryInfo,this.viewParams)},t.prototype.onFeatureRemove=function(e){!e.localId&&o("esri-2d-debug"),this.attributeStore.freeLocalId(e.objectId)},t.prototype.enableEvent=function(e){},t.prototype._initAttributeStore=function(){var e=this;this.attributeStore?this.attributeStore.invalidateResources():this.attributeStore=new v.default({type:"remote",initialize:function(t,r){return e.remoteClient.invoke("tileRenderer.featuresView.attributeView.initialize",t,{signal:r})},update:function(t,r){return e.remoteClient.invoke("tileRenderer.featuresView.attributeView.requestUpdate",t,{signal:r})},render:function(){return e.remoteClient.invoke("tileRenderer.featuresView.requestRender")}})},t.prototype._createQueryEngine=function(e){return new p.default({definitionExpression:this.config.definitionExpression,fields:this.service.fields,geometryType:this.service.geometryType,objectIdField:this.service.objectIdField,hasM:!1,hasZ:!1,spatialReference:this.spatialReference.toJSON(),cacheSpatialQueries:!0,featureStore:e,timeInfo:this.service.timeInfo})},t.prototype._createTempQueryEngine=function(e){return void 0===e&&(e=this._createFeatureStore()),this._createQueryEngine(e)},t.prototype._createFeatureStore=function(){var e={geometryType:this.service.geometryType,hasM:!1,hasZ:!1};return new m.ClusterStore(e,this.spatialReference,this.attributeStore,this.featureReduction)},t.prototype._createDefaultQuery=function(e){var t=new h,r=e.outFields,n=this.config,i=n.gdbVersion,o=n.historicMoment,a=n.definitionExpression;return r=r.length/this.service.fields.length>=.75?["*"]:r,t.gdbVersion=i,t.historicMoment=null!=o?new Date(o):null,t.num=e.num,t.outFields=r,t.outSpatialReference=this.spatialReference,t.returnGeometry=e.returnGeometry,t.returnCentroid=e.returnCentroid,t.start=e.resultOffset,t.where=a||"1=1",t},t.prototype.hasGeometryFilter=function(){return this.filters.some((function(e){return s.isSome(e)&&!!e.geometry}))},r.__decorate([l.property({readOnly:!0,dependsOn:["config","service","spatialReference"]})],t.prototype,"arcadeInfo",null),r.__decorate([l.property()],t.prototype,"config",void 0),r.__decorate([l.property({readOnly:!0,dependsOn:["config"]})],t.prototype,"featureReduction",null),r.__decorate([l.property({readOnly:!0,dependsOn:["service"]})],t.prototype,"fieldsIndex",null),r.__decorate([l.property()],t.prototype,"filters",void 0),r.__decorate([l.property({readOnly:!0,dependsOn:["service"]})],t.prototype,"geometryInfo",null),r.__decorate([l.property({readOnly:!0,dependsOn:["config"]})],t.prototype,"returnCentroid",null),r.__decorate([l.property({readOnly:!0,dependsOn:["service","config"]})],t.prototype,"returnOutline",null),r.__decorate([l.property({readOnly:!0,dependsOn:["config","availableFields"]})],t.prototype,"queryInfo",null),r.__decorate([l.property({dependsOn:["config"],readOnly:!0})],t.prototype,"renderer",null),r.__decorate([l.property()],t.prototype,"processor",void 0),r.__decorate([l.property({readOnly:!0,dependsOn:["config"]})],t.prototype,"availableFields",null),r.__decorate([l.property({constructOnly:!0})],t.prototype,"remoteClient",void 0),r.__decorate([l.property({constructOnly:!0})],t.prototype,"service",void 0),r.__decorate([l.property({dependsOn:["tileStore"]})],t.prototype,"spatialReference",null),r.__decorate([l.property({constructOnly:!0})],t.prototype,"tileInfo",void 0),r.__decorate([l.property({constructOnly:!0})],t.prototype,"tileStore",void 0),r.__decorate([l.property({readOnly:!0})],t.prototype,"viewState",void 0),r.__decorate([l.property({readOnly:!0,dependsOn:["viewState"]})],t.prototype,"viewParams",null),r.__decorate([l.subclass("esri.views.2d.layers.features.controllers.BaseController")],t)}(i.HandleOwner);t.default=b}.apply(null,n))||(e.exports=i)},DS8v:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ycL1"),r("Vx27")],void 0===(i=function(e,t,r,n,i){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.statisticType=null,t.onStatisticField=null,t.onStatisticValueExpression=null,t}var n;return r.__extends(t,e),n=t,t.prototype.clone=function(){return new n({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})},r.__decorate([i.property({type:String,json:{write:!0}})],t.prototype,"statisticType",void 0),r.__decorate([i.property({type:String,json:{write:!0}})],t.prototype,"onStatisticField",void 0),r.__decorate([i.property({type:String,json:{write:!0}})],t.prototype,"onStatisticValueExpression",void 0),n=r.__decorate([i.subclass("esri.layers.support.OutStatistic")],t)}(n.JSONSupport)}.apply(null,n))||(e.exports=i)},Fzzg:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(e,t){return e?t?4:3:t?3:2}function n(e,t,n,i,o,a){for(var s=r(o,a),u=n,l=n+s,c=0,p=0,d=0,f=0,h=0,y=0,v=i-1;y<v;y++,u+=s,l+=s){var m=t[u],_=t[u+1],g=t[u+2],b=t[l],x=t[l+1],S=t[l+2],w=m*x-b*_;f+=w,c+=(m+b)*w,p+=(_+x)*w,o&&(d+=(g+S)*(w=m*S-b*g),h+=w),m<e[0]&&(e[0]=m),m>e[1]&&(e[1]=m),_<e[2]&&(e[2]=_),_>e[3]&&(e[3]=_),o&&(g<e[4]&&(e[4]=g),g>e[5]&&(e[5]=g))}if(f>0&&(f*=-1),h>0&&(h*=-1),!f)return null;var I=[c,p,.5*f];return o&&(I[3]=d,I[4]=.5*h),I}function i(e,t,n,i,l){for(var c=r(i,l),p=t,d=t+c,f=0,h=0,y=0,v=0,m=0,_=n-1;m<_;m++,p+=c,d+=c){var g,b=e[p],x=e[p+1],S=e[p+2],w=e[d],I=e[d+1],T=e[d+2],E=i?a(b,x,S,w,I,T):o(b,x,w,I);E&&(f+=E,i?(h+=E*(g=u(b,x,S,w,I,T))[0],y+=E*g[1],v+=E*g[2]):(h+=E*(g=s(b,x,w,I))[0],y+=E*g[1]))}return f>0?i?[h/f,y/f,v/f]:[h/f,y/f]:n>0?i?[e[t],e[t+1],e[t+2]]:[e[t],e[t+1]]:null}function o(e,t,r,n){var i=r-e,o=n-t;return Math.sqrt(i*i+o*o)}function a(e,t,r,n,i,o){var a=n-e,s=i-t,u=o-r;return Math.sqrt(a*a+s*s+u*u)}function s(e,t,r,n){return[e+.5*(r-e),t+.5*(n-t)]}function u(e,t,r,n,i,o){return[e+.5*(n-e),t+.5*(i-t),r+.5*(o-r)]}Object.defineProperty(t,"__esModule",{value:!0}),t.getCentroidOptimizedGeometry=function(e,t,o,a){if(!t||!t.lengths.length)return null;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);for(var s=e.coords,u=[],l=o?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],c=t.lengths,p=t.coords,d=r(o,a),f=0,h=0,y=c;h<y.length;h++){var v=y[h],m=n(l,p,f,v,o,a);m&&u.push(m),f+=v*d}if(u.sort((function(e,t){var r=e[2]-t[2];return 0===r&&o&&(r=e[4]-t[4]),r})),u.length){var _=6*u[0][2];s[0]=u[0][0]/_,s[1]=u[0][1]/_,o&&(_=6*u[0][4],s[2]=0!==_?u[0][3]/_:0),(s[0]<l[0]||s[0]>l[1]||s[1]<l[2]||s[1]>l[3]||o&&(s[2]<l[4]||s[2]>l[5]))&&(s.length=0)}if(!s.length){var g=t.lengths[0]?i(p,0,c[0],o,a):null;if(!g)return null;s[0]=g[0],s[1]=g[1],o&&g.length>2&&(s[2]=g[2])}return e},t.lineCentroid=i}.apply(null,n))||(e.exports=i)},"G+Sd":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("YhCz")],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.parsePBFFeatureQuery=function(e,t){var n=r.parseFeatureQuery(e,t).queryResult.featureResult;if(n&&n.features&&n.features.length&&n.objectIdFieldName)for(var i=n.objectIdFieldName,o=0,a=n.features;o<a.length;o++){var s=a[o];s.attributes&&(s.objectId=s.attributes[i])}return n}}.apply(null,n))||(e.exports=i)},H9Hv:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.jsonAdapter={convertToGEGeometry:function(e,t){return null==t?null:e.convertJSONToGeometry(t)},exportPoint:function(e,t,n){var i=new r(e.getPointX(t),e.getPointY(t),n),o=e.hasZ(t),a=e.hasM(t);return o&&(i.z=e.getPointZ(t)),a&&(i.m=e.getPointM(t)),i},exportPolygon:function(e,t,r){return new n(e.exportPaths(t),r,e.hasZ(t),e.hasM(t))},exportPolyline:function(e,t,r){return new i(e.exportPaths(t),r,e.hasZ(t),e.hasM(t))},exportMultipoint:function(e,t,r){return new o(e.exportPoints(t),r,e.hasZ(t),e.hasM(t))},exportExtent:function(e,t,r){var n=e.hasZ(t),i=e.hasM(t),o=new a(e.getXMin(t),e.getYMin(t),e.getXMax(t),e.getYMax(t),r);if(n){var s=e.getZExtent(t);o.zmin=s.vmin,o.zmax=s.vmax}if(i){var u=e.getMExtent(t);o.mmin=u.vmin,o.mmax=u.vmax}return o}};var r=function(e,t,r){this.x=e,this.y=t,this.spatialReference=r,this.z=void 0,this.m=void 0},n=function(e,t,r,n){this.rings=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),n&&(this.hasM=n)},i=function(e,t,r,n){this.paths=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),n&&(this.hasM=n)},o=function(e,t,r,n){this.points=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),n&&(this.hasM=n)},a=function(e,t,r,n,i){this.xmin=e,this.ymin=t,this.xmax=r,this.ymax=n,this.spatialReference=i,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}.apply(null,n))||(e.exports=i)},HoQt:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("8uEs"),r("nrlZ")],void 0===(i=function(e,t,r,n){function i(e,t,i){if(!t||!i||i.vcsWkid||n.equals(t,i))return null;var o=r.getMetersPerVerticalUnitForSR(t)/r.getMetersPerVerticalUnitForSR(i);if(1===o)return null;switch(e){case"point":case"esriGeometryPoint":return function(e){return r=o,void((t=e)&&null!=t.z&&(t.z*=r));var t,r};case"polyline":case"esriGeometryPolyline":return function(e){return function(e,t){if(e)for(var r=0,n=e.paths;r<n.length;r++)for(var i=0,o=n[r];i<o.length;i++){var a=o[i];a.length>2&&(a[2]*=t)}}(e,o)};case"polygon":case"esriGeometryPolygon":return function(e){return function(e,t){if(e)for(var r=0,n=e.rings;r<n.length;r++)for(var i=0,o=n[r];i<o.length;i++){var a=o[i];a.length>2&&(a[2]*=t)}}(e,o)};case"multipoint":case"esriGeometryMultipoint":return function(e){return function(e,t){if(e)for(var r=0,n=e.points;r<n.length;r++){var i=n[r];i.length>2&&(i[2]*=t)}}(e,o)};default:return null}}function o(e,t,r){if(null==e.hasM||e.hasZ)for(var n=0,i=t;n<i.length;n++)for(var o=0,a=i[n];o<a.length;o++){var s=a[o];s.length>2&&(s[2]*=r)}}function a(e,t,r){if(e)for(var n=0,i=e;n<i.length;n++)s(i[n].geometry,t,r)}function s(e,t,i){if(e&&e.spatialReference&&!n.equals(e.spatialReference,t)){var a=r.getMetersPerVerticalUnitForSR(e.spatialReference)/i;if(1!==a)if("x"in e)null!=e.z&&(e.z*=a);else if("rings"in e)o(e,e.rings,a);else if("paths"in e)o(e,e.paths,a);else if("points"in e&&(null==e.hasM||e.hasZ))for(var s=0,u=e.points;s<u.length;s++){var l=u[s];l.length>2&&(l[2]*=a)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.getGeometryZScaler=i,t.applyFeatureSetZUnitScaling=function(e,t,r){if(r&&r.features&&r.hasZ){var n=i(r.geometryType,t,e.outSpatialReference);if(n)for(var o=0,a=r.features;o<a.length;o++)n(a[o].geometry)}},t.unapplyEditsZUnitScaling=function(e,t,n){if((e||t)&&n){var i=r.getMetersPerVerticalUnitForSR(n);a(e,n,i),a(t,n,i)}}}.apply(null,n))||(e.exports=i)},JOu6:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zIqJ"),r("LxLY"),r("8pdz")],void 0===(i=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this._pool=new r.default(8024),this._nodes=0,this._root=new a(0,0,0),this._fields=e}return e.prototype._acquire=function(e,t,r){var i=this._pool.dequeue();return this._nodes++,n.isSome(i)?i.realloc(e,t,r):new a(e,t,r)},e.prototype._release=function(e){this._nodes--,this._pool.enqueue(e)},Object.defineProperty(e.prototype,"count",{get:function(){return this._root.count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._nodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"poolSize",{get:function(){return this._pool.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){var e=0;return this._forEachNode((function(t){return e=Math.max(e,t.depth)})),e},enumerable:!0,configurable:!0}),e.prototype.dropLevels=function(e){var t=this;this._forEachNode((function(r){if(r.depth>=e)for(var n=0;n<r.children.length;n++){var i=r.children[n];r.children[n]=null,i&&t._release(i)}}))},e.prototype.insert=function(e,t,r){void 0===r&&(r=0);for(var n=this._root,i=0,o=0,a=0;null!==n;){if(n.depth>=r&&(n.count+=1,n.xTotal+=e.geometry.coords[0],n.yTotal+=e.geometry.coords[1],n.xGeohashTotal+=e.geohashX,n.yGeohashTotal+=e.geohashY,this._updateStatistics(e,n,1)),i>=t)return;var s=Math.ceil((i+1)/2),u=Math.floor((i+1)/2),l=1-i%2,c=30-(3*s+2*u),p=30-(2*s+3*u),d=7*l+3*(1-l)<<c,f=3*l+7*(1-l)<<p,h=8*l+4*(1-l),y=(e.geohashX&d)>>c,v=(e.geohashY&f)>>p,m=y+v*h;o=o<<3*l+2*(1-l)|y,a=a<<2*l+3*(1-l)|v,null==n.children[m]&&(n.children[m]=this._acquire(o,a,i+1)),i+=1,n=n.children[m]}},e.prototype.remove=function(e,t){for(var r=this._root,n=0;null!==r;){if(r.count-=1,r.xTotal-=e.geometry.coords[0],r.yTotal-=e.geometry.coords[1],r.xGeohashTotal-=e.geohashX,r.yGeohashTotal-=e.geohashY,this._updateStatistics(e,r,-1),n>=t)return;var i=Math.ceil((n+1)/2),o=Math.floor((n+1)/2),a=1-n%2,s=30-(3*i+2*o),u=30-(2*i+3*o),l=7*a+3*(1-a)<<s,c=3*a+7*(1-a)<<u,p=8*a+4*(1-a),d=((e.geohashX&l)>>s)+((e.geohashY&c)>>u)*p,f=r.children[d];1===f.count&&(this._release(f),r.children[d]=null),n+=1,r=f}},e.prototype.find=function(e,t,r){return this._root.find(e,t,r,0,0,0)},e.prototype.findSingleOccupancyNode=function(e,t,r,n,i){for(var o=this._root;null!==o;){var a=o.depth,s=o.xNode,u=o.yNode,l=1-a%2,c=o.xGeohashTotal/o.count,p=o.yGeohashTotal/o.count;if(1===o.count&&e<c&&c<=r&&t<p&&p<=n)return o;if(a>=i)o=o.next;else{for(var d=Math.ceil((a+1)/2),f=Math.floor((a+1)/2),h=30-(3*d+2*f),y=30-(2*d+3*f),v=~((1<<h)-1),m=~((1<<y)-1),_=(e&v)>>h,g=(t&m)>>y,b=(r&v)>>h,x=(n&m)>>y,S=s<<3*l+2*(1-l),w=u<<2*l+3*(1-l),I=S+8*l+4*(1-l),T=w+4*l+8*(1-l),E=Math.max(S,_),M=Math.max(w,g),P=Math.min(I,b),F=Math.min(T,x),O=null,R=null,N=M;N<=F;N++)for(var j=E;j<=P;j++){var A=j-S+(N-w)*(8*l+4*(1-l)),C=o.children[A];C&&(O||((O=C).next=o.next),R&&(R.next=C),R=C,C.next=o.next)}o=O||o.next}}return null},e.prototype.getRegionStatistics=function(e,t,r,n,i){for(var o=this._root,a=0,s=0,u=0,l={};null!==o;){var c=o.depth,p=o.xNode,d=o.yNode;if(c>=i){var f=o.xGeohashTotal/o.count,h=o.yGeohashTotal/o.count;e<f&&f<=r&&t<h&&h<=n&&(a+=o.count,s+=o.xTotal,u+=o.yTotal,this._aggregateStatistics(l,o.statistics)),o=o.next}else{for(var y=Math.ceil((c+1)/2),v=Math.floor((c+1)/2),m=1-c%2,_=30-(3*y+2*v),g=30-(2*y+3*v),b=~((1<<_)-1),x=~((1<<g)-1),S=(e&b)>>_,w=(t&x)>>g,I=(r&b)>>_,T=(n&x)>>g,E=p<<3*m+2*(1-m),M=d<<2*m+3*(1-m),P=E+8*m+4*(1-m),F=M+4*m+8*(1-m),O=Math.max(E,S),R=Math.max(M,w),N=Math.min(P,I),j=Math.min(F,T),A=null,C=null,k=R;k<=j;k++)for(var G=O;G<=N;G++){var D=G-E+(k-M)*(8*m+4*(1-m)),L=o.children[D];if(L){if(k!==R&&k!==j&&G!==O&&G!==N){f=L.xGeohashTotal/L.count,h=L.yGeohashTotal/L.count,e<f&&f<=r&&t<h&&h<=n&&(a+=L.count,s+=L.xTotal,u+=L.yTotal,this._aggregateStatistics(l,L.statistics));continue}A||((A=L).next=o.next),C&&(C.next=L),C=L,L.next=o.next}}o=A||o.next}}return{count:a,attributes:this._normalizeStatistics(l,a),xTotal:s,yTotal:u}},e.prototype._forEachNode=function(e){for(var t=this._root;null!==t;){var r=this._linkChildren(t)||t.next;e(t),t=r}},e.prototype._linkChildren=function(e){for(var t=null,r=null,n=0;n<=e.children.length;n++){var i=e.children[n];i&&(t||((t=i).next=e.next),r&&(r.next=i),r=i,i.next=e.next)}return t},e.prototype._updateStatistics=function(e,t,r){for(var n=0,i=this._fields;n<i.length;n++){var o=i[n],a=o.name,s=o.outStatistic.onStatisticField,u=e.attributes[s];switch(o.outStatistic.statisticType){case"norm":t.statistics[a]||(t.statistics[a]={});var l=o.outStatistic.onStatisticNormalizationField,c=e.attributes[l],p=t.statistics[a].onStatisticField||0,d=t.statistics[a].onStatisticNormalizationField||0;null==u||isNaN(u)||null==c||0===c||isNaN(c)||(t.statistics[a].onStatisticField=p+r*u,t.statistics[a].onStatisticNormalizationField=d+r*c);break;case"sum":case"avg":t.statistics[a]||(t.statistics[a]={value:0,nanCount:0});var f=t.statistics[a].value,h=t.statistics[a].nanCount;null==u||isNaN(u)?t.statistics[a].nanCount=h+r:t.statistics[a].value=f+r*u;break;case"avg_angle":t.statistics[a]||(t.statistics[a]={x:0,y:0,nanCount:0});var y=t.statistics[a].x,v=t.statistics[a].y,m=(h=t.statistics[a].nanCount,Math.PI/180);null==u||isNaN(u)?t.statistics[a].nanCount=h+r:(t.statistics[a].x=y+r*Math.cos(u*m),t.statistics[a].y=v+r*Math.sin(u*m));break;case"mode":t.statistics[a]||(t.statistics[a]={}),f=t.statistics[a][u]||0,t.statistics[a][u]=f+r}}},e.prototype._aggregateStatistics=function(e,t){for(var r=0,n=this._fields;r<n.length;r++){var i=n[r],o=i.name;switch(i.outStatistic.statisticType){case"sum":case"avg":case"avg_angle":case"mode":case"norm":for(var a in e[o]||(e[o]={}),t[o]){var s=e[o][a]||0;e[o][a]=s+t[o][a]}}}},e.prototype._normalizeStatistics=function(e,t){for(var r={},n=0,i=this._fields;n<i.length;n++){var o=i[n],a=o.name;switch(o.outStatistic.statisticType){case"norm":var s=e[a];if(t&&null==s.onStatisticNormalizationField)break;if(t&&s.onStatisticNormalizationField){r[a]=s.onStatisticField/s.onStatisticNormalizationField;break}r[a]=0;break;case"sum":if(!t)break;var u=e[a],l=u.value;if(!(t-(p=u.nanCount)))break;r[a]=l;break;case"avg":if(!t)break;var c=e[a];if(l=c.value,!(t-(p=c.nanCount)))break;r[a]=l/(t-p);break;case"avg_angle":if(!t)break;var p,d=e[a],f=d.x,h=d.y;if(!(t-(p=d.nanCount)))break;var y=f/(t-p),v=h/(t-p),m=180/Math.PI,_=Math.atan2(v,y)*m;r[a]=_;break;case"mode":var g=e[a],b=0,x=null;for(var S in g){var w=g[S];w>b&&(b=w,x=S)}r[a]="null"===x?null:x}}return r},e}();t.GeohashTree=o;var a=function(){function e(e,t,r){this.count=0,this.xTotal=0,this.yTotal=0,this.statistics={},this.next=null,this.depth=0,this.xNode=0,this.yNode=0,this.xGeohashTotal=0,this.yGeohashTotal=0,this.children=new Array(32);for(var n=0;n<this.children.length;n++)this.children[n]=null;this.xNode=e,this.yNode=t,this.depth=r}return e.prototype.realloc=function(e,t,r){for(var n=0;n<this.children.length;n++)this.children[n]=null;return this.xNode=e,this.yNode=t,this.depth=r,this.next=null,this.xGeohashTotal=0,this.yGeohashTotal=0,this.xTotal=0,this.yTotal=0,this.count=0,this.statistics={},this},e.prototype.getLngLatBounds=function(){var e=this.depth,t=Math.ceil(e/2),r=Math.floor(e/2),n=30-(3*t+2*r),o=30-(2*t+3*r),a=this.xNode<<n,s=this.yNode<<o;return i.decodeGeohashXY({geohashX:a,geohashY:s},this.depth)},e.prototype.find=function(e,t,r,n,i,o){if(n>=r)return this;var a=1-n%2,s=3*a+2*(1-a),u=2*a+3*(1-a),l=30-i-s,c=30-o-u,p=((e&7*a+3*(1-a)<<l)>>l)+((t&3*a+7*(1-a)<<c)>>c)*(8*a+4*(1-a)),d=this.children[p];return null==d?null:d.find(e,t,r,n+1,i+s,o+u)},e}()}.apply(null,n))||(e.exports=i)},JZak:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ycL1"),r("rg9i"),r("Vx27"),r("BPYA"),r("ykst"),r("aXZa")],void 0===(i=function(e,t,r,n,i,o,a,s,u){return function(e){function t(t){var r=e.call(this,t)||this;return r.description=null,r.elements=null,r.expressionInfos=null,r.title=null,r}var n;return r.__extends(t,e),n=t,t.prototype.castElements=function(e){return u.ensureType(e)},t.prototype.readElements=function(e,t){return u.fromJSON(t.formElements)},t.prototype.writeElements=function(e,t){t.formElements=u.toJSON(e)},t.prototype.clone=function(){return new n({description:this.description,expressionInfos:i.clone(this.expressionInfos),elements:i.clone(this.elements),title:this.title})},r.__decorate([o.property({type:String,json:{write:!0}})],t.prototype,"description",void 0),r.__decorate([o.property({json:{write:!0}})],t.prototype,"elements",void 0),r.__decorate([o.cast("elements")],t.prototype,"castElements",null),r.__decorate([a.reader("elements",["formElements"])],t.prototype,"readElements",null),r.__decorate([o.writer("elements")],t.prototype,"writeElements",null),r.__decorate([o.property({type:[s],json:{write:!0}})],t.prototype,"expressionInfos",void 0),r.__decorate([o.property({type:String,json:{write:!0}})],t.prototype,"title",void 0),n=r.__decorate([o.subclass("esri.form.FormTemplate")],t)}(n.JSONSupport)}.apply(null,n))||(e.exports=i)},MbkH:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){var r=0;return function(){function e(e){void 0===e&&(e=null),this.uid=r++,e?(this._wkt=void 0!==e.wkt?e.wkt:null,this._wkid=void 0!==e.wkid?e.wkid:-1,this._isInverse=void 0!==e.isInverse&&!0===e.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}return e.fromGE=function(t){var r=new e;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r},Object.defineProperty(e.prototype,"wkt",{get:function(){return this._wkt},set:function(e){this._wkt=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wkid",{get:function(){return this._wkid},set:function(e){this._wkid=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInverse",{get:function(){return this._isInverse},set:function(e){this._isInverse=e,this.uid=r++},enumerable:!0,configurable:!0}),e.prototype.getInverse=function(){var t=new e;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t},e}()}.apply(null,n))||(e.exports=i)},N6pD:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("9gfz"),r("kKuP"),r("ycL1"),r("rg9i"),r("Vx27"),r("gRHS"),r("ml7j")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l){return function(e){function t(t){var r=e.call(this,t)||this;return r.cumulative=!1,r.endField=null,r.fullTimeExtent=null,r.hasLiveData=!1,r.interval=null,r.startField=null,r.timeReference=null,r.trackIdField=null,r.useTime=!0,r}var o;return r.__extends(t,e),o=t,t.prototype.readFullTimeExtent=function(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;var r=t.timeExtent[0],i=t.timeExtent[1];return new n({start:r,end:i})},t.prototype.writeFullTimeExtent=function(e,t){e&&e.start&&e.end?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null},t.prototype.readInterval=function(e,t){return t.timeInterval&&t.timeIntervalUnits?new i({value:t.timeInterval,unit:l.timeUnitKebabDictionary.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new i({value:t.defaultTimeInterval,unit:l.timeUnitKebabDictionary.fromJSON(t.defaultTimeIntervalUnits)}):null},t.prototype.writeInterval=function(e,t){if(e){var r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null},t.prototype.clone=function(){var e=this,t=e.cumulative,r=e.endField,n=e.hasLiveData,i=e.interval,s=e.startField,u=e.timeReference,l=e.fullTimeExtent,c=e.trackIdField,p=e.useTime;return new o({cumulative:t,endField:r,hasLiveData:n,interval:i,startField:s,timeReference:a.clone(u),fullTimeExtent:a.clone(l),trackIdField:c,useTime:p})},r.__decorate([s.property({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],t.prototype,"cumulative",void 0),r.__decorate([s.property({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],t.prototype,"endField",void 0),r.__decorate([s.property({type:n,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,"fullTimeExtent",void 0),r.__decorate([s.reader("fullTimeExtent",["timeExtent"])],t.prototype,"readFullTimeExtent",null),r.__decorate([s.writer("fullTimeExtent")],t.prototype,"writeFullTimeExtent",null),r.__decorate([s.property({type:Boolean,json:{write:!0}})],t.prototype,"hasLiveData",void 0),r.__decorate([s.property({type:i,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,"interval",void 0),r.__decorate([s.reader("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],t.prototype,"readInterval",null),r.__decorate([s.writer("interval")],t.prototype,"writeInterval",null),r.__decorate([s.property({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],t.prototype,"startField",void 0),r.__decorate([s.property({type:u,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,"timeReference",void 0),r.__decorate([s.property({type:String,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,"trackIdField",void 0),r.__decorate([s.property({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],t.prototype,"useTime",void 0),o=r.__decorate([s.subclass("esri.layers.support.TimeInfo")],t)}(o.JSONSupport)}.apply(null,n))||(e.exports=i)},NO20:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("Vx27"),r("aiV9")],void 0===(i=function(e,t,r,n,i){return function(e){function t(t){var r=e.call(this,t)||this;return r.type="text-box",r}return r.__extends(t,e),r.__decorate([n.property({type:["text-box"],json:{read:!1,write:!0}})],t.prototype,"type",void 0),r.__decorate([n.subclass("esri.form.elements.inputs.TextBoxInput")],t)}(i)}.apply(null,n))||(e.exports=i)},Nskv:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ifLZ"),r("ycL1"),r("rg9i"),r("jBNx"),r("Vx27"),r("6huW"),r("EtsK"),r("5WBt")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c){return function(e){function t(t){var r=e.call(this,t)||this;return r.type="cluster",r.clusterRadius=a.toPt("80px"),r.clusterMinSize=a.toPt("12px"),r.clusterMaxSize=a.toPt("50px"),r.popupEnabled=!0,r.popupTemplate=null,r.labelingInfo=null,r.labelsVisible=!0,r.fields=null,r}var i;return r.__extends(t,e),i=t,t.prototype.clone=function(){return new i({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:o.clone(this.labelingInfo),labelsVisible:this.labelsVisible,fields:o.clone(this.fields),popupEnabled:this.popupEnabled,popupTemplate:o.clone(this.popupTemplate)})},r.__decorate([s.property({type:["cluster"],readOnly:!0,json:{write:!0}})],t.prototype,"type",void 0),r.__decorate([s.property({type:Number,cast:function(e){return"auto"===e?e:a.toPt(e)},json:{write:!0}})],t.prototype,"clusterRadius",void 0),r.__decorate([s.property({type:Number,cast:a.toPt,json:{write:!0}})],t.prototype,"clusterMinSize",void 0),r.__decorate([s.property({type:Number,cast:a.toPt,json:{write:!0}})],t.prototype,"clusterMaxSize",void 0),r.__decorate([s.property(l.popupEnabled)],t.prototype,"popupEnabled",void 0),r.__decorate([s.property({type:n,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],t.prototype,"popupTemplate",void 0),r.__decorate([s.property({type:[c],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],t.prototype,"labelingInfo",void 0),r.__decorate([s.property(l.labelsVisible)],t.prototype,"labelsVisible",void 0),r.__decorate([s.property({type:[u],json:{write:!0}})],t.prototype,"fields",void 0),i=r.__decorate([s.subclass("esri.layers.support.FeatureReductionCluster")],t)}(i.JSONSupport)}.apply(null,n))||(e.exports=i)},NuLN:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("Vx27"),r("aiV9")],void 0===(i=function(e,t,r,n,i){return function(e){function t(t){var r=e.call(this,t)||this;return r.type="text-area",r}return r.__extends(t,e),r.__decorate([n.property({type:["text-area"],json:{read:!1,write:!0}})],t.prototype,"type",void 0),r.__decorate([n.subclass("esri.form.elements.inputs.TextAreaInput")],t)}(i)}.apply(null,n))||(e.exports=i)},OkCb:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("MbkH")],void 0===(i=function(e,t,r){return function(){function e(e){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(var t=0,n=e.steps;t<n.length;t++){var i=n[t];i instanceof r?this.steps.push(i):this.steps.push(new r({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}}return e.cacheKey=function(e,t){return[void 0!==e.wkid&&null!==e.wkid?e.wkid.toString():"-1",void 0!==e.wkt&&null!==e.wkt?e.wkt.toString():"",void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():""].join(",")},e.fromGE=function(t){for(var n=new e,i="",o=0,a=t.steps;o<a.length;o++){var s=a[o],u=r.fromGE(s);n.steps.push(u),i+=u.uid.toString()+","}return n._cached_projection={},n._gtlistentry=null,n._chain=i,n},e.prototype.getInverse=function(){var t=new e;t.steps=[];for(var r=this.steps.length-1;r>=0;r--){var n=this.steps[r];t.steps.push(n.getInverse())}return t},e.prototype.getGTListEntry=function(){for(var e="",t=0,r=this.steps;t<r.length;t++)e+=r[t].uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=e),this._gtlistentry},e.prototype.assignCachedGe=function(t,r,n){this._cached_projection[e.cacheKey(t,r)]=n},e.prototype.getCachedGeTransformation=function(t,r){for(var n="",i=0,o=this.steps;i<o.length;i++)n+=o[i].uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=n);var a=this._cached_projection[e.cacheKey(t,r)];return void 0===a?null:a},e}()}.apply(null,n))||(e.exports=i)},PSUj:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ImIS"),r("ycL1"),r("Vx27")],void 0===(i=function(e,t,r,n,i,o){var a=new n.default({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),s=new n.default({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});return function(e){function t(t){var r=e.call(this,t)||this;return r.cardinality=null,r.composite=null,r.id=null,r.keyField=null,r.keyFieldInRelationshipTable=null,r.name=null,r.relatedTableId=null,r.relationshipTableId=null,r.role=null,r}return r.__extends(t,e),r.__decorate([o.property({json:{read:a.read,write:a.write}})],t.prototype,"cardinality",void 0),r.__decorate([o.property({json:{read:!0,write:!0}})],t.prototype,"composite",void 0),r.__decorate([o.property({json:{read:!0,write:!0}})],t.prototype,"id",void 0),r.__decorate([o.property({json:{read:!0,write:!0}})],t.prototype,"keyField",void 0),r.__decorate([o.property({json:{read:!0,write:!0}})],t.prototype,"keyFieldInRelationshipTable",void 0),r.__decorate([o.property({json:{read:!0,write:!0}})],t.prototype,"name",void 0),r.__decorate([o.property({json:{read:!0,write:!0}})],t.prototype,"relatedTableId",void 0),r.__decorate([o.property({json:{read:!0,write:!0}})],t.prototype,"relationshipTableId",void 0),r.__decorate([o.property({json:{read:s.read,write:s.write}})],t.prototype,"role",void 0),r.__decorate([o.subclass("esri.layers.support.Relationship")],t)}(i.JSONSupport)}.apply(null,n))||(e.exports=i)},PhdM:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("WYKK"),r("qMld"),r("V2ZO")],void 0===(i=function(e,t,r,n,i,o){Object.defineProperty(t,"__esModule",{value:!0}),t.loadStyleRenderer=function(e,t,a){return r.__awaiter(this,void 0,void 0,(function(){var s,u,l;return r.__generator(this,(function(r){switch(r.label){case 0:return(s=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin))&&"unique-value"===s.type&&s.styleOrigin?[4,n.result(s.populateFromStyle())]:[3,2];case 1:u=r.sent(),i.throwIfAborted(a),!1===u.ok&&(l=u.error,t&&t.messages&&t.messages.push(new o("renderer:style-reference","Failed to create unique value renderer from style reference: "+l.message,{error:l,context:t})),e.clear("renderer",t.origin)),r.label=2;case 2:return[2]}}))}))}}.apply(null,n))||(e.exports=i)},Q2Em:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("qMld"),r("wIC5"),r("H9Hv"),r("nrlZ"),r("vtMp")],void 0===(i=function(e,t,r,n,i,o,a,s,u){Object.defineProperty(t,"__esModule",{value:!0});var l=[0,0];function c(e,t){var r,n,i;if(!t)return null;if("x"in t){var o={x:0,y:0};return r=e(t.x,t.y,l),o.x=r[0],o.y=r[1],null!=t.z&&(o.z=t.z),null!=t.m&&(o.m=t.m),o}return"xmin"in t?(o={xmin:0,ymin:0,xmax:0,ymax:0},n=e(t.xmin,t.ymin,l),o.xmin=n[0],o.ymin=n[1],i=e(t.xmax,t.ymax,l),o.xmax=i[0],o.ymax=i[1],t.hasZ&&(o.zmin=t.zmin,o.zmax=t.zmax,o.hasZ=!0),t.hasM&&(o.mmin=t.mmin,o.mmax=t.mmax,o.hasM=!0),o):"rings"in t?{rings:p(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:p(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:d(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:void 0}function p(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n];r.push(d(o,t))}return r}function d(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n],a=t(o[0],o[1],[0,0]);r.push(a),o.length>2&&a.push(o[2]),o.length>3&&a.push(o[3])}return r}function f(e,t){return!(!s.isValid(e)||!s.isValid(t)||s.equals(e,t)||u.canProject(e,t))}t.doesBrowserSupportProjection=function(e,t){return!f(e,t)||o.isSupported()},t.checkProjectionSupport=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var i,a,s;return r.__generator(this,(function(r){if(!t)return[2];if(Array.isArray(e)){for(i=0,a=e;i<a.length;i++)if(f((s=a[i]).geometry&&s.geometry.spatialReference,t)){if(o.isSupported())return[2,o.load()];throw new n("feature-store:unsupported-query","projection not supported",{inSpatialReference:e,outSpatialReference:t})}return[2]}if(!f(e,t))return[2];if(o.isSupported())return[2,o.load()];throw new n("feature-store:unsupported-query","projection not supported",{inSpatialReference:e,outSpatialReference:t})}))}))};var h=c.bind(null,u.lngLatToXY),y=c.bind(null,u.xyToLngLat);t.project=function(e,t,r){return e?(r||(r=t,t=e.spatialReference),s.isValid(t)&&s.isValid(r)&&!s.equals(t,r)?u.canProject(t,r)?s.isWebMercator(r)?h(e):y(e):o.projectMany(a.jsonAdapter,[e],t,r,null)[0]:e):e};var v=new(function(){function e(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}return e.prototype.push=function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var o,a=this;return r.__generator(this,(function(r){return e&&e.length&&t&&n&&!s.equals(t,n)||i.resolve(e),o={geometries:e,inSpatialReference:t,outSpatialReference:n,resolve:null},this._jobs.push(o),[2,i.create((function(e){o.resolve=e,null===a._timer&&(a._timer=setTimeout(a._process,10))}))]}))}))},e.prototype._process=function(){this._timer=null;var e=this._jobs.shift();if(e){var t=e.geometries,r=e.inSpatialReference,n=e.outSpatialReference,i=e.resolve;u.canProject(r,n)?s.isWebMercator(n)?i(t.map(h)):i(t.map(y)):i(o.projectMany(a.jsonAdapter,t,r,n,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}},e}());t.projectMany=function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){return[2,v.push(e,t,n)]}))}))}}.apply(null,n))||(e.exports=i)},QmSy:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("hySu"),r("TznG"),r("7mbE"),r("5c1C"),r("4QoD"),r("NuLN"),r("NO20")],void 0===(i=function(e,t,r,n,i,o,a,s,u){Object.defineProperty(t,"__esModule",{value:!0}),t.types={base:o,key:"type",typeMap:{"barcode-scanner":r,"combo-box":n,"datetime-picker":i,"radio-buttons":a,"text-area":s,"text-box":u}}}.apply(null,n))||(e.exports=i)},TsGx:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ycL1"),r("rg9i"),r("Vx27"),r("1dvD")],void 0===(i=function(e,t,r,n,i,o,a){var s=function(e){function t(t){var r=e.call(this,t)||this;return r.attachmentTypes=null,r.attachmentsWhere=null,r.keywords=null,r.globalIds=null,r.name=null,r.num=null,r.objectIds=null,r.returnMetadata=!1,r.size=null,r.start=null,r.where=null,r}var n;return r.__extends(t,e),n=t,t.prototype.writeStart=function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10},t.prototype.clone=function(){return new n(i.clone({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))},r.__decorate([o.property({type:[String],json:{write:!0}})],t.prototype,"attachmentTypes",void 0),r.__decorate([o.property({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],t.prototype,"attachmentsWhere",void 0),r.__decorate([o.property({type:[String],json:{write:!0}})],t.prototype,"keywords",void 0),r.__decorate([o.property({type:[Number],json:{write:!0}})],t.prototype,"globalIds",void 0),r.__decorate([o.property({json:{write:!0}})],t.prototype,"name",void 0),r.__decorate([o.property({type:Number,json:{read:{source:"resultRecordCount"}}})],t.prototype,"num",void 0),r.__decorate([o.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),r.__decorate([o.property({type:Boolean,json:{default:!1,write:!0}})],t.prototype,"returnMetadata",void 0),r.__decorate([o.property({type:[Number],json:{write:!0}})],t.prototype,"size",void 0),r.__decorate([o.property({type:Number,json:{read:{source:"resultOffset"}}})],t.prototype,"start",void 0),r.__decorate([o.writer("start"),o.writer("num")],t.prototype,"writeStart",null),r.__decorate([o.property({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],t.prototype,"where",void 0),n=r.__decorate([o.subclass("esri.tasks.support.AttachmentQuery")],t)}(n.JSONSupport);return s.from=a.default(s),s}.apply(null,n))||(e.exports=i)},TznG:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("Vx27"),r("5c1C")],void 0===(i=function(e,t,r,n,i){return function(e){function t(t){var r=e.call(this,t)||this;return r.type="combo-box",r}var i;return r.__extends(t,e),i=t,t.prototype.clone=function(){return new i},r.__decorate([n.property({type:["combo-box"],json:{read:!1,write:!0}})],t.prototype,"type",void 0),i=r.__decorate([n.subclass("esri.form.elements.inputs.ComboBoxInput")],t)}(i)}.apply(null,n))||(e.exports=i)},U8ed:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ycL1"),r("Vx27")],void 0===(i=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){return e.call(this,t)||this}var n;return r.__extends(t,e),n=t,t.prototype.clone=function(){var e=this,t=e.name,r=e.fields,i=e.isAscending,o=e.isUnique,a=e.description;return new n({name:t,fields:r,isAscending:i,isUnique:o,description:a})},r.__decorate([i.property({constructOnly:!0})],t.prototype,"name",void 0),r.__decorate([i.property({constructOnly:!0})],t.prototype,"fields",void 0),r.__decorate([i.property({constructOnly:!0})],t.prototype,"isAscending",void 0),r.__decorate([i.property({constructOnly:!0})],t.prototype,"isUnique",void 0),r.__decorate([i.property({constructOnly:!0})],t.prototype,"description",void 0),n=r.__decorate([i.subclass("esri.layers.support.FeatureIndex")],t)}(n.JSONSupport);t.FeatureIndex=o,t.default=o}.apply(null,n))||(e.exports=i)},UN5d:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("5WBt")],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=/\[([^\[\]]+)\]/gi;t.reader=function(e,t,i){var o=this;return e?e.map((function(e){var a=new r;if(a.read(e,i),a.labelExpression){var s=t.fields||t.layerDefinition&&t.layerDefinition.fields||o.fields;a.labelExpression=a.labelExpression.replace(n,(function(e,t){return"["+function(e,t){if(!t)return e;for(var r=e.toLowerCase(),n=0;n<t.length;n++){var i=t[n].name;if(i.toLowerCase()===r)return i}return e}(t,s)+"]"}))}return a})):null}}.apply(null,n))||(e.exports=i)},V1i6:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("qMld"),r("k1EI"),r("Thzy"),r("Lzvl"),r("nrlZ"),r("gT/q"),r("+6sX"),r("Jvs9"),r("Q2Em"),r("zDti"),r("2Kdy")],void 0===(i=function(e,t,n,i,o,a,s,u,l,c,p,d,f,h){Object.defineProperty(t,"__esModule",{value:!0});var y={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},v={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},m={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},_={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};function g(){return new Promise((function(e,t){Promise.all([r.e(8),r.e(25)]).then(function(){var t=[r("tNTp")];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}t.importGeometryEngine=g,t.getGeodesicBufferOperator=function(){return g().then((function(e){return e.geodesicBuffer}))},t.getSpatialQueryOperator=function(e,t,r,n,i){if(u.isPolygon(t)&&"esriGeometryPoint"===r&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===e)){var l=p.convertFromPolygon(new d.default,t,!1,!1);return o.resolve((function(e){return c.polygonContainsPoint(l,!1,!1,e)}))}if(u.isPolygon(t)&&"esriGeometryMultipoint"===r){var f=p.convertFromPolygon(new d.default,t,!1,!1);if("esriSpatialRelContains"===e)return o.resolve((function(e){return c.polygonContainsMultipoint(f,!1,!1,e,n,i)}))}if(u.isExtent(t)&&"esriGeometryPoint"===r&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===e))return o.resolve((function(e){return a.extentContainsPoint(t,h.getGeometry(r,n,i,e))}));if(u.isExtent(t)&&"esriGeometryMultipoint"===r&&"esriSpatialRelContains"===e)return o.resolve((function(e){return a.extentContainsMultipoint(t,h.getGeometry(r,n,i,e))}));if(u.isExtent(t)&&"esriSpatialRelIntersects"===e){var v=s.getExtentIntersector(r);return o.resolve((function(e){return v(t,h.getGeometry(r,n,i,e))}))}return g().then((function(o){var a=o[y[e]].bind(null,t.spatialReference,t);return function(e){return a(h.getGeometry(r,n,i,e))}}))},t.checkSpatialQuerySupport=function(e,t,r){return n.__awaiter(this,void 0,void 0,(function(){var o,a;return n.__generator(this,(function(n){if(o=e.spatialRel,!(a=e.geometry))return[2];if(!0!==v[o])throw new i("feature-store:unsupported-query","Unsupported query spatial relationship",{query:e});if(!l.isValid(a.spatialReference)||!l.isValid(r))return[2];if(!function(e){return!0===m[u.getJsonType(e)]}(a))throw new i("feature-store:unsupported-query","Unsupported query geometry type",{query:e});if(!function(e){return!0===_[e]}(t))throw new i("feature-store:unsupported-query","Unsupported layer geometry type",{query:e});return e.outSR?[2,f.checkProjectionSupport(e.geometry&&e.geometry.spatialReference,e.outSR)]:[2]}))}))},t.canQueryWithRBush=function(e){if(u.isExtent(e))return!0;if(u.isPolygon(e)){for(var t=0,r=e.rings;t<r.length;t++){var n=r[t];if(5!==n.length)return!1;if(n[0][0]!==n[1][0]||n[0][0]!==n[4][0]||n[2][0]!==n[3][0]||n[0][1]!==n[3][1]||n[0][1]!==n[4][1]||n[1][1]!==n[2][1])return!1}return!0}return!1}}.apply(null,n))||(e.exports=i)},WRgd:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("LxLY"),r("N7S/"),r("lRq4")],void 0===(i=function(e,t,r,n,i){function o(e){return void 0===e&&(e=t.ZERO),[e[0],e[1],e[2],e[3],e[4],e[5]]}function a(e,t,r,n,i,a,s){return void 0===s&&(s=o()),s[0]=e,s[1]=t,s[2]=r,s[3]=n,s[4]=i,s[5]=a,s}function s(e){return e[0]>=e[3]?0:e[3]-e[0]}function u(e){return e[1]>=e[4]?0:e[4]-e[1]}function l(e){return e[2]>=e[5]?0:e[5]-e[2]}function c(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function p(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function d(e){return 6===e.length}Object.defineProperty(t,"__esModule",{value:!0}),t.create=o,t.fromValues=a,t.fromExtent=function(e,t){return void 0===t&&(t=o()),t[0]=e.xmin,t[1]=e.ymin,t[2]=e.zmin,t[3]=e.xmax,t[4]=e.ymax,t[5]=e.zmax,t},t.toExtent=function(e,t){var r=isFinite(e[2])||isFinite(e[5]);return new n(r?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})},t.fromMinMax=function(e,t,r){return void 0===r&&(r=o()),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=t[0],r[4]=t[1],r[5]=t[2],r},t.expandPointInPlace=function(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[3]&&(e[3]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[4]&&(e[4]=t[1]),t[2]<e[2]&&(e[2]=t[2]),t[2]>e[5]&&(e[5]=t[2])},t.expand=function(e,t,r){return void 0===r&&(r=e),d(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r[3]=Math.max(e[3],t[3]),r[4]=Math.max(e[4],t[4]),r[5]=Math.max(e[5],t[5])):i.is(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[3]=Math.max(e[3],t[2]),r[4]=Math.max(e[4],t[3])):2===t.length?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[3]=Math.max(e[3],t[0]),r[4]=Math.max(e[4],t[1])):3===t.length&&(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r[3]=Math.max(e[3],t[0]),r[4]=Math.max(e[4],t[1]),r[5]=Math.max(e[5],t[2])),r},t.expandWithBuffer=function(e,t,r,n,i){void 0===r&&(r=0),void 0===n&&(n=t.length/3),void 0===i&&(i=e);for(var o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],p=0;p<n;p++)o=Math.min(o,t[r+3*p]),a=Math.min(a,t[r+3*p+1]),s=Math.min(s,t[r+3*p+2]),u=Math.max(u,t[r+3*p]),l=Math.max(l,t[r+3*p+1]),c=Math.max(c,t[r+3*p+2]);return i[0]=o,i[1]=a,i[2]=s,i[3]=u,i[4]=l,i[5]=c,i},t.expandWithOffset=function(e,t,r,n,i){return void 0===i&&(i=e),i[0]=Math.min(e[0],e[0]+t),i[3]=Math.max(e[3],e[3]+t),i[1]=Math.min(e[1],e[1]+r),i[4]=Math.max(e[4],e[4]+r),i[2]=Math.min(e[2],e[2]+n),i[5]=Math.max(e[5],e[5]+n),i},t.expandWithNestedArray=function(e,t,r,n){void 0===n&&(n=e);var i=t.length,o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5];if(r)for(var p=0;p<i;p++){var d=t[p];o=Math.min(o,d[0]),a=Math.min(a,d[1]),s=Math.min(s,d[2]),u=Math.max(u,d[0]),l=Math.max(l,d[1]),c=Math.max(c,d[2])}else for(p=0;p<i;p++)d=t[p],o=Math.min(o,d[0]),a=Math.min(a,d[1]),u=Math.max(u,d[0]),l=Math.max(l,d[1]);return n[0]=o,n[1]=a,n[2]=s,n[3]=u,n[4]=l,n[5]=c,n},t.allFinite=function(e){for(var t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0},t.width=s,t.depth=u,t.height=l,t.diameter=function(e){var t=s(e),r=l(e),n=u(e);return Math.sqrt(t*t+r*r+n*n)},t.center=function(e,t){return void 0===t&&(t=[0,0,0]),t[0]=e[0]+s(e)/2,t[1]=e[1]+u(e)/2,t[2]=e[2]+l(e)/2,t},t.size=function(e,t){return void 0===t&&(t=[0,0,0]),t[0]=s(e),t[1]=u(e),t[2]=l(e),t},t.maximumDimension=function(e){return Math.max(s(e),l(e),u(e))},t.containsPoint=function(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]},t.containsPointWithMargin=function(e,t,r){return t[0]>=e[0]-r&&t[1]>=e[1]-r&&t[2]>=e[2]-r&&t[0]<=e[3]+r&&t[1]<=e[4]+r&&t[2]<=e[5]+r},t.contains=function(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[3]<=e[3]&&t[4]<=e[4]&&t[5]<=e[5]},t.intersects=c,t.intersectsClippingArea=function(e,t){return!!r.isNone(t)||c(e,t)},t.offset=function(e,t,r,n,i){return void 0===i&&(i=e),i[0]=e[0]+t,i[1]=e[1]+r,i[2]=e[2]+n,i[3]=e[3]+t,i[4]=e[4]+r,i[5]=e[5]+n,i},t.getMin=function(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.getMax=function(e,t){return t[0]=e[3],t[1]=e[4],t[2]=e[5],t},t.setMin=function(e,t,r){return void 0===r&&(r=e),r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r},t.setMax=function(e,t,r){return void 0===r&&(r=e),r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e},t.set=p,t.empty=function(e){return e?p(e,t.NEGATIVE_INFINITY):o(t.NEGATIVE_INFINITY)},t.toRect=function(e,t){return t||(t=i.create()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t},t.fromRect=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e},t.is=d,t.isPoint=function(e){return 0===s(e)&&0===u(e)&&0===l(e)},t.equals=function(e,t,n){if(r.isNone(e)||r.isNone(t))return e===t;if(!d(e)||!d(t))return!1;if(n){for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1}else for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},t.wrap=function(e,t,r,n,i,o){return a(e,t,r,n,i,o,f)},t.POSITIVE_INFINITY=[-1/0,-1/0,-1/0,1/0,1/0,1/0],t.NEGATIVE_INFINITY=[1/0,1/0,1/0,-1/0,-1/0,-1/0],t.ZERO=[0,0,0,0,0,0];var f=o()}.apply(null,n))||(e.exports=i)},"Wuf+":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("qMld")],void 0===(i=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this._action=null,this._queue=[],this._abortController=n.createAbortController(),this._refs=1}return e.prototype.up=function(){this._refs++},e.prototype.down=function(){return this._refs--,0===this._refs},e.prototype.clear=function(){this._abortController.abort(),this._abortController=n.createAbortController()},e.prototype.destroy=function(){this._queue.length=0,this._action&&(this._action=null)},e.prototype.enqueue=function(e){this._action?this._queue.push(e):this._setAction(e)},e.prototype.flush=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,i;return r.__generator(this,(function(r){return(e=this._action)?(t=this._abortController.signal,i=this._queue.reduce((function(e,r){return e.then((function(){return r(t)}))}),e).catch(n.throwIfNotAbortError),this._action=i.then(this._handleNext.bind(this)).catch(n.throwIfNotAbortError),this._queue.length=0,[2,i]):[2]}))}))},e.prototype.hasAction=function(){return!!this._action},e.prototype._setAction=function(e){var t=this._abortController.signal;this._action=e(t).then(this._handleNext.bind(this)).catch(n.throwIfNotAbortError)},e.prototype._handleNext=function(){this._queue.length?this._setAction(this._queue.shift()):this._action=null},e}();t.default=i}.apply(null,n))||(e.exports=i)},YhCz:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("ma1f"),r("qsST"),r("v7zm"),r("yre/"),r("6/KI")],void 0===(i=function(e,t,r,n,i,o,a){Object.defineProperty(t,"__esModule",{value:!0});var s=n.getLogger("esri.tasks.operations.pbfFeatureServiceParser"),u=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],l=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],c=["upperLeft","lowerLeft"];function p(e){return e>=u.length?null:u[e]}function d(e){return e>=c.length?null:c[e]}function f(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function h(e,t,r){for(var n=t.createPointGeometry(r);e.next();)switch(e.tag()){case 3:for(var i=e.getUInt32(),o=e.pos()+i,a=0;e.pos()<o;)t.addCoordinatePoint(n,e.getSInt64(),0,a++);break;case 1:case 2:default:e.skip()}return n}function y(e,t,r){for(var n=t.createGeometry(r),i=2+(r.hasZ?1:0)+(r.hasM?1:0);e.next();)switch(e.tag()){case 2:for(var o=e.getUInt32(),a=e.pos()+o,s=0;e.pos()<a;)t.addLength(n,e.getUInt32(),s++);break;case 3:for(var u=e.getUInt32(),l=(a=e.pos()+u,0),c=0;e.pos()<a;)t.addCoordinate(n,e.getSInt64(),c,l),++l===i&&(c++,l=0);break;case 1:default:e.skip()}return n}function v(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function m(e){for(var t,r={type:p(0)};e.next();)switch(e.tag()){case 1:r.name=e.getString();break;case 2:r.type=p(e.getEnum());break;case 3:r.alias=e.getString();break;case 4:r.sqlType=(t=e.getEnum())>=l.length?null:l[t];break;case 5:case 6:default:e.skip()}return r}function _(e,t,r,n){for(var i=t.createFeature(r),o=0;e.next();)switch(e.tag()){case 1:var a=n[o++].name;i.attributes[a]=e.processMessage(v);break;case 2:i.geometry=e.processMessageWithArgs(y,t,r);break;case 4:i.centroid=e.processMessageWithArgs(h,t,r);break;default:e.skip()}return i}function g(e){for(var t=[1,1,1,1];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function b(e){for(var t=[0,0,0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function x(e){for(var t={originPosition:d(0)};e.next();)switch(e.tag()){case 1:t.originPosition=d(e.getEnum());break;case 2:t.scale=e.processMessage(g);break;case 3:t.translate=e.processMessage(b);break;default:e.skip()}return t}function S(e){for(var t={};e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip()}return t}function w(e,t){for(var r=t.createSpatialReference();e.next();)switch(e.tag()){case 1:r.wkid=e.getUInt32();break;case 5:r.wkt=e.getString();break;case 2:case 3:case 4:default:e.skip()}return r}function I(e,t){var r=t.createFeatureResult();r.geometryType=f(t,0);for(var n=!1;e.next();)switch(e.tag()){case 1:r.objectIdFieldName=e.getString();break;case 3:r.globalIdFieldName=e.getString();break;case 4:r.geohashFieldName=e.getString();break;case 5:r.geometryProperties=e.processMessage(S);break;case 7:r.geometryType=f(t,e.getEnum());break;case 8:r.spatialReference=e.processMessageWithArgs(w,t);break;case 10:r.hasZ=e.getBool();break;case 11:r.hasM=e.getBool();break;case 12:r.transform=e.processMessage(x);break;case 9:var i=e.getBool();r.exceededTransferLimit=i;break;case 13:t.addField(r,e.processMessage(m));break;case 15:n||(t.prepareFeatures(r),n=!0),t.addFeature(r,e.processMessageWithArgs(_,t,r,r.fields));break;case 2:case 6:default:e.skip()}return t.finishFeatureResult(r),r}function T(e,t){for(var r={};e.next();)switch(e.tag()){case 1:r.featureResult=e.processMessageWithArgs(I,t);break;default:e.skip()}return r}t.parseFeatureQuery=function(e,t){var n=function(e){return e&&"dehydrated"===e.type?new o.Context(e):new a.Context(e)}(t);try{for(var u=new i(new Uint8Array(e),new DataView(e)),l={};u.next();)switch(u.tag()){case 2:l.queryResult=u.processMessageWithArgs(T,n);break;default:u.skip()}return l}catch(e){var c=new r("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:e});return s.error(c),{queryResult:{featureResult:n.createFeatureResult()}}}}}.apply(null,n))||(e.exports=i)},Ytki:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("ma1f"),r("ULaq"),r("ztx9")],void 0===(i=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0});var o=new i.WhereClauseCache(50,500),a="feature-store:unsupported-query",s=n.SetFromValues(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);function u(e,t){return e?o.get(e,t):null}function l(e,t,n,i){void 0===i&&(i=!0);for(var o=[],s=0,p=t;s<p.length;s++){var d=p[s];if("*"!==d&&!e.has(d))if(i){var f=c(d);try{var h=u(f,e);if(!h)throw new r(a,"invalid SQL expression",{where:f});if(!h.isStandardized)throw new r(a,"expression is not standard",{clause:h});l(e,h.fieldNames,"expression contains missing fields")}catch(e){var y=e&&e.details;if(y&&(y.clause||y.where))throw e;y&&y.missingFields?o.push.apply(o,y.missingFields):o.push(d)}}else o.push(d)}if(o.length)throw new r(a,n,{missingFields:o})}function c(e){return e.split(" as ")[0]}t.validateWhere=function(e,t){if(!t)return!0;var n=o.get(t,e);if(!n)throw new r(a,"invalid SQL expression",{where:t});if(!n.isStandardized)throw new r(a,"where clause is not standard",{where:t});return l(e,n.fieldNames,"where clause contains missing fields"),!0},t.validateHaving=function(e,t,n){if(!t)return!0;var i=o.get(t,e);if(!i)throw new r(a,"invalid SQL expression",{having:t});if(!i.isAggregate)throw new r(a,"having does not contain a valid aggregate function",{having:t});var s=i.fieldNames;if(l(e,s,"having contains missing fields"),!i.getExpressions().every((function(t){var r=t.aggregateType,i=t.field,o=e.has(i)&&e.get(i).name;return n.some((function(t){var n=t.onStatisticField,i=t.statisticType;return(e.has(n)&&e.get(n).name)===o&&i.toLowerCase().trim()===r}))})))throw new r(a,"expressions in having should also exist in outStatistics",{having:t});return!0},t.getWhereClause=u,t.validateFields=l,t.getExpressionFromFieldName=c,t.getAliasFromFieldName=function(e){return e.split(" as ")[1]},t.hasInvalidFieldType=function(e,t){var r=t.get(e);return!!r&&!s.has(r.type)}}.apply(null,n))||(e.exports=i)},ZGAQ:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("lRq4"),r("+6sX"),r("Jvs9"),r("ZooB"),r("zDti")],void 0===(i=function(e,t,r,n,i,o,a){Object.defineProperty(t,"__esModule",{value:!0});var s=new i.default,u={esriGeometryPoint:n.convertToPoint,esriGeometryPolyline:n.convertToPolyline,esriGeometryPolygon:n.convertToPolygon,esriGeometryMultipoint:n.convertToMultipoint};t.executeTileQueryForIds=function(e,t,n){var i=n.pixelBuffer*t.resolution,o=r.pad(t.bounds,i,r.create()),a=[];return e.featureStore.forEachInBounds(o,(function(t){return a.push(e.featureAdapter.getObjectId(t))})),a},t.createTileFeatures=function(e,t,r,n,i,p,d,f,h){var y=u[r.geometryType],v=l[r.geometryType],m="esriGeometryPolygon"===r.geometryType&&!f,_=r.hasZ?r.hasM?4:3:r.hasM?3:2;d&&!p?n.forEachInBounds(i,(function(n){return function(e,t,r,n,i){if(!t.has(r.objectId)){var s=a.getCentroid(n,r,i),u=r.attributes;s&&(t.add(r.objectId),e.push(new o.Feature(u,r.localId,null,s)))}}(e,t,n,r,h)})):p&&!d?n.forEachInBounds(i,(function(r){return function(e,t,r,n,i,a,u,l){if(!t.has(r.objectId)){var p=r.attributes,d=n(c(s,r.geometry,i,a,l,u),!1,!1);d&&(t.add(r.objectId),e.push(new o.Feature(p,r.localId,d,null)))}}(e,t,r,y,_,v,h,m)})):n.forEachInBounds(i,(function(n){return function(e,t,r,n,i,u,l,p,d){if(!t.has(r.objectId)){var f=a.getCentroid(n,r,i),h=r.attributes,y=u(c(s,r.geometry,l,p,d,i),!1,!1);y&&f&&(t.add(r.objectId),e.push(new o.Feature(h,r.localId,y,f)))}}(e,t,n,r,h,y,_,v,m)}))};var l={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0};function c(e,t,r,i,o,a){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;var s,u,l,c,p=t.coords,d=t.lengths;if(!d.length)return e.coords[0]=n.quantizeX(a,p[0]),e.coords[1]=n.quantizeY(a,p[1]),e.coords.length=r,e;for(var f=0,h=0,y=h,v=0,m=d;v<m.length;v++){var _=m[v];if(!(_<i))if(h=y,l=s=n.quantizeX(a,p[f]),c=u=n.quantizeY(a,p[f+1]),e.coords[h]=l,e.coords[h+1]=c,f+=r,1!==_){var g=(l=n.quantizeX(a,p[f]))-s,b=(c=n.quantizeY(a,p[f+1]))-u,x=b/g;h+=2,e.coords[h]=g,e.coords[h+1]=b,s=l,u=c,f+=r;for(var S=2;S<_;S++){if(l=n.quantizeX(a,p[f]),c=n.quantizeY(a,p[f+1]),l!==s||c!==u){var w=l-s,I=c-u,T=I/w;x!==T&&(isFinite(x)||isFinite(T))||!(o||(b>=0&&I>=0||b<=0&&I<=0)&&(g>=0&&w>=0||g<=0&&w<=0))?(g=w,b=I,h+=2):(g+=w,b+=I),e.coords[h]=g,e.coords[h+1]=b,x=T,s=l,u=c}f+=r}var E=(h+2-y)/2;E>=i&&(e.lengths.push(E),y=h+2)}else e.lengths.push(1),y=h+2}return e.coords.length>y&&(e.coords.length=y),e.coords.length?e:null}t.quantizeOptimizedGeometryForDisplay=c}.apply(null,n))||(e.exports=i)},ZHL0:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("r7jh")],void 0===(i=function(e,t,r){return function(){function e(e,t){this._storage=new r.MemCacheStorage,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}return e.prototype.put=function(e,t){this._storage.put(e,t,1,1)},e.prototype.pop=function(e){return this._storage.pop(e)},e.prototype.get=function(e){return this._storage.get(e)},e.prototype.clear=function(){this._storage.clearAll()},e.prototype.destroy=function(){this._storage.clearAll()},e}()}.apply(null,n))||(e.exports=i)},ZJpS:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("ll/V"),r("qsST"),r("KQcO"),r("k7g7")],void 0===(i=function(e,t,r,n,i,o){Object.defineProperty(t,"__esModule",{value:!0});var a=n.getLogger("esri.layers.support.fieldProperties");t.defineFieldProperties=function(){return{fields:{type:[i],value:null},outFields:{type:[String],dependsOn:["fields"],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var e=this._userOutFields;if(!e||!e.length)return null;if(r.includes(e,"*"))return["*"];if(!this.fields)return e;for(var t=0,n=e;t<n.length;t++){var i=n[t];o.hasField(this.fields,i)||a.error("field-attributes-layer:invalid-field","Invalid field "+i+" found in outFields",{layer:this,outFields:e})}return o.fixFields(this.fields,e)}}}}}.apply(null,n))||(e.exports=i)},Zb3b:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("ma1f"),r("TTKK"),r("aWt5"),r("Nskv"),r("fQaS")],void 0===(i=function(e,t,r,n,i,o,a){function s(e,t,n){return e?"selection"!==e.type?(n.messages&&n.messages.push(new r("featureReduction:unsupported","FeatureReduction of type '"+e.declaredClass+"' are not supported in scenes.",{featureReduction:e,context:n})),null):e.write(t,n):null}Object.defineProperty(t,"__esModule",{value:!0}),t.webSceneFeatureReductionTypes={key:"type",base:i.default,typeMap:{selection:a}},t.read=function(e,t){var r=(t=t.layerDefinition||t).featureReduction;if(r)switch(r.type){case"selection":return a.fromJSON(r);case"cluster":return o.fromJSON(r)}return null},t.writeTarget=function(e,t,r,i){var o=s(e,{},i);o&&n.setDeepValue(r,o,t)},t.write=s}.apply(null,n))||(e.exports=i)},ZcgO:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("TMur"),r("jZlN"),r("pcDC"),r("H1tY"),r("rg9i"),r("LxLY"),r("rusB"),r("Z4y+"),r("WRgd"),r("lRq4"),r("Lzvl"),r("u90+"),r("KQcO"),r("/Vvo")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,p,d,f,h,y){Object.defineProperty(t,"__esModule",{value:!0}),t.equals=y.equals;t.DehydratedFeatureClass=function(e,t,r){this.uid=e,this.geometry=t,this.attributes=r,this.visible=!0,this.objectId=null,this.centroid=null},t.hasGeometry=function(e){return s.isSome(e.geometry)},t.isFeatureGeometry=function(e){return r.isFeatureGeometryType(e.type)};function v(e,t,r){if(!e)return null;switch(t){case"point":var n=e;return{x:n.x,y:n.y,z:n.z,m:n.m,hasZ:null!=n.z,hasM:null!=n.m,type:"point",spatialReference:r};case"polyline":var i=e;return{paths:i.paths,hasZ:!!i.hasZ,hasM:!!i.hasM,type:"polyline",spatialReference:r};case"polygon":var o=e;return{rings:o.rings,hasZ:!!o.hasZ,hasM:!!o.hasM,type:"polygon",spatialReference:r};case"multipoint":var a=e;return{points:a.points,hasZ:!!a.hasZ,hasM:!!a.hasM,type:"multipoint",spatialReference:r}}}function m(e,t,r,n){return{x:e,y:t,z:r,hasZ:null!=r,hasM:!1,spatialReference:n,type:"point"}}function _(e){return"declaredClass"in e}function g(e){return"declaredClass"in e}function b(e){return"declaredClass"in e}function x(e){return s.isNone(e)?null:_(e)?e:d.fromJSON(function(e){var t=e.spatialReference.toJSON();switch(e.type){case"point":return{x:e.x,y:e.y,z:e.z,m:e.m,spatialReference:t};case"polygon":var r=e.rings,n=e.hasZ,o=e.hasM;return{rings:T(r),hasZ:n,hasM:o,spatialReference:t};case"polyline":var a=e.paths;return n=e.hasZ,o=e.hasM,{paths:T(a),hasZ:n,hasM:o,spatialReference:t};case"extent":return{xmin:e.xmin,xmax:e.xmax,ymin:e.ymin,ymax:e.ymax,zmin:e.zmin,zmax:e.zmax,mmin:e.mmin,mmax:e.mmax,hasZ:n=e.hasZ,hasM:o=e.hasM,spatialReference:t};case"multipoint":var s=e.points;return n=e.hasZ,o=e.hasM,{points:M(s)?E(s):s,hasZ:n,hasM:o,spatialReference:t};default:return void i.neverReached(e)}}(e))}t.DehydratedFeatureSetClass=function(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null},t.isPoint=function(e){return"point"===e.type},t.fromFeatureSetJSON=function(e){var t=r.featureGeometryTypeKebabDictionary.fromJSON(e.geometryType),o=l.fromJSON(e.spatialReference),a=e.transform,s=e.features.map((function(r){var s=function(e,t,r,i){return{uid:n.generateUID(),objectId:i&&e.attributes?e.attributes[i]:null,attributes:e.attributes,geometry:v(e.geometry,t,r),visible:!0}}(r,t,o,e.objectIdFieldName),u=s.geometry;if(u&&a)switch(u.type){case"point":s.geometry=f.hydratePoint(a,u,u,u.hasZ,u.hasM);break;case"multipoint":s.geometry=f.hydrateMultipoint(a,u,u,u.hasZ,u.hasM);break;case"polygon":s.geometry=f.hydratePolygon(a,u,u,u.hasZ,u.hasM);break;case"polyline":s.geometry=f.hydratePolyline(a,u,u,u.hasZ,u.hasM);break;default:i.neverReached(u)}return s}));return{geometryType:t,features:s,spatialReference:o,fields:e.fields?e.fields.map((function(e){return h.fromJSON(e)})):null,objectIdFieldName:e.objectIdFieldName,globalIdFieldName:e.globalIdFieldName,geohashFieldName:e.geohashFieldName,geometryProperties:e.geometryProperties,hasZ:e.hasZ,hasM:e.hasM,exceededTransferLimit:e.exceededTransferLimit,transform:null}},t.fromJSONGeometry=v,t.makeDehydratedPoint=m,t.isHydratedGeometry=_,t.isHydratedPoint=g,t.isHydratedGraphic=b,t.hydrateGraphic=function(e,t){if(!e)return null;if(b(e))return e;var r=new n({layer:t,sourceLayer:t});return r.visible=e.visible,r.symbol=a.clone(e.symbol),r.attributes=a.clone(e.attributes),r.geometry=x(e.geometry),r},t.hydrateGeometry=x,t.clonePoint=function(e,t){if(!e)return null;var r;if(g(e)){if(null==t)return e.clone();if(g(t))return t.copy(e)}return null!=t?((r=t).x=e.x,r.y=e.y,r.spatialReference=e.spatialReference,e.hasZ?(r.z=e.z,r.hasZ=e.hasZ):(r.z=null,r.hasZ=!1),e.hasM?(r.m=e.m,r.hasM=!0):(r.m=null,r.hasM=!1)):(r=m(e.x,e.y,e.z,e.spatialReference),e.hasM&&(r.m=e.m,r.hasM=!0)),r};var S=o("esri-text-decoder")?function(e){return 32+e.length}:function(e){return 32*e.length};function w(e){if(!e)return 0;var t=32;for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];switch(typeof n){case"string":t+=S(n);break;default:case"number":t+=16}}return t}function I(e){if(s.isNone(e))return 0;var t=32;switch(e.type){case"point":t+=42;break;case"polyline":case"polygon":for(var r=0,n=2+(e.hasZ?1:0)+(e.hasM?1:0),o="polyline"===e.type?e.paths:e.rings,a=0,l=o;a<l.length;a++)r+=l[a].length;t+=8*r*n+64,t+=128*r,t+=34,t+=32*(o.length+1);break;case"multipoint":var c=2+(e.hasZ?1:0)+(e.hasM?1:0),p=e.points.length;t+=8*p*c+64,t+=128*p,t+=34,t+=32;break;case"extent":t+=98,e.hasM&&(t+=32),e.hasZ&&(t+=32);break;case"mesh":t+=u.estimateSize(e.vertexAttributes.position),t+=u.estimateSize(e.vertexAttributes.normal),t+=u.estimateSize(e.vertexAttributes.uv),t+=u.estimateSize(e.vertexAttributes.tangent);break;default:i.neverReached(e)}return t}function T(e){return function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];if(0!==n.length)return M(n)}return!1}(e)?e.map((function(e){return E(e)})):e}function E(e){return e.map((function(e){return u.toArray(e)}))}function M(e){return e.length&&(u.isFloat32Array(e[0])||u.isFloat64Array(e[0]))}function P(e,t){switch(c.empty(t),"mesh"===e.type&&(e=e.extent),e.type){case"point":t[0]=t[3]=e.x,t[1]=t[4]=e.y,e.hasZ&&(t[2]=t[5]=e.z);break;case"polyline":for(var r=0;r<e.paths.length;r++)c.expandWithNestedArray(t,e.paths[r],e.hasZ);break;case"polygon":for(r=0;r<e.rings.length;r++)c.expandWithNestedArray(t,e.rings[r],e.hasZ);break;case"multipoint":c.expandWithNestedArray(t,e.points,e.hasZ);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[3]=e.xmax,t[4]=e.ymax,null!=e.zmin&&(t[2]=e.zmin),null!=e.zmax&&(t[5]=e.zmax);break;default:i.neverReached(e)}}function F(e,t){switch(p.empty(t),"mesh"===e.type&&(e=e.extent),e.type){case"point":t[0]=t[2]=e.x,t[1]=t[3]=e.y;break;case"polyline":for(var r=0;r<e.paths.length;r++)p.expandWithNestedArray(t,e.paths[r]);break;case"polygon":for(r=0;r<e.rings.length;r++)p.expandWithNestedArray(t,e.rings[r]);break;case"multipoint":p.expandWithNestedArray(t,e.points);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax;break;default:i.neverReached(e)}}t.estimateAttributesObjectSize=w,t.estimateGeometryObjectSize=I,t.estimateSize=function(e){var t=32;return t+=w(e.attributes),(t+=3)+(8+I(e.geometry))},t.numVertices=function(e){if(s.isNone(e))return 0;switch(e.type){case"point":return 1;case"polyline":for(var t=0,r=0,n=e.paths;r<n.length;r++)t+=n[r].length;return t;case"polygon":t=0;for(var o=0,a=e.rings;o<a.length;o++)t+=a[o].length;return t;case"multipoint":return e.points.length;case"extent":return 2;case"mesh":var u=e.vertexAttributes&&e.vertexAttributes.position;return u?u.length/3:0;default:return void i.neverReached(e)}},t.hasVertices=function(e){if(!e)return!1;switch(e.type){case"extent":case"point":return!0;case"polyline":for(var t=0,r=e.paths;t<r.length;t++)if(r[t].length>0)return!0;return!1;case"polygon":for(var n=0,o=e.rings;n<o.length;n++)if(o[n].length>0)return!0;return!1;case"multipoint":return e.points.length>0;case"mesh":return e.vertexAttributes&&e.vertexAttributes.position&&e.vertexAttributes.position.length>0;default:return void i.neverReached(e)}},t.computeAABB=P,t.expandAABB=function(e,t){P(e,O),c.expand(t,O)},t.computeAABR=F,t.expandAABR=function(e,t){F(e,R),p.expand(t,R)},t.getObjectId=function(e,t){return null!=e.objectId?e.objectId:e.attributes&&t?e.attributes[t]:null};var O=c.create(),R=p.create()}.apply(null,n))||(e.exports=i)},ZooB:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("rg9i"),r("LxLY"),r("r7jh"),r("qMld"),r("ULaq"),r("8uEs"),r("WRgd"),r("lRq4"),r("hBh5"),r("Lzvl"),r("nrlZ"),r("Ytki"),r("Q2Em"),r("4/qq"),r("d81A"),r("V1i6"),r("/61J"),r("zDti"),r("I90O"),r("tZaU")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,p,d,f,h,y,v,m,_,g,b,x,S,w){Object.defineProperty(t,"__esModule",{value:!0});t.Feature=function(e,t,r,n,i){void 0===t&&(t=null),this.attributes=e,this.geometry=r,this.centroid=n,this.filterFlags=i,this.groupId=-1,this.localId=t};var I=new Set,T=new a.MemCacheStorage(2e6),E=0,M=function(){function e(e){var t=this;this.capabilities={query:m.queryCapabilities},this.geometryType=e.geometryType,this.hasM=e.hasM,this.hasZ=e.hasZ,this.objectIdField=e.objectIdField,this.spatialReference=e.spatialReference,this.definitionExpression=e.definitionExpression,this.featureStore=e.featureStore,this._changeHandle=this.featureStore.events.on("changed",(function(){return t.clearCache()})),this.timeInfo=e.timeInfo,e.cacheSpatialQueries&&(this._geometryQueryCache=new a.MemCache(E+++"$$",T)),this.fieldsIndex=new S(e.fields),e.scheduler&&e.task&&(this._frameQueue=new w.default,this._frameTask=e.scheduler.registerTask(e.task,(function(e){return t._update(e)}),(function(){return t._frameQueue.length>0})))}return e.prototype.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=null),this.clearCache(),this._geometryQueryCache&&this._geometryQueryCache.destroy(),this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null),this.fieldsIndex.destroy()},Object.defineProperty(e.prototype,"featureAdapter",{get:function(){return this.featureStore.featureAdapter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullExtent",{get:function(){var e=this.featureStore.fullBounds;return e?{xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:x.cleanFromGeometryEngine(this.spatialReference)}:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeExtent",{get:function(){return this.timeInfo?(this._timeExtent||(this._timeExtent=b.getTimeExtent(this.timeInfo,this.featureStore)),this._timeExtent):null},enumerable:!0,configurable:!0}),e.prototype.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear(),this._allItems=null,this._timeExtent=null},e.prototype.executeQuery=function(e,t){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){var t,n,o,a=this;return r.__generator(this,(function(r){switch(r.label){case 0:t=i.clone(e),r.label=1;case 1:return r.trys.push([1,8,,9]),[4,this._schedule((function(){return x.normalizeQuery(t,a.definitionExpression,a.spatialReference)}))];case 2:return t=r.sent(),[4,this._reschedule((function(){return a._checkQuerySupport(t)}))];case 3:return t=r.sent(),[4,this._reschedule((function(){return a._executeGeometryQuery(t)}))];case 4:return n=r.sent(),[4,this._reschedule((function(){return n.executeObjectIdsQuery(t)}))];case 5:return n=r.sent(),[4,this._reschedule((function(){return n.executeTimeQuery(t)}))];case 6:return n=r.sent(),[4,this._reschedule((function(){return n.executeAttributesQuery(t)}))];case 7:return n=r.sent(),[3,9];case 8:if((o=r.sent())!==x.QUERY_ENGINE_EMPTY_RESULT)throw o;return n=new _.default([],null,this),[3,9];case 9:return[2,n.createQueryResponse(t)]}}))}))},e.prototype.executeQueryForCount=function(e,t){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){var t,n,o,a=this;return r.__generator(this,(function(r){switch(r.label){case 0:(t=i.clone(e)).returnGeometry=!1,t.returnCentroid=!1,t.outSR=null,r.label=1;case 1:return r.trys.push([1,8,,9]),[4,this._schedule((function(){return x.normalizeQuery(t,a.definitionExpression,a.spatialReference)}))];case 2:return t=r.sent(),[4,this._reschedule((function(){return a._checkQuerySupport(t)}))];case 3:return t=r.sent(),[4,this._reschedule((function(){return a._executeGeometryQuery(t)}))];case 4:return n=r.sent(),[4,this._reschedule((function(){return n.executeObjectIdsQuery(t)}))];case 5:return n=r.sent(),[4,this._reschedule((function(){return n.executeTimeQuery(t)}))];case 6:return n=r.sent(),[4,this._reschedule((function(){return n.executeAttributesQuery(t)}))];case 7:return[2,(n=r.sent()).size];case 8:if((o=r.sent())!==x.QUERY_ENGINE_EMPTY_RESULT)throw o;return[2,0];case 9:return[2]}}))}))},e.prototype.executeQueryForExtent=function(e,t){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){var t,n,o,a,s,u,p,d,f=this;return r.__generator(this,(function(r){switch(r.label){case 0:t=i.clone(e),o=t.outSR,r.label=1;case 1:return r.trys.push([1,8,,9]),[4,this._schedule((function(){return x.normalizeQuery(t,f.definitionExpression,f.spatialReference)}))];case 2:return t=r.sent(),[4,this._reschedule((function(){return f._checkQuerySupport(t)}))];case 3:return(t=r.sent()).returnGeometry=!0,t.returnCentroid=!1,t.outSR=null,[4,this._reschedule((function(){return f._executeGeometryQuery(t)}))];case 4:return n=r.sent(),[4,this._reschedule((function(){return n.executeObjectIdsQuery(t)}))];case 5:return n=r.sent(),[4,this._reschedule((function(){return n.executeTimeQuery(t)}))];case 6:return n=r.sent(),[4,this._reschedule((function(){return n.executeAttributesQuery(t)}))];case 7:return n=r.sent(),(a=n.size)?(c.set(F,c.NEGATIVE_INFINITY),this.featureStore.forEachBounds(n.items,(function(e){return c.expand(F,e)}),P),s={xmin:F[0],ymin:F[1],xmax:F[3],ymax:F[4],spatialReference:x.cleanFromGeometryEngine(this.spatialReference)},this.hasZ&&isFinite(F[2])&&isFinite(F[5])&&(s.zmin=F[2],s.zmax=F[5]),(u=v.project(s,n.spatialReference,o)).spatialReference=x.cleanFromGeometryEngine(o||this.spatialReference),u.xmax-u.xmin==0&&(p=l.getMetersPerUnitForSR(u.spatialReference),u.xmin-=p,u.xmax+=p),u.ymax-u.ymin==0&&(p=l.getMetersPerUnitForSR(u.spatialReference),u.ymin-=p,u.ymax+=p),this.hasZ&&null!=u.zmin&&null!=u.zmax&&u.zmax-u.zmin==0&&(p=l.getMetersPerUnitForSR(u.spatialReference),u.zmin-=p,u.zmax+=p),[2,{count:a,extent:u}]):[2,{count:a,extent:null}];case 8:if((d=r.sent())===x.QUERY_ENGINE_EMPTY_RESULT)return[2,{count:0,extent:null}];throw d;case 9:return[2]}}))}))},e.prototype.executeQueryForIds=function(e,t){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){return[2,this.executeQueryForIdSet(e,t).then((function(e){return u.valuesOfSet(e)}))]}))}))},e.prototype.executeQueryForIdSet=function(e,t){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){var t,n,o,a,s,u=this;return r.__generator(this,(function(r){switch(r.label){case 0:(t=i.clone(e)).returnGeometry=!1,t.returnCentroid=!1,t.outSR=null,r.label=1;case 1:return r.trys.push([1,9,,10]),[4,this._schedule((function(){return x.normalizeQuery(t,u.definitionExpression,u.spatialReference)}))];case 2:return t=r.sent(),[4,this._reschedule((function(){return u._checkQuerySupport(t)}))];case 3:return t=r.sent(),[4,this._reschedule((function(){return u._executeGeometryQuery(t)}))];case 4:return n=r.sent(),[4,this._reschedule((function(){return n.executeObjectIdsQuery(t)}))];case 5:return n=r.sent(),[4,this._reschedule((function(){return n.executeTimeQuery(t)}))];case 6:return n=r.sent(),[4,this._reschedule((function(){return n.executeAttributesQuery(t)}))];case 7:return n=r.sent(),o=n.items,a=new Set,[4,this._reschedule((function(){for(var e=0,t=o;e<t.length;e++){var r=t[e];a.add(n.featureAdapter.getObjectId(r))}}))];case 8:return r.sent(),[2,a];case 9:if((s=r.sent())===x.QUERY_ENGINE_EMPTY_RESULT)return[2,new Set];throw s;case 10:return[2]}}))}))},e.prototype.executeQueryForLatestObservations=function(e,t){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){var t,o,a,s=this;return r.__generator(this,(function(r){switch(r.label){case 0:if(!this.timeInfo||!this.timeInfo.trackIdField)throw new n("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:e,timeInfo:this.timeInfo});t=i.clone(e),r.label=1;case 1:return r.trys.push([1,9,,10]),[4,this._schedule((function(){return x.normalizeQuery(t,s.definitionExpression,s.spatialReference)}))];case 2:return t=r.sent(),[4,this._reschedule((function(){return s._checkQuerySupport(t)}))];case 3:return t=r.sent(),[4,this._reschedule((function(){return s._executeGeometryQuery(t)}))];case 4:return o=r.sent(),[4,this._reschedule((function(){return o.executeObjectIdsQuery(t)}))];case 5:return o=r.sent(),[4,this._reschedule((function(){return o.executeTimeQuery(t)}))];case 6:return o=r.sent(),[4,this._reschedule((function(){return o.executeAttributesQuery(t)}))];case 7:return o=r.sent(),[4,this._reschedule((function(){return o.filterLatest()}))];case 8:return o=r.sent(),[3,10];case 9:if((a=r.sent())!==x.QUERY_ENGINE_EMPTY_RESULT)throw a;return o=new _.default([],null,this),[3,10];case 10:return[2,o.createQueryResponse(t)]}}))}))},e.prototype._schedule=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return this._frameQueue?[2,this._frameQueue.push(e)]:[2,e()]}))}))},e.prototype._reschedule=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return this._frameQueue?[2,this._frameQueue.unshift(e)]:[2,e()]}))}))},e.prototype._update=function(e){for(this._budget=e;!e.done&&this._frameQueue&&this._frameQueue.process();)e.madeProgress();this._budget=null},e.prototype._getAll=function(){if(!this._allItems){var e=[];this.featureStore.forEach((function(t){return e.push(t)})),this._allItems=new _.default(e,null,this)}return this._allItems},e.prototype._executeGeometryQuery=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,a,s,u,l,c,p,d,f,y,v,m,b,x,S,w,I,T=this;return r.__generator(this,(function(E){switch(E.label){case 0:if(t=e.geometry,n=e.outSR,i=e.spatialRel,a=h.isValid(n)&&!h.equals(this.spatialReference,n),(s=this._geometryQueryCache?a?JSON.stringify({geometry:t,spatialRelationship:i,outSpatialReference:n}):JSON.stringify({geometry:t,spatialRelationship:i}):null)&&(u=this._geometryQueryCache.get(s),!o.isUndefined(u)))return[2,u];if(l=function(t){return r.__awaiter(T,void 0,void 0,(function(){var i;return r.__generator(this,(function(r){switch(r.label){case 0:return a&&(e.returnGeometry||e.returnCentroid)?[4,t.project(n)]:[3,2];case 1:return i=r.sent(),s&&this._geometryQueryCache.put(s,i,i.size||1),[2,i];case 2:return s&&this._geometryQueryCache.put(s,t,t.size||1),[2,t]}}))}))},!t)return[2,l(this._getAll())];if(c=this.featureAdapter,"esriSpatialRelDisjoint"!==i)return[3,3];if(!(p=this._searchFeatures(this._getQueryBBoxes(t))).length)return[2,l(this._getAll())];for(y=new Set,v=0,m=p;v<m.length;v++)b=m[v],y.add(c.getObjectId(b));return[4,this._reschedule((function(){var e=0;d=new Array(y.size),T.featureStore.forEach((function(t){return d[e++]=t})),f=y}))];case 1:return E.sent(),[4,this._reschedule((function(){return r.__awaiter(T,void 0,void 0,(function(){var e,n,o;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,g.getSpatialQueryOperator(i,t,this.geometryType,this.hasZ,this.hasM)];case 1:return e=r.sent(),n=function(t){return!f.has(c.getObjectId(t))||e(c.getGeometry(t))},o=_.default.bind,[4,this._runSpatialFilter(d,n)];case 2:return[2,new(o.apply(_.default,[void 0,r.sent(),t,this]))]}}))}))}))];case 2:return S=E.sent(),[2,l(S)];case 3:return(x=this._searchFeatures(this._getQueryBBoxes(t))).length?this._canExecuteSoloPass(t,e)?[2,l(new _.default(x,t,this))]:[4,g.getSpatialQueryOperator(i,t,this.geometryType,this.hasZ,this.hasM)]:(S=new _.default([],t,this),s&&this._geometryQueryCache.put(s,S,S.size||1),[2,S]);case 4:return w=E.sent(),[4,this._runSpatialFilter(x,(function(e){return w(c.getGeometry(e))}))];case 5:return I=E.sent(),[2,l(new _.default(I,t,this))]}}))}))},e.prototype._runSpatialFilter=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a=this;return r.__generator(this,(function(s){return t?this._budget?(n=0,i=new Array,o=function(){return r.__awaiter(a,void 0,void 0,(function(){var a;return r.__generator(this,(function(r){switch(r.label){case 0:return n<e.length?(a=e[n],t(a)&&i.push(a),this._budget.done?[4,this._reschedule((function(){return o()}))]:[3,2]):[3,3];case 1:r.sent(),r.label=2;case 2:return++n,[3,0];case 3:return[2]}}))}))},[2,this._reschedule((function(){return o()})).then((function(){return i}))]):[2,e.filter((function(e){return t(e)}))]:[2,e]}))}))},e.prototype._canExecuteSoloPass=function(e,t){var r=this.geometryType,n=t.spatialRel;return g.canQueryWithRBush(e)&&("esriSpatialRelEnvelopeIntersects"===n||"esriGeometryPoint"===r&&("esriSpatialRelIntersects"===n||"esriSpatialRelContains"===n||"esriSpatialRelWithin"===n))},e.prototype._getQueryBBoxes=function(e){if(g.canQueryWithRBush(e)){if(f.isExtent(e))return[p.fromValues(e.xmin,e.ymin,e.xmax,e.ymax)];if(f.isPolygon(e))return e.rings.map((function(e){return p.fromValues(Math.min(e[0][0],e[2][0]),Math.min(e[0][1],e[2][1]),Math.max(e[0][0],e[2][0]),Math.max(e[0][1],e[2][1]))}))}return[d.getBoundsXY(p.create(),e)]},e.prototype._searchFeatures=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this.featureStore.forEachInBounds(n,(function(e){I.add(e)}))}var i=new Array(I.size),o=0;return I.forEach((function(e){return i[o++]=e})),I.clear(),i},e.prototype._checkQuerySupport=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){if(e.distance<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text)throw new n("feature-store:unsupported-query","Unsupported query options",{query:e});return[2,s.all([this._checkAttributesQuerySupport(e),this._checkStatisticsQuerySupport(e),g.checkSpatialQuerySupport(e,this.geometryType,this.spatialReference),v.checkProjectionSupport(this.spatialReference,e.outSR)]).then((function(){return e}))]}))}))},e.prototype._checkAttributesQuerySupport=function(e){var t=e.outFields,r=e.orderByFields,i=e.returnDistinctValues,o=e.outStatistics,a=o?o.map((function(e){return e.outStatisticFieldName&&e.outStatisticFieldName.toLowerCase()})):[];if(r&&r.length>0){var s=r.map((function(e){var t=e.toLowerCase();return t.indexOf(" asc")>-1?t.split(" asc")[0]:t.indexOf(" desc")>-1?t.split(" desc")[0]:e})).filter((function(e){return-1===a.indexOf(e)}));y.validateFields(this.fieldsIndex,s,"orderByFields contains missing fields")}if(t&&t.length>0)y.validateFields(this.fieldsIndex,t,"outFields contains missing fields");else if(i)throw new n("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:e});y.validateWhere(this.fieldsIndex,e.where)},e.prototype._checkStatisticsQuerySupport=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,i,o,a,s,u,l,c,p,d,f;return r.__generator(this,(function(r){if(t=e.outStatistics,i=e.groupByFieldsForStatistics,o=e.having,a=i&&i.length,s=t&&t.length,o){if(!a||!s)throw new n("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:e});y.validateHaving(this.fieldsIndex,o,t)}if(s){if(!function(e){return e.every((function(e){return"exceedslimit"!==e.statisticType}))}(t))return[2];for(u=t.map((function(e){return e.onStatisticField})),y.validateFields(this.fieldsIndex,u,"onStatisticFields contains missing fields"),a&&y.validateFields(this.fieldsIndex,i,"groupByFieldsForStatistics contains missing fields"),l=0,c=t;l<c.length;l++)if(p=c[l],d=p.onStatisticField,"percentile_disc"!==(f=p.statisticType)&&"percentile_cont"!==f||!("statisticParameters"in p)){if("count"!==f&&d&&y.hasInvalidFieldType(d,this.fieldsIndex))throw new n("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:p,query:e})}else if(!p.statisticParameters)throw new n("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:p,query:e})}return[2]}))}))},e}();t.default=M;var P=c.create(),F=c.create()}.apply(null,n))||(e.exports=i)},Zvuv:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ifLZ"),r("OXG3"),r("zp6E"),r("+AWJ"),r("y4WC"),r("ma1f"),r("eIBl"),r("H1tY"),r("ImIS"),r("qsST"),r("LxLY"),r("EUqE"),r("TTKK"),r("qMld"),r("jfWY"),r("Vx27"),r("JZak"),r("N7S/"),r("MFVu"),r("Z4y+"),r("0RER"),r("zqTD"),r("2fnV"),r("FEX1"),r("QJ8R"),r("WaJo"),r("OXmT"),r("c/mu"),r("8CIp"),r("EtsK"),r("U8ed"),r("aWt5"),r("Nskv"),r("fQaS"),r("Zb3b"),r("L0gI"),r("V+oH"),r("ZJpS"),r("I90O"),r("k7g7"),r("5WBt"),r("UN5d"),r("BZGX"),r("PSUj"),r("N6pD"),r("hz/Y"),r("PhdM"),r("begh"),r("HqJa"),r("TsGx"),r("w1v0"),r("IpeC"),r("531e"),r("2Kdy")],void 0===(i=function(e,t,n,i,o,a,s,u,l,c,p,d,f,h,y,v,m,_,g,b,x,S,w,I,T,E,M,P,F,O,R,N,j,A,C,k,G,D,L,z,q,B,V,Q,U,Z,J,Y,W,H,X,K,$,ee,te,re){var ne=p("featurelayer-advanced-symbols")?"?returnAdvancedSymbols=true":"",ie=new d.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),oe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},ae="FeatureLayer",se=f.getLogger("esri.layers.FeatureLayer");function ue(e){return e&&e instanceof u}function le(e,t,r){return!!(e&&e.hasOwnProperty(t)?e[t]:r)}function ce(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}var pe=q.defineFieldProperties();return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=e.apply(this,t)||this;return n._handles=new c,n.capabilities=null,n.copyright=null,n.displayField=null,n.definitionExpression=null,n.dynamicDataSource=null,n.editFieldsInfo=null,n.editingEnabled=!0,n.editingInfo=null,n.elevationInfo=null,n.featureReduction=null,n.fields=null,n.formTemplate=null,n.fullExtent=null,n.gdbVersion=null,n.geometryProperties=null,n.geometryType=null,n.hasM=void 0,n.hasZ=void 0,n.heightModelInfo=null,n.historicMoment=null,n.isTable=!1,n.labelsVisible=!0,n.labelingInfo=null,n.layerId=void 0,n.legendEnabled=!0,n.minScale=0,n.maxScale=0,n.globalIdField=null,n.objectIdField=null,n.outFields=null,n.path=null,n.popupEnabled=!0,n.popupTemplate=null,n.relationships=null,n.sourceJSON=null,n.returnM=void 0,n.returnZ=void 0,n.screenSizePerspectiveEnabled=!0,n.serviceDefinitionExpression=null,n.spatialReference=w.WGS84,n.templates=null,n.timeInfo=null,n.title=null,n.sublayerTitleMode="item-title",n.trackIdField=null,n.type="feature",n.typeIdField=null,n.types=null,n.indexes=new(u.ofType(A.FeatureIndex)),n.userIsAdmin=!1,n.version=void 0,n.visible=!0,n}return n.__extends(t,e),t.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)},t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?n.__assign({url:e},t):e},t.prototype.load=function(e){var t=this,r=h.isSome(e)?e.signal:null;if(!(this.portalItem&&this.portalItem.loaded&&this.source)){var i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch((function(e){return e})).then((function(){return n.__awaiter(t,void 0,void 0,(function(){var e,t;return n.__generator(this,(function(n){switch(n.label){case 0:return this.url&&null==this.layerId&&/FeatureServer|MapServer\/*$/i.test(this.url)?[4,this._fetchFirstLayerId(r)]:[3,2];case 1:null!=(e=n.sent())&&(this.layerId=e),n.label=2;case 2:if(!this.url&&!this._hasMemorySource())throw new l("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return t=this._initLayerProperties,[4,this.createGraphicsSource(r)];case 3:return[2,t.apply(this,[n.sent()])]}}))}))}));return this.addResolvingPromise(i),m.resolve(this)}this.addResolvingPromise(this.createGraphicsSource(r).then((function(e){return t._initLayerProperties(e)})))},t.prototype.readCapabilities=function(e,t){return t=t.layerDefinition||t,{attachment:this._readAttachmentCapabilities(t.attachmentProperties),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),editing:this._readEditingCapabilities(t)}},Object.defineProperty(t.prototype,"createQueryVersion",{get:function(){return this.definitionExpression,this.timeExtent,this.timeOffset,this.geometryType,this.gdbVersion,this.historicMoment,this.returnZ,this.capabilities,this.returnM,(this._get("createQueryVersion")||0)+1},enumerable:!0,configurable:!0}),t.prototype.readEditingEnabled=function(e,t){return!t.layerDefinition||"Query"!==t.layerDefinition.capabilities},t.prototype.writeEditingEnabled=function(e,t){e||v.setDeepValue("layerDefinition.capabilities","Query",t)},t.prototype.readEditingInfo=function(e,t){var r=t.editingInfo;return r?{lastEditDate:null!=r.lastEditDate?new Date(r.lastEditDate):null}:null},t.prototype.readFeatureReduction=function(e,t){return D.read(e,t)},t.prototype.writeWebSceneFeatureReduction=function(e,t,r,n){D.writeTarget(e,t,"layerDefinition.featureReduction",n)},Object.defineProperty(t.prototype,"fieldsIndex",{get:function(){return new B(this.fields||[])},enumerable:!0,configurable:!0}),t.prototype.readIsTable=function(e,t){return"Table"===(t=t&&t.layerDefinition||t).type},Object.defineProperty(t.prototype,"hasService",{get:function(){return!this._hasMemorySource()},enumerable:!0,configurable:!0}),t.prototype.readMinScale=function(e,t){return t.effectiveMinScale||e||0},t.prototype.readMaxScale=function(e,t){return t.effectiveMaxScale||e||0},t.prototype.readGlobalIdFieldFromService=function(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields)for(var r=0,n=t.fields;r<n.length;r++){var i=n[r];if("esriFieldTypeGlobalID"===i.type)return i.name}},t.prototype.readObjectIdFieldFromService=function(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields)for(var r=0,n=t.fields;r<n.length;r++){var i=n[r];if("esriFieldTypeOID"===i.type)return i.name}},Object.defineProperty(t.prototype,"parsedUrl",{get:function(){var e=this.url?_.urlToObject(this.url):null;if(null!=e)if(null!=this.layerId)e.path=_.join(e.path,this.layerId.toString())+ne;else if(null!=this.dynamicDataSource){var t={source:Z.sourceToJSON(this.dynamicDataSource)};e.query={layer:JSON.stringify(t)}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultPopupTemplate",{get:function(){return this.createPopupTemplate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{set:function(e){V.fixRendererFields(e,this.fields),this._set("renderer",e)},enumerable:!0,configurable:!0}),t.prototype.readRenderer=function(e,t,r){var n,i,a=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(a)(n=W.read(a,t,r)||void 0)||se.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r});else if(t.defaultSymbol)K.read(t.defaultSymbol,t,r),t.types&&t.types.length?(n=new o.UniqueValueRenderer({defaultSymbol:i,field:t.typeIdField}),t.types.forEach((function(e){a.addUniqueValueInfo(e.id,K.read(e.symbol,e,r))}))):n=new o.SimpleRenderer({symbol:i});else if("Table"!==t.type){switch(t.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":i=new s.SimpleMarkerSymbol;break;case"esriGeometryPolyline":i=new s.SimpleLineSymbol;break;case"esriGeometryPolygon":i=new s.SimpleFillSymbol}n=i&&new o.SimpleRenderer({symbol:i})}return n},t.prototype.writeRenderer=function(e,t,r,n){W.writeTarget(e,t,r,n)},t.prototype.writeWebSceneRenderer=function(e,t,r,n){W.writeTarget(e,t,"layerDefinition.drawingInfo.renderer",n)},Object.defineProperty(t.prototype,"source",{set:function(e){var t=this._get("source");t!==e&&(ue(t)&&this._resetMemorySource(t),ue(e)&&this._initMemorySource(e),this._set("source",e))},enumerable:!0,configurable:!0}),t.prototype.castSource=function(e){return e?Array.isArray(e)||e instanceof u?new T.default({layer:this,items:e}):e:null},t.prototype.readSource=function(e,t){var r=ee.fromJSON(t.featureSet);return new T.default({layer:this,items:r&&r.features||[]})},t.prototype.readServiceDefinitionExpression=function(e,t){return t.definitionQuery||t.definitionExpression},t.prototype.readTemplates=function(e,t){var r=t.editFieldsInfo,n=r&&r.creatorField,i=r&&r.editorField;return e=e&&e.map((function(e){return L.fromJSON(e)})),this._fixTemplates(e,n),this._fixTemplates(e,i),e},t.prototype.readTitle=function(e,t){var r=t.layerDefinition&&t.layerDefinition.name||t.name,n=t.title||t.layerDefinition&&t.layerDefinition.title;if(r){var i=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?N.titleFromUrlAndName(this.url,r):r;var o=r||this.url&&N.parse(this.url).title;if(!o)return;return"item-title-and-service-name"===this.sublayerTitleMode&&i&&i!==o&&(o=i+" - "+o),N.cleanTitle(o)}if("item-title"===this.sublayerTitleMode&&n)return n},t.prototype.readTitleFromWebMap=function(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name},t.prototype.readTypeIdField=function(e,t){var r=(t=t.layerDefinition||t).typeIdField;if(r){var n=V.getField(t.fields,r);n&&(r=n.name)}return r},t.prototype.readTypes=function(e,t){var r=this;e=(t=t.layerDefinition||t).types;var n=t.editFieldsInfo,i=n&&n.creatorField,o=n&&n.editorField;return e&&e.map((function(e){return e=z.fromJSON(e),r._fixTemplates(e.templates,i),r._fixTemplates(e.templates,o),e}))},Object.defineProperty(t.prototype,"url",{set:function(e){var t=N.sanitizeUrlWithLayerId(this,e,se);this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)},enumerable:!0,configurable:!0}),t.prototype.writeUrl=function(e,t,r,n){N.writeUrlWithLayerId(this,e,null,t,n)},t.prototype.readVersion=function(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3},t.prototype.readVisible=function(e,t){return t.layerDefinition&&null!=t.layerDefinition.defaultVisibility?!!t.layerDefinition.defaultVisibility:null!=t.visibility?!!t.visibility:void 0},t.prototype.addAttachment=function(e,t){var r=this;return this.load().then((function(){return r._checkAttachmentSupport(e)})).then((function(){if(!("addAttachment"in r.source))throw new l(ae,"Layer source does not support addAttachment capability");return r.source.addAttachment(e,t)}))},t.prototype.updateAttachment=function(e,t,r){var n=this;return this.load().then((function(){return n._checkAttachmentSupport(e)})).then((function(){if(!("updateAttachment"in n.source))throw new l(ae,"Layer source does not support updateAttachment capability");return n.source.updateAttachment(e,t,r)}))},t.prototype.applyEdits=function(e,t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(e,t){r.e(72).then(function(){var t=[r("OVIK")];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))];case 1:return[2,n.sent().applyEdits(this,e,t)]}}))}))},t.prototype.on=function(t,r){return e.prototype.on.call(this,t,r)},t.prototype.createPopupTemplate=function(e){return X.createPopupTemplate(this,e)},t.prototype.createGraphicsSource=function(e){return n.__awaiter(this,void 0,void 0,(function(){var t,i;return n.__generator(this,(function(n){switch(n.label){case 0:return this._hasMemorySource()?(this.emit("graphics-source-create",{graphicsSource:this.source}),[2,this.source.load({signal:e})]):[4,new Promise((function(e,t){Promise.all([r.e(7),r.e(10),r.e(101)]).then(function(){var t=[r("FN+y")];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))];case 1:return t=n.sent(),m.throwIfAborted(e),[4,new t.default({layer:this}).load({signal:e})];case 2:return i=n.sent(),this.emit("graphics-source-create",{graphicsSource:i}),[2,i]}}))}))},t.prototype.createQuery=function(){var e=new te,t=this.get("capabilities.data");e.gdbVersion=this.gdbVersion,e.historicMoment=this.historicMoment,e.returnGeometry=!0,t&&(t.supportsZ&&null!=this.returnZ&&(e.returnZ=this.returnZ),t.supportsM&&null!=this.returnM&&(e.returnM=this.returnM)),e.outFields=["*"],e.where=this.definitionExpression||"1=1";var r=this.timeOffset,n=this.timeExtent;return e.timeExtent=null!=r&&null!=n?n.offset(-r.value,r.unit):n||null,e.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,e},t.prototype.deleteAttachments=function(e,t){var r=this;return this.load().then((function(){return r._checkAttachmentSupport(e)})).then((function(){if(!("deleteAttachments"in r.source))throw new l(ae,"Layer source does not support deleteAttachments capability");return r.source.deleteAttachments(e,t)}))},t.prototype.getFeatureType=function(e){var t=this.typeIdField,r=this.types;if(!t||!e)return null;var n=e.attributes?e.attributes[t]:void 0;if(null==n)return null;var i=null;return r.some((function(e){var t=e.id;return null!=t&&(t.toString()===n.toString()&&(i=e),!!i)})),i},t.prototype.getFieldDomain=function(e,t){var r=t&&t.feature,n=this.getFeatureType(r);if(n){var i=n.domains&&n.domains[e];if(i&&"inherited"!==i.type)return i}return this._getLayerDomain(e)},t.prototype.getField=function(e){return this.fieldsIndex.get(e)},t.prototype.queryAttachments=function(e,t){var r=this;return e=$.from(e),this.load().then((function(){if(!r.get("capabilities.data.supportsAttachment"))throw new l(ae,"this layer doesn't support attachments");var t=e.attachmentTypes,n=e.objectIds,i=e.globalIds,o=e.num,a=e.size,s=e.start,u=e.where;if(!r.get("capabilities.operations.supportsQueryAttachments")){var c=n&&n.length>1,p=t&&t.length,d=i&&i.length,f=a&&a.length;if(c||p||d||f||o||s||u)throw new l(ae,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(n&&n.length||u))throw new l(ae,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in r.source))throw new l(ae,"Layer source does not support queryAttachments capability",e);return r.source.queryAttachments(e)}))},t.prototype.queryFeatures=function(e,t){var r=this;return this.load().then((function(){return r.source.queryFeatures(te.from(e)||r.createQuery(),t)})).then((function(e){if(e&&e.features)for(var t=0,n=e.features;t<n.length;t++){var i=n[t];i.layer=i.sourceLayer=r}return e}))},t.prototype.queryObjectIds=function(e,t){var r=this;return this.load().then((function(){if(r.source.queryObjectIds)return r.source.queryObjectIds(te.from(e)||r.createQuery(),t);throw new l(ae,"Layer source does not support queryObjectIds capability")}))},t.prototype.queryFeatureCount=function(e,t){var r=this;return this.load().then((function(){if(r.source.queryFeatureCount)return r.source.queryFeatureCount(te.from(e)||r.createQuery(),t);throw new l(ae,"Layer source does not support queryFeatureCount capability")}))},t.prototype.queryExtent=function(e,t){var r=this;return this.load().then((function(){if(r.source.queryExtent)return r.source.queryExtent(te.from(e)||r.createQuery(),t);throw new l(ae,"Layer source does not support queryExtent capability")}))},t.prototype.queryRelatedFeatures=function(e,t){var r=this;return this.load().then((function(){if("queryRelatedFeatures"in r.source)return r.source.queryRelatedFeatures(re.from(e),t);throw new l(ae,"Layer source does not support queryRelatedFeatures capability")}))},t.prototype.read=function(t,r){var n=t.featureCollection;if(n){var i=n.layers;i&&1===i.length&&(e.prototype.read.call(this,i[0],r),null!=n.showLegend&&e.prototype.read.call(this,{showLegend:n.showLegend},r))}e.prototype.read.call(this,t,r),r&&"service"===r.origin&&this.revert(["objectIdField","fields","timeInfo"],"service")},t.prototype.write=function(t,r){return r&&("web-scene"===r.origin||"web-map"===r.origin)&&r.messages&&this.isTable?(r.messages.push(new l("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' using a Table source cannot written to web scenes and web maps",{layer:this})),null):e.prototype.write.call(this,t,r)},t.prototype._checkAttachmentSupport=function(e){var t=e.attributes,r=this.objectIdField;return this.get("capabilities.data.supportsAttachment")?e?t?t[r]?void 0:m.reject(new l(ae,"feature is missing the identifying attribute "+r)):m.reject(new l(ae,"'attributes' are required on a feature to query attachments")):m.reject(new l(ae,"A feature is required to add/delete/update attachments")):m.reject(new l(ae,"this layer doesn't support attachments"))},t.prototype._getLayerDomain=function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null},t.prototype._fetchFirstLayerId=function(e){return a(this.url,{query:{f:"json"},responseType:"json",signal:e}).then((function(e){var t=e.data;if(t)return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}))},t.prototype._initLayerProperties=function(e){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),V.fixRendererFields(this.renderer,this.fields),V.fixTimeInfoFields(this.timeInfo,this.fields),[2,H.loadStyleRenderer(this,{origin:"service"})]}))}))},t.prototype._verifyFields=function(){var e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField,this.isTable||this._hasMemorySource()||-1!==e.search(/\/FeatureServer\//i)||this.fields&&this.fields.some((function(e){return"geometry"===e.type}))},t.prototype._fixTemplates=function(e,t){e&&e.forEach((function(e){var r=e.prototype&&e.prototype.attributes;r&&t&&delete r[t]}))},t.prototype._verifySource=function(){if(this._hasMemorySource()){if(this.url)throw new l("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new l("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")},t.prototype._initMemorySource=function(e){var t=this;e.forEach((function(e){e.layer=t,e.sourceLayer=t})),this._handles.add([e.on("after-add",(function(e){e.item.layer=t,e.item.sourceLayer=t})),e.on("after-remove",(function(e){e.item.layer=null,e.item.sourceLayer=null}))],"fl-source")},t.prototype._resetMemorySource=function(e){e.forEach((function(e){e.layer=null,e.sourceLayer=null})),this._handles.remove("fl-source")},t.prototype._hasMemorySource=function(){return!(this.url||!this.source)},t.prototype._readAttachmentCapabilities=function(e){var t={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1};return e&&Array.isArray(e)&&e.forEach((function(e){var r=oe[e.name];r&&(t[r]=!!e.isEnabled)})),t},t.prototype._readDataCapabilities=function(e){return{isVersioned:le(e,"isDataVersioned",!1),supportsAttachment:le(e,"hasAttachments",!1),supportsM:le(e,"hasM",!1),supportsZ:le(e,"hasZ",!1)}},t.prototype._readMetadataCapabilities=function(e){return{supportsAdvancedFieldProperties:le(e,"supportsFieldDescriptionProperty",!1)}},t.prototype._readOperationsCapabilities=function(e,t){var r=e?e.toLowerCase().split(",").map((function(e){return e.trim()})):[],n=-1!==r.indexOf("editing"),i=n&&-1!==r.indexOf("create"),o=n&&-1!==r.indexOf("delete"),a=n&&-1!==r.indexOf("update");return n&&!(i||o||a)&&(i=o=a=!0),{supportsCalculate:le(t,"supportsCalculate",!1),supportsTruncate:le(t,"supportsTruncate",!1),supportsValidateSql:le(t,"supportsValidateSql",!1),supportsAdd:i,supportsDelete:o,supportsEditing:n,supportsQuery:-1!==r.indexOf("query"),supportsQueryAttachments:le(t.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:le(t,"supportsAttachmentsResizing",!1),supportsSync:-1!==r.indexOf("sync"),supportsUpdate:a,supportsExceedsLimitStatistics:le(t,"supportsExceedsLimitStatistics",!1)}},t.prototype._readQueryCapabilities=function(e){var t=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,n=e.archivingInfo,i=(e.supportedQueryFormats||"").split(",").reduce((function(e,t){var r=t.toLowerCase().trim();return r&&e.add(r),e}),new Set);return{supportsStatistics:le(t,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:le(t,"supportsPercentileStatistics",!1),supportsCentroid:le(t,"supportsReturningGeometryCentroid",!1),supportsDistance:le(t,"supportsQueryWithDistance",!1),supportsDistinct:le(t,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:le(t,"supportsReturningQueryExtent",!1),supportsGeometryProperties:le(t,"supportsReturningGeometryProperties",!1),supportsHavingClause:le(t,"supportsHavingClause",!1),supportsOrderBy:le(t,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:le(t,"supportsPagination",!1),supportsQuantization:le(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:le(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:le(e,"supportsReturningQueryGeometry",!1),supportsResultType:le(t,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:le(t,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:le(t,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:le(e,"useStandardizedQueries",!1),supportsQueryByOthers:le(r,"allowOthersToQuery",!0),supportsHistoricMoment:le(n,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:i.has("pbf"),supportsDisjointSpatialRelationship:le(t,"supportsDisjointSpatialRel",!1),supportsCacheHint:le(t,"supportsQueryWithCacheHint",!1),maxRecordCountFactor:ce(e,"maxRecordCountFactor",void 0),maxRecordCount:ce(e,"maxRecordCount",void 0),standardMaxRecordCount:ce(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:ce(e,"tileMaxRecordCount",void 0)}},t.prototype._readQueryRelatedCapabilities=function(e){var t=e.advancedQueryCapabilities,r=le(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:le(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r}},t.prototype._readEditingCapabilities=function(e){var t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:le(e,"allowGeometryUpdates",!0),supportsGlobalId:le(e,"supportsApplyEditsWithGlobalIds",!1),supportsRollbackOnFailure:le(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:le(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:le(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:le(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:le(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:le(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:le(t,"allowOthersToUpdate",!0)}},n.__decorate([g.property({readOnly:!0,json:{read:!1}})],t.prototype,"capabilities",void 0),n.__decorate([g.reader("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],t.prototype,"readCapabilities",null),n.__decorate([g.property({readOnly:!0,dependsOn:["definitionExpression","timeExtent","timeOffset","geometryType","gdbVersion","historicMoment","returnZ","capabilities","returnM"]})],t.prototype,"createQueryVersion",null),n.__decorate([g.property({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),n.__decorate([g.property({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),n.__decorate([g.property({type:String,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],t.prototype,"definitionExpression",void 0),n.__decorate([g.property({readOnly:!0,json:{read:K.read}})],t.prototype,"defaultSymbol",void 0),n.__decorate([g.property()],t.prototype,"dynamicDataSource",void 0),n.__decorate([g.property({readOnly:!0})],t.prototype,"editFieldsInfo",void 0),n.__decorate([g.property({type:Boolean})],t.prototype,"editingEnabled",void 0),n.__decorate([g.reader(["portal-item","web-map","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],t.prototype,"readEditingEnabled",null),n.__decorate([g.writer(["portal-item","web-map","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],t.prototype,"writeEditingEnabled",null),n.__decorate([g.property({readOnly:!0})],t.prototype,"editingInfo",void 0),n.__decorate([g.reader("editingInfo")],t.prototype,"readEditingInfo",null),n.__decorate([g.property(j.elevationInfo)],t.prototype,"elevationInfo",void 0),n.__decorate([g.property({types:{key:"type",base:C.default,typeMap:{selection:G,cluster:k}},json:{write:{target:"layerDefinition.featureReduction"}}})],t.prototype,"featureReduction",void 0),n.__decorate([g.reader("featureReduction",["layerDefinition.featureReduction"])],t.prototype,"readFeatureReduction",null),n.__decorate([g.writer("web-scene","featureReduction",{"layerDefinition.featureReduction":{types:D.webSceneFeatureReductionTypes}})],t.prototype,"writeWebSceneFeatureReduction",null),n.__decorate([g.property(n.__assign(n.__assign({},pe.fields),{json:{origins:{service:{read:!0}},read:{source:"layerDefinition.fields"}}}))],t.prototype,"fields",void 0),n.__decorate([g.property({readOnly:!0,dependsOn:["fields"]})],t.prototype,"fieldsIndex",null),n.__decorate([g.property({type:b,json:{read:{source:"formInfo"},write:{target:"formInfo"}}})],t.prototype,"formTemplate",void 0),n.__decorate([g.property({type:x,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],t.prototype,"fullExtent",void 0),n.__decorate([g.property()],t.prototype,"gdbVersion",void 0),n.__decorate([g.property({readOnly:!0})],t.prototype,"geometryProperties",void 0),n.__decorate([g.property({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:ie.read}},read:{source:"layerDefinition.geometryType",reader:ie.read}}})],t.prototype,"geometryType",void 0),n.__decorate([g.property({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],t.prototype,"hasM",void 0),n.__decorate([g.property({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],t.prototype,"hasZ",void 0),n.__decorate([g.property({readOnly:!0,type:S})],t.prototype,"heightModelInfo",void 0),n.__decorate([g.property({type:Date})],t.prototype,"historicMoment",void 0),n.__decorate([g.property({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],t.prototype,"id",void 0),n.__decorate([g.property({readOnly:!0})],t.prototype,"isTable",void 0),n.__decorate([g.reader("service","isTable",["type"]),g.reader("isTable",["layerDefinition.type"])],t.prototype,"readIsTable",null),n.__decorate([g.property({dependsOn:["loaded","url","source"],readOnly:!0})],t.prototype,"hasService",null),n.__decorate([g.property(j.labelsVisible)],t.prototype,"labelsVisible",void 0),n.__decorate([g.property({type:[Q],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:U.reader},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:U.reader},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],t.prototype,"labelingInfo",void 0),n.__decorate([g.property(j.opacityDrawingInfo)],t.prototype,"opacity",void 0),n.__decorate([g.property({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],t.prototype,"layerId",void 0),n.__decorate([g.property(j.legendEnabled)],t.prototype,"legendEnabled",void 0),n.__decorate([g.property({type:["show","hide"]})],t.prototype,"listMode",void 0),n.__decorate([g.property({type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}})],t.prototype,"minScale",void 0),n.__decorate([g.reader("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),n.__decorate([g.property({type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}})],t.prototype,"maxScale",void 0),n.__decorate([g.reader("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),n.__decorate([g.property({type:String})],t.prototype,"globalIdField",void 0),n.__decorate([g.reader("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),g.reader("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),n.__decorate([g.property({type:String})],t.prototype,"objectIdField",void 0),n.__decorate([g.reader("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),g.reader("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),n.__decorate([g.property({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],t.prototype,"operationalLayerType",void 0),n.__decorate([g.property(pe.outFields)],t.prototype,"outFields",void 0),n.__decorate([g.property({readOnly:!0,dependsOn:["layerId"]})],t.prototype,"parsedUrl",null),n.__decorate([g.property({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],t.prototype,"path",void 0),n.__decorate([g.property(j.popupEnabled)],t.prototype,"popupEnabled",void 0),n.__decorate([g.property({type:i,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],t.prototype,"popupTemplate",void 0),n.__decorate([g.property({readOnly:!0,dependsOn:["fields","title"]})],t.prototype,"defaultPopupTemplate",null),n.__decorate([g.property({type:[J],readOnly:!0})],t.prototype,"relationships",void 0),n.__decorate([g.property({types:o.rendererTypes,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],t.prototype,"renderer",null),n.__decorate([g.reader("service","renderer",["drawingInfo.renderer","defaultSymbol","type"]),g.reader("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol","layerDefinition.type"])],t.prototype,"readRenderer",null),n.__decorate([g.writer("renderer")],t.prototype,"writeRenderer",null),n.__decorate([g.writer("web-scene","renderer",{"layerDefinition.drawingInfo.renderer":{types:o.webSceneRendererTypes}})],t.prototype,"writeWebSceneRenderer",null),n.__decorate([g.property()],t.prototype,"sourceJSON",void 0),n.__decorate([g.property({type:Boolean})],t.prototype,"returnM",void 0),n.__decorate([g.property({type:Boolean})],t.prototype,"returnZ",void 0),n.__decorate([g.property(j.screenSizePerspectiveEnabled)],t.prototype,"screenSizePerspectiveEnabled",void 0),n.__decorate([g.property()],t.prototype,"source",null),n.__decorate([g.cast("source")],t.prototype,"castSource",null),n.__decorate([g.reader("portal-item","source",["featureSet"]),g.reader("web-map","source",["featureSet"])],t.prototype,"readSource",null),n.__decorate([g.property({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),n.__decorate([g.reader("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),n.__decorate([g.property({type:w,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],t.prototype,"spatialReference",void 0),n.__decorate([g.property({type:[L]})],t.prototype,"templates",void 0),n.__decorate([g.reader("templates",["editFieldsInfo","creatorField","editorField","templates"])],t.prototype,"readTemplates",null),n.__decorate([g.property({type:Y})],t.prototype,"timeInfo",void 0),n.__decorate([g.property()],t.prototype,"title",void 0),n.__decorate([g.reader("service","title",["name"]),g.reader("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],t.prototype,"readTitle",null),n.__decorate([g.reader("web-map","title",["layerDefinition.name","title"])],t.prototype,"readTitleFromWebMap",null),n.__decorate([g.property({type:String})],t.prototype,"sublayerTitleMode",void 0),n.__decorate([g.property({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),n.__decorate([g.property({json:{read:!1}})],t.prototype,"type",void 0),n.__decorate([g.property({type:String})],t.prototype,"typeIdField",void 0),n.__decorate([g.reader("service","typeIdField"),g.reader("typeIdField",["layerDefinition.typeIdField"])],t.prototype,"readTypeIdField",null),n.__decorate([g.property({type:[z]})],t.prototype,"types",void 0),n.__decorate([g.reader("service","types",["types"]),g.reader("types",["layerDefinition.types"])],t.prototype,"readTypes",null),n.__decorate([g.property({type:u.ofType(A.FeatureIndex),readOnly:!0})],t.prototype,"indexes",void 0),n.__decorate([g.property(j.url)],t.prototype,"url",null),n.__decorate([g.writer("url")],t.prototype,"writeUrl",null),n.__decorate([g.property({readOnly:!0})],t.prototype,"userIsAdmin",void 0),n.__decorate([g.property({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),n.__decorate([g.reader("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),n.__decorate([g.property({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],t.prototype,"visible",void 0),n.__decorate([g.reader("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],t.prototype,"readVisible",null),n.__decorate([g.subclass("esri.layers.FeatureLayer")],t)}(R.TemporalLayer(O.ScaleRangeLayer(F.RefreshableLayer(E.ArcGISService(M.OperationalLayer(P.PortalLayer(y.MultiOriginJSONMixin(I))))))))}.apply(null,n))||(e.exports=i)},aROD:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("BcWh"),r("7MDj"),r("Vx27")],void 0===(i=function(e,t,r,n,i,o){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.onFeature=function(e){this.emit("feature",e)},r.__decorate([o.subclass("esri.layers.graphics.sources.connections.StreamConnection")],t)}(n.EventedMixin(i.HandleOwner));t.default=a}.apply(null,n))||(e.exports=i)},aWt5:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ycL1"),r("Vx27")],void 0===(i=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=null,t}return r.__extends(t,e),r.__decorate([i.property({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],t.prototype,"type",void 0),r.__decorate([i.subclass("esri.layers.support.FeatureReduction")],t)}(n.JSONSupport);t.FeatureReduction=o,t.default=o}.apply(null,n))||(e.exports=i)},aXZa:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("1dvD"),r("f0Ez"),r("zF2V"),r("rQqI"),r("sBRY"),r("nbtx")],void 0===(i=function(e,t,r,n,i,o,a,s){Object.defineProperty(t,"__esModule",{value:!0});var u={base:i.Element,key:"type",typeMap:{attachment:n,field:o,group:a,relationship:s}},l={base:u.base,key:u.key,typeMap:{attachment:u.typeMap.attachment,field:u.typeMap.field,relationship:u.typeMap.relationship}};t.fromJSON=function(e,t){if(void 0===t&&(t=!0),!e)return null;var r=t?u.typeMap:l.typeMap;return e.filter((function(e){return r[e.type]})).map((function(e){return r[e.type].fromJSON(e)}))},t.toJSON=function(e,t){if(void 0===t&&(t=!0),!e)return null;var r=t?u.typeMap:l.typeMap;return e.filter((function(e){return r[e.type]})).map((function(e){return e.toJSON()}))},t.ensureType=function(e,t){return void 0===t&&(t=!0),e?e.map((function(e){return r.ensureOneOfType(t?u:l,e)})):null}}.apply(null,n))||(e.exports=i)},aiV9:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("Vx27"),r("5c1C")],void 0===(i=function(e,t,r,n,i){return function(e){function t(t){var r=e.call(this,t)||this;return r.maxLength=null,r.minLength=null,r.type=null,r}var i;return r.__extends(t,e),i=t,t.prototype.clone=function(){return new i({maxLength:this.maxLength,minLength:this.minLength,type:this.type})},r.__decorate([n.property({type:Number,json:{write:!0}})],t.prototype,"maxLength",void 0),r.__decorate([n.property({type:Number,json:{write:!0}})],t.prototype,"minLength",void 0),r.__decorate([n.property()],t.prototype,"type",void 0),i=r.__decorate([n.subclass("esri.form.elements.inputs.support.TextInput")],t)}(i)}.apply(null,n))||(e.exports=i)},"c/mu":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("9gfz"),r("kKuP"),r("Vx27"),r("N6pD"),r("k7g7"),r("ml7j")],void 0===(i=function(e,t,r,n,i,o,a,s,u){Object.defineProperty(t,"__esModule",{value:!0}),t.TemporalLayer=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeExtent=null,t.timeOffset=null,t.useViewTime=!0,t}return r.__extends(t,e),t.prototype.readOffset=function(e,t){var r=t.timeInfo.exportOptions;if(!r)return null;var n=r.timeOffset,o=u.timeUnitKebabDictionary.fromJSON(r.timeOffsetUnits);return n&&o?new i({value:n,unit:o}):null},Object.defineProperty(t.prototype,"timeInfo",{set:function(e){s.fixTimeInfoFields(e,this.fields),this._set("timeInfo",e)},enumerable:!0,configurable:!0}),r.__decorate([o.property({type:n,json:{write:!1}})],t.prototype,"timeExtent",void 0),r.__decorate([o.property({type:i})],t.prototype,"timeOffset",void 0),r.__decorate([o.reader("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),r.__decorate([o.property({value:null,type:a,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),r.__decorate([o.property({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),r.__decorate([o.subclass("esri.layers.mixins.TemporalLayer")],t)}(e)}}.apply(null,n))||(e.exports=i)},cGHk:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.mapParameters=function e(t){var r={};for(var n in t)if("declaredClass"!==n){var i=t[n];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){r[n]=[];for(var o=0;o<i.length;o++)r[n][o]=e(i[o])}else"object"==typeof i?i.toJSON&&(r[n]=JSON.stringify(i)):r[n]=i}return r}}.apply(null,n))||(e.exports=i)},d81A:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("R2Zq"),r("LxLY"),r("qMld"),r("ULaq"),r("u90+"),r("nrlZ"),r("+6sX"),r("700l"),r("Ytki"),r("Q2Em"),r("/61J"),r("zDti")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,p,d,f,h){function y(e){return e.substr(24,12)+e.substr(19,4)+e.substr(16,2)+e.substr(14,2)+e.substr(11,2)+e.substr(9,2)+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)+e.substr(0,2)}function v(e,t,r){return(r?e>t:e<t)?-1:(r?e<t:e>t)?1:0}function m(e,t,r){return r?t-e:e-t}function _(e,t,r,n){if(r&&"esriFieldTypeDate"===r.type){var i=new Date(e).getTime(),o=new Date(t).getTime();if(!isNaN(i)&&!isNaN(o))return m(i,o,n)}return"number"==typeof e&&"number"==typeof t?m(e,t,n):"string"==typeof e&&"string"==typeof t?(i=e.toUpperCase(),o=t.toUpperCase(),!r||"esriFieldTypeGUID"!==r.type&&"esriFieldTypeGlobalID"!==r.type?v(i,o,n):v(y(i),y(o),n)):n?1:-1}Object.defineProperty(t,"__esModule",{value:!0});var g=function(){function e(e,t,r){this.items=e,this.queryGeometry=t,this.definitionExpression=r.definitionExpression,this.geometryType=r.geometryType,this.hasM=r.hasM,this.hasZ=r.hasZ,this.objectIdField=r.objectIdField,this.spatialReference=r.spatialReference,this.fieldsIndex=r.fieldsIndex,this.timeInfo=r.timeInfo,this.featureAdapter=r.featureAdapter}return Object.defineProperty(e.prototype,"size",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),e.prototype.createQueryResponse=function(e){var t;return t=e.outStatistics?e.outStatistics.some((function(e){return"exceedslimit"===e.statisticType}))?this._createExceedsLimitQueryResponse(e):this._createStatisticsQueryResponse(e):this._createFeatureQueryResponse(e),e.returnQueryGeometry&&(u.isValid(e.outSR)&&!u.equals(this.queryGeometry.spatialReference,e.outSR)?t.queryGeometry=h.cleanFromGeometryEngine(r.__assign({spatialReference:e.outSR},d.project(this.queryGeometry,this.queryGeometry.spatialReference,e.outSR))):t.queryGeometry=h.cleanFromGeometryEngine(r.__assign({spatialReference:e.outSR},this.queryGeometry))),t},e.prototype.executeAttributesQuery=function(t){var r=p.getWhereClause(t.where,this.fieldsIndex);if(!r)return o.resolve(this);if(r.isStandardized){for(var n=0,i=[],a=0,s=this.items;a<s.length;a++){var u=s[a];r.testFeature(u,this.featureAdapter)&&(i[n++]=u)}var l=new e(i,this.queryGeometry,this);return l.definitionExpression=t.where,o.resolve(l)}return o.reject(new TypeError("Where clause is not standardized"))},e.prototype.executeObjectIdsQuery=function(t){if(!t.objectIds||!t.objectIds.length)return o.resolve(this);var r=a.SetFromValues(t.objectIds),n=this.featureAdapter.getObjectId;return o.resolve(new e(this.items.filter((function(e){return r.has(n(e))})),this.queryGeometry,this))},e.prototype.executeTimeQuery=function(t){var r=f.getTimeOperator(this.timeInfo,t.timeExtent,this.featureAdapter);if(!i.isSome(r))return o.resolve(this);var n=this.items.filter(r);return o.resolve(new e(n,this.queryGeometry,this))},e.prototype.filterLatest=function(){for(var t=this.timeInfo,r=t.trackIdField,i=t.startTimeField,a=t.endTimeField||i,s=new Map,u=this.featureAdapter.getAttribute,l=0,c=this.items;l<c.length;l++){var p=c[l],d=u(p,r),f=u(p,a),h=s.get(d);(!h||f>u(h,a))&&s.set(d,p)}var y=n.valuesOfMap(s);return o.resolve(new e(y,this.queryGeometry,this))},e.prototype.project=function(t){return r.__awaiter(this,void 0,void 0,(function(){var n,i=this;return r.__generator(this,(function(r){switch(r.label){case 0:return!t||u.equals(this.spatialReference,t)?[2,this]:(n=this.featureAdapter,[4,d.projectMany(this.items.map((function(e){return h.getGeometry(i.geometryType,i.hasZ,i.hasM,n.getGeometry(e))})),this.spatialReference,t)]);case 1:return[2,new e(r.sent().map((function(e,t){return n.cloneWithGeometry(i.items[t],l.convertFromGeometry(e,i.hasZ,i.hasM))})),this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:t,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})]}}))}))},e.prototype._sortFeatures=function(e,t,r){if(e.length>1&&t&&t.length)for(var n=function(t){var n=t.split(" "),o=n[0],a=i.fieldsIndex.get(o),s=n[1]&&"desc"===n[1].toLowerCase();e.sort((function(e,t){return _(r(e,o,a),r(t,o,a),a,s)}))},i=this,o=0,a=t.reverse();o<a.length;o++)n(a[o])},e.prototype._createFeatureQueryResponse=function(e){var t=this,n=this.items,i=this,o=i.geometryType,a=i.hasM,u=i.hasZ,l=i.objectIdField,c=i.spatialReference,p=e.outFields,d=e.outSR,f=e.quantizationParameters,y=e.resultRecordCount,v=e.resultOffset,m=e.returnZ,_=e.returnM,g=!1;if(null!=y&&null!=v){var b=v+y;g=n.length>b,n=n.slice(v,Math.min(n.length,b))}var x=p&&(p.indexOf("*")>-1?r.__spreadArrays(this.fieldsIndex.fields):p.map((function(e){return t.fieldsIndex.get(e)})));return{exceededTransferLimit:g,features:this._createFeatures(e,n),fields:x,geometryType:o,hasM:a&&_,hasZ:u&&m,objectIdFieldName:l,spatialReference:h.cleanFromGeometryEngine(d||c),transform:f&&s.toQuantizationTransform(f)||null}},e.prototype._createFeatures=function(e,t){var r=new c.default(e,this.featureAdapter,this.fieldsIndex),n=this.hasM,i=this.hasZ,o=e.orderByFields,a=e.quantizationParameters,u=e.returnGeometry,l=e.returnCentroid,p=e.maxAllowableOffset,d=e.returnZ,f=void 0!==d&&d,y=e.returnM,v=i&&f,m=n&&void 0!==y&&y,_=[],g=0;if(u||l){var b=s.toQuantizationTransform(a);if(u&&!l)for(var x=0,S=t;x<S.length;x++)F=S[x],_[g++]={attributes:r.getAttributes(F),geometry:h.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(F),p,b,v,m)};else if(!u&&l)for(var w=0,I=t;w<I.length;w++)F=I[w],_[g++]={attributes:r.getAttributes(F),centroid:h.transformCentroid(this,this.featureAdapter.getCentroid(F,this),b)};else for(var T=0,E=t;T<E.length;T++)F=E[T],_[g++]={attributes:r.getAttributes(F),centroid:h.transformCentroid(this,this.featureAdapter.getCentroid(F,this),b),geometry:h.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(F),p,b,v,m)}}else for(var M=0,P=t;M<P.length;M++){var F=P[M],O=r.getAttributes(F);O&&(_[g++]={attributes:O})}return this._sortFeatures(_,o,(function(e,t,n){return r.getFieldValue(e,t,n)})),_},e.prototype._createExceedsLimitQueryResponse=function(e){for(var t=!1,r=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,o=0,a=e.outStatistics;o<a.length;o++){var s=a[o];if("exceedslimit"===s.statisticType){r=null!=s.maxPointCount?s.maxPointCount:Number.POSITIVE_INFINITY,n=null!=s.maxRecordCount?s.maxRecordCount:Number.POSITIVE_INFINITY,i=null!=s.maxVertexCount?s.maxVertexCount:Number.POSITIVE_INFINITY;break}}if("esriGeometryPoint"===this.geometryType)t=this.items.length>r;else if(this.items.length>n)t=!0;else{var u=this.hasZ?this.hasM?4:3:this.hasM?3:2,l=this.featureAdapter;t=this.items.reduce((function(e,t){var r=l.getGeometry(t);return e+(r&&r.coords.length||0)}),0)/u>i}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(t)}}]}},e.prototype._createStatisticsQueryResponse=function(e){for(var t=this,r={attributes:{}},i=[],o=new Map,a=new Map,s=new Map,u=new Map,l=new c.default(e,this.featureAdapter,this.fieldsIndex),p=e.outStatistics,d=e.groupByFieldsForStatistics,f=e.having,h=e.orderByFields,y=d&&d.length,v=!!y,m=v&&d[0],_=v&&!this.fieldsIndex.get(m),g=0,b=p;g<b.length;g++){var x=b[g],S=x.outStatisticFieldName,w=x.statisticType,I=x,T="exceedslimit"!==w?x.onStatisticField:void 0,E="percentile_disc"===w||"percentile_cont"===w,M=v&&1===y&&(T===m||_)&&"count"===w;if(v){if(!s.has(T)){for(var P=[],F=0,O=d;F<O.length;F++){var R=O[F],N=this._getAttributeValues(l,R,o);P.push(N)}s.set(T,this._calculateUniqueValues(P))}var j=s.get(T),A=function(e){var r=j[e],n=r.count,i=r.data,a=r.items,s=r.itemPositions,c=i.join(",");if(!f||l.validateItems(a,f)){var p=u.get(c)||{attributes:{}},h=null;if(M)h=n;else{var y=C._getAttributeValues(l,T,o),v=s.map((function(e){return y[e]}));h=E&&"statisticParameters"in I?C._getPercentileValue(I,v):C._getStatisticValue(I,v)}p.attributes[S]=h,d.forEach((function(e,r){return p.attributes[t.fieldsIndex.get(e)?e:"EXPR_"+(r+1)]=i[r]})),u.set(c,p)}},C=this;for(var k in j)A(k)}else N=this._getAttributeValues(l,T,o),r.attributes[S]=E&&"statisticParameters"in I?this._getPercentileValue(I,N):this._getStatisticValue(I,N,a);i.push({name:S,alias:S,type:"esriFieldTypeDouble"})}var G=v?n.valuesOfMap(u):[r];return this._sortFeatures(G,h,(function(e,t){return e.attributes[t]})),{fields:i,features:G}},e.prototype._getStatisticValue=function(e,t,r){var n=e.onStatisticField,i=e.statisticType,o=r&&r.has(n)?r.get(n):this._calculateStatistics(t);return r&&r.set(n,o),o["var"===i?"variance":i]},e.prototype._getPercentileValue=function(e,t){var n=e.onStatisticField,i=e.statisticParameters,o=e.statisticType,a=i.value,s="desc"===i.orderBy,u=this.fieldsIndex.get(n),l=r.__spreadArrays(t).sort((function(e,t){return _(e,t,u,s)}));return this._calculatePercentile(l,a,"percentile_disc"===o)},e.prototype._getAttributeValues=function(e,t,r){if(r.has(t))return r.get(t);var n=this.fieldsIndex.get(t),i=this.items.map((function(r){return e.getFieldValue(r,t,n)}));return r.set(t,i),i},e.prototype._calculateStatistics=function(e){for(var t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,n=null,i=null,o=null,a=null,s=[],u=0,l=0,c=e;l<c.length;l++)"string"==typeof(h=c[l])?u++:null==h||isNaN(h)||(n+=h,t=Math.min(t,h),r=Math.max(r,h),s.push(h),u++);if(u){i=n/u;for(var p=0,d=0,f=s;d<f.length;d++){var h=f[d];p+=Math.pow(h-i,2)}a=u>1?p/(u-1):0,o=Math.sqrt(a)}else t=null,r=null;return{avg:i,count:u,max:r,min:t,stddev:o,sum:n,variance:a}},e.prototype._calculateUniqueValues=function(e){for(var t={},r=this.items,n=r.length,i=0;i<n;i++){for(var o=r[i],a=[],s=0,u=e;s<u.length;s++){var l=u[s];a.push(l[i])}var c=a.join(",");null==t[c]?t[c]={count:1,data:a,items:[o],itemPositions:[i]}:(t[c].count++,t[c].items.push(o),t[c].itemPositions.push(i))}return t},e.prototype._calculatePercentile=function(e,t,r){if(0===e.length)return null;if(t<=0)return e[0];if(t>=1)return e[e.length-1];var n=(e.length-1)*t,i=Math.floor(n),o=i+1,a=n%1,s=e[i],u=e[o];return o>=e.length||r||"string"==typeof s||"string"==typeof u?s:s*(1-a)+u*a},e}();t.default=g}.apply(null,n))||(e.exports=i)},"f+jp":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ycL1"),r("Vx27")],void 0===(i=function(e,t,r,n,i){return function(e){function t(t){var r=e.call(this,t)||this;return r.type=null,r}var n;return r.__extends(t,e),n=t,t.prototype.clone=function(){return new n({type:this.type})},r.__decorate([i.property({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],t.prototype,"type",void 0),n=r.__decorate([i.subclass("esri.form.elements.inputs.AttachmentInput")],t)}(n.JSONSupport)}.apply(null,n))||(e.exports=i)},f0Ez:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("Vx27"),r("zF2V"),r("f+jp")],void 0===(i=function(e,t,r,n,i,o){return function(e){function t(t){var r=e.call(this,t)||this;return r.attachmentKeyword=null,r.editable=!0,r.input=null,r.type="attachment",r}var i;return r.__extends(t,e),i=t,t.prototype.clone=function(){return new i({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})},r.__decorate([n.property({type:String,json:{write:!0}})],t.prototype,"attachmentKeyword",void 0),r.__decorate([n.property({type:Boolean,json:{default:!0,write:!0}})],t.prototype,"editable",void 0),r.__decorate([n.property({type:o,json:{read:{source:"inputType"},write:{target:"inputType"}}})],t.prototype,"input",void 0),r.__decorate([n.property({type:["attachment"],json:{read:!1,write:!0}})],t.prototype,"type",void 0),i=r.__decorate([n.subclass("esri.form.elements.AttachmentElement")],t)}(i.Element)}.apply(null,n))||(e.exports=i)},fQaS:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("Vx27"),r("aWt5")],void 0===(i=function(e,t,r,n,i){return function(e){function t(t){var r=e.call(this,t)||this;return r.type="selection",r}var i;return r.__extends(t,e),i=t,t.prototype.clone=function(){return new i},r.__decorate([n.property({type:["selection"]})],t.prototype,"type",void 0),i=r.__decorate([n.subclass("esri.layers.support.FeatureReductionSelection")],t)}(i.default)}.apply(null,n))||(e.exports=i)},fsiH:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("ixhC")],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.parse=function(e){return r.parse(e)},e}();t.WhereGrammar=n}.apply(null,n))||(e.exports=i)},fw2w:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("0J3i"),r("ma1f"),r("qsST"),r("LxLY"),r("qMld"),r("Vt+U"),r("aYWh"),r("Z4y+"),r("nrlZ"),r("vtMp"),r("2QEt"),r("sqdO")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,p,d,f,h){Object.defineProperty(t,"__esModule",{value:!0});var y=o.getLogger("esri.geometry.support.normalizeUtils"),v={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new l({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:c.WebMercator}),minus180Line:new l({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:c.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new l({paths:[[[180,-180],[180,180]]],spatialReference:c.WGS84}),minus180Line:new l({paths:[[[-180,-180],[-180,180]]],spatialReference:c.WGS84})}};function m(e){return"polygon"===e.type}function _(e){return m(e)?e.rings:e.paths}function g(e,t){return Math.ceil((e-t)/(2*t))}function b(e,t){for(var r=0,n=_(e);r<n.length;r++)for(var i=0,o=n[r];i<o.length;i++)o[i][0]+=t;return e}function x(e){for(var t=[],r=0,n=0,i=0;i<e.length;i++){for(var o=e[i],a=null,s=0;s<o.length;s++)a=o[s],t.push(a),0===s?n=r=a[0]:(r=Math.min(r,a[0]),n=Math.max(n,a[0]));a&&t.push([(r+n)/2,0])}return t}function S(e,t){if(!(e instanceof l||e instanceof u)){var r="straightLineDensify: the input geometry is neither polyline nor polygon";throw y.error(r),new i(r)}for(var n=[],o=0,a=_(e);o<a.length;o++){var s=a[o],c=[];n.push(c),c.push([s[0][0],s[0][1]]);for(var p=0;p<s.length-1;p++){var d=s[p][0],f=s[p][1],h=s[p+1][0],v=s[p+1][1],g=Math.sqrt((h-d)*(h-d)+(v-f)*(v-f)),b=(v-f)/g,x=(h-d)/g,S=g/t;if(S>1){for(var w=1;w<=S-1;w++){var I=w*t,T=x*I+d,E=b*I+f;c.push([T,E])}var M=(g+Math.floor(S-1)*t)/2,P=x*M+d,F=b*M+f;c.push([P,F])}c.push([h,v])}}return m(e)?new u({rings:n,spatialReference:e.spatialReference}):new l({paths:n,spatialReference:e.spatialReference})}function w(e,t,r){if(t){var n=S(e,1e6);e=d.webMercatorToGeographic(n,!0)}return r&&(e=b(e,r)),e}function I(e,t,r){var n;if(Array.isArray(e))if((n=e[0])>t){var i=g(n,t);e[0]=n+i*(-2*t)}else n<r&&(i=g(n,r),e[0]=n+i*(-2*r));else(n=e.x)>t?(i=g(n,t),e=e.clone().offset(i*(-2*t),0)):n<r&&(i=g(n,r),e=e.clone().offset(i*(-2*r),0));return e}t.straightLineDensify=S,t.normalizeCentralMeridian=function e(t,i,o){return r.__awaiter(this,void 0,void 0,(function(){var c,y,m,x,S,T,E,M,P,F,O,R,N,j,A,C,k,G,D,L,z,q,B,V,Q,U,Z,J,Y,W,H,X,K,$,ee,te,re;return r.__generator(this,(function(r){switch(r.label){case 0:if(!Array.isArray(t))return[2,e([t],i)];for(c=i?i.url:n.geometryServiceUrl,F=0,O=[],R=[],N=0,j=t;N<j.length;N++)A=j[N],a.isNone(A)?R.push(A):(y||(y=A.spatialReference,m=p.getInfo(y),x=y.isWebMercator,S=v[E=x?102100:4326].maxX,T=v[E].minX,M=v[E].plus180Line,P=v[E].minus180Line),m?"mesh"===A.type?R.push(A):"point"===A.type?R.push(I(A.clone(),S,T)):"multipoint"===A.type?((C=A.clone()).points=C.points.map((function(e){return I(e,S,T)})),R.push(C)):"extent"===A.type?(G=A.clone(),k=G._normalize(!1,!1,m),R.push(k.rings?new u(k):k)):A.extent?(G=A.extent,D=g(G.xmin,T),z=0==(L=D*(2*S))?A.clone():b(A.clone(),L),G.offset(L,0),G.intersects(M)&&G.xmax!==S?(F=G.xmax>F?G.xmax:F,z=w(z,x),O.push(z),R.push("cut")):G.intersects(P)&&G.xmin!==T?(F=G.xmax*(2*S)>F?G.xmax*(2*S):F,z=w(z,x,360),O.push(z),R.push("cut")):R.push(z)):R.push(A.clone()):R.push(A));for(q=g(F,S),B=-90,V=q,Q=new l;q>0;)U=360*q-180,Q.addPath([[U,B],[U,-1*B]]),B*=-1,q--;return O.length>0&&V>0?[4,f.cut(c,O,Q,o)]:[3,3];case 1:for(Z=r.sent(),J=function(e,t){for(var r=-1,n=function(n){for(var i=t.cutIndexes[n],o=t.geometries[n],a=_(o),s=function(e){var t=a[e];t.some((function(r){if(r[0]<180)return!0;for(var n=0,i=0;i<t.length;i++){var a=t[i][0];n=a>n?a:n}for(var s=-360*g(n=Number(n.toFixed(9)),180),u=0;u<t.length;u++){var l=o.getPoint(e,u);o.setPoint(e,u,l.clone().offset(s,0))}return!0}))},u=0;u<a.length;u++)s(u);if(i===r){if("polygon"===e[0].type)for(var l=0,c=_(o);l<c.length;l++){var p=c[l];e[i]=e[i].addRing(p)}else if(function(e){return"polyline"===e[0].type}(e))for(var d=0,f=_(o);d<f.length;d++){var h=f[d];e[i]=e[i].addPath(h)}}else r=i,e[i]=o},i=0;i<t.cutIndexes.length;i++)n(i);return e}(O,Z),Y=[],W=[],ee=0;ee<R.length;ee++)"cut"!==(te=R[ee])?W.push(te):(re=J.shift(),H=t[ee],a.isSome(H)&&"polygon"===H.type&&H.rings&&H.rings.length>1&&re.rings.length>=H.rings.length?(Y.push(re),W.push("simplify")):W.push(x?d.geographicToWebMercator(re):re));return Y.length?[4,h.simplify(c,Y,o)]:[2,W];case 2:for(X=r.sent(),K=[],ee=0;ee<W.length;ee++)"simplify"!==(te=W[ee])?K.push(te):K.push(x?d.geographicToWebMercator(X.shift()):X.shift());return[2,K];case 3:for($=[],ee=0;ee<R.length;ee++)"cut"!==(te=R[ee])?$.push(te):(re=O.shift(),$.push(!0===x?d.geographicToWebMercator(re):re));return[2,s.resolve($)]}}))}))},t.getDenormalizedExtent=function(e){var t;if(!e)return null;var r=e.extent;if(!r)return null;var n=e.spatialReference&&p.getInfo(e.spatialReference);if(!n)return r;var i,o=n.valid,a=o[0],s=o[1],u=2*s,l=r.width,c=r.xmin,d=r.xmax;if(c=(t=[d,c])[0],d=t[1],"extent"===e.type||0===l||l<=s||l>u||c<a||d>s)return r;switch(e.type){case"polygon":if(!(e.rings.length>1))return r;i=x(e.rings);break;case"polyline":if(!(e.paths.length>1))return r;i=x(e.paths);break;case"multipoint":i=e.points}for(var f=r.clone(),h=0;h<i.length;h++){var y=i[h][0];y<0?(y+=s,d=Math.max(y,d)):(y-=s,c=Math.min(y,c))}return f.xmin=c,f.xmax=d,f.width<l?(f.xmin-=s,f.xmax-=s,f):r},t.normalizeMapX=function(e,t){var r=p.getInfo(t);if(r){var n=r.valid,i=n[0],o=n[1],a=o-i;if(e<i)for(;e<i;)e+=a;if(e>o)for(;e>o;)e-=a}return e}}.apply(null,n))||(e.exports=i)},gRHS:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ycL1"),r("Vx27")],void 0===(i=function(e,t,r,n,i){return function(e){function t(t){var r=e.call(this,t)||this;return r.respectsDaylightSaving=!1,r.timezone=null,r}var n;return r.__extends(t,e),n=t,t.prototype.readRespectsDaylightSaving=function(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving},t.prototype.clone=function(){var e=this.respectsDaylightSaving,t=this.timezone;return new n({respectsDaylightSaving:e,timezone:t})},r.__decorate([i.property({type:Boolean,json:{write:!0}})],t.prototype,"respectsDaylightSaving",void 0),r.__decorate([i.reader("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],t.prototype,"readRespectsDaylightSaving",null),r.__decorate([i.property({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],t.prototype,"timezone",void 0),n=r.__decorate([i.subclass("esri.layers.support.TimeReference")],t)}(n.JSONSupport)}.apply(null,n))||(e.exports=i)},gSUo:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("TMur"),r("zp6E"),r("ma1f"),r("qsST"),r("LxLY"),r("qMld"),r("Vx27"),r("Zvuv"),r("aROD"),r("B16N"),r("HoQt"),r("IpeC")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,p,d,f,h){Object.defineProperty(t,"__esModule",{value:!0});var y,v=a.getLogger("esri.layers.graphics.sources.connections.GeoEventConnection");!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(y=t.ReadyState||(t.ReadyState={}));var m=function(e){function t(t,r,n,i,o,a,s,u){void 0===a&&(a=5),void 0===s&&(s=3);var l=e.call(this)||this;return l._destroyed=!1,l.errorString=null,l._source=t,l._sourceSpatialReference=r,l._spatialReference=n,l._filter=o,l._outFields=u,l._maxQueryDepth=a,l._maxRecordCountFactor=s,l._featureZScaler=f.getGeometryZScaler(i,r,n),l._open(),l}return r.__extends(t,e),t.prototype._open=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this._fetchServiceDefinition(this._source)];case 1:return(e=r.sent()).timeInfo.trackIdField||v.warn("GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect."),[4,this._fetchWebSocketUrl(e.streamUrls,this._spatialReference)];case 2:return t=r.sent(),this._buddyServicesQuery||(this._buddyServicesQuery=this._queryBuddyServices()),[4,this._buddyServicesQuery];case 3:return r.sent(),[4,this._tryCreateWebSocket(t)];case 4:return r.sent(),n=this._filter,i=this._outFields,this._destroyed||this._setFilter(n,i),[2]}}))}))},t.prototype.destroy=function(){this._destroyed=!0,s.isSome(this._websocket)&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close()),this._websocket=null},Object.defineProperty(t.prototype,"connectionStatus",{get:function(){if(s.isNone(this._websocket))return"disconnected";switch(this._websocket.readyState){case y.CONNECTING:case y.OPEN:return"connected";case y.CLOSING:case y.CLOSED:return"disconnected"}},enumerable:!0,configurable:!0}),t.prototype._tryCreateWebSocket=function(e,t){return void 0===t&&(t=1e3),r.__awaiter(this,void 0,void 0,(function(){var n,i,a;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,4]),this._destroyed?[2]:(n=this,[4,this._createWebSocket(e)]);case 1:return n._websocket=r.sent(),this.notifyChange("connectionStatus"),[3,4];case 2:return i=r.sent(),a=t/1e3,v.error(new o("geoevent-connection","Failed to connect. Attempting to reconnect in "+a+"s",i)),[4,u.after(t)];case 3:return r.sent(),[2,this._tryCreateWebSocket(e,1.5*t)];case 4:return[2]}}))}))},t.prototype._createWebSocket=function(e){var t=this,r=new WebSocket(e),n=u.create((function(e,t){r.onopen=function(){return e(r)},r.onclose=function(e){return t(e)}}));return n.then((function(){if(t._destroyed)return r.onclose=function(){},void r.close();r.onclose=function(e){return t._onClose(e)},r.onerror=function(e){return t._onError(e)},r.onmessage=function(e){return t._onMessage(e)}})),n},t.prototype._onMessage=function(e){var t;try{t=this._enrich(JSON.parse(e.data)),this._featureZScaler&&this._featureZScaler(t.geometry)}catch(e){return void v.error(new o("geoevent-connection","Failed to parse message",e))}this.onFeature(t)},t.prototype._onError=function(e){var t="Encountered an error over WebSocket connection";this._set("errorString",t),v.error("geoevent-connection",t)},t.prototype._onClose=function(e){this._websocket=null,this.notifyChange("connectionStatus"),1e3!==e.code&&v.error("geoevent-connection","WebSocket closed unexpectedly with error code "+e.code),this._destroyed||this._open()},t.prototype._fetchServiceDefinition=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,i(e,{query:{f:"json"},responseType:"json"})];case 1:return t=r.sent(),n=t.data,this._serviceDefinition=n,[2,n]}}))}))},t.prototype._fetchWebSocketUrl=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){return n=e[0],i=n.urls,o=n.token,[2,this._inferWebSocketBaseUrl(i)+"/subscribe?outSR="+t.wkid+(o?"&token="+o:"")]}))}))},t.prototype._inferWebSocketBaseUrl=function(e){if(1===e.length)return e[0];for(var t=0,r=e;t<r.length;t++){var n=r[t];if(-1!==n.indexOf("wss"))return n}return v.error(new o("geoevent-connection","Unable to infer WebSocket url",e)),null},t.prototype._setFilter=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,a,l,c,p,d=this;return r.__generator(this,(function(r){return n=this._websocket,this._filter=e,this._outFields=t,s.isNone(n)||s.isNone(e)&&s.isNone(t)?[2]:(i=JSON.stringify({filter:this._serializeFilter(e,t)}),a=!1,l=u.createResolver(),c=function(){a||(d._destroyed||d._websocket!==n||v.error(new o("geoevent-connection","Server timed out when setting filter")),l.reject())},p=function(e){var t=JSON.parse(e.data);t.filter&&(t.error&&(v.error(new o("geoevent-connection","Failed to set service filter",t.error)),d._set("errorString","Could not set service filter - "+t.error),l.reject(t.error)),n.onmessage=d._onMessage.bind(d),a=!0,l.resolve())},n.onmessage=p,n.send(i),setTimeout(c,1e4),[2,l.promise])}))}))},t.prototype._serializeFilter=function(e,t){var r={};if(s.isNone(e)&&s.isNone(t))return r;if(s.isSome(e)&&e.geometry)try{var i=n.fromJSON(e.geometry);if("extent"!==i.type)throw new o("Expected extent but found type "+i.type);r.geometry=JSON.stringify(i.shiftCentralMeridian())}catch(e){v.error(new o("geoevent-connection","Encountered an error when setting connection geometryDefinition",e))}return s.isSome(e)&&e.where&&"1 = 1"!==e.where&&(r.where=e.where),s.isSome(t)&&(r.outFields=t.join(",")),r},t.prototype._enrich=function(e){if(!this._relatedFeatures)return e;var t=this._serviceDefinition.relatedFeatures.joinField,r=e.attributes[t];if(!this._relatedFeatures.has(r))return v.warn("geoevent-connection","Feature join failed. Is the join field configured correctly?",e),e;var n=this._relatedFeatures.get(r),i=n.attributes,a=n.geometry;for(var s in i)e.attributes[s]=i[s];return a&&(e.geometry=a),e.geometry||e.centroid||v.error(new o("geoevent-connection","Found malformed feature - no geometry found",e)),e},t.prototype._queryBuddyServices=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,i,a,s,u,l,c,p;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),e=this._serviceDefinition,t=e.relatedFeatures,n=e.keepLatestArchive,i=this._queryRelatedFeatures(t),a=this._queryArchive(n),[4,i];case 1:return r.sent(),[4,a];case 2:if(!(s=r.sent()))return[2];for(u=0,l=s.features;u<l.length;u++)c=l[u],this.onFeature(this._enrich(c));return[3,4];case 3:return p=r.sent(),v.error(new o("geoevent-connection","Encountered an error when querying buddy services",{error:p})),[3,4];case 4:return[2]}}))}))},t.prototype._queryRelatedFeatures=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(r){switch(r.label){case 0:return e?[4,this._queryBuddy(e.featuresUrl)]:[2];case 1:return t=r.sent(),this._addRelatedFeatures(t),[2]}}))}))},t.prototype._queryArchive=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return e?[2,this._queryBuddy(e.featuresUrl)]:[2,void 0]}))}))},t.prototype._queryBuddy=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,o,a,u,l,p,f,y;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,(t=new c({url:e})).load()];case 1:return n=r.sent().capabilities,i=n.query.supportsMaxRecordCountFactor,o=n.query.supportsPagination,a=n.query.supportsCentroid,u=this._maxRecordCountFactor,l=t.capabilities.query.maxRecordCount,p=i?l*u:l,(f=new h).outFields=s.unwrapOr(this._outFields,["*"]),f.where=s.unwrapOr(s.get(this._filter,"where"),"1=1"),f.returnGeometry=!0,f.returnExceededLimitFeatures=!0,f.outSpatialReference=this._spatialReference,a&&(f.returnCentroid=!0),i&&(f.maxRecordCountFactor=u),o?(f.num=p,t.destroy(),[2,this._queryPages(e,f)]):[4,d.executeQuery(e,f,this._sourceSpatialReference)];case 2:return y=r.sent(),t.destroy(),[2,y.data]}}))}))},t.prototype._queryPages=function(e,t,n,i){return void 0===n&&(n=[]),void 0===i&&(i=0),r.__awaiter(this,void 0,void 0,(function(){var o;return r.__generator(this,(function(r){switch(r.label){case 0:return t.start=i*t.num,[4,d.executeQuery(e,t,this._sourceSpatialReference)];case 1:return(o=r.sent().data).exceededTransferLimit&&i<this._maxQueryDepth?(o.features.forEach((function(e){return n.push(e)})),[2,this._queryPages(e,t,n,i+1)]):(n.forEach((function(e){return o.features.push(e)})),[2,o])}}))}))},t.prototype._addRelatedFeatures=function(e){for(var t=new Map,r=e.features,n=this._serviceDefinition.relatedFeatures.joinField,i=0,o=r;i<o.length;i++){var a=o[i],s=a.attributes[n];t.set(s,a)}this._relatedFeatures=t},r.__decorate([l.property()],t.prototype,"connectionStatus",null),r.__decorate([l.property()],t.prototype,"errorString",void 0),r.__decorate([l.subclass("esri.layers.graphics.sources.connections.GeoEventConnection")],t)}(p.default);t.default=m}.apply(null,n))||(e.exports=i)},"gT/q":function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(e,t){return e?t?4:3:t?3:2}function n(e,t,n,o,a){if(!e)return!1;for(var s=r(t,n),u=e.coords,l=!1,c=0,p=0,d=e.lengths;p<d.length;p++){var f=d[p];l=i(l,u,s,c,f,o,a),c+=f*s}return l}function i(e,t,r,n,i,o,a){for(var s=e,u=n,l=n,c=n+i*r;l<c;l+=r){(u=l+r)===c&&(u=n);var p=t[l],d=t[l+1],f=t[u],h=t[u+1];(d<a&&h>=a||h<a&&d>=a)&&p+(a-d)/(h-d)*(f-p)<o&&(s=!s)}return s}Object.defineProperty(t,"__esModule",{value:!0}),t.polygonContainsPoint=function(e,t,r,i){return n(e,t,r,i.coords[0],i.coords[1])},t.polygonContainsMultipoint=function(e,t,i,o,a,s){var u=r(a,s),l=o.coords,c=o.lengths;if(!c)return!1;for(var p=0,d=0;p<c.length;p++,d+=u)if(!n(e,t,i,l[d],l[d+1]))return!1;return!0},t.polygonContainsCoords=n}.apply(null,n))||(e.exports=i)},gsnf:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zIqJ"),r("xoE+"),r("LxLY")],void 0===(i=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_STREAM_ID_FIELD="__esri_stream_id__";var o=function(){function e(e,r,n,i,o){void 0===o&&(o=128),this._trackIdToObservations=new Map,this._idCounter=0,this._lastPurge=Date.now(),this._addOrUpdated=new Map,this._removed=[],this._maxAge=0,this._timeInfo=n,this._purgeOptions=i,this.store=e,this.objectIdField=r,this.purgeInterval=o,this._useGeneratedIds=this.objectIdField===t.DEFAULT_STREAM_ID_FIELD}return e.prototype.add=function(e){if(this._useGeneratedIds&&(e.attributes[this.objectIdField]=this._nextId()),e.objectId=e.attributes[this.objectIdField],this.store.add(e),this._addOrUpdated.set(e.objectId,e),this._maxAge=Math.max(this._maxAge,e.attributes[this._timeInfo.startTimeField]),this._timeInfo.trackIdField){var t=e.attributes[this._timeInfo.trackIdField];if(!this._trackIdToObservations.has(t)){var o=i.isSome(this._purgeOptions)&&null!=this._purgeOptions.maxObservations?this._purgeOptions.maxObservations:1e3,a=n.clamp(o,0,1e3);this._trackIdToObservations.set(t,new r.default(a))}var s=this._trackIdToObservations.get(t),u=e.attributes[this.objectIdField],l=s.enqueue(u);if(i.isSome(l)){var c=this.store.removeById(l);i.isSome(c)&&(this._addOrUpdated.has(l)?this._addOrUpdated.delete(l):this._removed.push(c))}}},e.prototype.checkForUpdates=function(){var e=this._getToAdd(),t=this._getToRemove(),r=Date.now();r-this._lastPurge>=this.purgeInterval&&(this._purge(),this._lastPurge=r),(e||t)&&this.store.update(e,t)},e.prototype._getToAdd=function(){if(!this._addOrUpdated.size)return null;var e=new Array(this._addOrUpdated.size),t=0;return this._addOrUpdated.forEach((function(r){return e[t++]=r})),this._addOrUpdated.clear(),e},e.prototype._getToRemove=function(){var e=this._removed;return this._removed.length?(this._removed=[],e):null},e.prototype._nextId=function(){var e=this._idCounter;return this._idCounter=(this._idCounter+1)%4294967294+1,e},e.prototype._purge=function(){var e=this._purgeOptions;i.isSome(e)&&(this._purgeSomeByDisplayCount(e),this._purgeByAge(e),this._purgeTracks())},e.prototype._purgeSomeByDisplayCount=function(e){var t=this;if(e.displayCount){var r=this.store.size;r>e.displayCount&&this._trackIdToObservations.forEach((function(n){if(r>e.displayCount&&n.size){var o=t.store.removeById(i.unwrap(n.dequeue()));i.isSome(o)&&t._removed.push(o),r--}}))}},e.prototype._purgeByAge=function(e){var t=this;if(e.age){var r=60*e.age*1e3,n=this._maxAge-r,i=this._timeInfo.startTimeField;this.store.forEach((function(e){e.attributes[i]<n&&(t.store.removeById(e.objectId),t._removed.push(e))}))}},e.prototype._purgeTracks=function(){var e=this;this._trackIdToObservations.forEach((function(t,r){0===t.size&&e._trackIdToObservations.delete(r)}))},e}();t.default=o}.apply(null,n))||(e.exports=i)},hySu:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("Vx27"),r("5c1C")],void 0===(i=function(e,t,r,n,i){return function(e){function t(t){var r=e.call(this,t)||this;return r.type="barcode-scanner",r}var i;return r.__extends(t,e),i=t,t.prototype.clone=function(){return new i},r.__decorate([n.property({type:["barcode-scanner"],json:{read:!1,write:!0}})],t.prototype,"type",void 0),i=r.__decorate([n.subclass("esri.form.elements.inputs.BarcodeScannerInput")],t)}(i)}.apply(null,n))||(e.exports=i)},ixhC:function(e,t,r){var n,i,o;i=[],void 0===(o="function"==typeof(n=function(){"use strict";function e(t,r,n,i){this.message=t,this.expected=r,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(e,Error),e.buildMessage=function(e,t){var r={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t,r="";for(t=0;t<e.parts.length;t++)r+=e.parts[t]instanceof Array?o(e.parts[t][0])+"-"+o(e.parts[t][1]):o(e.parts[t]);return"["+(e.inverted?"^":"")+r+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function o(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}return"Expected "+function(e){var t,n,i,o=new Array(e.length);for(t=0;t<e.length;t++)o[t]=(i=e[t],r[i.type](i));if(o.sort(),o.length>0){for(t=1,n=1;t<o.length;t++)o[t-1]!==o[t]&&(o[n]=o[t],n++);o.length=n}switch(o.length){case 1:return o[0];case 2:return o[0]+" or "+o[1];default:return o.slice(0,-1).join(", ")+", or "+o[o.length-1]}}(e)+" but "+function(e){return e?'"'+i(e)+'"':"end of input"}(t)+" found."},{SyntaxError:e,parse:function(t,r){r=void 0!==r?r:{};var n,i={},o={start:Qe},a=Qe,s=function(e,t){return Wt(e,t)},u=Le("!",!1),l=Le("=",!1),c=Le(">=",!1),p=Le(">",!1),d=Le("<=",!1),f=Le("<>",!1),h=Le("<",!1),y=Le("!=",!1),v=function(e){return e[0]+" "+e[2]},m=Le("+",!1),_=Le("-",!1),g=Le("*",!1),b=Le("/",!1),x=function(e,t){return e+t.join("")},S=/^[A-Za-z_\x80-\uFFFF]/,w=ze([["A","Z"],["a","z"],"_",["",""]],!1,!1),I=/^[A-Za-z0-9_]/,T=ze([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),E=/^[A-Za-z0-9_.\x80-\uFFFF]/,M=ze([["A","Z"],["a","z"],["0","9"],"_",".",["",""]],!1,!1),P=Le("@",!1),F=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}},O=function(e,t){return{type:"interval-period",period:"second",precision:e,secondary:t}},R=function(e){return parseFloat(e)},N=Le("'",!1),j=Le("N'",!1),A=Le("''",!1),C=/^[^']/,k=ze(["'"],!0,!1),G=function(e,t){return{type:"when_clause",operand:e,value:t}},D=Le(".",!1),L=/^[0-9]/,z=ze([["0","9"]],!1,!1),q=/^[eE]/,B=ze(["e","E"],!1,!1),V=/^[+\-]/,Q=ze(["+","-"],!1,!1),U=Le("NULL",!0),Z=Le("TRUE",!0),J=Le("FALSE",!0),Y=Le("IN",!0),W=Le("IS",!0),H=Le("LIKE",!0),X=Le("ESCAPE",!0),K=Le("NOT",!0),$=Le("AND",!0),ee=Le("OR",!0),te=Le("BETWEEN",!0),re=Le("FROM",!0),ne=Le("FOR",!0),ie=Le("SUBSTRING",!0),oe=Le("EXTRACT",!0),ae=Le("TRIM",!0),se=Le("POSITION",!0),ue=Le("TIMESTAMP",!0),le=Le("DATE",!0),ce=Le("LEADING",!0),pe=Le("TRAILING",!0),de=Le("BOTH",!0),fe=Le("TO",!0),he=Le("INTERVAL",!0),ye=Le("YEAR",!0),ve=Le("MONTH",!0),me=Le("DAY",!0),_e=Le("HOUR",!0),ge=Le("MINUTE",!0),be=Le("SECOND",!0),xe=Le("CASE",!0),Se=Le("END",!0),we=Le("WHEN",!0),Ie=Le("THEN",!0),Te=Le("ELSE",!0),Ee=Le(",",!1),Me=Le("(",!1),Pe=Le(")",!1),Fe=/^[ \t\n\r]/,Oe=ze([" ","\t","\n","\r"],!1,!1),Re=Le("`",!1),Ne=/^[^`]/,je=ze(["`"],!0,!1),Ae=0,Ce=[{line:1,column:1}],ke=0,Ge=[],De=0;if("startRule"in r){if(!(r.startRule in o))throw new Error("Can't start parsing from rule \""+r.startRule+'".');a=o[r.startRule]}function Le(e,t){return{type:"literal",text:e,ignoreCase:t}}function ze(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function qe(e){var r,n=Ce[e];if(n)return n;for(r=e-1;!Ce[r];)r--;for(n={line:(n=Ce[r]).line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return Ce[e]=n,n}function Be(e,t){var r=qe(e),n=qe(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function Ve(e){Ae<ke||(Ae>ke&&(ke=Ae,Ge=[]),Ge.push(e))}function Qe(){var e,t;return e=Ae,Zt()!==i&&(t=Ze())!==i&&Zt()!==i?e=t:(Ae=e,e=i),e}function Ue(){var e,t,r,n,o,a,s,u;if(e=Ae,(t=Ze())!==i){for(r=[],n=Ae,(o=Zt())!==i&&(a=Vt())!==i&&(s=Zt())!==i&&(u=Ze())!==i?n=o=[o,a,s,u]:(Ae=n,n=i);n!==i;)r.push(n),n=Ae,(o=Zt())!==i&&(a=Vt())!==i&&(s=Zt())!==i&&(u=Ze())!==i?n=o=[o,a,s,u]:(Ae=n,n=i);r!==i?e=t=function(e,t){var r={type:"expr_list"},n=function(e,t,r){return function(e,t){for(var r=[e],n=0;n<t.length;n++)r.push(t[n][3]);return r}(e,t)}(e,t);return r.value=n,r}(t,r):(Ae=e,e=i)}else Ae=e,e=i;return e}function Ze(){var e,t,r,n,o,a,u,l;if(e=Ae,(t=Je())!==i){for(r=[],n=Ae,(o=Zt())!==i&&(a=Pt())!==i&&(u=Zt())!==i&&(l=Je())!==i?n=o=[o,a,u,l]:(Ae=n,n=i);n!==i;)r.push(n),n=Ae,(o=Zt())!==i&&(a=Pt())!==i&&(u=Zt())!==i&&(l=Je())!==i?n=o=[o,a,u,l]:(Ae=n,n=i);r!==i?e=t=s(t,r):(Ae=e,e=i)}else Ae=e,e=i;return e}function Je(){var e,t,r,n,o,a,u,l;if(e=Ae,(t=Ye())!==i){for(r=[],n=Ae,(o=Zt())!==i&&(a=Mt())!==i&&(u=Zt())!==i&&(l=Ye())!==i?n=o=[o,a,u,l]:(Ae=n,n=i);n!==i;)r.push(n),n=Ae,(o=Zt())!==i&&(a=Mt())!==i&&(u=Zt())!==i&&(l=Ye())!==i?n=o=[o,a,u,l]:(Ae=n,n=i);r!==i?e=t=s(t,r):(Ae=e,e=i)}else Ae=e,e=i;return e}function Ye(){var e,r,n,o,a;return e=Ae,(r=Et())===i&&(r=Ae,33===t.charCodeAt(Ae)?(n="!",Ae++):(n=i,0===De&&Ve(u)),n!==i?(o=Ae,De++,61===t.charCodeAt(Ae)?(a="=",Ae++):(a=i,0===De&&Ve(l)),De--,a===i?o=void 0:(Ae=o,o=i),o!==i?r=n=[n,o]:(Ae=r,r=i)):(Ae=r,r=i)),r!==i&&(n=Zt())!==i&&(o=Ye())!==i?e=r={type:"unary_expr",operator:"NOT",expr:o}:(Ae=e,e=i),e===i&&(e=function(){var e,r,n;return e=Ae,(r=Ke())!==i&&Zt()!==i?((n=function(){var e;return(e=function(){var e,t,r,n,o,a;if(e=[],t=Ae,(r=Zt())!==i&&(n=We())!==i&&(o=Zt())!==i&&(a=Ke())!==i?t=r=[r,n,o,a]:(Ae=t,t=i),t!==i)for(;t!==i;)e.push(t),t=Ae,(r=Zt())!==i&&(n=We())!==i&&(o=Zt())!==i&&(a=Ke())!==i?t=r=[r,n,o,a]:(Ae=t,t=i);else e=i;return e!==i&&(e={type:"arithmetic",tail:e}),e}())===i&&(e=function(){var e,t,r,n;return e=Ae,(t=Xe())!==i&&Zt()!==i&&(r=Qt())!==i&&Zt()!==i&&(n=Ue())!==i&&Zt()!==i&&Ut()!==i?e=t={op:t,right:n}:(Ae=e,e=i),e===i&&(e=Ae,(t=Xe())!==i&&Zt()!==i&&(r=Qt())!==i&&Zt()!==i&&(n=Ut())!==i?e=t=function(e){return{op:e,right:{type:"expr_list",value:[]}}}(t):(Ae=e,e=i),e===i&&(e=Ae,(t=Xe())!==i&&Zt()!==i&&(r=st())!==i?e=t=function(e,t){return{op:e,right:t}}(t,r):(Ae=e,e=i))),e}())===i&&(e=function(){var e,t,r,n,o,a;return e=Ae,(t=Et())!==i&&Zt()!==i&&(r=Ft())!==i&&Zt()!==i&&(n=Ke())!==i&&Zt()!==i&&(o=Mt())!==i&&Zt()!==i&&(a=Ke())!==i?e=t={op:"NOT"+r,right:{type:"expr_list",value:[n,a]}}:(Ae=e,e=i),e===i&&(e=Ae,(t=Ft())!==i&&Zt()!==i&&(r=Ke())!==i&&Zt()!==i&&(n=Mt())!==i&&Zt()!==i&&(o=Ke())!==i?e=t=function(e,t,r){return{op:e,right:{type:"expr_list",value:[t,r]}}}(t,r,o):(Ae=e,e=i)),e}())===i&&(e=function(){var e,t,r,n;return e=Ae,(t=It())!==i&&Zt()!==i&&(r=Et())!==i&&Zt()!==i&&(n=Ke())!==i?e=t={op:t+"NOT",right:n}:(Ae=e,e=i),e===i&&(e=Ae,(t=It())!==i&&Zt()!==i&&(r=Ke())!==i?e=t=function(e,t){return{op:e,right:t}}(t,r):(Ae=e,e=i)),e}())===i&&(e=function(){var e,r,n,o;return e=Ae,(r=He())!==i&&Zt()!==i&&(n=ft())!==i&&Zt()!==i&&function(){var e,r,n,o;return e=Ae,"escape"===t.substr(Ae,6).toLowerCase()?(r=t.substr(Ae,6),Ae+=6):(r=i,0===De&&Ve(X)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="ESCAPE":(Ae=e,e=i)):(Ae=e,e=i),e}()!==i&&Zt()!==i&&(o=ht())!==i?e=r={op:r,right:n,escape:o.value}:(Ae=e,e=i),e===i&&(e=Ae,(r=He())!==i&&Zt()!==i&&(n=ft())!==i?e=r=function(e,t){return{op:e,right:t,escape:""}}(r,n):(Ae=e,e=i)),e}()),e}())===i&&(n=null),n!==i?e=r=function(e,t){return""==t||null==t||null==t?e:"arithmetic"==t.type?Wt(e,t.tail):Yt(t.op,e,t.right,t.escape)}(r,n):(Ae=e,e=i)):(Ae=e,e=i),e}()),e}function We(){var e;return">="===t.substr(Ae,2)?(e=">=",Ae+=2):(e=i,0===De&&Ve(c)),e===i&&(62===t.charCodeAt(Ae)?(e=">",Ae++):(e=i,0===De&&Ve(p)),e===i&&("<="===t.substr(Ae,2)?(e="<=",Ae+=2):(e=i,0===De&&Ve(d)),e===i&&("<>"===t.substr(Ae,2)?(e="<>",Ae+=2):(e=i,0===De&&Ve(f)),e===i&&(60===t.charCodeAt(Ae)?(e="<",Ae++):(e=i,0===De&&Ve(h)),e===i&&(61===t.charCodeAt(Ae)?(e="=",Ae++):(e=i,0===De&&Ve(l)),e===i&&("!="===t.substr(Ae,2)?(e="!=",Ae+=2):(e=i,0===De&&Ve(y)))))))),e}function He(){var e,t,r,n,o;return e=Ae,t=Ae,(r=Et())!==i&&(n=Zt())!==i&&(o=Tt())!==i?t=r=[r,n,o]:(Ae=t,t=i),t!==i&&(t=v(t)),(e=t)===i&&(e=Tt()),e}function Xe(){var e,t,r,n,o;return e=Ae,t=Ae,(r=Et())!==i&&(n=Zt())!==i&&(o=wt())!==i?t=r=[r,n,o]:(Ae=t,t=i),t!==i&&(t=v(t)),(e=t)===i&&(e=wt()),e}function Ke(){var e,t,r,n,o,a,u,l;if(e=Ae,(t=et())!==i){for(r=[],n=Ae,(o=Zt())!==i&&(a=$e())!==i&&(u=Zt())!==i&&(l=et())!==i?n=o=[o,a,u,l]:(Ae=n,n=i);n!==i;)r.push(n),n=Ae,(o=Zt())!==i&&(a=$e())!==i&&(u=Zt())!==i&&(l=et())!==i?n=o=[o,a,u,l]:(Ae=n,n=i);r!==i?e=t=s(t,r):(Ae=e,e=i)}else Ae=e,e=i;return e}function $e(){var e;return 43===t.charCodeAt(Ae)?(e="+",Ae++):(e=i,0===De&&Ve(m)),e===i&&(45===t.charCodeAt(Ae)?(e="-",Ae++):(e=i,0===De&&Ve(_))),e}function et(){var e,t,r,n,o,a,s,u;if(e=Ae,(t=rt())!==i){for(r=[],n=Ae,(o=Zt())!==i&&(a=tt())!==i&&(s=Zt())!==i&&(u=rt())!==i?n=o=[o,a,s,u]:(Ae=n,n=i);n!==i;)r.push(n),n=Ae,(o=Zt())!==i&&(a=tt())!==i&&(s=Zt())!==i&&(u=rt())!==i?n=o=[o,a,s,u]:(Ae=n,n=i);r!==i?e=t=Wt(t,r):(Ae=e,e=i)}else Ae=e,e=i;return e}function tt(){var e;return 42===t.charCodeAt(Ae)?(e="*",Ae++):(e=i,0===De&&Ve(g)),e===i&&(47===t.charCodeAt(Ae)?(e="/",Ae++):(e=i,0===De&&Ve(b))),e}function rt(){var e,r,n;return(e=function(){var e;return(e=ht())===i&&(e=function(){var e,t,r,n;return e=Ae,(t=function(){var e,t,r,n;return e=Ae,(t=_t())!==i&&(r=gt())!==i&&(n=bt())!==i?e=t=parseFloat(t+r+n):(Ae=e,e=i),e===i&&(e=Ae,(t=_t())!==i&&(r=gt())!==i?e=t=function(e,t){return parseFloat(e+t)}(t,r):(Ae=e,e=i),e===i&&(e=Ae,(t=_t())!==i&&(r=bt())!==i?e=t=function(e,t){return parseFloat(e+t)}(t,r):(Ae=e,e=i),e===i&&(e=Ae,(t=_t())!==i&&(t=function(e){return parseFloat(e)}(t)),e=t))),e}())!==i?(r=Ae,De++,n=it(),De--,n===i?r=void 0:(Ae=r,r=i),r!==i?e=t={type:"number",value:t}:(Ae=e,e=i)):(Ae=e,e=i),e}())===i&&(e=function(){var e,r;return e=Ae,(r=function(){var e,r,n,o;return e=Ae,"true"===t.substr(Ae,4).toLowerCase()?(r=t.substr(Ae,4),Ae+=4):(r=i,0===De&&Ve(Z)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r=[r,n]:(Ae=e,e=i)):(Ae=e,e=i),e}())!==i&&(r={type:"bool",value:!0}),(e=r)===i&&(e=Ae,(r=function(){var e,r,n,o;return e=Ae,"false"===t.substr(Ae,5).toLowerCase()?(r=t.substr(Ae,5),Ae+=5):(r=i,0===De&&Ve(J)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r=[r,n]:(Ae=e,e=i)):(Ae=e,e=i),e}())!==i&&(r={type:"bool",value:!1}),e=r),e}())===i&&(e=function(){var e;return(e=function(){var e,r,n,o;return e=Ae,"null"===t.substr(Ae,4).toLowerCase()?(r=t.substr(Ae,4),Ae+=4):(r=i,0===De&&Ve(U)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r=[r,n]:(Ae=e,e=i)):(Ae=e,e=i),e}())!==i&&(e={type:"null",value:null}),e}())===i&&(e=function(){var e,r;return e=Ae,function(){var e,r,n,o;return e=Ae,"date"===t.substr(Ae,4).toLowerCase()?(r=t.substr(Ae,4),Ae+=4):(r=i,0===De&&Ve(le)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="DATE":(Ae=e,e=i)):(Ae=e,e=i),e}()!==i&&Zt()!==i&&(r=ft())!==i?e={type:"date",value:r.value}:(Ae=e,e=i),e}())===i&&(e=function(){var e,r;return e=Ae,function(){var e,r,n,o;return e=Ae,"timestamp"===t.substr(Ae,9).toLowerCase()?(r=t.substr(Ae,9),Ae+=9):(r=i,0===De&&Ve(ue)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="TIMESTAMP":(Ae=e,e=i)):(Ae=e,e=i),e}()!==i&&Zt()!==i&&(r=ft())!==i?e={type:"timestamp",value:r.value}:(Ae=e,e=i),e}())===i&&(e=function(){var e,r,n,o;return e=Ae,Nt()!==i&&Zt()!==i?(45===t.charCodeAt(Ae)?(r="-",Ae++):(r=i,0===De&&Ve(_)),r===i&&(43===t.charCodeAt(Ae)?(r="+",Ae++):(r=i,0===De&&Ve(m))),r!==i&&Zt()!==i&&(n=ft())!==i&&Zt()!==i&&(o=lt())!==i?e={type:"interval",value:n,qualifier:o,op:r}:(Ae=e,e=i)):(Ae=e,e=i),e===i&&(e=Ae,Nt()!==i&&Zt()!==i&&(r=ft())!==i&&Zt()!==i&&(n=lt())!==i?e=function(e,t){return{type:"interval",value:e,qualifier:t,op:""}}(r,n):(Ae=e,e=i)),e}()),e}())===i&&(e=function(){var e,r,n;return e=Ae,function(){var e,r,n,o;return e=Ae,"extract"===t.substr(Ae,7).toLowerCase()?(r=t.substr(Ae,7),Ae+=7):(r=i,0===De&&Ve(oe)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="EXTRACT":(Ae=e,e=i)):(Ae=e,e=i),e}()!==i&&Zt()!==i&&Qt()!==i&&Zt()!==i&&(r=function(){var e;return(e=jt())===i&&(e=At())===i&&(e=Ct())===i&&(e=kt())===i&&(e=Gt())===i&&(e=Dt()),e}())!==i&&Zt()!==i&&Ot()!==i&&Zt()!==i&&(n=Ze())!==i&&Zt()!==i&&Ut()!==i?e={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:r},n]}}:(Ae=e,e=i),e}())===i&&(e=function(){var e,r,n,o,a,s,u,l,c,p,d;return e=Ae,function(){var e,r,n,o;return e=Ae,"substring"===t.substr(Ae,9).toLowerCase()?(r=t.substr(Ae,9),Ae+=9):(r=i,0===De&&Ve(ie)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="SUBSTRING":(Ae=e,e=i)):(Ae=e,e=i),e}()!==i&&Zt()!==i&&Qt()!==i&&Zt()!==i&&(r=Ze())!==i&&Zt()!==i&&Ot()!==i&&Zt()!==i&&(n=Ze())!==i&&Zt()!==i?(o=Ae,(a=function(){var e,r,n,o;return e=Ae,"for"===t.substr(Ae,3).toLowerCase()?(r=t.substr(Ae,3),Ae+=3):(r=i,0===De&&Ve(ne)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="FOR":(Ae=e,e=i)):(Ae=e,e=i),e}())!==i&&(s=Zt())!==i&&(u=Ze())!==i&&(l=Zt())!==i?o=a=[a,s,u,l]:(Ae=o,o=i),o===i&&(o=null),o!==i&&(a=Ut())!==i?(c=r,p=n,e={type:"function",name:"substring",args:{type:"expr_list",value:(d=o)?[c,p,d[2]]:[c,p]}}):(Ae=e,e=i)):(Ae=e,e=i),e}())===i&&(e=function(){var e,t,r,n,o;return e=Ae,Rt()!==i&&Zt()!==i&&Qt()!==i&&Zt()!==i?((t=ut())===i&&(t=null),t!==i&&Zt()!==i&&(r=Ze())!==i&&Zt()!==i&&Ot()!==i&&Zt()!==i&&(n=Ze())!==i&&Zt()!==i&&Ut()!==i?e={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==(o=t)?"BOTH":o},r,n]}}:(Ae=e,e=i)):(Ae=e,e=i),e===i&&(e=Ae,Rt()!==i&&Zt()!==i&&Qt()!==i&&Zt()!==i?((t=ut())===i&&(t=null),t!==i&&Zt()!==i&&(r=Ze())!==i&&Zt()!==i&&Ut()!==i?e=function(e,t){return{type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==e?"BOTH":e},t]}}}(t,r):(Ae=e,e=i)):(Ae=e,e=i)),e}())===i&&(e=function(){var e,r,n;return e=Ae,function(){var e,r,n,o;return e=Ae,"position"===t.substr(Ae,8).toLowerCase()?(r=t.substr(Ae,8),Ae+=8):(r=i,0===De&&Ve(se)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="POSITION":(Ae=e,e=i)):(Ae=e,e=i),e}()!==i&&Zt()!==i&&Qt()!==i&&Zt()!==i&&(r=Ze())!==i&&Zt()!==i&&wt()!==i&&Zt()!==i&&(n=Ze())!==i&&Zt()!==i&&Ut()!==i?e={type:"function",name:"position",args:{type:"expr_list",value:[r,n]}}:(Ae=e,e=i),e}())===i&&(e=function(){var e,r,n;return e=Ae,(r=function(){var e,r,n,o;if(e=Ae,(r=nt())!==i&&(r=r),(e=r)===i)if(e=Ae,96===t.charCodeAt(Ae)?(r="`",Ae++):(r=i,0===De&&Ve(Re)),r!==i){if(n=[],Ne.test(t.charAt(Ae))?(o=t.charAt(Ae),Ae++):(o=i,0===De&&Ve(je)),o!==i)for(;o!==i;)n.push(o),Ne.test(t.charAt(Ae))?(o=t.charAt(Ae),Ae++):(o=i,0===De&&Ve(je));else n=i;n!==i?(96===t.charCodeAt(Ae)?(o="`",Ae++):(o=i,0===De&&Ve(Re)),o!==i?e=r=n.join(""):(Ae=e,e=i)):(Ae=e,e=i)}else Ae=e,e=i;return e}())!==i&&Zt()!==i&&Qt()!==i&&Zt()!==i?((n=Ue())===i&&(n=null),n!==i&&Zt()!==i&&Ut()!==i?e=r={type:"function",name:r,args:n||{type:"expr_list",value:[]}}:(Ae=e,e=i)):(Ae=e,e=i),e}())===i&&(e=function(){var e;return(e=function(){var e,t,r,n,o;if(e=Ae,Lt()!==i)if(Zt()!==i)if((t=Ze())!==i)if(Zt()!==i){for(r=[],n=vt();n!==i;)r.push(n),n=vt();r!==i&&(n=Zt())!==i&&(o=zt())!==i?e={type:"case_expression",format:"simple",operand:t,clauses:r,else:null}:(Ae=e,e=i)}else Ae=e,e=i;else Ae=e,e=i;else Ae=e,e=i;else Ae=e,e=i;if(e===i)if(e=Ae,Lt()!==i)if(Zt()!==i)if((t=Ze())!==i)if(Zt()!==i){for(r=[],n=vt();n!==i;)r.push(n),n=vt();r!==i&&(n=Zt())!==i&&(o=mt())!==i&&Zt()!==i&&zt()!==i?e=function(e,t,r){return{type:"case_expression",format:"simple",operand:e,clauses:t,else:r.value}}(t,r,o):(Ae=e,e=i)}else Ae=e,e=i;else Ae=e,e=i;else Ae=e,e=i;else Ae=e,e=i;return e}())===i&&(e=function(){var e,t,r,n;if(e=Ae,Lt()!==i)if(Zt()!==i){for(t=[],r=yt();r!==i;)t.push(r),r=yt();t!==i&&(r=Zt())!==i&&(n=zt())!==i?e={type:"case_expression",format:"searched",clauses:t,else:null}:(Ae=e,e=i)}else Ae=e,e=i;else Ae=e,e=i;if(e===i)if(e=Ae,Lt()!==i)if(Zt()!==i){for(t=[],r=yt();r!==i;)t.push(r),r=yt();t!==i&&(r=Zt())!==i&&(n=mt())!==i&&Zt()!==i&&zt()!==i?e=function(e,t){return{type:"case_expression",format:"searched",clauses:e,else:t.value}}(t,n):(Ae=e,e=i)}else Ae=e,e=i;else Ae=e,e=i;return e}()),e}())===i&&(e=function(){var e,t;return(e=function(){var e;return(e=function(){var e,t,r,n;if(e=Ae,(t=it())!==i){for(r=[],n=at();n!==i;)r.push(n),n=at();r!==i?e=t=x(t,r):(Ae=e,e=i)}else Ae=e,e=i;return e}())!==i&&(e=e),e}())!==i&&(e=/^CURRENT_DATE$/i.test(t=e)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(t)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:t}),e}())===i&&(e=st())===i&&(e=Ae,Qt()!==i&&Zt()!==i&&(r=Ze())!==i&&Zt()!==i&&Ut()!==i?((n=r).paren=!0,e=n):(Ae=e,e=i)),e}function nt(){var e,t,r,n;if(e=Ae,(t=it())!==i){for(r=[],n=ot();n!==i;)r.push(n),n=ot();r!==i?e=t=x(t,r):(Ae=e,e=i)}else Ae=e,e=i;return e}function it(){var e;return S.test(t.charAt(Ae))?(e=t.charAt(Ae),Ae++):(e=i,0===De&&Ve(w)),e}function ot(){var e;return I.test(t.charAt(Ae))?(e=t.charAt(Ae),Ae++):(e=i,0===De&&Ve(T)),e}function at(){var e;return E.test(t.charAt(Ae))?(e=t.charAt(Ae),Ae++):(e=i,0===De&&Ve(M)),e}function st(){var e,r,n;return e=Ae,64===t.charCodeAt(Ae)?(r="@",Ae++):(r=i,0===De&&Ve(P)),r!==i&&(n=nt())!==i?e=r=[r,n]:(Ae=e,e=i),e!==i&&(e={type:"param",value:e[1]}),e}function ut(){var e;return(e=function(){var e,r,n,o;return e=Ae,"leading"===t.substr(Ae,7).toLowerCase()?(r=t.substr(Ae,7),Ae+=7):(r=i,0===De&&Ve(ce)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="LEADING":(Ae=e,e=i)):(Ae=e,e=i),e}())===i&&(e=function(){var e,r,n,o;return e=Ae,"trailing"===t.substr(Ae,8).toLowerCase()?(r=t.substr(Ae,8),Ae+=8):(r=i,0===De&&Ve(pe)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="TRAILING":(Ae=e,e=i)):(Ae=e,e=i),e}())===i&&(e=function(){var e,r,n,o;return e=Ae,"both"===t.substr(Ae,4).toLowerCase()?(r=t.substr(Ae,4),Ae+=4):(r=i,0===De&&Ve(de)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="BOTH":(Ae=e,e=i)):(Ae=e,e=i),e}()),e}function lt(){var e,r,n;return e=Ae,(r=function(){var e,t,r,n;return e=Ae,(t=ct())!==i&&Zt()!==i&&Qt()!==i&&Zt()!==i&&(r=dt())!==i&&Zt()!==i&&Ut()!==i?(n=r,e=t={type:"interval-period",period:t.value,precision:n,secondary:null}):(Ae=e,e=i),e===i&&(e=Ae,(t=ct())!==i&&(t=F(t)),e=t),e}())!==i&&Zt()!==i&&function(){var e,r,n,o;return e=Ae,"to"===t.substr(Ae,2).toLowerCase()?(r=t.substr(Ae,2),Ae+=2):(r=i,0===De&&Ve(fe)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="TO":(Ae=e,e=i)):(Ae=e,e=i),e}()!==i&&Zt()!==i&&(n=function(){var e,t,r,n;return e=Ae,(t=ct())!==i&&(t={type:"interval-period",period:t.value,precision:null,secondary:null}),(e=t)===i&&(e=Ae,(t=Dt())!==i&&Zt()!==i&&Qt()!==i&&Zt()!==i&&(r=dt())!==i&&Zt()!==i&&Vt()!==i&&Zt()!==i&&(n=pt())!==i&&Zt()!==i&&Ut()!==i?e=t=O(r,n):(Ae=e,e=i),e===i&&(e=Ae,(t=Dt())!==i&&Zt()!==i&&Qt()!==i&&Zt()!==i&&(r=dt())!==i&&Zt()!==i&&Ut()!==i?e=t={type:"interval-period",period:"second",precision:r,secondary:null}:(Ae=e,e=i),e===i&&(e=Ae,(t=Dt())!==i&&(t={type:"interval-period",period:"second",precision:null,secondary:null}),e=t))),e}())!==i?e=r={type:"interval-qualifier",start:r,end:n}:(Ae=e,e=i),e===i&&(e=function(){var e,t,r,n,o;return e=Ae,(t=ct())!==i&&Zt()!==i&&Qt()!==i&&Zt()!==i&&(r=pt())!==i&&Zt()!==i&&Ut()!==i?(o=r,e=t={type:"interval-period",period:t.value,precision:o,secondary:null}):(Ae=e,e=i),e===i&&(e=Ae,(t=ct())!==i&&(t=F(t)),(e=t)===i&&(e=Ae,(t=Dt())!==i&&Zt()!==i&&Qt()!==i&&Zt()!==i&&(r=dt())!==i&&Zt()!==i&&Vt()!==i&&Zt()!==i&&(n=pt())!==i&&Zt()!==i&&Ut()!==i?e=t=O(r,n):(Ae=e,e=i),e===i&&(e=Ae,(t=Dt())!==i&&Zt()!==i&&Qt()!==i&&Zt()!==i&&(r=pt())!==i&&Zt()!==i&&Ut()!==i?e=t=function(e){return{type:"interval-period",period:"second",precision:e,secondary:null}}(r):(Ae=e,e=i),e===i&&(e=Ae,(t=Dt())!==i&&(t={type:"interval-period",period:"second",precision:null,secondary:null}),e=t)))),e}()),e}function ct(){var e,t;return e=Ae,(t=Ct())!==i&&(t={type:"string",value:"day"}),(e=t)===i&&(e=Ae,(t=kt())!==i&&(t={type:"string",value:"hour"}),(e=t)===i&&(e=Ae,(t=Gt())!==i&&(t={type:"string",value:"minute"}),(e=t)===i&&(e=Ae,(t=At())!==i&&(t={type:"string",value:"month"}),(e=t)===i&&(e=Ae,(t=jt())!==i&&(t={type:"string",value:"year"}),e=t)))),e}function pt(){var e;return(e=xt())!==i&&(e=R(e)),e}function dt(){var e;return(e=xt())!==i&&(e=R(e)),e}function ft(){var e;return(e=ht())===i&&(e=st()),e}function ht(){var e,r,n,o,a;if(e=Ae,39===t.charCodeAt(Ae)?(r="'",Ae++):(r=i,0===De&&Ve(N)),r===i&&("N'"===t.substr(Ae,2)?(r="N'",Ae+=2):(r=i,0===De&&Ve(j))),r!==i){for(n=[],o=Ae,"''"===t.substr(Ae,2)?(a="''",Ae+=2):(a=i,0===De&&Ve(A)),a!==i&&(a="'"),(o=a)===i&&(C.test(t.charAt(Ae))?(o=t.charAt(Ae),Ae++):(o=i,0===De&&Ve(k)));o!==i;)n.push(o),o=Ae,"''"===t.substr(Ae,2)?(a="''",Ae+=2):(a=i,0===De&&Ve(A)),a!==i&&(a="'"),(o=a)===i&&(C.test(t.charAt(Ae))?(o=t.charAt(Ae),Ae++):(o=i,0===De&&Ve(k)));n!==i?(39===t.charCodeAt(Ae)?(o="'",Ae++):(o=i,0===De&&Ve(N)),o!==i?e=r={type:"string",value:n.join("")}:(Ae=e,e=i)):(Ae=e,e=i)}else Ae=e,e=i;return e}function yt(){var e,t,r;return e=Ae,qt()!==i&&Zt()!==i&&(t=Ze())!==i&&Zt()!==i&&Bt()!==i&&Zt()!==i&&(r=Ze())!==i?e=G(t,r):(Ae=e,e=i),e}function vt(){var e,t,r;return e=Ae,qt()!==i&&Zt()!==i&&(t=Ze())!==i&&Zt()!==i&&Bt()!==i&&Zt()!==i&&(r=Ze())!==i?e=G(t,r):(Ae=e,e=i),e}function mt(){var e,r;return e=Ae,function(){var e,r,n,o;return e=Ae,"else"===t.substr(Ae,4).toLowerCase()?(r=t.substr(Ae,4),Ae+=4):(r=i,0===De&&Ve(Te)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="ELSE":(Ae=e,e=i)):(Ae=e,e=i),e}()!==i&&Zt()!==i&&(r=Ze())!==i?e={type:"else_clause",value:r}:(Ae=e,e=i),e}function _t(){var e,r,n,o;return(e=xt())===i&&(e=Ae,45===t.charCodeAt(Ae)?(r="-",Ae++):(r=i,0===De&&Ve(_)),r===i&&(43===t.charCodeAt(Ae)?(r="+",Ae++):(r=i,0===De&&Ve(m))),r!==i&&(n=xt())!==i?(o=n,e=r=r[0]+o):(Ae=e,e=i)),e}function gt(){var e,r,n,o;return e=Ae,46===t.charCodeAt(Ae)?(r=".",Ae++):(r=i,0===De&&Ve(D)),r!==i?((n=xt())===i&&(n=null),n!==i?e=r="."+(null!=(o=n)?o:""):(Ae=e,e=i)):(Ae=e,e=i),e}function bt(){var e,r,n;return e=Ae,(r=function(){var e,r,n,o;return e=Ae,q.test(t.charAt(Ae))?(r=t.charAt(Ae),Ae++):(r=i,0===De&&Ve(B)),r!==i?(V.test(t.charAt(Ae))?(n=t.charAt(Ae),Ae++):(n=i,0===De&&Ve(Q)),n===i&&(n=null),n!==i?e=r="e"+(null===(o=n)?"":o):(Ae=e,e=i)):(Ae=e,e=i),e}())!==i&&(n=xt())!==i?e=r+=n:(Ae=e,e=i),e}function xt(){var e,t;if(e=[],(t=St())!==i)for(;t!==i;)e.push(t),t=St();else e=i;return e!==i&&(e=e.join("")),e}function St(){var e;return L.test(t.charAt(Ae))?(e=t.charAt(Ae),Ae++):(e=i,0===De&&Ve(z)),e}function wt(){var e,r,n,o;return e=Ae,"in"===t.substr(Ae,2).toLowerCase()?(r=t.substr(Ae,2),Ae+=2):(r=i,0===De&&Ve(Y)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="IN":(Ae=e,e=i)):(Ae=e,e=i),e}function It(){var e,r,n,o;return e=Ae,"is"===t.substr(Ae,2).toLowerCase()?(r=t.substr(Ae,2),Ae+=2):(r=i,0===De&&Ve(W)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="IS":(Ae=e,e=i)):(Ae=e,e=i),e}function Tt(){var e,r,n,o;return e=Ae,"like"===t.substr(Ae,4).toLowerCase()?(r=t.substr(Ae,4),Ae+=4):(r=i,0===De&&Ve(H)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="LIKE":(Ae=e,e=i)):(Ae=e,e=i),e}function Et(){var e,r,n,o;return e=Ae,"not"===t.substr(Ae,3).toLowerCase()?(r=t.substr(Ae,3),Ae+=3):(r=i,0===De&&Ve(K)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="NOT":(Ae=e,e=i)):(Ae=e,e=i),e}function Mt(){var e,r,n,o;return e=Ae,"and"===t.substr(Ae,3).toLowerCase()?(r=t.substr(Ae,3),Ae+=3):(r=i,0===De&&Ve($)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="AND":(Ae=e,e=i)):(Ae=e,e=i),e}function Pt(){var e,r,n,o;return e=Ae,"or"===t.substr(Ae,2).toLowerCase()?(r=t.substr(Ae,2),Ae+=2):(r=i,0===De&&Ve(ee)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="OR":(Ae=e,e=i)):(Ae=e,e=i),e}function Ft(){var e,r,n,o;return e=Ae,"between"===t.substr(Ae,7).toLowerCase()?(r=t.substr(Ae,7),Ae+=7):(r=i,0===De&&Ve(te)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="BETWEEN":(Ae=e,e=i)):(Ae=e,e=i),e}function Ot(){var e,r,n,o;return e=Ae,"from"===t.substr(Ae,4).toLowerCase()?(r=t.substr(Ae,4),Ae+=4):(r=i,0===De&&Ve(re)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="FROM":(Ae=e,e=i)):(Ae=e,e=i),e}function Rt(){var e,r,n,o;return e=Ae,"trim"===t.substr(Ae,4).toLowerCase()?(r=t.substr(Ae,4),Ae+=4):(r=i,0===De&&Ve(ae)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="TRIM":(Ae=e,e=i)):(Ae=e,e=i),e}function Nt(){var e,r,n,o;return e=Ae,"interval"===t.substr(Ae,8).toLowerCase()?(r=t.substr(Ae,8),Ae+=8):(r=i,0===De&&Ve(he)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="INTERVAL":(Ae=e,e=i)):(Ae=e,e=i),e}function jt(){var e,r,n,o;return e=Ae,"year"===t.substr(Ae,4).toLowerCase()?(r=t.substr(Ae,4),Ae+=4):(r=i,0===De&&Ve(ye)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="YEAR":(Ae=e,e=i)):(Ae=e,e=i),e}function At(){var e,r,n,o;return e=Ae,"month"===t.substr(Ae,5).toLowerCase()?(r=t.substr(Ae,5),Ae+=5):(r=i,0===De&&Ve(ve)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="MONTH":(Ae=e,e=i)):(Ae=e,e=i),e}function Ct(){var e,r,n,o;return e=Ae,"day"===t.substr(Ae,3).toLowerCase()?(r=t.substr(Ae,3),Ae+=3):(r=i,0===De&&Ve(me)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="DAY":(Ae=e,e=i)):(Ae=e,e=i),e}function kt(){var e,r,n,o;return e=Ae,"hour"===t.substr(Ae,4).toLowerCase()?(r=t.substr(Ae,4),Ae+=4):(r=i,0===De&&Ve(_e)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="HOUR":(Ae=e,e=i)):(Ae=e,e=i),e}function Gt(){var e,r,n,o;return e=Ae,"minute"===t.substr(Ae,6).toLowerCase()?(r=t.substr(Ae,6),Ae+=6):(r=i,0===De&&Ve(ge)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="MINUTE":(Ae=e,e=i)):(Ae=e,e=i),e}function Dt(){var e,r,n,o;return e=Ae,"second"===t.substr(Ae,6).toLowerCase()?(r=t.substr(Ae,6),Ae+=6):(r=i,0===De&&Ve(be)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="SECOND":(Ae=e,e=i)):(Ae=e,e=i),e}function Lt(){var e,r,n,o;return e=Ae,"case"===t.substr(Ae,4).toLowerCase()?(r=t.substr(Ae,4),Ae+=4):(r=i,0===De&&Ve(xe)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="CASE":(Ae=e,e=i)):(Ae=e,e=i),e}function zt(){var e,r,n,o;return e=Ae,"end"===t.substr(Ae,3).toLowerCase()?(r=t.substr(Ae,3),Ae+=3):(r=i,0===De&&Ve(Se)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="END":(Ae=e,e=i)):(Ae=e,e=i),e}function qt(){var e,r,n,o;return e=Ae,"when"===t.substr(Ae,4).toLowerCase()?(r=t.substr(Ae,4),Ae+=4):(r=i,0===De&&Ve(we)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="WHEN":(Ae=e,e=i)):(Ae=e,e=i),e}function Bt(){var e,r,n,o;return e=Ae,"then"===t.substr(Ae,4).toLowerCase()?(r=t.substr(Ae,4),Ae+=4):(r=i,0===De&&Ve(Ie)),r!==i?(n=Ae,De++,o=ot(),De--,o===i?n=void 0:(Ae=n,n=i),n!==i?e=r="THEN":(Ae=e,e=i)):(Ae=e,e=i),e}function Vt(){var e;return 44===t.charCodeAt(Ae)?(e=",",Ae++):(e=i,0===De&&Ve(Ee)),e}function Qt(){var e;return 40===t.charCodeAt(Ae)?(e="(",Ae++):(e=i,0===De&&Ve(Me)),e}function Ut(){var e;return 41===t.charCodeAt(Ae)?(e=")",Ae++):(e=i,0===De&&Ve(Pe)),e}function Zt(){var e,t;for(e=[],t=Jt();t!==i;)e.push(t),t=Jt();return e}function Jt(){var e;return Fe.test(t.charAt(Ae))?(e=t.charAt(Ae),Ae++):(e=i,0===De&&Ve(Oe)),e}function Yt(e,t,r,n){var i={type:"binary_expr",operator:e,left:t,right:r};return void 0!==n&&(i.escape=n),i}function Wt(e,t){for(var r=e,n=0;n<t.length;n++)r=Yt(t[n][1],r,t[n][3]);return r}if((n=a())!==i&&Ae===t.length)return n;throw n!==i&&Ae<t.length&&Ve({type:"end"}),function(t,r,n){return new e(e.buildMessage(t,r),t,r,n)}(Ge,ke<t.length?t.charAt(ke):null,ke<t.length?Be(ke,ke+1):Be(ke,ke))}}})?n.apply(null,i):n)||(e.exports=o)},kKuP:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ycL1"),r("Vx27"),r("ml7j")],void 0===(i=function(e,t,r,n,i,o){return function(e){function t(t){var r=e.call(this,t)||this;return r.value=0,r.unit="milliseconds",r}var n;return r.__extends(t,e),n=t,t.prototype.toMilliseconds=function(){return this.value*o.millisecondsPerTimeUnit[this.unit]},t.prototype.clone=function(){return new n({value:this.value,unit:this.unit})},r.__decorate([i.property({type:Number,json:{write:!0},nonNullable:!0})],t.prototype,"value",void 0),r.__decorate([i.property({type:o.timeUnitKebabDictionary.apiValues,json:{type:o.timeUnitKebabDictionary.jsonValues,read:o.timeUnitKebabDictionary.read,write:o.timeUnitKebabDictionary.write},nonNullable:!0})],t.prototype,"unit",void 0),n=r.__decorate([i.subclass("esri.TimeInterval")],t)}(n.JSONSupport)}.apply(null,n))||(e.exports=i)},l8NS:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("nRUF")],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0}return e.fixDefaults=function(e){if(null!==e.precision||null!==e.secondary)throw new Error("Primary and Secondary SqlInterval qualifiers not supported")},e.createFromMilliseconds=function(t){var r=new e;return r.second=t/1e3,r},e.createFromValueAndQualifer=function(t,r,n){var i=new e;if(i.op="-"===n?"-":"+","interval-period"===r.type){e.fixDefaults(r);var o=new RegExp("^[0-9]{1,}$");if("year"===r.period||"month"===r.period)throw new Error("Year-Month Intervals not supported");if(!o.test(t))throw new Error("Illegal Interval");i[r.period]=parseFloat(t)}else{if(e.fixDefaults(r.start),e.fixDefaults(r.end),"year"===r.start.period||"month"===r.start.period)throw new Error("Year-Month Intervals not supported");if("year"===r.end.period||"month"===r.end.period)throw new Error("Year-Month Intervals not supported");switch(r.start.period){case"day":switch(r.end.period){case"hour":if(!new RegExp("^[0-9]{1,} [0-9]{1,}$").test(t))throw new Error("Illegal Interval");i[r.start.period]=parseFloat(t.split(" ")[0]),i[r.end.period]=parseFloat(t.split(" ")[1]);break;case"minute":if(!new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$").test(t))throw new Error("Illegal Interval");i[r.start.period]=parseFloat(t.split(" ")[0]);var a=t.split(" ")[1].split(":");i.hour=parseFloat(a[0]),i.minute=parseFloat(a[1]);break;case"second":if(!new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$").test(t))throw new Error("Illegal Interval");i[r.start.period]=parseFloat(t.split(" ")[0]),a=t.split(" ")[1].split(":"),i.hour=parseFloat(a[0]),i.minute=parseFloat(a[1]),i.second=parseFloat(a[2]);break;default:throw"Invalid Interval."}break;case"hour":switch(r.end.period){case"minute":if(!new RegExp("^[0-9]{1,}:[0-9]{1,}$").test(t))throw new Error("Illegal Interval");i.hour=parseFloat(t.split(":")[0]),i.minute=parseFloat(t.split(":")[1]);break;case"second":if(!new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$").test(t))throw new Error("Illegal Interval");a=t.split(":"),i.hour=parseFloat(a[0]),i.minute=parseFloat(a[1]),i.second=parseFloat(a[2]);break;default:throw"Invalid Interval."}break;case"minute":switch(r.end.period){case"second":if(!new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$").test(t))throw new Error("Illegal Interval");a=t.split(":"),i.minute=parseFloat(a[0]),i.second=parseFloat(a[1]);break;default:throw"Invalid Interval."}break;default:throw"Invalid Interval."}}return i},e.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)},e}();t.SqlInterval=n,t.evaluateFunction=function(e,t){var r=i[e.toLowerCase()];if(null==r)throw new Error("Function Not Recognised");if(t.length<r.minParams||t.length>r.maxParams)throw new Error("Invalid Parameter count for call to "+e.toUpperCase());return r.evaluate(t)},t.isStandardized=function(e,t){var r=i[e.toLowerCase()];return null!=r&&t>=r.minParams&&t<=r.maxParams};var i={extract:{minParams:2,maxParams:2,evaluate:function(e){var t=e[0],r=e[1];if(null==r)return null;if(r instanceof Date)switch(t.toUpperCase()){case"SECOND":return r.getSeconds();case"MINUTE":return r.getMinutes();case"HOUR":return r.getHours();case"DAY":return r.getDate();case"MONTH":return r.getMonth()+1;case"YEAR":return r.getFullYear()}throw new Error("Invalid Parameter for call to EXTRACT")}},substring:{minParams:2,maxParams:3,evaluate:function(e){if(2===e.length){var t=e[0],r=e[1];return null==t||null==r?null:t.toString().substring(r-1)}if(3===e.length){t=e[0],r=e[1];var n=e[2];return null==t||null==r||null==n?null:n<=0?"":t.toString().substring(r-1,r+n-1)}}},position:{minParams:2,maxParams:2,evaluate:function(e){var t=e[0],r=e[1];return null==t||null==r?null:r.indexOf(t)+1}},trim:{minParams:2,maxParams:3,evaluate:function(e){var t=3===e.length,n=t?e[1]:" ",i=t?e[2]:e[1];if(null==n||null==i)return null;var o="("+r.escapeRegExpString(n)+")";switch(e[0]){case"BOTH":return i.replace(new RegExp("^"+o+"*|"+o+"*$","g"),"");case"LEADING":return i.replace(new RegExp("^"+o+"*","g"),"");case"TRAILING":return i.replace(new RegExp(o+"*$","g"),"")}throw new Error("Invalid Parameter for call to TRIM")}},abs:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.abs(e[0])}},ceiling:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.ceil(e[0])}},floor:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.floor(e[0])}},log:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.log(e[0])}},log10:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.log(e[0])*Math.LOG10E}},sin:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.sin(e[0])}},cos:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.cos(e[0])}},tan:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.tan(e[0])}},asin:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.asin(e[0])}},acos:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.acos(e[0])}},atan:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.atan(e[0])}},sign:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:e[0]>0?1:e[1]<0?-1:0}},power:{minParams:2,maxParams:2,evaluate:function(e){return null==e[0]||null==e[1]?null:Math.pow(e[0],e[1])}},mod:{minParams:2,maxParams:2,evaluate:function(e){return null==e[0]||null==e[1]?null:e[0]%e[1]}},round:{minParams:1,maxParams:2,evaluate:function(e){var t=e[0],r=2===e.length?Math.pow(10,e[1]):1;return null==t?null:Math.round(t*r)/r}},truncate:{minParams:1,maxParams:2,evaluate:function(e){return null==e[0]?null:1===e.length?parseInt(e[0].toFixed(0),10):parseFloat(e[0].toFixed(e[1]))}},char_length:{minParams:1,maxParams:1,evaluate:function(e){return"string"==typeof e[0]||e[0]instanceof String?e[0].length:0}},concat:{minParams:1,maxParams:1/0,evaluate:function(e){for(var t="",r=0;r<e.length;r++){if(null==e[r])return null;t+=e[r].toString()}return t}},lower:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:e[0].toString().toLowerCase()}},upper:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:e[0].toString().toUpperCase()}}}}.apply(null,n))||(e.exports=i)},nbtx:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("rg9i"),r("Vx27"),r("zF2V"),r("fg2P")],void 0===(i=function(e,t,r,n,i,o,a){return function(e){function t(t){var r=e.call(this,t)||this;return r.displayCount=null,r.displayType="list",r.editable=!0,r.orderByFields=null,r.relationshipId=null,r.type="relationship",r}var o;return r.__extends(t,e),o=t,t.prototype.clone=function(){return new o({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:n.clone(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})},r.__decorate([i.property({type:Number,json:{write:!0}})],t.prototype,"displayCount",void 0),r.__decorate([i.property({type:["list"],json:{write:!0}})],t.prototype,"displayType",void 0),r.__decorate([i.property({type:Boolean,json:{default:!0,write:!0}})],t.prototype,"editable",void 0),r.__decorate([i.property({type:[a],json:{write:!0}})],t.prototype,"orderByFields",void 0),r.__decorate([i.property({type:Number,json:{write:!0}})],t.prototype,"relationshipId",void 0),r.__decorate([i.property({type:["relationship"],json:{read:!1,write:!0}})],t.prototype,"type",void 0),o=r.__decorate([i.subclass("esri.form.elements.RelationshipElement")],t)}(o.Element)}.apply(null,n))||(e.exports=i)},oWCy:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("qMld"),r("jBNx"),r("fb50"),r("YaB4"),r("tI6k"),r("wjMf")],void 0===(i=function(e,t,r,n,i,o,a,s,u){Object.defineProperty(t,"__esModule",{value:!0});var l={"simple-marker":1,"picture-marker":1,text:1,"simple-line":1,"simple-fill":1,"picture-fill":1,cim:1,"web-style":1};t.computePxBuffer=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var o,a,s,u,l,c,p;return r.__generator(this,(function(r){switch(r.label){case 0:if("heatmap"===e.type)return[2,Math.round(3*e.blurRadius)];if("dot-density"===e.type)return[2,0];if("dictionary"===e.type)return"esriGeometryPoint"===t||"esriGeometryMultipoint"===t?[2,100]:[2,50];for(o=e.getSymbols(),a=function(e){if(!("visualVariables"in e))return 0;if(!e.hasVisualVariables("size"))return 0;var t=e.getVisualVariablesForType("size");if(!t[0])return 0;var r=t[0];return"stops"===r.transformationType?r.stops.map((function(e){return e.size})).reduce(m,0):"clamped-linear"===r.transformationType?"number"==typeof r.maxSize?r.maxSize:r.maxSize.stops.map((function(e){return e.size})).reduce(m,0):"real-world-size"===r.transformationType?30:void 0}(e),s=[],u=0,l=o;u<l.length;u++)c=l[u],s.push(y(c,a));return[4,n.all(s)];case 1:return p=r.sent(),[2,i.pt2px(p.reduce(m,0))]}}))}))};var c=[0,0,0,0];function p(e,t){return null==e?t:e}function d(e,t){return null==e.outline?t:p(e.outline.width,t)}var f={sdf:!0,code:99,metrics:s.AVERAGE_GLYPH_MOSAIC_ITEM.metrics,rect:new o.default(0,0,24,24),page:0,textureBinding:2};function h(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,s,l,y,m,_,g,b,x,S,w,I;return r.__generator(this,(function(T){switch(T.label){case 0:return"simple-marker"===e.type?(n=Math.max(p(e.size,12),t),[2,v(e)+.707*n]):"picture-marker"===e.type?(i=Math.max(p(e.height,12),t),o=p(e.width,12)*(i/p(e.height,12)),s=o/2,l=i/2,[2,v(e)+Math.sqrt(s*s+l*l)]):"text"===e.type?(y=function(e){var t=e.text&&e.text.length;if(!t)return{glyphMosaicItems:[f]};for(var n=[],i=0;i<t;i++)n.push(r.__assign(r.__assign({},f),{code:e.text.charCodeAt(i)}));return{glyphMosaicItems:n}}(e),u.getTextSymbolSize(c,e,y),m=Math.abs(c[0]),_=Math.abs(c[1]),g=c[2],b=c[3],[2,Math.max(m,_)+Math.max(g,b)]):"simple-line"===e.type?(x=e,S=Math.max(p(x.width,.75),t)/2,x.marker?[2,Math.max(6*x.width,2*t)]:[2,S]):"simple-fill"===e.type||"picture-fill"===e.type?[2,Math.max(d(e,0),t)/2]:"cim"===e.type?(w=a.CIMSymbolHelper.getEnvelope(e.data))?[2,Math.sqrt(w.width*w.width+w.height*w.height)]:[2,0]:"web-style"!==e.type?[3,2]:(I=h,[4,e.fetchCIMSymbol()]);case 1:return[2,I.apply(void 0,[T.sent(),t])];case 2:return[2,0]}}))}))}function y(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return function(e){return e.type in l}(e)?(i=(n=Math).min,[4,h(e,t)]):[2,0];case 1:return[2,i.apply(n,[r.sent(),75])]}}))}))}function v(e){var t=p(e.xoffset,0),r=p(e.yoffset,0);return Math.sqrt(t*t+r*r)}function m(e,t){return Math.max(e,t)}}.apply(null,n))||(e.exports=i)},rQqI:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("Vx27"),r("zF2V"),r("QmSy"),r("ZsQS")],void 0===(i=function(e,t,r,n,i,o,a){return function(e){function t(t){var r=e.call(this,t)||this;return r.domain=null,r.editable=!0,r.fieldName=null,r.hint=null,r.input=null,r.requiredExpression=null,r.type="field",r}var i;return r.__extends(t,e),i=t,t.prototype.clone=function(){return new i({description:this.description,domain:this.domain,editable:this.editable,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,visibilityExpression:this.visibilityExpression})},r.__decorate([n.property({types:a.types,json:{read:{reader:a.fromJSON},write:!0}})],t.prototype,"domain",void 0),r.__decorate([n.property({type:Boolean,json:{default:!0,write:!0}})],t.prototype,"editable",void 0),r.__decorate([n.property({type:String,json:{write:!0}})],t.prototype,"fieldName",void 0),r.__decorate([n.property({type:String,json:{write:!0}})],t.prototype,"hint",void 0),r.__decorate([n.property({types:o.types,json:{read:{source:"inputType"},write:{target:"inputType"}}})],t.prototype,"input",void 0),r.__decorate([n.property({type:String,json:{write:!0}})],t.prototype,"requiredExpression",void 0),r.__decorate([n.property({type:String,json:{read:!1,write:!0}})],t.prototype,"type",void 0),i=r.__decorate([n.subclass("esri.form.elements.FieldElement")],t)}(i.Element)}.apply(null,n))||(e.exports=i)},rfv1:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("BcWh"),r("qsST"),r("LxLY"),r("WRgd"),r("lRq4"),r("nrlZ"),r("+6sX"),r("2xGR"),r("ZGAQ"),r("yLD6")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,p,d,f){Object.defineProperty(t,"__esModule",{value:!0});var h=o.getLogger("esri.layers.graphics.data.FeatureStore"),y=function(){function e(e){this.geometryInfo=e,this._boundsStore=new p.BoundsStore,this._featuresById=new Map,this._markedIds=new Set,this.events=new i,this.featureAdapter=f.optimizedFeatureQueryEngineAdapter}return Object.defineProperty(e.prototype,"geometryType",{get:function(){return this.geometryInfo.geometryType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasM",{get:function(){return this.geometryInfo.hasM},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasZ",{get:function(){return this.geometryInfo.hasZ},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numFeatures",{get:function(){return this._featuresById.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullBounds",{get:function(){var e=this;if(!this.numFeatures)return null;var t=u.create(u.NEGATIVE_INFINITY);return this._featuresById.forEach((function(r){var n=e._boundsStore.get(r.objectId);n&&(t[0]=Math.min(n[0],t[0]),t[1]=Math.min(n[1],t[1]),t[2]=Math.max(n[2],t[2]),t[3]=Math.max(n[3],t[3]))})),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"storeStatistics",{get:function(){var e=0;return this._featuresById.forEach((function(t){t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}},enumerable:!0,configurable:!0}),e.prototype.add=function(e){this._add(e),this._emitChanged()},e.prototype.addMany=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this._add(n)}this._emitChanged()},e.prototype.clear=function(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()},e.prototype.removeById=function(e){var t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null},e.prototype.removeManyById=function(e){this._boundsStore.invalidateIndex();for(var t=0,r=e;t<r.length;t++){var n=r[t],i=this._featuresById.get(n);i&&this._remove(i)}this._emitChanged()},e.prototype.forEachBounds=function(e,t,r){for(var n=0,i=e;n<i.length;n++){var o=i[n],a=this._boundsStore.get(o.objectId);a&&t(s.fromRect(r,a))}},e.prototype.getFeature=function(e){return this._featuresById.get(e)},e.prototype.has=function(e){return this._featuresById.has(e)},e.prototype.forEach=function(e){this._featuresById.forEach((function(t){return e(t)}))},e.prototype.forEachInBounds=function(e,t){var r=this;this._boundsStore.forEachInBounds(e,(function(e){t(r._featuresById.get(e))}))},e.prototype.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex(),this._markedIds.clear()},e.prototype.sweep=function(){var e=this,t=!1;this._featuresById.forEach((function(r,n){e._markedIds.has(n)||(t=!0,e._remove(r))})),this._markedIds.clear(),t&&this._emitChanged()},e.prototype.executeTileQuery=function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s,c,p,f,h,y,v,m,_,g,b;return r.__generator(this,(function(r){return i=n.returnGeometry,o=n.returnCentroid,a=n.returnOutline,s=n.pixelBuffer,c=new Set,p=[],f=s*e.resolution,h=u.pad(e.bounds,f,u.create()),d.createTileFeatures(p,c,this.geometryInfo,this,h,i,o,a,{originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[e.bounds[0],e.bounds[3]]}),("esriGeometryPoint"===this.geometryType||o)&&(y=l.getInfo(t))&&(v=y.valid,m=v[0],_=v[1],h[0]<m&&(g=u.fromValues(_-f,h[1],_,h[3]),d.createTileFeatures(p,c,this.geometryInfo,this,g,i,o,a,{originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[_,e.bounds[3]]})),h[2]>_&&(b=u.fromValues(m,h[1],m+f,h[3]),d.createTileFeatures(p,c,this.geometryInfo,this,b,i,o,a,{originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[m-_+e.bounds[0],e.bounds[3]]}))),p.sort((function(e,t){return e.localId-t.localId})),[2,{features:p,objectIds:c}]}))}))},e.prototype._emitChanged=function(){this.events.emit("changed",void 0)},e.prototype._add=function(e){if(e){var t=e.objectId;if(null!=t){var r,i=this._featuresById.get(t);if(this._markedIds.add(t),i?(e.localId=i.localId,r=this._boundsStore.get(t),this._boundsStore.delete(t)):a.isSome(this.onFeatureAdd)&&this.onFeatureAdd(e),!e.geometry||!e.geometry.coords||!e.geometry.coords.length)return this._boundsStore.set(t,null),void this._featuresById.set(t,e);r=c.getBoundsOptimizedGeometry(r||u.create(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(t,r),this._featuresById.set(t,e)}else h.error(new n("featurestore:invalid-feature","feature id is missing",{feature:e}))}},e.prototype._remove=function(e){return a.isSome(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e},e}();t.default=y}.apply(null,n))||(e.exports=i)},sBRY:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("rg9i"),r("Vx27"),r("Mp9H"),r("4SXU"),r("zF2V"),r("aXZa")],void 0===(i=function(e,t,r,n,i,o,a,s,u){return function(e){function t(t){var r=e.call(this,t)||this;return r.elements=null,r.initialState="expanded",r.type="group",r}var s;return r.__extends(t,e),s=t,t.prototype.castElements=function(e){return u.ensureType(e,!1)},t.prototype.readElements=function(e,t){return u.fromJSON(t.formElements,!1)},t.prototype.writeElements=function(e,t){t.formElements=u.toJSON(e,!1)},t.prototype.clone=function(){return new s({description:this.description,elements:n.clone(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})},r.__decorate([i.property({json:{write:!0}})],t.prototype,"elements",void 0),r.__decorate([o.cast("elements")],t.prototype,"castElements",null),r.__decorate([i.reader("elements",["formElements"])],t.prototype,"readElements",null),r.__decorate([a.writer("elements")],t.prototype,"writeElements",null),r.__decorate([i.property({type:["collapsed","expanded"],json:{default:"expanded",write:!0}})],t.prototype,"initialState",void 0),r.__decorate([i.property({type:String,json:{read:!1,write:!0}})],t.prototype,"type",void 0),s=r.__decorate([i.subclass("esri.form.elements.GroupElement")],t)}(s.Element)}.apply(null,n))||(e.exports=i)},sqdO:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("zp6E"),r("jfWY"),r("Lzvl")],void 0===(i=function(e,t,r,n,i,o){function a(e){return{geometryType:o.getJsonType(e[0]),geometries:e.map((function(e){return e.toJSON()}))}}function s(e,t,r){var n=o.getGeometryType(t);return e.map((function(e){var t=n.fromJSON(e);return t.spatialReference=r,t}))}Object.defineProperty(t,"__esModule",{value:!0}),t.simplify=function(e,t,u){return r.__awaiter(this,void 0,void 0,(function(){var l,c,p,d;return r.__generator(this,(function(f){switch(f.label){case 0:return l="string"==typeof e?i.urlToObject(e):e,c=t[0].spatialReference,p=o.getJsonType(t[0]),d=r.__assign(r.__assign({},u),{query:r.__assign(r.__assign({},l.query),{f:"json",sr:c.wkid?c.wkid:JSON.stringify(c),geometries:JSON.stringify(a(t))})}),[4,n(l.path+"/simplify",d)];case 1:return[2,s(f.sent().data,p,c)]}}))}))}}.apply(null,n))||(e.exports=i)},tZaU:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("qMld")],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._tasks=new Array}return Object.defineProperty(e.prototype,"length",{get:function(){return this._tasks.length},enumerable:!0,configurable:!0}),e.prototype.push=function(e){var t=this;return r.create((function(r,n){return t._tasks.push(new i(r,n,e))}))},e.prototype.unshift=function(e){var t=this;return r.create((function(r,n){return t._tasks.unshift(new i(r,n,e))}))},e.prototype.process=function(){if(0===this._tasks.length)return!1;var e=this._tasks.shift();try{var t=e.callback();t&&"then"in t&&"function"==typeof t.then?t.then(e.resolve,e.reject):e.resolve(t)}catch(t){e.reject(t)}return!0},e.prototype.cancelAll=function(){for(var e=r.createAbortError(),t=0,n=this._tasks;t<n.length;t++)n[t].reject(e);this._tasks.length=0},e}();t.default=n;var i=function(e,t,r){this.resolve=e,this.reject=t,this.callback=r}}.apply(null,n))||(e.exports=i)},vjUK:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.aggregateFunction=function(e,t){var n=r[e.toLowerCase()];if(null==n)throw new Error("Function Not Recognised");if(t.length<n.minParams||t.length>n.maxParams)throw new Error("Invalid Parameter count for call to "+e.toUpperCase());return n.evaluate(t)},t.isAggregate=function(e,t){var n=r[e.toLowerCase()];return null!=n&&t>=n.minParams&&t<=n.maxParams};var r={min:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.min.apply(Math,e[0])}},max:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.max.apply(Math,e[0])}},avg:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:n(e[0])}},sum:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t}(e[0])}},stddev:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.sqrt(i(e[0]))}},count:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:e[0].length}},var:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:i(e[0])}}};function n(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t/e.length}function i(e){for(var t=n(e),r=e.length,i=0,o=0,a=e;o<a.length;o++){var s=a[o];i+=Math.pow(s-t,2)}return r>1?i/(r-1):0}}.apply(null,n))||(e.exports=i)},w1v0:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("TMur"),r("jZlN"),r("ImIS"),r("ycL1"),r("LxLY"),r("Vx27"),r("Z4y+"),r("Lzvl"),r("KQcO")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,p){var d=new o.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),f=function(e){function t(t){var r=e.call(this,t)||this;return r.displayFieldName=null,r.exceededTransferLimit=!1,r.features=[],r.fields=null,r.geometryType=null,r.hasM=!1,r.hasZ=!1,r.queryGeometry=null,r.spatialReference=null,r}return r.__extends(t,e),t.prototype.readFeatures=function(e,t){for(var r=l.fromJSON(t.spatialReference),n=[],o=0;o<e.length;o++){var a=e[o],u=i.fromJSON(a),c=a.geometry&&a.geometry.spatialReference;s.isSome(u.geometry)&&!c&&(u.geometry.spatialReference=r),n.push(u)}return n},t.prototype.writeGeometryType=function(e,t,r,n){if(e)d.write(e,t,r,n);else{var i=this.features;if(i)for(var o=0,a=i;o<a.length;o++){var u=a[o];if(u&&s.isSome(u.geometry))return void d.write(u.geometry.type,t,r,n)}}},t.prototype.writeSpatialReference=function(e,t){if(e)t.spatialReference=e.toJSON();else{var r=this.features;if(r)for(var n=0,i=r;n<i.length;n++){var o=i[n];o&&s.isSome(o.geometry)&&o.geometry.spatialReference&&(t.spatialReference=o.geometry.spatialReference.toJSON())}}},t.prototype.toJSON=function(e){var t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var n=t.features[r];if(n.geometry){var i=e&&e[r];n.geometry=i&&i.toJSON()||n.geometry}}return t},t.prototype.quantize=function(e){for(var t=e.scale,r=t[0],n=t[1],i=e.translate,o=i[0],a=i[1],u=this.features,l=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-o)/r)}),(function(e){return Math.round((a-e)/n)})),c=0,p=u.length;c<p;c++)l(s.unwrap(u[c].geometry))||(u.splice(c,1),c--,p--);return this.transform=e,this},t.prototype.unquantize=function(){var e=this.geometryType,t=this.features,r=this.transform;if(!r)return this;for(var n=r.translate,i=n[0],o=n[1],a=r.scale,u=a[0],l=a[1],c=this._getHydrationFunction(e,(function(e){return e*u+i}),(function(e){return o-e*l})),p=0,d=t;p<d.length;p++){var f=d[p].geometry;s.isSome(f)&&c(f)}return this},t.prototype._quantizePoints=function(e,t,r){for(var n,i,o=[],a=0,s=e.length;a<s;a++){var u=e[a];if(a>0){var l=t(u[0]),c=r(u[1]);l===n&&c===i||(o.push([l-n,c-i]),n=l,i=c)}else n=t(u[0]),i=r(u[1]),o.push([n,i])}return o.length>0?o:null},t.prototype._getQuantizationFunction=function(e,t,r){var n=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var i=c.isPolygon(e)?e.rings:e.paths,o=[],a=0,s=i.length;a<s;a++){var u=i[a],l=n._quantizePoints(u,t,r);l&&o.push(l)}return o.length>0?(c.isPolygon(e)?e.rings=o:e.paths=o,e):null}:"multipoint"===e?function(e){var i;return(i=n._quantizePoints(e.points,t,r)).length>0?(e.points=i,e):null}:"extent"===e?function(e){return e}:null},t.prototype._getHydrationFunction=function(e,t,r){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?function(e){for(var n,i,o=c.isPolygon(e)?e.rings:e.paths,a=0,s=o.length;a<s;a++)for(var u=o[a],l=0,p=u.length;l<p;l++){var d=u[l];l>0?(n+=d[0],i+=d[1]):(n=d[0],i=d[1]),d[0]=t(n),d[1]=r(i)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?function(e){for(var n,i,o=e.points,a=0,s=o.length;a<s;a++){var u=o[a];a>0?(n+=u[0],i+=u[1]):(n=u[0],i=u[1]),u[0]=t(n),u[1]=r(i)}}:void 0},r.__decorate([u.property({type:String,json:{write:!0}})],t.prototype,"displayFieldName",void 0),r.__decorate([u.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"exceededTransferLimit",void 0),r.__decorate([u.property({type:[i],json:{write:!0}})],t.prototype,"features",void 0),r.__decorate([u.reader("features")],t.prototype,"readFeatures",null),r.__decorate([u.property({type:[p],json:{write:!0}})],t.prototype,"fields",void 0),r.__decorate([u.property({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:d.read}}})],t.prototype,"geometryType",void 0),r.__decorate([u.writer("geometryType")],t.prototype,"writeGeometryType",null),r.__decorate([u.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasM",void 0),r.__decorate([u.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasZ",void 0),r.__decorate([u.property({types:n.geometryTypes,json:{read:c.fromJSON,write:!0}})],t.prototype,"queryGeometry",void 0),r.__decorate([u.property({type:l,json:{write:!0}})],t.prototype,"spatialReference",void 0),r.__decorate([u.writer("spatialReference")],t.prototype,"writeSpatialReference",null),r.__decorate([u.property({json:{write:!0}})],t.prototype,"transform",void 0),r.__decorate([u.subclass("esri.tasks.support.FeatureSet")],t)}(a.JSONSupport);return f.prototype.toJSON.isDefaultToJSON=!0,f||(f={}),f}.apply(null,n))||(e.exports=i)},w7fK:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("KFwS"),r("H1tY"),r("qMld"),r("2Kdy")],void 0===(i=function(e,t,n,i,o,a){var s,u,l,c,p,d;function f(e){function r(e,t,r){e[t]=r(e[t])}t._pe=e,u.init(),l.init(),c.init(),p.init(),d.init(),t.PeGCSExtent=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(r,e),r.prototype.destroy=function(){t._pe.destroy(this)},r}(t._pe.PeGCSExtent);for(var i=0,o=[t._pe.PeDatum,t._pe.PeGeogcs,t._pe.PeGeogtran,t._pe.PeObject,t._pe.PeParameter,t._pe.PePrimem,t._pe.PeProjcs,t._pe.PeSpheroid,t._pe.PeUnit];i<o.length;i++)r(o[i].prototype,"getName",(function(e){return function(){return e.call(this,new Array(u.PE_NAME_MAX))}}));for(var a=0,s=[t._pe.PeGeogtran,t._pe.PeProjcs];a<s.length;a++)r(s[a].prototype,"getParameters",(function(e){return function(){for(var r=new Array(u.PE_PARM_MAX),n=e.call(this),i=0;i<r.length;i++){var o=t._pe.getValue(n,"*");r[i]=o?t._pe.wrapPointer(o,t._pe.PeParameter):null,n+=Int32Array.BYTES_PER_ELEMENT}return r}}));r(t._pe.PeHorizon.prototype,"getCoord",(function(e){return function(){var t=this.getSize();if(!t)return null;var r=[];return m(r,t,e.call(this)),r}})),r(t._pe.PeGTlistExtendedEntry.prototype,"getEntries",(function(e){var r=t._pe._pe_getPeGTlistExtendedGTsSize();return function(){var n=null,i=e.call(this);if(!t._pe.compare(i,t._pe.NULL)){n=[i];var o=this.getSteps();if(o>1)for(var a=t._pe.getPointer(i),s=1;s<o;s++)n.push(t._pe.wrapPointer(a+r*s,t._pe.PeGTlistExtendedGTs))}return n}}));var f=t._pe._pe_getPeHorizonSize(),h=function(e){return function(){var r=this._cache;if(r||(r=new Map,this._cache=r),r.has(e))return r.get(e);var n=null,i=e.call(this);if(!t._pe.compare(i,t._pe.NULL)){n=[i];var o=i.getNump();if(o>1)for(var a=t._pe.getPointer(i),s=1;s<o;s++)n.push(t._pe.wrapPointer(a+f*s,t._pe.PeHorizon))}return r.set(e,n),n}};r(t._pe.PeProjcs.prototype,"horizonGcsGenerate",h),r(t._pe.PeProjcs.prototype,"horizonPcsGenerate",h),t._pe.PeObject.prototype.toString=function(e){void 0===e&&(e=u.PE_STR_OPTS_NONE),t._pe.ensureCache.prepare();var r=t._pe.getPointer(this),n=t._pe.ensureInt8(new Array(u.PE_BUFFER_MAX));return t._pe.UTF8ToString(t._pe._pe_object_to_string_ext(r,e,n))}}function h(e){if(e){var r=t._pe.getClass(e);if(r){var n=t._pe.getCache(r);if(n){var i=t._pe.getPointer(e);i&&delete n[i]}}}}function y(e,r){for(var n=[],i=new Array(r),o=0;o<e;o++)n.push(t._pe.ensureInt8(i));return n}function v(e){var t;return Array.isArray(e[0])?(t=[],e.forEach((function(e){t.push(e[0],e[1])}))):t=e,t}function m(e,r,n,i){if(void 0===i&&(i=!1),i)for(var o=0;o<2*r;o++)e[o]=t._pe.getValue(n+o*Float64Array.BYTES_PER_ELEMENT,"double");else{var a=0===e.length;for(o=0;o<r;o++)a&&(e[o]=new Array(2)),e[o][0]=t._pe.getValue(n,"double"),e[o][1]=t._pe.getValue(n+Float64Array.BYTES_PER_ELEMENT,"double"),n+=2*Float64Array.BYTES_PER_ELEMENT}}Object.defineProperty(t,"__esModule",{value:!0}),t._pe=null,t.isLoaded=function(){return!!t._pe},t.isSupported=function(){return!!o("esri-wasm")},t.load=function(){return s||(s=a.create((function(e,t){new Promise((function(e,t){Promise.resolve().then(function(){var t=[r("2yfh")];e.apply(null,t)}.bind(this)).catch(t.bind(this))})).then((function(r){r({locateFile:function(e){return i.getAssetUrl("esri/geometry/support/"+e)},onAbort:function(e){t(new Error(e))}}).then((function(t){f(t),e()}))}))})))},function(e){function r(e,r,n){t._pe.ensureCache.prepare();var i=v(n),o=n===i,a=t._pe.ensureFloat64(i),s=t._pe._pe_geog_to_proj(t._pe.getPointer(e),r,a);return s&&m(n,r,a,o),s}function n(e,t,r){return i(e,t,r,0)}function i(e,r,n,i){t._pe.ensureCache.prepare();var o=v(n),a=n===o,s=t._pe.ensureFloat64(o),u=t._pe._pe_proj_to_geog_center(t._pe.getPointer(e),r,s,i);return u&&m(n,r,s,a),u}e.geogToProj=r,e.projGeog=function(e,t,i,o){switch(o){case u.PE_TRANSFORM_P_TO_G:return n(e,t,i);case u.PE_TRANSFORM_G_TO_P:return r(e,t,i)}return 0},e.projToGeog=n,e.projToGeogCenter=i}(t.PeCSTransformations||(t.PeCSTransformations={})),function(e){e.init=function(){e.PE_BUFFER_MAX=t._pe.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=t._pe.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=t._pe.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=t._pe.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=t._pe.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=t._pe.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=t._pe.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=t._pe.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=t._pe.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=t._pe.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=t._pe.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=t._pe.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=t._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=t._pe.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=t._pe.PeDefs.prototype.PE_TYPE_UNIT,e.PE_STR_OPTS_NONE=t._pe.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=t._pe.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=t._pe.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=t._pe.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=t._pe.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=t._pe.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=t._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=t._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=t._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=t._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=t._pe.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=t._pe.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=t._pe.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=t._pe.PeDefs.prototype.PE_HORIZON_DELTA}}(u=t.PeDefs||(t.PeDefs={})),function(e){var r={},n={};function i(e,n){var i=null,a=r[e];if(a||(a={},r[e]=a),a.hasOwnProperty(String(n)))i=a[n];else{var s=t._pe.PeFactory.prototype.factoryByType(e,n);t._pe.compare(s,t._pe.NULL)||(i=s,a[n]=i)}return o(i)}function o(e){if(e){var r=e.getType();switch(r){case u.PE_TYPE_GEOGCS:e=t._pe.castObject(e,t._pe.PeGeogcs);break;case u.PE_TYPE_PROJCS:e=t._pe.castObject(e,t._pe.PeProjcs);break;case u.PE_TYPE_GEOGTRAN:e=t._pe.castObject(e,t._pe.PeGeogtran);break;default:r&u.PE_TYPE_UNIT&&(e=t._pe.castObject(e,t._pe.PeUnit))}}return e}e.initialize=function(){t._pe.PeFactory.prototype.initialize(null)},e.coordsys=function(e){return i(u.PE_TYPE_COORDSYS,e)},e.factoryByType=i,e.fromString=function(e,r){var i=null,a=n[e];if(a||(a={},n[e]=a),a.hasOwnProperty(r))i=a[r];else{var s=t._pe.PeFactory.prototype.fromString(e,r);t._pe.compare(s,t._pe.NULL)||(i=s,a[r]=i)}return o(i)},e.geogcs=function(e){return i(u.PE_TYPE_GEOGCS,e)},e.geogtran=function(e){return i(u.PE_TYPE_GEOGTRAN,e)},e.getCode=function(e){return t._pe.PeFactory.prototype.getCode(e)},e.projcs=function(e){return i(u.PE_TYPE_PROJCS,e)},e.unit=function(e){return i(u.PE_TYPE_UNIT,e)}}(t.PeFactory||(t.PeFactory={})),t.PeGCSExtent=null,function(e){var r;e.init=function(){e.PE_GTLIST_OPTS_COMMON=t._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,r=t._pe._pe_getPeGTlistExtendedEntrySize()},e.getGTlist=function(e,n,i,o,a,s){var u=null,l=new t._pe.PeInteger(s);try{var c=t._pe.PeGTlistExtended.prototype.getGTlist(e,n,i,o,a,l);if((s=l.val)&&(u=[c],s>1))for(var p=t._pe.getPointer(c),d=1;d<s;d++)u.push(t._pe.wrapPointer(p+r*d,t._pe.PeGTlistExtendedEntry))}finally{t._pe.destroy(l)}return u}}(l=t.PeGTlistExtended||(t.PeGTlistExtended={})),function(e){e.destroy=function(e){if(e&&e.length){for(var r=0,n=e;r<n.length;r++){var i=n[r];h(i),i.getEntries().forEach((function(e){h(e);var t=e.getGeogtran();h(t),t.getParameters().forEach(h),[t.getGeogcs1(),t.getGeogcs2()].forEach((function(e){h(e);var t=e.getDatum();h(t),h(t.getSpheroid()),h(e.getPrimem()),h(e.getUnit())}))}))}t._pe.PeGTlistExtendedEntry.prototype.Delete(e[0])}}}(t.PeGTlistExtendedEntry||(t.PeGTlistExtendedEntry={})),function(e){e.geogToGeog=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=v(n),s=n===a,u=t._pe.ensureFloat64(a),l=0;i&&(l=t._pe.ensureFloat64(i));var c=t._pe._pe_geog_to_geog(t._pe.getPointer(e),r,u,l,o);return c&&m(n,r,u,s),c}}(t.PeGTTransformations||(t.PeGTTransformations={})),function(e){function r(e,r,n,i,o,a){var s,l;switch(t._pe.ensureCache.prepare(),e){case"dd":s=t._pe._pe_geog_to_dd,l=u.PE_DD_MAX;break;case"ddm":s=t._pe._pe_geog_to_ddm,l=u.PE_DDM_MAX;break;case"dms":s=t._pe._pe_geog_to_dms,l=u.PE_DMS_MAX}var c=0;r&&(c=t._pe.getPointer(r));var p=v(i),d=t._pe.ensureFloat64(p),f=y(n,l),h=s(c,n,d,o,t._pe.ensureInt32(f));if(h)for(var m=0;m<n;m++)a[m]=t._pe.UTF8ToString(f[m]);return h}function n(e,r,n,i,o){var a;switch(t._pe.ensureCache.prepare(),e){case"dd":a=t._pe._pe_dd_to_geog;break;case"ddm":a=t._pe._pe_ddm_to_geog;break;case"dms":a=t._pe._pe_dms_to_geog}var s=0;r&&(s=t._pe.getPointer(r));var u=i.map((function(e){return t._pe.ensureString(e)})),l=t._pe.ensureInt32(u),c=t._pe.ensureFloat64(new Array(2*n)),p=a(s,n,l,c);return p&&m(o,n,c),p}e.geog_to_dms=function(e,t,n,i,o){return r("dms",e,t,n,i,o)},e.dms_to_geog=function(e,t,r,i){return n("dms",e,t,r,i)},e.geog_to_ddm=function(e,t,n,i,o){return r("ddm",e,t,n,i,o)},e.ddm_to_geog=function(e,t,r,i){return n("ddm",e,t,r,i)},e.geog_to_dd=function(e,t,n,i,o){return r("dd",e,t,n,i,o)},e.dd_to_geog=function(e,t,r,i){return n("dd",e,t,r,i)}}(t.PeNotationDms||(t.PeNotationDms={})),function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=t._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=t._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},e.geog_to_mgrs_extended=function(e,r,n,i,o,a,s){t._pe.ensureCache.prepare();var l=0;e&&(l=t._pe.getPointer(e));var c=v(n),p=t._pe.ensureFloat64(c),d=y(r,u.PE_MGRS_MAX),f=t._pe.ensureInt32(d),h=t._pe._pe_geog_to_mgrs_extended(l,r,p,i,o,a,f);if(h)for(var m=0;m<r;m++)s[m]=t._pe.UTF8ToString(d[m]);return h},e.mgrs_to_geog_extended=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var s=n.map((function(e){return t._pe.ensureString(e)})),u=t._pe.ensureInt32(s),l=t._pe.ensureFloat64(new Array(2*r)),c=t._pe._pe_mgrs_to_geog_extended(a,r,u,i,l);return c&&m(o,r,l),c}}(c=t.PeNotationMgrs||(t.PeNotationMgrs={})),function(e){e.geog_to_usng=function(e,r,n,i,o,a,s){t._pe.ensureCache.prepare();var l=0;e&&(l=t._pe.getPointer(e));var c=v(n),p=t._pe.ensureFloat64(c),d=y(r,u.PE_MGRS_MAX),f=t._pe.ensureInt32(d),h=t._pe._pe_geog_to_usng(l,r,p,i,o,a,f);if(h)for(var m=0;m<r;m++)s[m]=t._pe.UTF8ToString(d[m]);return h},e.usng_to_geog=function(e,r,n,i){t._pe.ensureCache.prepare();var o=0;e&&(o=t._pe.getPointer(e));var a=n.map((function(e){return t._pe.ensureString(e)})),s=t._pe.ensureInt32(a),u=t._pe.ensureFloat64(new Array(2*r)),l=t._pe._pe_usng_to_geog(o,r,s,u);return l&&m(i,r,u),l}}(t.PeNotationUsng||(t.PeNotationUsng={})),function(e){e.init=function(){e.PE_UTM_OPTS_NONE=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS},e.geog_to_utm=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var s=v(n),l=t._pe.ensureFloat64(s),c=y(r,u.PE_UTM_MAX),p=t._pe.ensureInt32(c),d=t._pe._pe_geog_to_utm(a,r,l,i,p);if(d)for(var f=0;f<r;f++)o[f]=t._pe.UTF8ToString(c[f]);return d},e.utm_to_geog=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var s=n.map((function(e){return t._pe.ensureString(e)})),u=t._pe.ensureInt32(s),l=t._pe.ensureFloat64(new Array(2*r)),c=t._pe._pe_utm_to_geog(a,r,u,i,l);return c&&m(o,r,l),c}}(p=t.PeNotationUtm||(t.PeNotationUtm={})),function(e){var r=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=t._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=t._pe.PePCSInfo.prototype.PE_POLE_POINT},e.generate=function(n,i){var o,a;return void 0===i&&(i=e.PE_PCSINFO_OPTION_DOMAIN),r.has(n)&&(a=r.get(n))[i]&&(o=a[i]),o||(o=t._pe.PePCSInfo.prototype.generate(n,i),a||(a=[],r.set(n,a)),a[i]=o),o}}(d=t.PePCSInfo||(t.PePCSInfo={})),function(e){e.version_string=function(){return t._pe.PeVersion.prototype.version_string()}}(t.PeVersion||(t.PeVersion={})),t._init=f}.apply(null,n))||(e.exports=i)},wIC5:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("qMld"),r("w7fK"),r("OkCb"),r("2Kdy")],void 0===(i=function(e,t,n,i,o){Object.defineProperty(t,"__esModule",{value:!0});var a=null,s=null;t.isLoaded=function(){return!!a&&i.isLoaded()},t.isSupported=function(){return i.isSupported()};var u=null;t.load=function(){return u||(u=n.all([i.load(),new Promise((function(e,t){r.e(8).then(function(){var t=[r("vFDJ")];e.apply(null,t)}.bind(this)).catch(t.bind(this))})),new Promise((function(e,t){r.e(93).then(function(){var t=[r("RBE7")];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))]).then((function(e){var t=e[1],r=e[2].hydratedAdapter;s=r,(a=t)._enableProjection(i)})))},t.project=function(e,t,r){return void 0===r&&(r=null),e instanceof Array?0===e.length?[]:c(s,e,e[0].spatialReference,t,r):c(s,[e],e.spatialReference,t,r)[0]};var l={};function c(e,t,r,n,i){if(void 0===i&&(i=null),null===i){var s=o.cacheKey(r,n);void 0!==l[s]?i=l[s]:(null===(i=p(r,n,null))&&(i=new o),l[s]=i)}return a._project(e,t,r,n,i)}function p(e,t,r){void 0===r&&(r=null);var n=a._getTransformation(s,e,t,r,null==r?void 0:r.spatialReference);return null!==n?o.fromGE(n):null}t.projectMany=c,t.getTransformation=p,t.getTransformations=function(e,t,r){void 0===r&&(r=null);var n=a._getTransformationBySuitability(s,e,t,r,null==r?void 0:r.spatialReference);if(null!==n){for(var i=[],u=0,l=n;u<l.length;u++){var c=l[u];i.push(o.fromGE(c))}return i}return[]}}.apply(null,n))||(e.exports=i)},wjMf:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("LxLY"),r("jBNx"),r("aMdW"),r("Zx0K"),r("W9tT"),r("ab6c"),r("Z4y+"),r("lRq4"),r("hBh5"),r("Thzy"),r("Lzvl"),r("fw2w"),r("nrlZ"),r("nrlZ"),r("YaB4"),r("YaB4")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,p,d,f,h,y,v,m){Object.defineProperty(t,"__esModule",{value:!0});var _=Math.PI/180,g=o.mat2df32.create(),b=s.vec2f32.create(),x=l.create();t.getBounds=function(e,t,r,n,i,o,a){if(!n||!r.symbol)return e[0]=e[1]=e[2]=e[3]=0,t[0]=t[1]=t[2]=t[3]=0,e;var s=n;if(!d.isPoint(s)){c.getBoundsXY(e,s);var u=t[0];0===u&&(u=function(e){var t=0;switch(e.symbol.type){case"simple-fill":case"picture-fill":var r=e.symbol.outline;if(!r)return 0;t=r.width;break;case"simple-line":t=e.symbol.width;break;case"simple-marker":t=e.symbol.size;break;case"picture-marker":t=Math.max(e.symbol.width,e.symbol.height);break;case"text":var n=[0,0,0,0];N(n,e.symbol,e.mosaicItem);var i=Math.max(Math.abs(n[0]),Math.abs(n[1]));t=Math.max(n[2],n[3])+i;break;case"cim":case"expanded-cim":var o=v.CIMSymbolHelper.getEnvelope(e.symbol.data);t=Math.sqrt(o.width*o.width+o.height*o.height)}return t}(r),t[0]=u);var l=i*u/2;return e[0]-=l,e[1]-=l,e[2]+=l,e[3]+=l,e}var p=s.x,h=s.y;return"text"===r.symbol.type&&0===t[2]&&0===t[3]&&N(t,r.symbol,r.mosaicItem),function(e,t,r,n,i,o,a,s){var u;switch(n.type){case"simple-marker":case"picture-marker":u=F(t,r,n,o,a,0);break;case"text":u=R(t,r,n,i,o,0);break;case"cim":case"expanded-cim":u=O(t,r,n,o,a,0)}for(var l,c,p=0,d=0;d<u.rings[0].length-1;d++)l=(t-(c=u.rings[0][d])[0])*(t-c[0])+(r-c[1])*(r-c[1]),p=Math.max(p,l);p=Math.sqrt(p);var h=f.normalizeMapX(t-p,s),v=f.normalizeMapX(t+p,s);if(h>v){var m=y.getInfo(s);if(m){var _=m.valid;h=_[0],v=_[1]}}e[0]=h,e[1]=r-p,e[2]=v,e[3]=r+p}(e,p,h,r.symbol,t,i,o,a),e},t.isMarkerSymbol=function(e){return"simple-marker"===e||"picture-marker"===e||"text"===e},t.graphicGeometryToNumber=function(e){switch(r.unwrap(e.geometry).type){case"point":case"multipoint":return 0;case"polyline":return 1;case"polygon":case"extent":return 2}return 0};var S=s.vec2f32.create(),w=s.vec2f32.create(),I=s.vec2f32.create(),T=s.vec2f32.create(),E=s.vec2f32.create(),M=s.vec2f32.create(),P=s.vec2f32.create();function F(e,t,r,o,s,u){var l,c,p=n.pt2px(r.xoffset),d=n.pt2px(r.yoffset),f=_*r.angle,h=_*u;switch(r.type){case"simple-marker":var y=r;l=c=n.pt2px(y.size);break;case"picture-marker":var v=r;l=n.pt2px(v.width),c=n.pt2px(v.height)}s<.04&&(o=.04*o/s);var m=i.mat2d.identity(g);i.mat2d.translate(m,m,a.vec2.set(b,e,t)),i.mat2d.rotate(m,m,h-f),i.mat2d.scale(m,m,a.vec2.set(b,o,-o)),i.mat2d.translate(m,m,a.vec2.set(b,p,-d));var x=[0,0];a.vec2.transformMat2d(x,a.vec2.set(b,-.5*l,-.5*c),m);var S=[0,0];a.vec2.transformMat2d(S,a.vec2.set(b,-.5*l,.5*c),m);var w=[0,0];a.vec2.transformMat2d(w,a.vec2.set(b,.5*l,-.5*c),m);var I=[0,0];return a.vec2.transformMat2d(I,a.vec2.set(b,.5*l,.5*c),m),{rings:[[x,w,I,S,x]]}}function O(e,t,r,o,s,u){var l=v.CIMSymbolHelper.getEnvelope(r.data);if(!l)return null;s<.04&&(o=.04*o/s);var c=n.pt2px(l.width),p=n.pt2px(l.height),d=n.pt2px(l.x),f=n.pt2px(l.y),h=0*_,y=_*u,m=i.mat2d.identity(g);i.mat2d.translate(m,m,a.vec2.set(b,e,t)),i.mat2d.rotate(m,m,y-h),i.mat2d.scale(m,m,a.vec2.set(b,o,o));var x=[0,0];a.vec2.transformMat2d(x,a.vec2.set(b,d,f+p),m);var S=[0,0];a.vec2.transformMat2d(S,a.vec2.set(b,d,f),m);var w=[0,0];a.vec2.transformMat2d(w,a.vec2.set(b,d+c,f+p),m);var I=[0,0];return a.vec2.transformMat2d(I,a.vec2.set(b,d+c,f),m),{rings:[[x,w,I,S,x]]}}function R(e,t,r,o,s,u){var l=n.pt2px(r.xoffset),c=n.pt2px(r.yoffset),p=_*r.angle,d=_*u,f=i.mat2d.identity(g);i.mat2d.translate(f,f,a.vec2.set(b,e,t)),i.mat2d.rotate(f,f,d),i.mat2d.scale(f,f,a.vec2.set(b,s,-s));var h=o[0]+o[2]/2,y=o[1]+o[3]/2;i.mat2d.translate(f,f,a.vec2.set(b,l,-c)),i.mat2d.translate(f,f,a.vec2.set(b,h,y)),i.mat2d.rotate(f,f,p),i.mat2d.translate(f,f,a.vec2.set(b,-h,-y));var v=[0,0];a.vec2.transformMat2d(v,a.vec2.set(b,o[0],o[1]),f);var m=[0,0];a.vec2.transformMat2d(m,a.vec2.set(b,o[0],o[1]+o[3]),f);var x=[0,0];a.vec2.transformMat2d(x,a.vec2.set(b,o[0]+o[2],o[1]),f);var S=[0,0];return a.vec2.transformMat2d(S,a.vec2.set(b,o[0]+o[2],o[1]+o[3]),f),{rings:[[v,x,S,m,v]]}}function N(e,t,r){if(!r||0===r.glyphMosaicItems.length)return e;var i=v.bidiText(t.text)[1],o=r.glyphMosaicItems,a=m.shapeGlyphs(o,i,{scale:n.pt2px(t.font.size)/24,angle:t.angle,xOffset:t.xoffset,yOffset:t.yoffset,hAlign:m.alignmentUtils.getXAnchorDirection(t.horizontalAlignment||"center"),vAlign:m.alignmentUtils.getYAnchorDirection(t.verticalAlignment||"baseline"),maxLineWidth:Math.max(32,Math.min(t.lineWidth||512,512)),lineHeight:30*Math.max(.25,Math.min(t.lineHeight||1,4)),decoration:t.font.decoration||"none",isCIM:!1}).bounds;return e[0]=a.x-a.halfWidth,e[1]=a.y-a.halfHeight,e[2]=a.width,e[3]=a.height,e}t.isPointOnPolyline=function(e,t,r,n){a.vec2.set(I,t,r);for(var i,o,s,u,l,c,p,d,f,h=e.paths,y=1/0,v=0;v<h.length;v++){var m=h[v];if(!(m.length<2))for(var _=1;_<m.length;_++)i=m[_-1][0],s=m[_-1][1],o=m[_][0],u=m[_][1],l=Math.min(i,o)-n,c=Math.min(s,u)-n,p=Math.max(i,o)+n,d=Math.max(s,u)+n,t<l||t>p||r<c||r>d||(a.vec2.set(S,i,s),a.vec2.set(w,o,u),a.vec2.subtract(T,w,S),a.vec2.subtract(E,S,I),a.vec2.scale(M,T,a.vec2.dot(T,E)/a.vec2.dot(T,T)),a.vec2.subtract(P,E,M),y>(f=a.vec2.dot(P,P))&&(y=f))}return Math.sqrt(y)<=n},t.getMarkerSymbolBounds=F,t.getCIMMarkerBounds=O,t.getTextSymbolBounds=R,t.normalizeCentralMeridian=function(e){var t,r,n,i,o,a,s,u,l,f=null;if(!e)return null;if("mesh"===e.type)return e.toJSON();if(t=e.spatialReference,!(r=h.getInfo(t)))return e.toJSON();n=t.isWebMercator,i=j[a=n?102100:4326].maxX,o=j[a].minX,s=j[a].plus180Line,u=j[a].minus180Line;var y=e.toJSON();if(d.isPoint(y))l=D(y,i,o);else if(d.isMultipoint(y))y.points=y.points.map((function(e){return D(e,i,o)})),l=y;else if(d.isExtent(y))l=function(e,t){if(!t)return e;var r=function(e,t){var r,n=[],i=e.ymin,o=e.ymax,a=e.xmax-e.xmin,s=e.xmin,u=e.xmax,l=t.valid,c=l[0],p=l[1],d=(r=C(e.xmin,t)).x,f=r.frameId,h=(r=C(e.xmax,t)).x,y=r.frameId,v=d===h&&a>0;if(a>2*p){var m={xmin:s<u?d:h,ymin:i,xmax:p,ymax:o},_={xmin:c,ymin:i,xmax:s<u?h:d,ymax:o},g={xmin:0,ymin:i,xmax:p,ymax:o},b={xmin:c,ymin:i,xmax:0,ymax:o},x=[],S=[];k(m,g)&&x.push(f),k(m,b)&&S.push(f),k(_,g)&&x.push(y),k(_,b)&&S.push(y);for(var w=f+1;w<y;w++)x.push(w),S.push(w);n.push({extent:m,frameIds:[f]},{extent:_,frameIds:[y]},{extent:g,frameIds:x},{extent:b,frameIds:S})}else d>h||v?n.push({extent:{xmin:d,ymin:i,xmax:p,ymax:o},frameIds:[f]},{extent:{xmin:c,ymin:i,xmax:h,ymax:o},frameIds:[y]}):n.push({extent:{xmin:d,ymin:i,xmax:h,ymax:o},frameIds:[f]});return n}(e,t).map((function(e){return e.extent}));return r.length<2?r[0]||e:r.length>2?(e.xmin=t.valid[0],e.xmax=t.valid[1],e):{rings:r.map((function(e){return[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]}))}}(y,r);else if(d.isPolygon(y)||d.isPolyline(y)){var v=x;c.getBoundsXY(v,y);var m={xmin:v[0],ymin:v[1],xmax:v[2],ymax:v[3]},_=A(m.xmin,o)*(2*i),g=0===_?y:function(e,t){for(var r=0,n=function(e){return d.isPolygon(e)?e.rings:e.paths}(e);r<n.length;r++)for(var i=0,o=n[r];i<o.length;i++)o[i][0]+=t;return e}(y,_);m.xmin+=_,m.xmax+=_,p.extentIntersectsPolyline(m,s)&&m.xmax!==i||p.extentIntersectsPolyline(m,u)&&m.xmin!==o?f=g:l=g}else l=e.clone();return null!==f?(new L).cut(f,i):l},t.getTextSymbolSize=N;var j={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:{paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:u.WebMercator},minus180Line:{paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:u.WebMercator}},4326:{maxX:180,minX:-180,plus180Line:{paths:[[[180,-180],[180,180]]],spatialReference:u.WGS84},minus180Line:{paths:[[[-180,-180],[-180,180]]],spatialReference:u.WGS84}}};function A(e,t){return Math.ceil((e-t)/(2*t))}function C(e,t){var r,n=t.valid,i=n[0],o=n[1],a=2*o,s=0;return e>o?(e-=(r=Math.ceil(Math.abs(e-o)/a))*a,s=r):e<i&&(e+=(r=Math.ceil(Math.abs(e-i)/a))*a,s=-r),{x:e,frameId:s}}function k(e,t){var r=t.xmin,n=t.ymin,i=t.xmax,o=t.ymax;return G(e,r,n)&&G(e,r,o)&&G(e,i,o)&&G(e,i,n)}function G(e,t,r){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax}function D(e,t,r){var n;if(Array.isArray(e))if((n=e[0])>t){var i=A(n,t);e[0]=n+i*(-2*t)}else n<r&&(i=A(n,r),e[0]=n+i*(-2*r));else(n=e.x)>t?(i=A(n,t),e.x+=i*(-2*t)):n<r&&(i=A(n,r),e.x+=i*(-2*r));return e}var L=function(){function e(){}return e.prototype.cut=function(e,t){var r;if(e.rings)this.closed=!0,r=e.rings,this.minPts=4;else{if(!e.paths)return null;this.closed=!1,r=e.paths,this.minPts=2}for(var n=r.length,i=-2*t,o=0;o<n;o++){var a=r[o];if(a&&a.length>=this.minPts){for(var s=[],u=0,l=a;u<l.length;u++){var c=l[u];s.push([c[0]+i,c[1]])}r.push(s)}}return this.closed?e.rings=r:e.paths=r,e},e}()}.apply(null,n))||(e.exports=i)},yLD6:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("Fzzg"),r("/COu"),r("Jvs9")],void 0===(i=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0}),t.optimizedFeatureQueryEngineAdapter={getObjectId:function(e){return e.objectId},getAttributes:function(e){return e.attributes},getAttribute:function(e,t){return e.attributes[t]},cloneWithGeometry:function(e,t){return new n.default(t,e.attributes,null,e.objectId)},getGeometry:function(e){return e.geometry},getCentroid:function(e,t){return e.centroid||(e.centroid=r.getCentroidOptimizedGeometry(new i.default,e.geometry,t.hasZ,t.hasM)),e.centroid}},t.default=t.optimizedFeatureQueryEngineAdapter}.apply(null,n))||(e.exports=i)},ykst:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ycL1"),r("Vx27")],void 0===(i=function(e,t,r,n,i){return function(e){function t(t){var r=e.call(this,t)||this;return r.expression=null,r.name=null,r.returnType="boolean",r.title=null,r}var n;return r.__extends(t,e),n=t,t.prototype.clone=function(){return new n({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})},r.__decorate([i.property({type:String,json:{write:!0}})],t.prototype,"expression",void 0),r.__decorate([i.property({type:String,json:{write:!0}})],t.prototype,"name",void 0),r.__decorate([i.property({type:["boolean"],json:{write:!0}})],t.prototype,"returnType",void 0),r.__decorate([i.property({type:String,json:{write:!0}})],t.prototype,"title",void 0),n=r.__decorate([i.subclass("esri.form.ExpressionInfo")],t)}(n.JSONSupport)}.apply(null,n))||(e.exports=i)},"yre/":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("jZlN"),r("pcDC"),r("Z4y+"),r("ZcgO"),r("KQcO"),r("HoQt")],void 0===(i=function(e,t,r,n,i,o,a,s){function u(e,t){return t}function l(e,t,r,n){switch(r){case 0:return f(e,t+n,0);case 1:return("lowerLeft"===e.originPosition?f:h)(e,t+n,1)}}function c(e,t,r,n){switch(r){case 0:return f(e,t+n,0);case 1:return("lowerLeft"===e.originPosition?f:h)(e,t+n,1);case 2:return f(e,t,2)}}function p(e,t,r,n){switch(r){case 0:return f(e,t+n,0);case 1:return("lowerLeft"===e.originPosition?f:h)(e,t+n,1);case 2:return f(e,t,3)}}function d(e,t,r,n){switch(r){case 0:return f(e,t+n,0);case 1:return("lowerLeft"===e.originPosition?f:h)(e,t+n,1);case 2:return f(e,t,2);case 3:return f(e,t,3)}}function f(e,t,r){var n=e.translate,i=e.scale;return n[r]+t*i[r]}function h(e,t,r){var n=e.translate,i=e.scale;return n[r]-t*i[r]}Object.defineProperty(t,"__esModule",{value:!0});var y=function(){function e(e){this.options=e,this.geometryTypes=["point","multipoint","polyline","polygon"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=u,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this.AttributesConstructor=function(){}}return e.prototype.createFeatureResult=function(){return new o.DehydratedFeatureSetClass},e.prototype.finishFeatureResult=function(e){if(this.options.applyTransform&&(e.transform=null),this.AttributesConstructor=function(){},this.coordinateBuffer=null,this.lengths.length=0,e.hasZ){var t=s.getGeometryZScaler(e.geometryType,this.options.sourceSpatialReference,e.spatialReference);if(t)for(var r=0,n=e.features;r<n.length;r++)t(n[r].geometry)}},e.prototype.createSpatialReference=function(){return new i},e.prototype.addField=function(e,t){e.fields.push(a.fromJSON(t));var r=e.fields.map((function(e){return e.name}));this.AttributesConstructor=function(){for(var e=0,t=r;e<t.length;e++)this[t[e]]=null}},e.prototype.addFeature=function(e,t){var r=this.options.maxStringAttributeLength?this.options.maxStringAttributeLength:0;if(r>0)for(var n in t.attributes){var i=t.attributes[n];"string"==typeof i&&i.length>r&&(t.attributes[n]="")}e.features.push(t)},e.prototype.prepareFeatures=function(e){var t=this;switch(this.options.applyTransform&&e.transform&&(this.transform=e.transform,this.applyTransform=this.deriveApplyTransform(e)),this.vertexDimension=2,e.hasZ&&this.vertexDimension++,e.hasM&&this.vertexDimension++,e.geometryType){case"point":this.addCoordinate=function(e,r,n,i){return t.addCoordinatePoint(e,r,i)},this.createGeometry=function(e){return t.createPointGeometry(e)};break;case"polygon":this.addCoordinate=function(e,r,n,i){return t.addCoordinatePolygon(e,r,i)},this.createGeometry=function(e){return t.createPolygonGeometry(e)};break;case"polyline":this.addCoordinate=function(e,r,n,i){return t.addCoordinatePolyline(e,r,i)},this.createGeometry=function(e){return t.createPolylineGeometry(e)};break;case"multipoint":this.addCoordinate=function(e,r,n,i){return t.addCoordinateMultipoint(e,r,i)},this.createGeometry=function(e){return t.createMultipointGeometry(e)};break;default:n.neverReached(e.geometryType)}},e.prototype.createFeature=function(){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,new o.DehydratedFeatureClass(r.generateUID(),null,new this.AttributesConstructor)},e.prototype.addLength=function(e,t,r){0===this.lengths.length&&(this.toAddInCurrentPath=t),this.lengths.push(t)},e.prototype.createPointGeometry=function(e){var t={type:"point",x:0,y:0,spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM};return t.hasZ&&(t.z=0),t.hasM&&(t.m=0),t},e.prototype.addCoordinatePoint=function(e,t,r){switch(t=this.applyTransform(this.transform,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:e.hasZ?e.z=t:e.m=t;break;case 3:e.m=t}},e.prototype.transformPathLikeValue=function(e,t){var r=0;return t<=1&&(r=this.previousCoordinate[t],this.previousCoordinate[t]+=e),this.applyTransform(this.transform,e,t,r)},e.prototype.addCoordinatePolyline=function(e,t,r){this.dehydratedAddPointsCoordinate(e.paths,t,r)},e.prototype.addCoordinatePolygon=function(e,t,r){this.dehydratedAddPointsCoordinate(e.rings,t,r)},e.prototype.addCoordinateMultipoint=function(e,t,r){0===r&&e.points.push([]);var n=this.transformPathLikeValue(t,r);e.points[e.points.length-1].push(n)},e.prototype.createPolygonGeometry=function(e){return{type:"polygon",rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},e.prototype.createPolylineGeometry=function(e){return{type:"polyline",paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},e.prototype.createMultipointGeometry=function(e){return{type:"multipoint",points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},e.prototype.dehydratedAddPointsCoordinate=function(e,t,r){if(null===this.coordinateBuffer){var n=this.lengths.reduce((function(e,t){return e+t}),0);this.coordinateBuffer=new Float64Array(n*this.vertexDimension)}0===r&&0==this.toAddInCurrentPath--&&(e.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);var i=this.transformPathLikeValue(t,r),o=e[e.length-1];0===r&&o.push(new Float64Array(this.coordinateBuffer.buffer,this.coordinateBufferPtr*Float64Array.BYTES_PER_ELEMENT,this.vertexDimension)),this.coordinateBuffer[this.coordinateBufferPtr++]=i},e.prototype.deriveApplyTransform=function(e){var t=e.hasZ,r=e.hasM;return t&&r?d:t?c:r?p:l},e}();t.Context=y}.apply(null,n))||(e.exports=i)},zDti:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ImIS"),r("LxLY"),r("8uEs"),r("d466"),r("Lzvl"),r("fw2w"),r("nrlZ"),r("Fzzg"),r("+6sX"),r("Jvs9"),r("Q2Em"),r("V1i6")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,p,d,f,h){Object.defineProperty(t,"__esModule",{value:!0});var y=new n.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});t.QUERY_ENGINE_EMPTY_RESULT=Object.freeze({});var v=new d.default,m=new d.default,_=new d.default,g={esriGeometryPoint:p.convertToPoint,esriGeometryPolyline:p.convertToPolyline,esriGeometryPolygon:p.convertToPolygon,esriGeometryMultipoint:p.convertToMultipoint};function b(e,t,r,n,i){void 0===n&&(n=e.hasZ),void 0===i&&(i=e.hasM);var o=e.hasZ&&n,a=e.hasM&&i;if(r){var s=p.quantizeOptimizedGeometry(_,t,e.hasZ,e.hasM,"esriGeometryPoint",r,n,i);return p.convertToPoint(s,o,a)}return p.convertToPoint(t,o,a)}function x(e,n,o){return r.__awaiter(this,void 0,void 0,(function(){var l,c,p,d,h,y;return r.__generator(this,(function(r){switch(r.label){case 0:return e?(l=e.where,e.where=l=l&&l.trim(),(!l||/^1 *= *1$/.test(l)||n&&n===l)&&(e.where=null),e.geometry?[4,S(e)]:[2,e]):[2,null];case 1:return c=r.sent(),e.distance=0,e.units=null,"esriSpatialRelEnvelopeIntersects"===e.spatialRel&&(p=e.geometry.spatialReference,(c=a.getGeometryExtent(c)).spatialReference=p),e.geometry=c,[4,f.checkProjectionSupport(c.spatialReference,o)];case 2:return r.sent(),[4,u.normalizeCentralMeridian(s.fromJSON(c))];case 3:if(d=r.sent()[0],i.isNone(d))throw t.QUERY_ENGINE_EMPTY_RESULT;return h=d.toJSON(),[4,f.project(h,h.spatialReference,o)];case 4:if(!(y=r.sent()))throw t.QUERY_ENGINE_EMPTY_RESULT;return y.spatialReference=o,e.geometry=y,[2,e]}}))}))}function S(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,a,s,u,c;return r.__generator(this,(function(r){switch(r.label){case 0:return t=e.geometry,n=e.distance,i=e.units,null==n||"vertexAttributes"in t?[2,t]:(a=t.spatialReference,s=i?y.fromJSON(i):o.getUnitString(a),a&&(l.isGeographic(a)||l.isWebMercator(a))?(c=t,[3,3]):[3,1]);case 1:return[4,f.checkProjectionSupport(a,l.WGS84).then((function(){return f.project(t,l.WGS84)}))];case 2:c=r.sent(),r.label=3;case 3:return u=c,[4,h.getGeodesicBufferOperator()];case 4:return[2,r.sent()(u.spatialReference,u,n,s)]}}))}))}t.transformCentroid=b,t.getCentroid=function(e,t,r){return"esriGeometryPolygon"===e.geometryType&&t&&(t.centroid||t.geometry)?(t.centroid||(t.centroid=c.getCentroidOptimizedGeometry(new d.default,t.geometry,e.hasZ,e.hasM)),b(e,t.centroid,r)):null},t.getGeometry=function(e,t,r,n,i,o,a,s){void 0===a&&(a=t),void 0===s&&(s=r);var u=t&&a,l=r&&s,c=n?"coords"in n?n:n.geometry:null;if(!c)return null;if(i){var d=p.generalizeOptimizedGeometry(m,c,t,r,e,i,a,s);return o&&(d=p.quantizeOptimizedGeometry(_,d,u,l,e,o)),g[e](d,u,l)}return o?(d=p.quantizeOptimizedGeometry(_,c,t,r,e,o,a,s),g[e](d,u,l)):(p.removeZMValues(v,c,t,r,a,s),g[e](v,u,l))},t.normalizeQuery=function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s,u;return r.__generator(this,(function(r){if(i=e.outFields,o=e.orderByFields,a=e.groupByFieldsForStatistics,s=e.outStatistics,i)for(u=0;u<i.length;u++)i[u]=i[u].trim();if(o)for(u=0;u<o.length;u++)o[u]=o[u].trim();if(a)for(u=0;u<a.length;u++)a[u]=a[u].trim();if(s)for(u=0;u<s.length;u++)s[u].onStatisticField&&(s[u].onStatisticField=s[u].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),[2,x(e,t,n)]}))}))},t.normalizeFilter=function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){return[2,x(e,t,n)]}))}))},t.normalizeQueryLike=x,t.cleanFromGeometryEngine=function(e){return e&&w in e?JSON.parse(JSON.stringify(e,I)):e};var w="_geVersion",I=function(e,t){return e!==w?t:void 0}}.apply(null,n))||(e.exports=i)},zF2V:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ycL1"),r("MAHV"),r("Dv6O")],void 0===(i=function(e,t,r,n,i,o){Object.defineProperty(t,"__esModule",{value:!0}),t.ElementMixin=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.description=null,t.label=null,t.visibilityExpression=null,t}return r.__extends(t,e),r.__decorate([i.property({type:String,json:{write:!0}})],t.prototype,"description",void 0),r.__decorate([i.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),r.__decorate([i.property({type:String,json:{write:!0}})],t.prototype,"visibilityExpression",void 0),r.__decorate([o.subclass("esri.form.elements.ElementMixin")],t)}(e)};var a=function(e){function t(t){var r=e.call(this,t)||this;return r.type=null,r}return r.__extends(t,e),r.__decorate([i.property()],t.prototype,"type",void 0),r.__decorate([o.subclass("esri.form.elements.Element")],t)}(t.ElementMixin(n.JSONSupport));t.Element=a}.apply(null,n))||(e.exports=i)},zqTD:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("TMur"),r("jZlN"),r("y4WC"),r("ma1f"),r("H1tY"),r("R7Ts"),r("qsST"),r("LxLY"),r("SZNs"),r("qMld"),r("8V7H"),r("Vx27"),r("1dvD"),r("HoQt"),r("w1v0")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,p,d,f,h,y,v,m){Object.defineProperty(t,"__esModule",{value:!0});var _=0,g=l.getLogger("esri.layers.graphics.sources.MemorySource"),b=function(e){function t(t){var r=e.call(this,t)||this;return r._idToClientGraphic=null,r.type="memory",r}return r.__extends(t,e),t.prototype.load=function(e){var t=c.isSome(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),d.resolve(this)},Object.defineProperty(t.prototype,"workerGeometryType",{get:function(){var e=this.layer&&this.layer.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null},enumerable:!0,configurable:!0}),t.prototype.applyEdits=function(e){var t=this;return this.load().then((function(){return t._applyEdits(e)}))},t.prototype.openPorts=function(){var e=this;return this.load().then((function(){return e._connection.openPorts()}))},t.prototype.queryFeatures=function(e,t){return void 0===t&&(t={}),r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,u,l,c;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.load(t)];case 1:return r.sent(),[4,this._connection.invoke("queryFeatures",e?e.toJSON():null,t)];case 2:if(n=r.sent(),v.applyFeatureSetZUnitScaling(e,this.layer.spatialReference,n),i=m.fromJSON(n),!this._requiresClientGraphicMapping())return[2,i];for(o=this.layer.objectIdField,a=0,s=i.features;a<s.length;a++)u=s[a],l=u.attributes[o],(c=this._idToClientGraphic.get(l))&&(u.geometry=c.geometry);return i.geometryType=this.layer.geometryType,[2,i]}}))}))},t.prototype.queryFeaturesJSON=function(e,t){return void 0===t&&(t={}),r.__awaiter(this,void 0,void 0,(function(){var n;return r.__generator(this,(function(r){switch(r.label){case 0:return this._requiresClientGraphicMapping()?[2,d.reject(new a("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)"))]:[4,this.load(t)];case 1:return r.sent(),[4,this._connection.invoke("queryFeatures",e?e.toJSON():null,t)];case 2:return n=r.sent(),v.applyFeatureSetZUnitScaling(e,this.layer.spatialReference,n),[2,n]}}))}))},t.prototype.queryFeatureCount=function(e,t){var r=this;return void 0===t&&(t={}),this.load(t).then((function(){return r._connection.invoke("queryFeatureCount",e?e.toJSON():null,t)}))},t.prototype.queryObjectIds=function(e,t){var r=this;return void 0===t&&(t={}),this.load(t).then((function(){return r._connection.invoke("queryObjectIds",e?e.toJSON():null,t)}))},t.prototype.queryExtent=function(e,t){var r=this;return void 0===t&&(t={}),this.load(t).then((function(){return r._connection.invoke("queryExtent",e?e.toJSON():null,t)})).then((function(e){return{count:e.count,extent:n.Extent.fromJSON(e.extent)}}))},t.prototype._applyEdits=function(e){var t=this;if(!this._connection)throw new a("feature-layer-source:edit-failure","Memory source not loaded");var r=this.layer.objectIdField,n=null,i=[],o=[],s=function(e){return"objectId"in e&&null!=e.objectId?e.objectId:"attributes"in e&&null!=e.attributes[r]?e.attributes[r]:null};if(e.addFeatures&&(n=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(var u=0,l=e.deleteFeatures;u<l.length;u++)null!=(f=s(h=l[u]))&&i.push(f);var c=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures)for(var p=0,d=e.updateFeatures;p<d.length;p++){var f,h=d[p];o.push(this._serializeFeature(h)),c&&null!=(f=s(h))&&c.set(f,h)}return v.unapplyEditsZUnitScaling(n?n.features:null,o,this.layer.spatialReference),this._connection.invoke("applyEdits",{adds:n?n.features:[],updates:o,deletes:i}).then((function(e){var r=e.fullExtent,i=e.featureEditResults;if(t.fullExtent=r,n&&n.finish(i.uidToObjectId),t._idToClientGraphic){if(c)for(var o=0,a=i.updateResults;o<a.length;o++){var s=a[o];if(s.success){var u=c.get(s.objectId);null!=u&&t._addIdToClientGraphic(u)}}for(var l=0,p=i.deleteResults;l<p.length;l++){var d=p[l];d.success&&t._idToClientGraphic.delete(d.objectId)}}return t._createEditsResult(i)}))},t.prototype._createEditsResult=function(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}},t.prototype._createFeatureEditResult=function(e){var t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new a("feature-layer-source:edit-failure",t.description,{code:t.code}):null}},t.prototype._prepareAddFeatures=function(e){for(var t=new Map,r=new Array(e.length),n=null,i=0;i<e.length;i++){var o=e[i],a=this._serializeFeature(o);!n&&c.isSome(o.geometry)&&(n=o.geometry.type),r[i]=a,t.set(""+a.uid,o)}var s=this;return{features:r,inferredGeometryType:n,finish:function(e){var r=s.sourceJSON.objectIdField;for(var n in e){var i=e[n],o=t.get(n);o&&(o.attributes||(o.attributes={}),-1===i?delete o.attributes[r]:o.attributes[r]=i,s._addIdToClientGraphic(o))}}}},t.prototype._addIdToClientGraphic=function(e){if(this._idToClientGraphic){var t=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[t];null!=r&&this._idToClientGraphic.set(r,e)}},t.prototype._requiresClientGraphicMapping=function(){var e=this.layer.geometryType||this.sourceJSON.geometryType;return this._geometryTypeRequiresClientGraphicMapping(e)},t.prototype._geometryRequiresClientGraphicMapping=function(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)},t.prototype._geometryTypeRequiresClientGraphicMapping=function(e){return"mesh"===e||"multipatch"===e||"extent"===e},t.prototype._serializeFeature=function(e){var t=e.attributes,r=this._geometryForSerialization(e),n=(_++).toString();return r?{uid:n,geometry:r.toJSON(),attributes:t}:{uid:n,attributes:t}},t.prototype._geometryForSerialization=function(e){var t=e.geometry;return c.isNone(t)?null:this._geometryRequiresClientGraphicMapping(t)?n.Polygon.fromExtent(t.extent):t},t.prototype._startWorker=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,i,o,a,u,l,c,p,d,h,y,v,m,_,b,x;return r.__generator(this,(function(r){switch(r.label){case 0:return t=this,[4,f.open("MemorySourceWorker",{strategy:s("esri-workers-for-memory-layers")?"dedicated":"local",signal:e})];case 1:return t._connection=r.sent(),i=this.layer,o=i.fields,a=i.spatialReference,u=i.objectIdField,l=i.hasM,c=i.hasZ,p=i.timeInfo,d="defaults"===this.layer.originOf("spatialReference"),h=this._prepareAddFeatures(this.items),this.on("before-changes",(function(e){g.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),e.preventDefault()})),y={features:h.features,fields:o&&o.map((function(e){return e.toJSON()})),geometryType:n.typeKebabDictionary.toJSON(this.workerGeometryType),hasM:l,hasZ:c,objectIdField:u,spatialReference:d?null:a&&a.toJSON(),timeInfo:p?p.toJSON():null},[4,this._connection.invoke("load",y,{signal:e})];case 2:for(v=r.sent(),m=0,_=v.warnings;m<_.length;m++)b=_[m],g.warn(b.message,{layer:this.layer,warning:b});return v.featureErrors.length&&g.warn("Encountered "+v.featureErrors.length+" validation errors while loading features",v.featureErrors),x=v.layerDefinition,this._geometryTypeRequiresClientGraphicMapping(h.inferredGeometryType)&&(x.geometryType=n.typeKebabDictionary.toJSON(h.inferredGeometryType)),this.sourceJSON=x,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),h.finish(v.assignedObjectIds),[2]}}))}))},r.__decorate([h.shared({Type:i,ensureType:y.ensureType(i)})],t.prototype,"itemType",void 0),r.__decorate([h.property()],t.prototype,"type",void 0),r.__decorate([h.property({constructOnly:!0})],t.prototype,"layer",void 0),r.__decorate([h.property({readOnly:!0,dependsOn:["layer.geometryType"]})],t.prototype,"workerGeometryType",null),r.__decorate([h.property()],t.prototype,"sourceJSON",void 0),r.__decorate([h.subclass("esri.layers.graphics.sources.MemorySource")],t)}(u.LoadableMixin(p.EsriPromiseMixin(o)));t.MemorySource=b,t.default=b}.apply(null,n))||(e.exports=i)},ztx9:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("ZHL0"),r("1eyA")],void 0===(i=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){this._cache=new r(e),this._invalidCache=new r(t)}return e.prototype.get=function(e,t){var r=t.uid+":"+e,i=this._cache.get(r);if(i)return i;if(void 0!==this._invalidCache.get(r))return null;try{var o=n.WhereClause.create(e,t);return this._cache.put(r,o),o}catch(e){return this._invalidCache.put(r,null),null}},e}();t.WhereClauseCache=i}.apply(null,n))||(e.exports=i)}}]);
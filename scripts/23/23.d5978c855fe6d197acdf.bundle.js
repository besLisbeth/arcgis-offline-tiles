(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/2d/layers/features/controllers":"+G7i","esri/views/2d/layers/support/util":"+MAT","esri/views/2d/layers/FeatureLayerView2D":"/Ck8","esri/renderers/support/clickToleranceUtils":"/E+R","esri/views/2d/engine/Container":"1Mg+","esri/views/layers/support/cssFilterParser":"3MK9","esri/views/2d/layers/LayerView2D":"6i4F","esri/core/HandleOwner":"7MDj","esri/views/layers/RefreshableLayerView":"7XLS","esri/core/libs/gl-matrix-2/factories/mat4f32":"7Yqx","esri/views/layers/FeatureLayerView":"8iBb","esri/views/2d/engine/DisplayObject":"Brhx","esri/core/libs/gl-matrix-2/mat4":"FXVB","esri/views/layers/support/popupUtils":"I6zq","esri/core/libs/gl-matrix-2/math/mat4":"Jl7l","esri/views/2d/layers/support/popupUtils2D":"W7mf","esri/views/2d/layers/support/FeatureLayerProxy":"WbzV","esri/views/layers/LayerView":"WsO6","esri/views/layers/support/FeatureEffect":"dDbr","esri/views/layers/support/Transition":"gd70","esri/views/layers/support/ParsedFeatureEffect":"iO/m","esri/core/libs/gl-matrix-2/mat4f32":"oZZu","esri/views/2d/layers/features/tileRenderers":"sQ+t","esri/views/2d/engine/webgl/definitions":"tI6k"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"+G7i":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("2Atf"),r("Q2wQ"),r("HZ3d"),r("ma1f"),r("qMld")],void 0===(i=function(e,t,n,i,o,a,s){function u(e){return e&&"openPorts"in e}function l(e){if(!e)return null;var t={};return e.geometry&&(t.geometry=e.geometry.toJSON()),e.where&&(t.where=e.where),t}function c(e){switch(e){case"on-demand":return s.create(function(e){return Promise.all([r.e(2),r.e(3),r.e(11),r.e(13),r.e(56)]).then(function(){var t=[r("uqzM")];e.apply(null,t)}.bind(this)).catch(r.oe)});case"memory":return s.create(function(e){return Promise.all([r.e(2),r.e(11),r.e(57)]).then(function(){var t=[r("2X62")];e.apply(null,t)}.bind(this)).catch(r.oe)});case"stream":return s.create(function(e){return Promise.all([r.e(2),r.e(3),r.e(11),r.e(13),r.e(58)]).then(function(){var t=[r("A4oT")];e.apply(null,t)}.bind(this)).catch(r.oe)});default:return s.reject(new a("mapview-controller:bad-type","Unable to create controller for unknown type: "+e))}}Object.defineProperty(t,"__esModule",{value:!0}),t.getControllerConfiguration=function(e,t){var r=e.source,n=t&&t.toJSON();if("stream"===e.type){var i={type:"stream",purgeOptions:e.purgeOptions,filter:n,serviceFilter:l(e.filter),processing:null};return s.resolve(i)}if(!e.capabilities.operations.supportsQuery)return s.reject(new a("graphicscontroller:query-capability-required","Service requires query capabilities to be used as a feature layer",{layer:e}));if(u(r)){var o={type:"memory",filter:n,processing:"processing"in e&&e.processing&&e.processing.toWorker()||null};return s.resolve(o)}var c={type:"on-demand",gdbVersion:"gdbVersion"in e?e.gdbVersion:null,historicMoment:"historicMoment"in e&&e.historicMoment?e.historicMoment.getTime():null,processing:"processing"in e&&e.processing?e.processing.toWorker():null,filter:n};return s.resolve(c)},t.createController=function(e,t){return o(this,void 0,void 0,function(){var r,o,a,s,u;return i(this,function(i){switch(i.label){case 0:return[4,c(e.type)];case 1:return r=i.sent().default,o=t.serviceAndViewInfo,a=t.remoteClient,s=t.tileStore,[4,(u=new r(n({},o,{configuration:e,tileStore:s,remoteClient:a}))).setFilter({index:0,filter:e.filter})];case 2:return i.sent(),[2,u]}})})}}.apply(null,n))||(e.exports=i)},"+MAT":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("0+sO")],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=new r.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});t.toJSONGeometryType=function(e){return n.toJSON(e)}}.apply(null,n))||(e.exports=i)},"/Ck8":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("dxjN"),r("2Atf"),r("Q2wQ"),r("HZ3d"),r("TMur"),r("jZlN"),r("KY0m"),r("y4WC"),r("ma1f"),r("LxLY"),r("qMld"),r("8MXS"),r("Vx27"),r("1dvD"),r("/E+R"),r("w1v0"),r("IpeC"),r("1Mg+"),r("tI6k"),r("6i4F"),r("+G7i"),r("sQ+t"),r("WbzV"),r("W7mf"),r("ovos"),r("8iBb"),r("e4th"),r("dDbr")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,p,d,h,f,y,v,g,m,b,_,w,x,E,M,O,R,I,F,S,q,C){var T=g.ensureType(_);return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._pipelineIsUpdating=!1,t._filterRequestsOutstanding=new Array(x.MAX_FILTERS),t._updatingFilter=!1,t._updatingRenderer=!1,t.container=new w.Container,t.filter=null,t.effect=null,t.highlightIDs=new Set,t}return r(t,e),t.prototype.destroy=function(){this._proxy.destroy()},t.prototype.initialize=function(){var e=this;if(this._proxy=this._createProxy(),this.layer.isTable)this.addResolvingPromise(f.reject(new d("featurelayerview:table-not-supported","table feature layer can't be displayed",{layer:this.layer})));else{this.addResolvingPromise(f.all([M.getControllerConfiguration(this.layer,this.filter),this._proxy.when()]).then(function(e){var t=e[0];return e[1].configure({controller:t})}));var t=this.watch("filter",function(){return e._handleFilterChange(0,e.filter)}),r=this.watch("effect",function(t,r){r&&t&&t.filter.enable(),e._handleFilterChange(1,t&&t.filter)});this.handles.add(t),this.handles.add(r)}},Object.defineProperty(t.prototype,"labelsVisible",{get:function(){return!this.suspended&&this.layer.labelingInfo&&this.layer.labelsVisible},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"effects",{get:function(){return this.effect&&[this.effect]||[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numFeatures",{get:function(){var e=0;return this.attached&&this._tileStrategy.tiles.forEach(function(t){e+=t.iconDisplayRecords?t.iconDisplayRecords.length:0}),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderingConfigHash",{get:function(){if(!this.layer)return null;var e=this.availableFields,t=this.layer,r=t.definitionExpression,n=t.renderer,i=t.labelingInfo,o="historicMoment"in this.layer?this.layer.historicMoment:null;return JSON.stringify({effectHash:h.isSome(this.effect)&&this.effect.renderingHash,definitionExpression:r,historicMoment:o,availableFields:e,renderer:n,labelingInfo:i})},enumerable:!0,configurable:!0}),t.prototype.highlight=function(e,t){var r,n=this;return void 0===t&&(t={}),e instanceof l?r=[e.getAttribute(this.layer.objectIdField||"__OBJECTID")]:"number"==typeof e?r=[e]:p.isCollection(e)?r=e.map(function(e){return e&&e.getAttribute(n.layer.objectIdField)}).toArray():Array.isArray(e)&&e.length>0&&(r="number"==typeof e[0]?e:e.map(function(e){return e&&e.getAttribute(n.layer.objectIdField)})),(r=r.filter(function(e){return null!=e}))&&r.length&&this._addHighlight(r),{remove:function(){n._removeHighlight(r)},pause:function(){n._removeHighlight(r)},resume:function(){n._addHighlight(r)}}},t.prototype._addHighlight=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this.highlightIDs.add(n)}this._updateHighlight()},t.prototype._removeHighlight=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this.highlightIDs.delete(n)}this._updateHighlight()},t.prototype.hitTest=function(e,t){var r=this;return this.suspended||!this.tileRenderer?f.resolve(null):this.tileRenderer.hitTest(e,t).then(function(e){return 0===e.length?null:r._proxy.queryFeatures(new _({objectIds:e,outSpatialReference:r.view.spatialReference,returnGeometry:!0})).then(function(e){if(!e.features[0])return null;var t=l.fromJSON(e.features[0]);return t.layer=r.layer,t.sourceLayer=r.layer,t.geometry&&(t.geometry.spatialReference=r.view.spatialReference),t})})},t.prototype.queryFeatures=function(e){var t=this;return this.queryFeaturesJSON(e).then(function(e){var r=b.fromJSON(e);return r.features.forEach(function(e){e.layer=t.layer,e.sourceLayer=t.layer}),r})},t.prototype.queryFeaturesJSON=function(e){return this._proxy.queryFeatures(this._cleanUpQuery(e))},t.prototype.queryObjectIds=function(e){return this._proxy.queryObjectIds(this._cleanUpQuery(e))},t.prototype.queryFeatureCount=function(e){return this._proxy.queryFeatureCount(this._cleanUpQuery(e))},t.prototype.queryExtent=function(e){return this._proxy.queryExtent(this._cleanUpQuery(e)).then(function(e){return{count:e.count,extent:u.Extent.fromJSON(e.extent)}})},t.prototype.setVisibility=function(e,t){var r=t?[e]:[],n=t?[]:[e];this.tileRenderer.setFilterFlag(0,r,n,!0)},t.prototype.update=function(e){this.attached&&this._tileStrategy&&this.tileRenderer&&(this._tileStrategy.update(e)||this.requestUpdate(),this._proxy.setViewState(e.state),this.notifyChange("numFeatures"),this.notifyChange("updating"))},t.prototype.attach=function(){var e=this;this._tileStrategy=new F({cachePolicy:"purge",acquireTile:function(t){return e._acquireTile(t)},releaseTile:function(t){return e._releaseTile(t)},tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add([y.watch(this,"layer.processing?.version",function(t){e._proxy.redraw()}),this.layer.on("edits",function(t){e._proxy.onEdits(t)}),y.init(this,"renderingConfigHash",function(){return e._renderingConfigHashChanged()})],"attach")},t.prototype.detach=function(){this.container.removeAllChildren(),this.handles.remove("attach"),this._tileRendererPromise=null,this._pipelineIsUpdating=!1,this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null)},t.prototype.moveStart=function(){this.requestUpdate()},t.prototype.viewChange=function(){this.requestUpdate()},t.prototype.moveEnd=function(){this.requestUpdate()},t.prototype.fetchPopupFeatures=function(e,t){return s(this,void 0,void 0,function(){var r,n,i;return a(this,function(o){return(r=this.validateFetchPopupFeatures(t))?[2,f.reject(r)]:(n=this.fetchClientPopupFeatures(t),e?(i=this._fetchServicePopupFeatures(e,t),[2,f.eachAlwaysValues([n,i]).then(c.flatten)]):[2,n])})})},t.prototype._fetchServicePopupFeatures=function(e,t){return s(this,void 0,void 0,function(){var r,n,i,o,s,u,l,c,p,d;return a(this,function(a){switch(a.label){case 0:return[4,this.createPopupQuery(t)];case 1:if(r=a.sent(),n=this.layer,i=n.renderer,o=m.calculateTolerance(i),r.geometry=this.createFetchPopupFeaturesQueryGeometry(e,o),s=new Set,u=n.objectIdField,l=h.isSome(t)?t.clientGraphics:null)for(c=0,p=l;c<p.length;c++)d=p[c],s.add(d.attributes[u]);return[2,n.queryFeatures(r).then(function(e){return e.features.filter(function(e){return!s.has(e.attributes[u])})})]}})})},t.prototype.createFetchPopupFeaturesQueryGeometry=function(e,t){return I.createQueryGeometry(e,t,this.view)},t.prototype.doRefresh=function(){this._proxy.refresh()},t.prototype.isUpdating=function(){return null!=this.layer.renderer&&(null==this.tileRenderer||this._pipelineIsUpdating||this.tileRenderer.updating||this._updatingFilter||this._updatingRenderer)},t.prototype._createClientOptions=function(){var e=this;return{executeProcessing:function(t){if(!("processing"in e.layer&&e.layer.processing))return t.featureSet;var r=e.layer.processing;return r.process(t.featureSet,r.options)||f.reject(new d("FeatureLayer","invalid processing.process() method, returns nothing"))},setUpdating:function(t){e._pipelineIsUpdating=t,e.notifyChange("updating")}}},t.prototype._cleanUpQuery=function(e){var t=e?T(e):new _;return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t},t.prototype._handleFilterChange=function(e,t){return s(this,void 0,void 0,function(){var r,n,i,o,s,u;return a(this,function(a){switch(a.label){case 0:return h.isSome(this._filterRequestsOutstanding[e])?(this._filterRequestsOutstanding[e]={filter:t},[2]):(this._updatingFilter=!0,r=h.isSome(t)&&t.toJSON(),[4,this._proxy.setFilter(e,r)]);case 1:for(n=a.sent(),i=n.show,o=n.hide,this.tileRenderer&&this.tileRenderer.setFilterFlag(e,i,o,!1),h.isSome(t)&&t.enable(),this.tileRenderer&&(this.tileRenderer.featuresView.requestRender(),!(!this.layer.labelingInfo||!this.layer.labelingInfo.length)&&(this.tileRenderer.forEachTile(function(e){return e.isDirty=!0}),this.view.labelManager.requestUpdate())),s=0;s<this._filterRequestsOutstanding.length;s++)if(u=this._filterRequestsOutstanding[s],h.isSome(u)){this._filterRequestsOutstanding[s]=null,this._handleFilterChange(s,u.filter);break}return this._updatingFilter=!1,[2]}})})},t.prototype._createProxy=function(){return new R.default({layer:this.layer,featuresTiling:this.view.featuresTilingScheme,client:this._createClientOptions()})},t.prototype._acquireTile=function(e){var t=this,r=this.tileRenderer.acquireTile(e);return r.once("attach",function(){t.requestUpdate()}),r},t.prototype._releaseTile=function(e){this.tileRenderer.releaseTile(e)},t.prototype._renderingConfigHashChanged=function(){var e=this;this._updatingRenderer=!0;var t=this._tileRendererPromise=O.createOrReuseTileRenderer(this.tileRenderer,this.layer.renderer,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer}).then(function(r){if(e._tileRendererPromise===t){if(e._tileRendererPromise=null,e.tileRenderer!==r&&(e._tileStrategy.clear(),e.tileRenderer&&(e.tileRenderer.uninstall(e.container),e.tileRenderer.destroy()),e.tileRenderer=e._proxy.client.tileRenderer=r,r&&r.install(e.container),e._updateHighlight(),e.requestUpdate()),!r)return void(e._updatingRenderer=!1);var n=r.getProcessorConfiguration();e.tileRenderer.wouldClear(n)?(e.tileRenderer.clear(),e.tileRenderer.applyConfiguration(n),e._proxy.configure({processor:n}).then(function(){e._updatingRenderer=!1,e.notifyChange("updating")}),e.requestUpdate()):e.tileRenderer.needsProcessorReconfiguration(n)?(e._proxy.configure({processor:n}).then(function(){e._updatingRenderer=!1,e.notifyChange("updating")}),e.requestUpdate()):(e.tileRenderer.applyConfiguration(n),e.requestUpdate(),e._updatingRenderer=!1,e.notifyChange("updating"))}},function(){e._tileRendererPromise=null,e._updatingRenderer=!1,e.notifyChange("updating")})},t.prototype._updateHighlight=function(){this.tileRenderer&&"updateHighlight"in this.tileRenderer&&this.tileRenderer.updateHighlight()},n([v.property()],t.prototype,"_pipelineIsUpdating",void 0),n([v.property()],t.prototype,"_updatingFilter",void 0),n([v.property()],t.prototype,"_updatingRenderer",void 0),n([v.property({dependsOn:["suspended","layer.labelingInfo","layer.labelsVisible"]})],t.prototype,"labelsVisible",null),n([v.property({type:q})],t.prototype,"filter",void 0),n([v.property({type:C})],t.prototype,"effect",void 0),n([v.property({readOnly:!0,dependsOn:["effect"]})],t.prototype,"effects",null),n([v.property()],t.prototype,"numFeatures",null),n([v.property({dependsOn:["effect","layer.renderer","availableFields","layer.definitionExpression","layer.historicMoment?","layer.labelingInfo"]})],t.prototype,"renderingConfigHash",null),n([v.property()],t.prototype,"tileRenderer",void 0),n([v.property({dependsOn:["layer.renderer","tileRenderer.updating","_updatingFilter","_updatingRenderer"]})],t.prototype,"updating",void 0),n([v.subclass("esri.views.2d.layers.FeatureLayerView2D")],t)}(v.declared(E,S))}.apply(null,n))||(e.exports=i)},"/E+R":function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(e,t){return t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):t&&t.yoffset?Math.max(e,Math.abs(t.yoffset)):e}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateTolerance=function(e){if(!e)return 6;if("simple"===e.type)return r(6,e.symbol);if("unique-value"===e.type){var t=6;return e.uniqueValueInfos.forEach(function(e){t=r(t,e.symbol)}),t}if("class-breaks"===e.type){var n=6;return e.classBreakInfos.forEach(function(e){n=r(n,e.symbol)}),n}return e.type,6}}.apply(null,n))||(e.exports=i)},"1Mg+":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("xhoE"),r("Brhx")],void 0===(i=function(e,t,r,n){function i(e,t){e.delete(t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._childrenSet=new Set,t._childrenToAttach=[],t._childrenToDetach=[],t._renderPhase=3,t.children=[],t}return r(t,e),Object.defineProperty(t.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0}),t.prototype.detach=function(){for(var e=0,t=this.children.concat(this._childrenToDetach);e<t.length;e++){var r=t[e];r.attached&&(this.detachChild(r),r.attached=!1,r.parent=null)}},t.prototype.doRender=function(e){var t=e.globalOpacity;e.globalOpacity*=this.opacity,this._renderPhase=0,this.attachChildren(),this._renderPhase=1;for(var r=this._childrenToDetach;r.length>0;){var n=r.shift();this.detachChild(n),n.attached=!1,n.parent=null,n.stage=null}this._renderPhase=2,this.renderChildren(e),this._renderPhase=3,e.globalOpacity=t},t.prototype.addChild=function(e){return this.addChildAt(e,this.children.length)},t.prototype.addChildAt=function(e,t){if(void 0===t&&(t=this.numChildren),!e)return e;if(this.contains(e))return e;var r=e.parent;r&&r!==this&&r.removeChild(e),t>=this.numChildren?this.children.push(e):this.children.splice(t,0,e),this._childrenSet.add(e);var n=this._childrenToDetach.indexOf(e);return n>-1&&this._childrenToDetach.splice(n,1),this._childrenToAttach.push(e),this._renderPhase>=2&&this.requestRender(),e},t.prototype.contains=function(e){return this._childrenSet.has(e)},t.prototype.getChildIndex=function(e){return this.children.indexOf(e)},t.prototype.getChildAt=function(e){return e<0||e>this.children.length?null:this.children[e]},t.prototype.removeAllChildren=function(){for(var e=this.numChildren;e--;)this.removeChildAt(0)},t.prototype.removeChild=function(e){return this.contains(e)?this.removeChildAt(this.getChildIndex(e)):e},t.prototype.removeChildAt=function(e){var t;if(e<0||e>=this.children.length)return null;if(t=this.children.splice(e,1)[0],i(this._childrenSet,t),t.attached)this._childrenToDetach.push(t),this._renderPhase>=2&&this.requestRender();else{var r=this._childrenToAttach.indexOf(t);r>-1&&this._childrenToAttach.splice(r,1)}return t},t.prototype.requestChildRender=function(e){e&&e.parent===this&&this._renderPhase>=2&&this.requestRender()},t.prototype.setChildIndex=function(e,t){var r=this.getChildIndex(e);r>-1&&(this.children.splice(r,1),this.children.splice(t,0,e),this._renderPhase>=2&&this.requestRender())},t.prototype.sortChildren=function(e){return this._renderPhase>2&&this.requestRender(),this.children.sort(e)},t.prototype.attachChildren=function(){var e=this._childrenToAttach;if(0!==e.length)for(var t=0,r=!1;!r;){var n=e[t];n.parent=this,n.stage=this.stage,this.attachChild(n)?(n.attached=!0,e.splice(t,1)):++t,r=e.length===t}},t.prototype.renderChildren=function(e){for(var t=this.children,r=t.length,n=0;n<r;n++)t[n].processRender(e)},t.prototype.attachChild=function(e){return e.attach()},t.prototype.detachChild=function(e){e.detach()},t}(n.DisplayObject);t.Container=o}.apply(null,n))||(e.exports=i)},"3MK9":function(e,t,r){var n;void 0===(n=function(){"use strict";function e(t,r,n,i){this.message=t,this.expected=r,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(e,Error),e.buildMessage=function(e,t){function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function o(e){return a[e.type](e)}var a={literal:function(e){return'"'+n(e.text)+'"'},class:function(e){var t,r="";for(t=0;t<e.parts.length;t++)r+=e.parts[t]instanceof Array?i(e.parts[t][0])+"-"+i(e.parts[t][1]):i(e.parts[t]);return"["+(e.inverted?"^":"")+r+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};return"Expected "+function(e){var t,r,n=new Array(e.length);for(t=0;t<e.length;t++)n[t]=o(e[t]);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+(t?'"'+n(t)+'"':"end of input")+" found."},{SyntaxError:e,parse:function(t,r){function n(){return t.substring(or,ir)}function i(e,t){throw p(e,t=void 0!==t?t:l(or,ir))}function o(e,t){return{type:"literal",text:e,ignoreCase:t}}function a(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function s(e){return{type:"other",description:e}}function u(e){var r,n=ar[e];if(n)return n;for(r=e-1;!ar[r];)r--;for(n={line:(n=ar[r]).line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return ar[e]=n,n}function l(e,t){var r=u(e),n=u(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function c(e){ir<sr||(ir>sr&&(sr=ir,ur=[]),ur.push(e))}function p(t,r){return new e(t,null,null,r)}function d(){var e;return(e=h())===D&&(e=f()),e}function h(){var e,r;return lr++,e=ir,N()!==D?(t.substr(ir,4)===B?(r=B,ir+=4):(r=D,0===lr&&c(J)),r!==D&&N()!==D?(or=e,e=X()):(ir=e,e=D)):(ir=e,e=D),lr--,e===D&&0===lr&&c(H),e}function f(){var e,t;if(e=[],(t=y())!==D)for(;t!==D;)e.push(t),t=y();else e=D;return e}function y(){var e;return(e=v())===D&&(e=g())===D&&(e=m())===D&&(e=b())===D&&(e=_())===D&&(e=w())===D&&(e=x())===D&&(e=E())===D&&(e=M())===D&&(e=O()),e}function v(){var e,r,n,i;return lr++,e=ir,N()!==D?(t.substr(ir,5)===Z?(r=Z,ir+=5):(r=D,0===lr&&c(Y)),r!==D&&N()!==D&&(n=P())!==D&&N()!==D?(41===t.charCodeAt(ir)?(i=K,ir++):(i=D,0===lr&&c(z)),i!==D&&N()!==D?(or=e,e=W(n)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D),lr--,e===D&&0===lr&&c(Q),e}function g(){var e,r,n,i;return lr++,e=ir,N()!==D?(t.substr(ir,11)===ee?(r=ee,ir+=11):(r=D,0===lr&&c(te)),r!==D&&N()!==D&&(n=R())!==D&&N()!==D?(41===t.charCodeAt(ir)?(i=K,ir++):(i=D,0===lr&&c(z)),i!==D&&N()!==D?(or=e,e=re(n)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D),lr--,e===D&&0===lr&&c($),e}function m(){var e,r,n,i;return lr++,e=ir,N()!==D?(t.substr(ir,9)===ie?(r=ie,ir+=9):(r=D,0===lr&&c(oe)),r!==D&&N()!==D&&(n=R())!==D&&N()!==D?(41===t.charCodeAt(ir)?(i=K,ir++):(i=D,0===lr&&c(z)),i!==D&&N()!==D?(or=e,e=ae(n)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D),lr--,e===D&&0===lr&&c(ne),e}function b(){var e,r,n,i,o,a,s;return lr++,e=ir,N()!==D?(t.substr(ir,12)===ue?(r=ue,ir+=12):(r=D,0===lr&&c(le)),r!==D&&N()!==D&&(n=P())!==D&&N()!==D&&(i=P())!==D&&N()!==D?((o=P())===D&&(o=null),o!==D&&N()!==D?((a=L())===D&&(a=null),a!==D&&N()!==D?(41===t.charCodeAt(ir)?(s=K,ir++):(s=D,0===lr&&c(z)),s!==D&&N()!==D?(or=e,e=ce(n,i,o,a)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D),lr--,e===D&&0===lr&&c(se),e}function _(){var e,r,n,i;return lr++,e=ir,N()!==D?(t.substr(ir,10)===de?(r=de,ir+=10):(r=D,0===lr&&c(he)),r!==D&&N()!==D&&(n=R())!==D&&N()!==D?(41===t.charCodeAt(ir)?(i=K,ir++):(i=D,0===lr&&c(z)),i!==D&&N()!==D?(or=e,e=fe(n)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D),lr--,e===D&&0===lr&&c(pe),e}function w(){var e,r,n,i;return lr++,e=ir,N()!==D?(t.substr(ir,11)===ve?(r=ve,ir+=11):(r=D,0===lr&&c(ge)),r!==D&&N()!==D&&(n=C())!==D&&N()!==D?(41===t.charCodeAt(ir)?(i=K,ir++):(i=D,0===lr&&c(z)),i!==D&&N()!==D?(or=e,e=me(n)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D),lr--,e===D&&0===lr&&c(ye),e}function x(){var e,r,n,i;return lr++,e=ir,N()!==D?(t.substr(ir,7)===_e?(r=_e,ir+=7):(r=D,0===lr&&c(we)),r!==D&&N()!==D&&(n=R())!==D&&N()!==D?(41===t.charCodeAt(ir)?(i=K,ir++):(i=D,0===lr&&c(z)),i!==D&&N()!==D?(or=e,e=xe(n)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D),lr--,e===D&&0===lr&&c(be),e}function E(){var e,r,n,i;return lr++,e=ir,N()!==D?(t.substr(ir,8)===Me?(r=Me,ir+=8):(r=D,0===lr&&c(Oe)),r!==D&&N()!==D&&(n=R())!==D&&N()!==D?(41===t.charCodeAt(ir)?(i=K,ir++):(i=D,0===lr&&c(z)),i!==D&&N()!==D?(or=e,e=Re(n)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D),lr--,e===D&&0===lr&&c(Ee),e}function M(){var e,r,n,i;return lr++,e=ir,N()!==D?(t.substr(ir,9)===Fe?(r=Fe,ir+=9):(r=D,0===lr&&c(Se)),r!==D&&N()!==D&&(n=R())!==D&&N()!==D?(41===t.charCodeAt(ir)?(i=K,ir++):(i=D,0===lr&&c(z)),i!==D&&N()!==D?(or=e,e=qe(n)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D),lr--,e===D&&0===lr&&c(Ie),e}function O(){var e,r,n,i;return lr++,e=ir,N()!==D?(t.substr(ir,6)===Te?(r=Te,ir+=6):(r=D,0===lr&&c(Pe)),r!==D&&N()!==D&&(n=R())!==D&&N()!==D?(41===t.charCodeAt(ir)?(i=K,ir++):(i=D,0===lr&&c(z)),i!==D&&N()!==D?(or=e,e=Ae(n)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D),lr--,e===D&&0===lr&&c(Ce),e}function R(){var e;return lr++,(e=q())===D&&(e=F()),lr--,e===D&&0===lr&&c(Le),e}function I(){var e,r,n;if(lr++,e=ir,r=[],Ne.test(t.charAt(ir))?(n=t.charAt(ir),ir++):(n=D,0===lr&&c(ke)),n!==D)for(;n!==D;)r.push(n),Ne.test(t.charAt(ir))?(n=t.charAt(ir),ir++):(n=D,0===lr&&c(ke));else r=D;return r!==D&&(or=e,r=Ve()),lr--,(e=r)===D&&(r=D,0===lr&&c(je)),e}function F(){var e,r,n,i,o;if(lr++,e=ir,r=[],Ne.test(t.charAt(ir))?(n=t.charAt(ir),ir++):(n=D,0===lr&&c(ke)),n!==D)for(;n!==D;)r.push(n),Ne.test(t.charAt(ir))?(n=t.charAt(ir),ir++):(n=D,0===lr&&c(ke));else r=D;if(r!==D)if(46===t.charCodeAt(ir)?(n=Ue,ir++):(n=D,0===lr&&c(Ge)),n!==D){if(i=[],Ne.test(t.charAt(ir))?(o=t.charAt(ir),ir++):(o=D,0===lr&&c(ke)),o!==D)for(;o!==D;)i.push(o),Ne.test(t.charAt(ir))?(o=t.charAt(ir),ir++):(o=D,0===lr&&c(ke));else i=D;i!==D?(or=e,e=r=He()):(ir=e,e=D)}else ir=e,e=D;else ir=e,e=D;return e===D&&(e=I()),lr--,e===D&&(r=D,0===lr&&c(De)),e}function S(){var e,r;return lr++,e=ir,Je.test(t.charAt(ir))?(r=t.charAt(ir),ir++):(r=D,0===lr&&c(Xe)),r===D&&(r=null),r!==D&&F()!==D?(or=e,e=r=He()):(ir=e,e=D),lr--,e===D&&(r=D,0===lr&&c(Be)),e}function q(){var e,r,n;return e=ir,(r=F())!==D?(37===t.charCodeAt(ir)?(n=Qe,ir++):(n=D,0===lr&&c(Ze)),n!==D?(or=e,e=r=Ye(r)):(ir=e,e=D)):(ir=e,e=D),e}function C(){var e,r,n;return lr++,e=ir,(r=S())!==D&&(n=T())!==D?(or=e,e=r=ze(r,n)):(ir=e,e=D),e===D&&(e=ir,48===t.charCodeAt(ir)?(r=We,ir++):(r=D,0===lr&&c($e)),r!==D?((n=T())===D&&(n=null),n!==D?(or=e,e=r=et()):(ir=e,e=D)):(ir=e,e=D)),lr--,e===D&&(r=D,0===lr&&c(Ke)),e}function T(){var e,r;return lr++,e=ir,t.substr(ir,3)===rt?(r=rt,ir+=3):(r=D,0===lr&&c(nt)),r!==D&&(or=e,r=it()),(e=r)===D&&(e=ir,t.substr(ir,4)===ot?(r=ot,ir+=4):(r=D,0===lr&&c(at)),r!==D&&(or=e,r=st()),(e=r)===D&&(e=ir,t.substr(ir,3)===ut?(r=ut,ir+=3):(r=D,0===lr&&c(lt)),r!==D&&(or=e,r=ct()),(e=r)===D&&(e=ir,t.substr(ir,4)===pt?(r=pt,ir+=4):(r=D,0===lr&&c(dt)),r!==D&&(or=e,r=ht()),e=r))),lr--,e===D&&(r=D,0===lr&&c(tt)),e}function P(){var e,r,n;return lr++,e=ir,(r=F())!==D&&(n=A())!==D?(or=e,e=r=ze(r,n)):(ir=e,e=D),e===D&&(e=ir,48===t.charCodeAt(ir)?(r=We,ir++):(r=D,0===lr&&c($e)),r!==D?((n=A())===D&&(n=null),n!==D?(or=e,e=r=et()):(ir=e,e=D)):(ir=e,e=D)),lr--,e===D&&(r=D,0===lr&&c(ft)),e}function A(){var e,r;return e=ir,t.substr(ir,2)===yt?(r=yt,ir+=2):(r=D,0===lr&&c(vt)),r!==D&&(or=e,r=it()),(e=r)===D&&(e=ir,t.substr(ir,2)===gt?(r=gt,ir+=2):(r=D,0===lr&&c(mt)),r!==D&&(or=e,r=bt()),(e=r)===D&&(e=ir,t.substr(ir,2)===_t?(r=_t,ir+=2):(r=D,0===lr&&c(wt)),r!==D&&(or=e,r=xt()),(e=r)===D&&(e=ir,81===t.charCodeAt(ir)?(r=Et,ir++):(r=D,0===lr&&c(Mt)),r!==D&&(or=e,r=Ot()),(e=r)===D&&(e=ir,t.substr(ir,2)===Rt?(r=Rt,ir+=2):(r=D,0===lr&&c(It)),r!==D&&(or=e,r=Ft()),(e=r)===D&&(e=ir,t.substr(ir,2)===St?(r=St,ir+=2):(r=D,0===lr&&c(qt)),r!==D&&(or=e,r=Ct()),(e=r)===D&&(e=ir,t.substr(ir,2)===Tt?(r=Tt,ir+=2):(r=D,0===lr&&c(Pt)),r!==D&&(or=e,r=At()),e=r)))))),e}function L(){var e,r,n,i,o,a,s,u,l,p,d,h,f,y,v;return e=ir,35===t.charCodeAt(ir)?(r=Lt,ir++):(r=D,0===lr&&c(jt)),r!==D?(n=ir,(i=j())!==D&&(o=j())!==D?n=i=[i,o]:(ir=n,n=D),n!==D?(i=ir,(o=j())!==D&&(a=j())!==D?i=o=[o,a]:(ir=i,i=D),i!==D?(o=ir,(a=j())!==D&&(s=j())!==D?o=a=[a,s]:(ir=o,o=D),o!==D?(or=e,e=r=Nt(n,i,o)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D),e===D&&(e=ir,35===t.charCodeAt(ir)?(r=Lt,ir++):(r=D,0===lr&&c(jt)),r!==D&&(n=j())!==D&&(i=j())!==D&&(o=j())!==D?(or=e,e=r=kt(n,i,o)):(ir=e,e=D),e===D&&(e=ir,t.substr(ir,5)===Vt?(r=Vt,ir+=5):(r=D,0===lr&&c(Dt)),r!==D&&(n=N())!==D&&(i=q())!==D&&(o=N())!==D?(44===t.charCodeAt(ir)?(a=Ut,ir++):(a=D,0===lr&&c(Gt)),a!==D&&(s=N())!==D&&(u=q())!==D&&N()!==D?(44===t.charCodeAt(ir)?(l=Ut,ir++):(l=D,0===lr&&c(Gt)),l!==D&&N()!==D&&(p=q())!==D&&(d=N())!==D?(44===t.charCodeAt(ir)?(h=Ut,ir++):(h=D,0===lr&&c(Gt)),h!==D&&(f=N())!==D&&(y=R())!==D&&N()!==D?(41===t.charCodeAt(ir)?(v=K,ir++):(v=D,0===lr&&c(z)),v!==D?(or=e,e=r=Ht(i,u,p,y)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D),e===D&&(e=ir,t.substr(ir,5)===Vt?(r=Vt,ir+=5):(r=D,0===lr&&c(Dt)),r!==D&&(n=N())!==D&&(i=F())!==D&&(o=N())!==D?(44===t.charCodeAt(ir)?(a=Ut,ir++):(a=D,0===lr&&c(Gt)),a!==D&&(s=N())!==D&&(u=F())!==D&&N()!==D?(44===t.charCodeAt(ir)?(l=Ut,ir++):(l=D,0===lr&&c(Gt)),l!==D&&N()!==D&&(p=F())!==D?(44===t.charCodeAt(ir)?(d=Ut,ir++):(d=D,0===lr&&c(Gt)),d!==D&&(h=N())!==D&&(f=R())!==D?(41===t.charCodeAt(ir)?(y=K,ir++):(y=D,0===lr&&c(z)),y!==D?(or=e,e=r=Bt(i,u,p,f)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D),e===D&&(e=ir,t.substr(ir,5)===Vt?(r=Vt,ir+=5):(r=D,0===lr&&c(Dt)),r!==D&&(n=N())!==D&&(i=q())!==D&&(o=N())!==D?(44===t.charCodeAt(ir)?(a=Ut,ir++):(a=D,0===lr&&c(Gt)),a!==D&&(s=N())!==D&&(u=q())!==D&&N()!==D?(44===t.charCodeAt(ir)?(l=Ut,ir++):(l=D,0===lr&&c(Gt)),l!==D&&N()!==D&&(p=q())!==D&&(d=N())!==D?(41===t.charCodeAt(ir)?(h=K,ir++):(h=D,0===lr&&c(z)),h!==D?(or=e,e=r=Jt(i,u,p)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D),e===D&&(e=ir,t.substr(ir,5)===Vt?(r=Vt,ir+=5):(r=D,0===lr&&c(Dt)),r!==D&&(n=N())!==D&&(i=F())!==D&&(o=N())!==D?(44===t.charCodeAt(ir)?(a=Ut,ir++):(a=D,0===lr&&c(Gt)),a!==D&&(s=N())!==D&&(u=F())!==D&&N()!==D?(44===t.charCodeAt(ir)?(l=Ut,ir++):(l=D,0===lr&&c(Gt)),l!==D&&N()!==D&&(p=F())!==D?(41===t.charCodeAt(ir)?(d=K,ir++):(d=D,0===lr&&c(z)),d!==D?(or=e,e=r=Xt(i,u,p)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D),e===D&&(e=ir,t.substr(ir,4)===Qt?(r=Qt,ir+=4):(r=D,0===lr&&c(Zt)),r!==D&&(n=N())!==D&&(i=q())!==D&&(o=N())!==D?(44===t.charCodeAt(ir)?(a=Ut,ir++):(a=D,0===lr&&c(Gt)),a!==D&&(s=N())!==D&&(u=q())!==D&&N()!==D?(44===t.charCodeAt(ir)?(l=Ut,ir++):(l=D,0===lr&&c(Gt)),l!==D&&N()!==D&&(p=q())!==D&&(d=N())!==D?(41===t.charCodeAt(ir)?(h=K,ir++):(h=D,0===lr&&c(z)),h!==D?(or=e,e=r=Jt(i,u,p)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D),e===D&&(e=ir,t.substr(ir,4)===Qt?(r=Qt,ir+=4):(r=D,0===lr&&c(Zt)),r!==D&&(n=N())!==D&&(i=F())!==D&&(o=N())!==D?(44===t.charCodeAt(ir)?(a=Ut,ir++):(a=D,0===lr&&c(Gt)),a!==D&&(s=N())!==D&&(u=F())!==D&&N()!==D?(44===t.charCodeAt(ir)?(l=Ut,ir++):(l=D,0===lr&&c(Gt)),l!==D&&N()!==D&&(p=F())!==D&&(d=N())!==D?(41===t.charCodeAt(ir)?(h=K,ir++):(h=D,0===lr&&c(z)),h!==D?(or=e,e=r=Xt(i,u,p)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D)):(ir=e,e=D),e===D&&(e=k())))))))),e}function j(){var e;return Yt.test(t.charAt(ir))?(e=t.charAt(ir),ir++):(e=D,0===lr&&c(Kt)),e}function N(){var e,r;for(lr++,e=[],Wt.test(t.charAt(ir))?(r=t.charAt(ir),ir++):(r=D,0===lr&&c($t));r!==D;)e.push(r),Wt.test(t.charAt(ir))?(r=t.charAt(ir),ir++):(r=D,0===lr&&c($t));return lr--,e===D&&(r=D,0===lr&&c(zt)),e}function k(){var e,r,n;if(lr++,e=ir,r=[],tr.test(t.charAt(ir))?(n=t.charAt(ir),ir++):(n=D,0===lr&&c(rr)),n!==D)for(;n!==D;)r.push(n),tr.test(t.charAt(ir))?(n=t.charAt(ir),ir++):(n=D,0===lr&&c(rr));else r=D;return r!==D&&(or=e,r=nr()),lr--,(e=r)===D&&(r=D,0===lr&&c(er)),e}r=void 0!==r?r:{};var V,D={},U={start:d},G=d,H=s("none"),B="none",J=o("none",!1),X=function(){return null},Q=s("blur()"),Z="blur(",Y=o("blur(",!1),K=")",z=o(")",!1),W=function(e){return{type:"blur",radius:e}},$=s("brightness()"),ee="brightness(",te=o("brightness(",!1),re=function(e){return{type:"brightness",amount:e}},ne=s("contrast()"),ie="contrast(",oe=o("contrast(",!1),ae=function(e){return{type:"contrast",amount:e}},se=s("drop-shadow()"),ue="drop-shadow(",le=o("drop-shadow(",!1),ce=function(e,t,r,n){return{type:"drop-shadow",offsetX:e,offsetY:t,blurRadius:r,color:n}},pe=s("grayscale()"),de="grayscale(",he=o("grayscale(",!1),fe=function(e){return{type:"grayscale",amount:e}},ye=s("hue-rotate()"),ve="hue-rotate(",ge=o("hue-rotate(",!1),me=function(e){return{type:"hue-rotate",angle:e}},be=s("invert()"),_e="invert(",we=o("invert(",!1),xe=function(e){return{type:"invert",amount:e}},Ee=s("opacity()"),Me="opacity(",Oe=o("opacity(",!1),Re=function(e){return{type:"opacity",amount:e}},Ie=s("saturate()"),Fe="saturate(",Se=o("saturate(",!1),qe=function(e){return{type:"saturate",amount:e}},Ce=s("sepia()"),Te="sepia(",Pe=o("sepia(",!1),Ae=function(e){return{type:"sepia",amount:e}},Le=s("<number-percentage>"),je=s("<integer>"),Ne=/^[0-9]/,ke=a([["0","9"]],!1,!1),Ve=function(){return parseInt(n(),10)},De=s("<number>"),Ue=".",Ge=o(".",!1),He=function(){return parseFloat(n())},Be=s("<signedNumber>"),Je=/^[+\-]/,Xe=a(["+","-"],!1,!1),Qe="%",Ze=o("%",!1),Ye=function(e){return e/100},Ke=s("<angle>"),ze=function(e,t){return e*t},We="0",$e=o("0",!1),et=function(){return 0},tt=s("<unit>"),rt="deg",nt=o("deg",!1),it=function(){return 1},ot="grad",at=o("grad",!1),st=function(){return.9},ut="rad",lt=o("rad",!1),ct=function(){return 180/Math.PI},pt="turn",dt=o("turn",!1),ht=function(){return 1/360},ft=s("<length>"),yt="px",vt=o("px",!1),gt="cm",mt=o("cm",!1),bt=function(){return 96/2.54},_t="mm",wt=o("mm",!1),xt=function(){return 96/2.54/10},Et="Q",Mt=o("Q",!1),Ot=function(){return 96/2.54/40},Rt="in",It=o("in",!1),Ft=function(){return 96},St="pc",qt=o("pc",!1),Ct=function(){return 16},Tt="pt",Pt=o("pt",!1),At=function(){return 96/73},Lt="#",jt=o("#",!1),Nt=function(e,t,r){return[parseInt(e.join(""),16),parseInt(t.join(""),16),parseInt(r.join(""),16)]},kt=function(e,t,r){return[parseInt([e,e].join(""),16),parseInt([t,t].join(""),16),parseInt([r,r].join(""),16)]},Vt="rgba(",Dt=o("rgba(",!1),Ut=",",Gt=o(",",!1),Ht=function(e,t,r,n){return[255*e,255*t,255*r,n]},Bt=function(e,t,r,n){return[e,t,r,n]},Jt=function(e,t,r){return[255*e,255*t,255*r,1]},Xt=function(e,t,r){return[e,t,r,1]},Qt="rgb(",Zt=o("rgb(",!1),Yt=/^[0-9a-fA-F]/,Kt=a([["0","9"],["a","f"],["A","F"]],!1,!1),zt=s("whitespace"),Wt=/^[ \t\n\r]/,$t=a([" ","\t","\n","\r"],!1,!1),er=s("<named-color>"),tr=/^[a-z]/,rr=a([["a","z"]],!1,!1),nr=function(){var e=n();return pr.has(e)||i('unknown color "'+e+'"'),cr[e].concat(1)},ir=0,or=0,ar=[{line:1,column:1}],sr=0,ur=[],lr=0;if("startRule"in r){if(!(r.startRule in U))throw new Error("Can't start parsing from rule \""+r.startRule+'".');G=U[r.startRule]}var cr={transparent:[0,0,0,0],black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rebeccapurple:[102,51,153],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]},pr=new Set(Object.keys(cr));if((V=G())!==D&&ir===t.length)return V;throw V!==D&&ir<t.length&&c({type:"end"}),function(t,r,n){return new e(e.buildMessage(t,r),t,r,n)}(ur,sr<t.length?t.charAt(sr):null,sr<t.length?l(sr,sr+1):l(sr,sr))}}}.apply(null,[]))||(e.exports=n)},"6i4F":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("8MXS"),r("Vx27"),r("WsO6")],void 0===(i=function(e,t,r,n,i,o,a){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.attached=!1,t.lastUpdateId=-1,t.moving=!1,t.updateRequested=!1,t}return r(t,e),t.prototype.initialize=function(){var e=this;this.when(function(){e.requestUpdate()});var t=function(){return e.notifyChange("rendering")};this.handles.add([i.init(this,"suspended",function(t){e.container&&(e.container.visible=!t),e.view&&!t&&e.updateRequested&&e.view.requestLayerViewUpdate(e)},!0),i.init(this,"fullOpacity",function(t){e.container&&(e.container.opacity=t)},!0),i.on(this,"container","post-render",t),i.on(this,"container","will-render",t)])},t.prototype.destroy=function(){this.attached&&(this.attached=!1,this.detach()),this.handles.remove("initialize"),this.updateRequested=!1,this.layer=null},Object.defineProperty(t.prototype,"rendering",{get:function(){return this.attached&&!this.suspended&&(this.moving||this.container.renderRequested||this.isRendering())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!this.suspended&&(!this.attached||this.updateRequested||this.isUpdating())},enumerable:!0,configurable:!0}),t.prototype.isVisibleAtScale=function(e){var t=!0,r=this.layer,n=r.minScale,i=r.maxScale;if(null!=n&&null!=i){var o=!n,a=!i;!o&&e<=n&&(o=!0),!a&&e>=i&&(a=!0),t=o&&a}return t},t.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestLayerViewUpdate(this))},t.prototype.processUpdate=function(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1},t.prototype.isUpdating=function(){return!1},t.prototype.isRendering=function(){return!1},t.prototype.canResume=function(){var e=this.inherited(arguments);return e&&(e=this.isVisibleAtScale(this.view.scale)),e},n([o.property()],t.prototype,"attached",void 0),n([o.property()],t.prototype,"container",void 0),n([o.property()],t.prototype,"moving",void 0),n([o.property({dependsOn:["attached","suspended","moving"]})],t.prototype,"rendering",null),n([o.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],t.prototype,"suspended",void 0),n([o.property({readOnly:!0})],t.prototype,"updateParameters",void 0),n([o.property()],t.prototype,"updateRequested",void 0),n([o.property({dependsOn:["updateRequested","attached"]})],t.prototype,"updating",null),n([o.property()],t.prototype,"view",void 0),n([o.subclass("esri.views.2d.layers.LayerView2D")],t)}(o.declared(a))}.apply(null,n))||(e.exports=i)},"7MDj":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("Gtr7"),r("eIBl"),r("Vx27")],void 0===(i=function(e,t,r,n,i,o,a){return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=e.call(this)||this;return n.handles=new o,n}return r(t,e),t.prototype.destroy=function(){this.handles.destroy()},n([a.property({readOnly:!0})],t.prototype,"handles",void 0),n([a.subclass("esri.core.HandleOwner")],t)}(a.declared(i))}.apply(null,n))||(e.exports=i)},"7XLS":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("Gtr7"),r("Vx27")],void 0===(i=function(e,t,r,n,i,o){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refreshTimestamp=null,t}return r(t,e),t.prototype.refresh=function(e){void 0===e&&(e=Date.now()),this._set("refreshTimestamp",e),this.doRefresh&&this.doRefresh()},n([o.property()],t.prototype,"layer",void 0),n([o.aliasOf("layer.refreshInterval")],t.prototype,"refreshInterval",void 0),n([o.property({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),n([o.subclass("esri.layers.mixins.RefreshableLayerView")],t)}(o.declared(i))}.apply(null,n))||(e.exports=i)},"7Yqx":function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){var e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},t.clone=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.fromValues=function(e,t,r,n,i,o,a,s,u,l,c,p,d,h,f,y){var v=new Float32Array(16);return v[0]=e,v[1]=t,v[2]=r,v[3]=n,v[4]=i,v[5]=o,v[6]=a,v[7]=s,v[8]=u,v[9]=l,v[10]=c,v[11]=p,v[12]=d,v[13]=h,v[14]=f,v[15]=y,v},t.createView=function(e,t){return new Float32Array(e,t,16)}}.apply(null,n))||(e.exports=i)},"8iBb":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("2Atf"),r("Q2wQ"),r("HZ3d"),r("ll/V"),r("PND3"),r("ma1f"),r("qsST"),r("LxLY"),r("qMld"),r("8MXS"),r("Vx27"),r("k7g7"),r("3568"),r("7XLS"),r("dDbr"),r("e4th"),r("I6zq")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,p,d,h,f,y,v,g,m,b,_){var w=c.getLogger("esri.views.layers.FeatureLayerView");return function(e){function t(t){var r=e.call(this,t)||this;return r.effect=null,r.filter=null,r.layer=null,r.requiredFields=null,r.view=null,r}return r(t,e),t.prototype.initialize=function(){var e=this;h.init(this,["layer.renderer","layer.labelingInfo","layer.elevationInfo.featureExpressionInfo","filter","effect"],function(){return e._updateRequiredFields()})},Object.defineProperty(t.prototype,"availableFields",{get:function(){var e=this,t=e.layer,r=e.layer.fields,n=e.requiredFields;return"outFields"in t&&t.outFields?y.fixFields(r,y.unpackFieldNames(r,t.outFields).concat(n)):y.fixFields(r,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximumNumberOfFeatures",{get:function(){return 0},set:function(e){w.error("#maximumNumberOfFeatures=","Setting maximum number of features is not supported")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximumNumberOfFeaturesExceeded",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.highlight=function(e,t){return void 0===t&&(t={}),this.inherited(arguments)},t.prototype.queryFeatures=function(e){return this.inherited(arguments)},t.prototype.queryObjectIds=function(e){return this.inherited(arguments)},t.prototype.queryFeatureCount=function(e){return this.inherited(arguments)},t.prototype.queryExtent=function(e){return this.inherited(arguments)},t.prototype._updateRequiredFields=function(){return a(this,void 0,void 0,function(){var e,t,r,n,i,a,l,c,p,h,f,v,g;return o(this,function(o){switch(o.label){case 0:return this.layer&&this.view?(e="3d"===this.view.type,r=(t=this).layer,n=t.layer,i=n.fields,a=n.objectIdField,l=n.renderer,c=new u.default,[4,d.eachAlways([l?l.collectRequiredFields(c,i):null,y.collectLabelingFields(c,r),e?y.collectElevationFields(c,r):null,this.filter?y.collectFilterFields(c,r,this.filter):null,this.effect?y.collectFilterFields(c,r,this.effect.filter):null])]):[2];case 1:for(p=o.sent(),h=0,f=p;h<f.length;h++)(v=f[h]).error&&w.error(v.error);return y.collectField(c,i,a),g=s.from(c).sort(),this._set("requiredFields",g),[2]}})})},t.prototype.validateFetchPopupFeatures=function(e){var t=this.layer;return this.layer.popupEnabled?_.getFetchPopupTemplate(this.layer,e)?void 0:new l("featurelayerview:fetchPopupFeatures","Layer does not define a popup template",{layer:t}):new l("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:t})},t.prototype.fetchClientPopupFeatures=function(e){return a(this,void 0,void 0,function(){var t,r,n,i,a,s,u,l,c,h,f;return o(this,function(o){switch(o.label){case 0:return(t=p.isSome(e)?e.clientGraphics:null)&&0!==t.length?(r=[],n=[],i=this.layer,a=_.getFetchPopupTemplate(i,e),p.isSome(a)?(s=v.hasGeometryOperations(a),[4,this.createPopupQuery(e)]):[2,d.resolve([])]):[2,d.resolve([])];case 1:for(u=o.sent(),l=y.unpackFieldNames(i.fields,u.outFields),c=0,h=t;c<h.length;c++)f=h[c],s||!y.featureHasFields(l,f)?n.push(f):r.push(f);return 0===n.length?[2,d.resolve(r)]:(u.objectIds=n.map(function(e){return e.attributes[i.objectIdField]}),[2,i.queryFeatures(u).then(function(e){return r.concat(e.features)}).catch(function(){return n})])}})})},t.prototype.createPopupQuery=function(e){return a(this,void 0,void 0,function(){var t,r,n;return o(this,function(i){switch(i.label){case 0:return t=this.layer,(r=t.createQuery()).returnGeometry=!0,r.returnZ=!0,r.returnM=!0,n=r,[4,_.getRequiredFields(this.layer,_.getFetchPopupTemplate(this.layer,e))];case 1:return n.outFields=i.sent(),r.outSpatialReference=this.view.spatialReference,[2,r]}})})},n([f.property({readOnly:!0,dependsOn:["layer.outFields?","requiredFields"]})],t.prototype,"availableFields",null),n([f.property({type:m})],t.prototype,"effect",void 0),n([f.property({type:b})],t.prototype,"filter",void 0),n([f.property()],t.prototype,"layer",void 0),n([f.property({type:Number})],t.prototype,"maximumNumberOfFeatures",null),n([f.property({readOnly:!0,type:Boolean})],t.prototype,"maximumNumberOfFeaturesExceeded",null),n([f.property({readOnly:!0})],t.prototype,"requiredFields",void 0),n([f.property()],t.prototype,"view",void 0),n([f.subclass("esri.views.layers.FeatureLayerView")],t)}(f.declared(g))}.apply(null,n))||(e.exports=i)},Brhx:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("xhoE"),r("BcWh")],void 0===(i=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderRequestedCalled=!1,t._attached=!1,t._isReady=!1,t._opacity=1,t.renderRequested=!1,t._visible=!0,t}return r(t,e),Object.defineProperty(t.prototype,"attached",{get:function(){return this._attached},set:function(e){this._attached!==e&&(this._attached=e,e?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReady",{get:function(){return this._attached&&this._isReady},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this._opacity},set:function(e){this._opacity!==e&&(this._opacity=e,this.requestRender())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible!==e&&(this._visible=e,this.requestRender())},enumerable:!0,configurable:!0}),t.prototype.attach=function(){return this.ready(),!0},t.prototype.detach=function(){},t.prototype.processRender=function(e){this.visible&&this.attached&&(this._renderRequestedCalled=!1,this.doRender(e),this._renderRequestedCalled||(this.renderRequested=!1),this.hasEventListener("post-render")&&this.emit("post-render"))},t.prototype.requestRender=function(){var e=this.renderRequested;this._renderRequestedCalled=!0,this.renderRequested=!0,this.parent&&this.parent.requestChildRender(this),e!==this.renderRequested&&this.hasEventListener("will-render")&&this.emit("will-render")},t.prototype.dispose=function(){},t.prototype.ready=function(){this._isReady=!0,this.emit("isReady")},t}(n);t.DisplayObject=i}.apply(null,n))||(e.exports=i)},FXVB:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("Jl7l")],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.mat4=r}.apply(null,n))||(e.exports=i)},I6zq:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("Q2wQ"),r("HZ3d"),r("ll/V"),r("LxLY"),r("k7g7")],void 0===(i=function(e,t,r,n,i,o,a){Object.defineProperty(t,"__esModule",{value:!0}),t.getRequiredFields=function(e,t){return void 0===t&&(t=e.popupTemplate),n(this,void 0,void 0,function(){var n,s,u,l,c,p,d,h,f,y,v;return r(this,function(r){switch(r.label){case 0:return o.isSome(t)?[4,t.getRequiredFields(e.fields)]:[2,[]];case 1:return n=r.sent(),s=t.lastEditInfoEnabled,u=e.objectIdField,l=e.typeIdField,i.includes(n,"*")?[2,["*"]]:(p=a.fixFields,d=[e.fields],f=(h=n).concat,y=[[l]],(v=s)?[4,a.getFeatureEditFields(e)]:[3,3]);case 2:v=r.sent(),r.label=3;case 3:return(c=p.apply(void 0,d.concat([f.apply(h,y.concat([v||null]))])))&&u&&a.hasField(e.fields,u)&&-1===c.indexOf(u)&&c.push(u),[2,c]}})})},t.getFetchPopupTemplate=function(e,t){return e.popupTemplate?e.popupTemplate:o.isSome(t)&&t.defaultPopupTemplateEnabled&&o.isSome(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}}.apply(null,n))||(e.exports=i)},Jl7l:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("jaBu"),r("qysZ")],void 0===(i=function(e,t,r,n){function i(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function o(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],c=t[7],p=t[8],d=t[9],h=t[10],f=t[11],y=t[12],v=t[13],g=t[14],m=t[15],b=r[0],_=r[1],w=r[2],x=r[3];return e[0]=b*n+_*s+w*p+x*y,e[1]=b*i+_*u+w*d+x*v,e[2]=b*o+_*l+w*h+x*g,e[3]=b*a+_*c+w*f+x*m,b=r[4],_=r[5],w=r[6],x=r[7],e[4]=b*n+_*s+w*p+x*y,e[5]=b*i+_*u+w*d+x*v,e[6]=b*o+_*l+w*h+x*g,e[7]=b*a+_*c+w*f+x*m,b=r[8],_=r[9],w=r[10],x=r[11],e[8]=b*n+_*s+w*p+x*y,e[9]=b*i+_*u+w*d+x*v,e[10]=b*o+_*l+w*h+x*g,e[11]=b*a+_*c+w*f+x*m,b=r[12],_=r[13],w=r[14],x=r[15],e[12]=b*n+_*s+w*p+x*y,e[13]=b*i+_*u+w*d+x*v,e[14]=b*o+_*l+w*h+x*g,e[15]=b*a+_*c+w*f+x*m,e}function a(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=n+n,u=i+i,l=o+o,c=n*s,p=n*u,d=n*l,h=i*u,f=i*l,y=o*l,v=a*s,g=a*u,m=a*l;return e[0]=1-(h+y),e[1]=p+m,e[2]=d-g,e[3]=0,e[4]=p-m,e[5]=1-(c+y),e[6]=f+v,e[7]=0,e[8]=d+g,e[9]=f-v,e[10]=1-(c+h),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function s(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}Object.defineProperty(t,"__esModule",{value:!0}),t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.set=function(e,t,r,n,i,o,a,s,u,l,c,p,d,h,f,y,v){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=u,e[8]=l,e[9]=c,e[10]=p,e[11]=d,e[12]=h,e[13]=f,e[14]=y,e[15]=v,e},t.identity=i,t.transpose=function(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},t.invert=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],p=t[9],d=t[10],h=t[11],f=t[12],y=t[13],v=t[14],g=t[15],m=r*s-n*a,b=r*u-i*a,_=r*l-o*a,w=n*u-i*s,x=n*l-o*s,E=i*l-o*u,M=c*y-p*f,O=c*v-d*f,R=c*g-h*f,I=p*v-d*y,F=p*g-h*y,S=d*g-h*v,q=m*S-b*F+_*I+w*R-x*O+E*M;return q?(q=1/q,e[0]=(s*S-u*F+l*I)*q,e[1]=(i*F-n*S-o*I)*q,e[2]=(y*E-v*x+g*w)*q,e[3]=(d*x-p*E-h*w)*q,e[4]=(u*R-a*S-l*O)*q,e[5]=(r*S-i*R+o*O)*q,e[6]=(v*_-f*E-g*b)*q,e[7]=(c*E-d*_+h*b)*q,e[8]=(a*F-s*R+l*M)*q,e[9]=(n*R-r*F-o*M)*q,e[10]=(f*x-y*_+g*m)*q,e[11]=(p*_-c*x-h*m)*q,e[12]=(s*O-a*I-u*M)*q,e[13]=(r*I-n*O+i*M)*q,e[14]=(y*b-f*w-v*m)*q,e[15]=(c*w-p*b+d*m)*q,e):null},t.adjoint=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],c=t[8],p=t[9],d=t[10],h=t[11],f=t[12],y=t[13],v=t[14],g=t[15];return e[0]=s*(d*g-h*v)-p*(u*g-l*v)+y*(u*h-l*d),e[1]=-(n*(d*g-h*v)-p*(i*g-o*v)+y*(i*h-o*d)),e[2]=n*(u*g-l*v)-s*(i*g-o*v)+y*(i*l-o*u),e[3]=-(n*(u*h-l*d)-s*(i*h-o*d)+p*(i*l-o*u)),e[4]=-(a*(d*g-h*v)-c*(u*g-l*v)+f*(u*h-l*d)),e[5]=r*(d*g-h*v)-c*(i*g-o*v)+f*(i*h-o*d),e[6]=-(r*(u*g-l*v)-a*(i*g-o*v)+f*(i*l-o*u)),e[7]=r*(u*h-l*d)-a*(i*h-o*d)+c*(i*l-o*u),e[8]=a*(p*g-h*y)-c*(s*g-l*y)+f*(s*h-l*p),e[9]=-(r*(p*g-h*y)-c*(n*g-o*y)+f*(n*h-o*p)),e[10]=r*(s*g-l*y)-a*(n*g-o*y)+f*(n*l-o*s),e[11]=-(r*(s*h-l*p)-a*(n*h-o*p)+c*(n*l-o*s)),e[12]=-(a*(p*v-d*y)-c*(s*v-u*y)+f*(s*d-u*p)),e[13]=r*(p*v-d*y)-c*(n*v-i*y)+f*(n*d-i*p),e[14]=-(r*(s*v-u*y)-a*(n*v-i*y)+f*(n*u-i*s)),e[15]=r*(s*d-u*p)-a*(n*d-i*p)+c*(n*u-i*s),e},t.determinant=function(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],p=e[10],d=e[11],h=e[12],f=e[13],y=e[14],v=e[15];return(t*a-r*o)*(p*v-d*y)-(t*s-n*o)*(c*v-d*f)+(t*u-i*o)*(c*y-p*f)+(r*s-n*a)*(l*v-d*h)-(r*u-i*a)*(l*y-p*h)+(n*u-i*s)*(l*f-c*h)},t.multiply=o,t.translate=function(e,t,r){var n=r[0],i=r[1],o=r[2],a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,p=void 0,d=void 0,h=void 0,f=void 0,y=void 0,v=void 0,g=void 0;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*o+t[12],e[13]=t[1]*n+t[5]*i+t[9]*o+t[13],e[14]=t[2]*n+t[6]*i+t[10]*o+t[14],e[15]=t[3]*n+t[7]*i+t[11]*o+t[15]):(a=t[0],s=t[1],u=t[2],l=t[3],c=t[4],p=t[5],d=t[6],h=t[7],f=t[8],y=t[9],v=t[10],g=t[11],e[0]=a,e[1]=s,e[2]=u,e[3]=l,e[4]=c,e[5]=p,e[6]=d,e[7]=h,e[8]=f,e[9]=y,e[10]=v,e[11]=g,e[12]=a*n+c*i+f*o+t[12],e[13]=s*n+p*i+y*o+t[13],e[14]=u*n+d*i+v*o+t[14],e[15]=l*n+h*i+g*o+t[15]),e},t.scale=function(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.rotate=function(e,t,r,i){var o=i[0],a=i[1],s=i[2],u=Math.sqrt(o*o+a*a+s*s),l=void 0,c=void 0,p=void 0,d=void 0,h=void 0,f=void 0,y=void 0,v=void 0,g=void 0,m=void 0,b=void 0,_=void 0,w=void 0,x=void 0,E=void 0,M=void 0,O=void 0,R=void 0,I=void 0,F=void 0,S=void 0,q=void 0,C=void 0,T=void 0;return u<n.EPSILON?null:(o*=u=1/u,a*=u,s*=u,l=Math.sin(r),p=1-(c=Math.cos(r)),d=t[0],h=t[1],f=t[2],y=t[3],v=t[4],g=t[5],m=t[6],b=t[7],_=t[8],w=t[9],x=t[10],E=t[11],M=o*o*p+c,O=a*o*p+s*l,R=s*o*p-a*l,I=o*a*p-s*l,F=a*a*p+c,S=s*a*p+o*l,q=o*s*p+a*l,C=a*s*p-o*l,T=s*s*p+c,e[0]=d*M+v*O+_*R,e[1]=h*M+g*O+w*R,e[2]=f*M+m*O+x*R,e[3]=y*M+b*O+E*R,e[4]=d*I+v*F+_*S,e[5]=h*I+g*F+w*S,e[6]=f*I+m*F+x*S,e[7]=y*I+b*F+E*S,e[8]=d*q+v*C+_*T,e[9]=h*q+g*C+w*T,e[10]=f*q+m*C+x*T,e[11]=y*q+b*C+E*T,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},t.rotateX=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],c=t[9],p=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+l*n,e[5]=a*i+c*n,e[6]=s*i+p*n,e[7]=u*i+d*n,e[8]=l*i-o*n,e[9]=c*i-a*n,e[10]=p*i-s*n,e[11]=d*i-u*n,e},t.rotateY=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],u=t[3],l=t[8],c=t[9],p=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-l*n,e[1]=a*i-c*n,e[2]=s*i-p*n,e[3]=u*i-d*n,e[8]=o*n+l*i,e[9]=a*n+c*i,e[10]=s*n+p*i,e[11]=u*n+d*i,e},t.rotateZ=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],u=t[3],l=t[4],c=t[5],p=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+l*n,e[1]=a*i+c*n,e[2]=s*i+p*n,e[3]=u*i+d*n,e[4]=l*i-o*n,e[5]=c*i-a*n,e[6]=p*i-s*n,e[7]=d*i-u*n,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotation=function(e,t,r){var i=r[0],o=r[1],a=r[2],s=Math.sqrt(i*i+o*o+a*a),u=void 0,l=void 0,c=void 0;return s<n.EPSILON?null:(i*=s=1/s,o*=s,a*=s,u=Math.sin(t),c=1-(l=Math.cos(t)),e[0]=i*i*c+l,e[1]=o*i*c+a*u,e[2]=a*i*c-o*u,e[3]=0,e[4]=i*o*c-a*u,e[5]=o*o*c+l,e[6]=a*o*c+i*u,e[7]=0,e[8]=i*a*c+o*u,e[9]=o*a*c-i*u,e[10]=a*a*c+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},t.fromXRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromYRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromZRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotationTranslation=a,t.fromQuat2=function(e,t){var r=u,n=-t[0],i=-t[1],o=-t[2],s=t[3],l=t[4],c=t[5],p=t[6],d=t[7],h=n*n+i*i+o*o+s*s;return h>0?(r[0]=2*(l*s+d*n+c*o-p*i)/h,r[1]=2*(c*s+d*i+p*n-l*o)/h,r[2]=2*(p*s+d*o+l*i-c*n)/h):(r[0]=2*(l*s+d*n+c*o-p*i),r[1]=2*(c*s+d*i+p*n-l*o),r[2]=2*(p*s+d*o+l*i-c*n)),a(e,t,r),e};var u=r.create();t.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},t.getScaling=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[4],a=t[5],s=t[6],u=t[8],l=t[9],c=t[10];return e[0]=Math.sqrt(r*r+n*n+i*i),e[1]=Math.sqrt(o*o+a*a+s*s),e[2]=Math.sqrt(u*u+l*l+c*c),e},t.getRotation=function(e,t){var r=t[0]+t[5]+t[10],n=0;return r>0?(n=2*Math.sqrt(r+1),e[3]=.25*n,e[0]=(t[6]-t[9])/n,e[1]=(t[8]-t[2])/n,e[2]=(t[1]-t[4])/n):t[0]>t[5]&&t[0]>t[10]?(n=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/n,e[0]=.25*n,e[1]=(t[1]+t[4])/n,e[2]=(t[8]+t[2])/n):t[5]>t[10]?(n=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/n,e[0]=(t[1]+t[4])/n,e[1]=.25*n,e[2]=(t[6]+t[9])/n):(n=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/n,e[0]=(t[8]+t[2])/n,e[1]=(t[6]+t[9])/n,e[2]=.25*n),e},t.fromRotationTranslationScale=function(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=t[3],u=i+i,l=o+o,c=a+a,p=i*u,d=i*l,h=i*c,f=o*l,y=o*c,v=a*c,g=s*u,m=s*l,b=s*c,_=n[0],w=n[1],x=n[2];return e[0]=(1-(f+v))*_,e[1]=(d+b)*_,e[2]=(h-m)*_,e[3]=0,e[4]=(d-b)*w,e[5]=(1-(p+v))*w,e[6]=(y+g)*w,e[7]=0,e[8]=(h+m)*x,e[9]=(y-g)*x,e[10]=(1-(p+f))*x,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},t.fromRotationTranslationScaleOrigin=function(e,t,r,n,i){var o=t[0],a=t[1],s=t[2],u=t[3],l=o+o,c=a+a,p=s+s,d=o*l,h=o*c,f=o*p,y=a*c,v=a*p,g=s*p,m=u*l,b=u*c,_=u*p,w=n[0],x=n[1],E=n[2],M=i[0],O=i[1],R=i[2],I=(1-(y+g))*w,F=(h+_)*w,S=(f-b)*w,q=(h-_)*x,C=(1-(d+g))*x,T=(v+m)*x,P=(f+b)*E,A=(v-m)*E,L=(1-(d+y))*E;return e[0]=I,e[1]=F,e[2]=S,e[3]=0,e[4]=q,e[5]=C,e[6]=T,e[7]=0,e[8]=P,e[9]=A,e[10]=L,e[11]=0,e[12]=r[0]+M-(I*M+q*O+P*R),e[13]=r[1]+O-(F*M+C*O+A*R),e[14]=r[2]+R-(S*M+T*O+L*R),e[15]=1,e},t.fromQuat=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,u=i+i,l=r*a,c=n*a,p=n*s,d=i*a,h=i*s,f=i*u,y=o*a,v=o*s,g=o*u;return e[0]=1-p-f,e[1]=c+g,e[2]=d-v,e[3]=0,e[4]=c-g,e[5]=1-l-f,e[6]=h+y,e[7]=0,e[8]=d+v,e[9]=h-y,e[10]=1-l-p,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.frustum=function(e,t,r,n,i,o,a){var s=1/(r-t),u=1/(i-n),l=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*u,e[10]=(a+o)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*l,e[15]=0,e},t.perspective=function(e,t,r,n,i){var o=1/Math.tan(t/2),a=void 0;return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(n-i),e[10]=(i+n)*a,e[14]=2*i*n*a):(e[10]=-1,e[14]=-2*n),e},t.perspectiveFromFieldOfView=function(e,t,r,n){var i=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(a+s),l=2/(i+o);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(a-s)*u*.5,e[9]=(i-o)*l*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e},t.ortho=function(e,t,r,n,i,o,a){var s=1/(t-r),u=1/(n-i),l=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*u,e[14]=(a+o)*l,e[15]=1,e},t.lookAt=function(e,t,r,o){var a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,p=void 0,d=void 0,h=void 0,f=void 0,y=void 0,v=t[0],g=t[1],m=t[2],b=o[0],_=o[1],w=o[2],x=r[0],E=r[1],M=r[2];return Math.abs(v-x)<n.EPSILON&&Math.abs(g-E)<n.EPSILON&&Math.abs(m-M)<n.EPSILON?i(e):(d=v-x,h=g-E,f=m-M,a=_*(f*=y=1/Math.sqrt(d*d+h*h+f*f))-w*(h*=y),s=w*(d*=y)-b*f,u=b*h-_*d,(y=Math.sqrt(a*a+s*s+u*u))?(a*=y=1/y,s*=y,u*=y):(a=0,s=0,u=0),l=h*u-f*s,c=f*a-d*u,p=d*s-h*a,(y=Math.sqrt(l*l+c*c+p*p))?(l*=y=1/y,c*=y,p*=y):(l=0,c=0,p=0),e[0]=a,e[1]=l,e[2]=d,e[3]=0,e[4]=s,e[5]=c,e[6]=h,e[7]=0,e[8]=u,e[9]=p,e[10]=f,e[11]=0,e[12]=-(a*v+s*g+u*m),e[13]=-(l*v+c*g+p*m),e[14]=-(d*v+h*g+f*m),e[15]=1,e)},t.targetTo=function(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=n[0],u=n[1],l=n[2],c=i-r[0],p=o-r[1],d=a-r[2],h=c*c+p*p+d*d;h>0&&(c*=h=1/Math.sqrt(h),p*=h,d*=h);var f=u*d-l*p,y=l*c-s*d,v=s*p-u*c;return(h=f*f+y*y+v*v)>0&&(f*=h=1/Math.sqrt(h),y*=h,v*=h),e[0]=f,e[1]=y,e[2]=v,e[3]=0,e[4]=p*v-d*y,e[5]=d*f-c*v,e[6]=c*y-p*f,e[7]=0,e[8]=c,e[9]=p,e[10]=d,e[11]=0,e[12]=i,e[13]=o,e[14]=a,e[15]=1,e},t.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},t.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e},t.subtract=s,t.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e},t.multiplyScalarAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},t.equals=function(e,t){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],p=e[8],d=e[9],h=e[10],f=e[11],y=e[12],v=e[13],g=e[14],m=e[15],b=t[0],_=t[1],w=t[2],x=t[3],E=t[4],M=t[5],O=t[6],R=t[7],I=t[8],F=t[9],S=t[10],q=t[11],C=t[12],T=t[13],P=t[14],A=t[15];return Math.abs(r-b)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-_)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(o-w)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-x)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(s-E)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-M)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(l-O)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(c-R)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(p-I)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(d-F)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(F))&&Math.abs(h-S)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(f-q)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(q))&&Math.abs(y-C)<=n.EPSILON*Math.max(1,Math.abs(y),Math.abs(C))&&Math.abs(v-T)<=n.EPSILON*Math.max(1,Math.abs(v),Math.abs(T))&&Math.abs(g-P)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(m-A)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(A))},t.mul=o,t.sub=s}.apply(null,n))||(e.exports=i)},W7mf:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("xhoE"),r("qKT0"),r("N7S/")],void 0===(i=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0}),t.createQueryGeometry=function(e,t,r){var n=r.get("state.resolution"),o=t*("number"==typeof n?n:1),a=e.clone().offset(-o,-o),s=e.clone().offset(o,o),u=r.spatialReference;return new i({xmin:Math.min(a.x,s.x),ymin:Math.min(a.y,s.y),xmax:Math.max(a.x,s.x),ymax:Math.max(a.y,s.y),spatialReference:u})}}.apply(null,n))||(e.exports=i)},WbzV:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("2Atf"),r("Gtr7"),r("SZNs"),r("qMld"),r("ADZV"),r("8V7H"),r("Vx27"),r("+MAT"),r.dj.m(e)],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,p,d){function h(e){return e&&"openPorts"in e}function f(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0});var y=function(t){function i(e){var r=t.call(this,e)||this;return r.tileRenderer=null,r}return r(i,t),i.prototype.initialize=function(){var t=this;this.addResolvingPromise(l.open(u.getAbsMid("../features/Pipeline",e,d),{client:this.client,strategy:"dedicated"}).then(function(e){return t._connection=e,t._getStartupOptions(t.layer,t.featuresTiling)}).then(function(e){return f(e.service.source)?t._connection.invoke("startup",e,{transferList:e.service.source}):t._connection.invoke("startup",e)}))},i.prototype.destroy=function(){this._connection&&(this._connection.close(),this._connection=null)},i.prototype.configure=function(e){return this._connection.invoke("configure",e)},i.prototype.refresh=function(){return this._connection.invoke("controller.refresh")},i.prototype.redraw=function(){return this._connection.invoke("controller.redraw")},i.prototype.setViewState=function(e){return this._connection.invoke("setViewState",e.toJSON())},i.prototype.queryFeatures=function(e){return this._connection.invoke("controller.queryFeatures",e.toJSON())},i.prototype.queryObjectIds=function(e){return this._connection.invoke("controller.queryObjectIds",e.toJSON())},i.prototype.queryFeatureCount=function(e){return this._connection.invoke("controller.queryFeatureCount",e.toJSON())},i.prototype.queryExtent=function(e){return this._connection.invoke("controller.queryExtent",e.toJSON())},i.prototype.queryLatestObservations=function(e){return this._connection.invoke("controller.queryLatestObservations",e.toJSON())},i.prototype.onEdits=function(e){var t=e.addedFeatures,r=e.deletedFeatures,n=e.updatedFeatures;return this._connection.invoke("controller.onEdits",{addedFeatures:t,deletedFeatures:r,updatedFeatures:n})},i.prototype.enableEvent=function(e,t){return this._connection.invoke("controller.enableEvent",{name:e,value:t})},i.prototype.setFilter=function(e,t){return this._connection.invoke("controller.setFilter",{index:e,filter:t})},i.prototype._getStartupOptions=function(e,t){var r=e.capabilities,n=e.objectIdField,i=e.source,o=e.fields.map(function(e){return e.toJSON()}),a=e.fullExtent&&e.fullExtent.toJSON(),u=p.toJSONGeometryType(e.geometryType),l=e.timeInfo&&e.timeInfo.toJSON()||null;if(h(i))return i.openPorts().then(function(e){return{service:{capabilities:r,fields:o,fullExtent:a,geometryType:u,objectIdField:n,source:e,timeInfo:l},tileInfo:t.tileInfo.toJSON()}});if("stream"===e.type){var c=e.source,d=c.relatedLayerDefinition,f=c.archivedLayerDefinition,y=d&&{capabilities:d.capabilities,fields:d.fields,fullExtent:d.extent,geometryType:d.geometryType,objectIdField:d.objectIdField,source:c.layerDefinition.relatedFeatures.featuresUrl,joinField:c.layerDefinition.relatedFeatures.joinField}||null,v=f&&{capabilities:f.capabilities,fields:f.fields,fullExtent:f.extent,geometryType:f.geometryType,objectIdField:f.objectIdField,source:c.layerDefinition.keepLatestArchive.featuresUrl,maximumFeatureAge:c.layerDefinition.keepLatestArchive.maximumFeatureAge,updateInterval:c.layerDefinition.keepLatestArchive.updateInterval}||null;return s.resolve({service:{capabilities:e.capabilities,fields:e.fields.map(function(e){return e.toJSON()}),fullExtent:a||null,geometryType:p.toJSONGeometryType(e.geometryType),objectIdField:e.objectIdField||"__OBJECTID",source:e.parsedUrl.path,buddyLayers:{relatedFeatures:y,keepLatestArchive:v},streamUrls:c.layerDefinition.streamUrls,timeInfo:l,content:e.parsedUrl.query},tileInfo:t.tileInfo.toJSON()})}return s.resolve({service:{capabilities:r,fields:o,fullExtent:a,geometryType:u,objectIdField:n,source:"dynamicDataSource"in e?e.dynamicDataSource?e.parsedUrl:e.url+"/"+e.layerId:e.parsedUrl,timeInfo:l},tileInfo:t.tileInfo.toJSON()})},n([c.property({constructOnly:!0})],i.prototype,"client",void 0),n([c.property({constructOnly:!0})],i.prototype,"layer",void 0),n([c.property({constructOnly:!0})],i.prototype,"featuresTiling",void 0),n([c.property()],i.prototype,"tileRenderer",void 0),n([c.subclass()],i)}(c.declared(o,a));t.default=y}.apply(null,n))||(e.exports=i)},WsO6:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("BcWh"),r("7MDj"),r("NfRO"),r("qsST"),r("SZNs"),r("qMld"),r("Vx27")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c){return function(e){function t(t){var r=e.call(this)||this;return r.layer=null,r.parent=null,r.view=null,r}return r(t,e),t.prototype.initialize=function(){var e=this;this.addResolvingPromise(this.layer),this.when().catch(function(t){if("layerview:create-error"!==t.name){var r=e.layer&&e.layer.id||"no id",n=e.layer&&e.layer.title||"no title";return s.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+n+"', id: '"+r+"')",t),l.reject(t)}})},t.prototype.destroy=function(){this.layer=this.view=this.parent=null},Object.defineProperty(t.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!this.suspended&&this.isUpdating()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullOpacity",{get:function(){var e=function(e){return null==e?1:e};return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))},enumerable:!0,configurable:!0}),t.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},t.prototype.isUpdating=function(){return!1},n([c.property()],t.prototype,"layer",void 0),n([c.property()],t.prototype,"parent",void 0),n([c.property({readOnly:!0,dependsOn:["view","visible","layer.loaded","parent.suspended"]})],t.prototype,"suspended",null),n([c.property({type:Boolean,dependsOn:["suspended"],readOnly:!0})],t.prototype,"updating",null),n([c.property()],t.prototype,"view",void 0),n([c.property({dependsOn:["layer.visible"]})],t.prototype,"visible",null),n([c.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],t.prototype,"fullOpacity",null),n([c.subclass("esri.views.layers.LayerView")],t)}(c.declared(o,i,a.Identifiable,u))}.apply(null,n))||(e.exports=i)},dDbr:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("qKT0"),r("9opi"),r("Gtr7"),r("qsST"),r("LxLY"),r("Vx27"),r("e4th"),r("iO/m"),r("gd70")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c){var p=o.getLogger("esri.views.layers.support.FeatureEffect");return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.filter=null,t.includedEffect=null,t.excludedEffect=null,t.excludedLabelsVisible=!1,t}var i;return n(t,e),i=t,Object.defineProperty(t.prototype,"insideEffect",{get:function(){return p.warn("insideEffect is a temporary interface that will be removed. Use includedEffect instead"),this.includedEffect},set:function(e){p.warn("insideEffect is a temporary interface that will be removed. Use includedEffect instead"),this.includedEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outsideEffect",{get:function(){return p.warn("outsideEffect is a temporary interface that will be removed. Use excludedEffect instead"),this.excludedEffect},set:function(e){p.warn("outsideEffect is a temporary interface that will be removed. Use excludedEffect instead"),this.excludedEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parsedIncludedEffect",{get:function(){return a.isSome(this.includedEffect)?"string"==typeof this.includedEffect?l.fromString(this.includedEffect):new c({from:l.fromString(this.includedEffect.from),to:l.fromString(this.includedEffect.to),duration:this.includedEffect.duration}):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parsedExcludedEffect",{get:function(){return a.isSome(this.excludedEffect)?"string"==typeof this.excludedEffect?l.fromString(this.excludedEffect):new c({from:l.fromString(this.excludedEffect.from),to:l.fromString(this.excludedEffect.to),duration:this.excludedEffect.duration}):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderingHash",{get:function(){return this.excludedLabelsVisible+"-"+this.includedEffect+"-"+this.excludedEffect},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"done",{get:function(){return(!a.isSome(this.parsedIncludedEffect)||this.parsedIncludedEffect.done)&&(!a.isSome(this.parsedExcludedEffect)||this.parsedExcludedEffect.done)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new i({filter:this.filter&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})},r([s.property({type:u})],t.prototype,"filter",void 0),r([s.property({type:String})],t.prototype,"includedEffect",void 0),r([s.property({type:String})],t.prototype,"excludedEffect",void 0),r([s.property({type:Boolean})],t.prototype,"excludedLabelsVisible",void 0),r([s.property({dependsOn:["includedEffect"]})],t.prototype,"parsedIncludedEffect",null),r([s.property({dependsOn:["excludedEffect"]})],t.prototype,"parsedExcludedEffect",null),r([s.property({dependsOn:["includedEffect","excludedEffect"]})],t.prototype,"renderingHash",null),i=r([s.subclass("esri.views.layers.support.FeatureEffect")],t)}(s.declared(i))}.apply(null,n))||(e.exports=i)},gd70:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("qKT0"),r("9opi"),r("Gtr7"),r("Vx27"),r("FXVB")],void 0===(i=function(e,t,r,n,i,o,a){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.from=null,t.to=null,t.duration=4e3,t.repeat=!0,t.done=!1,t}var i;return n(t,e),i=t,t.prototype.getColorMatrix=function(){if(this.done=!1,null==this._lastTime)this._currentStep=0,this._lastTime=Date.now();else{var e=this._lastTime,t=Date.now(),r=t-e;this._currentStep=this._currentStep+r,this._currentStep>=2147483647&&(this._currentStep=0),this._lastTime=t}var n=this._currentStep%this.duration/(this.duration/2),i=n<=1?n:2-n,o=this.from.getColorMatrix(),s=this.to.getColorMatrix();return a.mat4.multiplyScalar(o,o,1-i),a.mat4.multiplyScalar(s,s,i),!this.repeat&&this._currentStep>=this.duration&&(this.done=!0),a.mat4.add(o,o,s)},t.prototype.clone=function(){var e=new i({from:this.from.clone(),to:this.to.clone(),duration:this.duration});return e._lastTime=this._lastTime,e._currentStep=this._currentStep,e},r([o.property()],t.prototype,"from",void 0),r([o.property()],t.prototype,"to",void 0),r([o.property({type:Number})],t.prototype,"duration",void 0),r([o.property({type:Boolean})],t.prototype,"repeat",void 0),i=r([o.subclass("esri.views.layers.support.Transition")],t)}(o.declared(i))}.apply(null,n))||(e.exports=i)},"iO/m":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("qKT0"),r("9opi"),r("2Atf"),r("ma1f"),r("ycL1"),r("qsST"),r("Vx27"),r("FXVB"),r("oZZu"),r("3MK9")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,p){var d=s.getLogger("esri.views.layers.support.ParsedFeatureEffect"),h={grayscale:function(e){var t=1-e.amount,r=c.mat4f32.fromValues(.2126+.7874*t,.7152-.7152*t,.0722-.0722*t,0,.2126-.2126*t,.7152+.2848*t,.0722-.0722*t,0,.2126-.2126*t,.7152-.7152*t,.0722+.9278*t,0,0,0,0,1);return l.mat4.transpose(r,r)},sepia:function(e){var t=1-e.amount,r=c.mat4f32.fromValues(.393+.607*t,.769-.769*t,.189-.189*t,0,.349-.349*t,.686+.314*t,.168-.168*t,0,.272-.272*t,.534-.534*t,.131+.869*t,0,0,0,0,1);return l.mat4.transpose(r,r)},saturate:function(e){var t=e.amount,r=c.mat4f32.fromValues(.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return l.mat4.transpose(r,r)},"hue-rotate":function(e){var t=Math.sin(e.angle*Math.PI/180),r=Math.cos(e.angle*Math.PI/180),n=c.mat4f32.fromValues(.213+.787*r-.213*t,.715-.715*r-.715*t,.072-.072*r+.928*t,0,.213-.213*r+.143*t,.715+.285*r+.14*t,.072-.072*r-.283*t,0,.213-.213*r-.787*t,.715-.715*r+.715*t,.072+.928*r+.072*t,0,0,0,0,1);return l.mat4.transpose(n,n)},invert:function(e){var t=e.amount,r=c.mat4f32.fromValues(-t,0,0,1,0,-t,0,1,0,0,-t,1,0,0,0,1);return l.mat4.transpose(r,r)},opacity:function(e){var t=e.amount,r=c.mat4f32.fromValues(t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,t);return l.mat4.transpose(r,r)},brightness:function(e){var t=e.amount,r=c.mat4f32.fromValues(t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return l.mat4.transpose(r,r)},contrast:function(e){var t=e.amount,r=c.mat4f32.fromValues(t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return l.mat4.transpose(r,r)}};return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.customTransforms=null,t.done=!0,t}var a;return n(t,e),a=t,t.fromString=function(e){var t;try{t=p.parse(e)}catch(e){d.error(new o("invalid-type","Encountered an error when parsing css",e))}return new a({transforms:t})},t.prototype.getColorMatrix=function(){var e=this;return(this.transforms||[]).map(function(e){return i({},e)}).reverse().reduce(function(t,r){return l.mat4.multiply(t,t,e._getFactory(r)(r))},c.mat4f32.create())},t.prototype.clone=function(){return new a({transforms:this.transforms&&this.transforms.map(function(e){return i({},e)}),customTransforms:this.customTransforms&&this.customTransforms.map(function(e){return i({},e)})})},t.prototype._getFactory=function(e){var t=h[e.type];if(!t){if(this.customTransforms)for(var r=0,n=this.customTransforms;r<n.length;r++){var i=function(t){if(t.type===e.type){var r=c.mat4f32.fromValues.apply(c.mat4f32,t.matrix),n=l.mat4.transpose(r,r);return{value:function(e){return n}}}}(n[r]);if("object"==typeof i)return i.value}return d.error("invalid-type","No effect "+e.type+" exists"),function(e){return c.mat4f32.create()}}return t},r([u.property()],t.prototype,"transforms",void 0),r([u.property()],t.prototype,"customTransforms",void 0),a=r([u.subclass("esri.views.layers.support.ParsedFeatureEffect")],t)}(u.declared(a))}.apply(null,n))||(e.exports=i)},oZZu:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("7Yqx")],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.mat4f32=r}.apply(null,n))||(e.exports=i)},"sQ+t":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("6DRN"),r("qMld")],void 0===(i=function(e,t,n,i){Object.defineProperty(t,"__esModule",{value:!0}),t.createOrReuseTileRenderer=function(e,t,o){if(e&&e.supportsRenderer(t))return i.create(function(t){return n(function(){return t(e)})});if(!t)return i.resolve(null);switch(t.type){case"class-breaks":case"simple":case"unique-value":case"dot-density":return i.create(function(e){n(function(){return Promise.all([r.e(8),r.e(12),r.e(67)]).then(function(){var t=[r("IBem")];e.apply(null,t)}.bind(this)).catch(r.oe)})}).then(function(e){return e.default}).then(function(e){return new e(o)});case"heatmap":return i.create(function(e){n(function(){return r.e(61).then(function(){var t=[r("GCYV")];e.apply(null,t)}.bind(this)).catch(r.oe)})}).then(function(e){return e.default}).then(function(e){return new e(o)})}return i.resolve(null)}}.apply(null,n))||(e.exports=i)},tI6k:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EXTRUDE_SCALE=64,t.PICTURE_FILL_COLOR=4294967295,t.TILE_SIZE=512,t.ANGLE_FACTOR_256=256/360,t.DEBUG_LABELS=!1,t.COLLISION_BUCKET_SIZE=128,t.DOT_DENSITY_MAX_FIELDS=8,t.COLLISION_MAX_ZOOM_DELTA=3,t.COLLISION_EARLY_REJECT_BUCKET_SIZE=16,t.COLLISION_BOX_PADDING=8,t.COLLISION_TILE_BOX_SIZE=t.TILE_SIZE/t.COLLISION_BUCKET_SIZE,t.COLLISION_PLACEMENT_PADDING=8,t.HEURISTIC_GLYPHS_PER_LINE=50,t.HEURISTIC_GLYPHS_PER_FEATURE=10,t.GLYPH_SIZE=24,t.TEXT_LINE_HEIGHT=1.2*t.GLYPH_SIZE,t.TEXT_MAX_WIDTH=10*t.GLYPH_SIZE,t.TEXT_SPACING=0,t.AVERAGE_GLYPH_MOSAIC_ITEM={metrics:{width:15,height:17,left:0,top:-7,advance:14}},t.TEXTURE_BINDING_SPRITE_ATLAS=0,t.TEXTURE_BINDING_GLYPH_ATLAS=1,t.TEXTURE_BINDING_HIGHLIGHT_0=2,t.TEXTURE_BINDING_HIGHLIGHT_1=3,t.TEXTURE_BINDING_RENDERER_0=4,t.TEXTURE_BINDING_RENDERER_1=5,t.MAX_FILTERS=2,t.FILTER_FLAG_0=1,t.EFFECT_FLAG_0=2}.apply(null,n))||(e.exports=i)}}]);
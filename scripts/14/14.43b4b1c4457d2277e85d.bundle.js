(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/2d/layers/support/util":"+MAT","esri/views/2d/layers/FeatureLayerView2D":"/Ck8","esri/renderers/support/clickToleranceUtils":"/E+R","esri/views/layers/support/Path":"20TT","esri/views/layers/support/cssFilterParser":"3MK9","esri/views/2d/layers/LayerView2D":"6i4F","esri/views/layers/support/ClipRect":"7MXx","esri/views/layers/FeatureLayerView":"8iBb","esri/core/MD5":"CaYo","esri/core/libs/gl-matrix-2/mat4":"FXVB","esri/geometry/geometryAdapters/json":"H9Hv","esri/views/layers/support/popupUtils":"I6zq","esri/core/libs/gl-matrix-2/math/mat4":"Jl7l","esri/geometry/support/GeographicTransformationStep":"MbkH","esri/views/support/drapedUtils":"NbdF","esri/views/2d/layers/features/support/rendererUtils":"NfUe","esri/geometry/support/GeographicTransformation":"OkCb","esri/layers/graphics/data/projectionSupport":"Q2Em","esri/views/2d/layers/support/FeatureLayerProxy":"WbzV","esri/views/layers/LayerView":"WsO6","esri/views/layers/support/ClipArea":"ZMIQ","esri/views/layers/support/FeatureEffect":"dDbr","esri/views/layers/support/FeatureFilter":"e4th","esri/views/layers/support/Transition":"gd70","esri/views/layers/support/ParsedFeatureEffect":"iO/m","esri/AggregateGraphic":"jci6","esri/views/2d/layers/features/tileRenderers":"sQ+t","esri/views/layers/support/Geometry":"ts8o","esri/views/2d/layers/support/clusterUtils":"w0Ef","esri/tasks/support/FeatureSet":"w1v0","esri/geometry/pe":"w7fK","esri/geometry/projection":"wIC5"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[14,144],{"+MAT":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("ImIS")],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=new r.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});t.toJSONGeometryType=function(e){return n.toJSON(e)},t.analyzeRings=function(e,t,r){for(var n=[],i=[],o=0,a=0,s=0,u=e;s<u.length;s++){var l=u[s],p=a,c=l[0][0],d=l[0][1];n[a++]=c,n[a++]=d;for(var f=0,h=1;h<l.length;++h){var _=c,y=d;c=l[h][0],f+=(d=l[h][1])*_-c*y,n[a++]=c,n[a++]=d}t(f/2),f>0?(p-o>0&&(r(o,p,n,i),o=p),i.length=0):f<0&&p-o>0?i.push(.5*(p-o)):a=p}a-o>0&&r(o,a,n,i)}}.apply(null,n))||(e.exports=i)},"/Ck8":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("jci6"),r("TMur"),r("jZlN"),r("KY0m"),r("y4WC"),r("ma1f"),r("H1tY"),r("qsST"),r("R2Zq"),r("LxLY"),r("qMld"),r("8MXS"),r("Vx27"),r("Q2Em"),r("/E+R"),r("w1v0"),r("IpeC"),r("YaB4"),r("6i4F"),r("sQ+t"),r("NfUe"),r("w0Ef"),r("WbzV"),r("+MAT"),r("ovos"),r("8iBb"),r("WsO6"),r("7XLS"),r("e4th"),r("dDbr"),r("NbdF")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,p,c,d,f,h,_,y,v,g,m,b,P,w,E,S,x,M,O,R,T,F,I,N,A){var C=p.getLogger("esri.views.2d.layers.FeatureLayerView2D");return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._pipelineIsUpdating=!0,t._updatingPipelineConfig=!1,t._viewStateId=-1,t._visibilityOverrides=new Set,t._effect=null,t._highlightIds=new Map,t._onGoingEdits=0,t.filter=null,t.doRefresh=f.debounce((function(){return t._onGoingEdits=0,t._proxy.refresh().catch((function(e){f.isAbortError(e)||C.error(e)}))})),t._onRenderingConfigChange=f.debounce((function(){return r.__awaiter(t,void 0,void 0,(function(){var e,t,n,i,o,a,s,u,l,p,f,h,_,y,v,g,m,b,P,w;return r.__generator(this,(function(r){switch(r.label){case 0:return this._hasRequiredSupport(this.layer)?(this._set("_updatingPipelineConfig",!0),t=(e=this).effect,n=e.filter,[4,this._effectiveRendererPromise]):[2];case 1:return i=r.sent(),o=i.renderer,a=i.aggregateFields,s=i.featureReduction,[4,this._updateRequiredFields()];case 2:return r.sent(),u=this.availableFields.join("."),l=this._createLayerFilterHash(),p=this._createTileRendererHash(o),f=this._createFeatureDataHash(o,n,t),h=this._createMeshHash(o),_=u!==this._clientDataHash,y=l!==this._layerFilterHash,v=f!==this._featureDataHash||_,g=v&&!!this.layer.featureReduction,m=h!==this._meshHash||g,b={invalidateFeatureData:v,invalidateMesh:m,layerFilterChanged:y},P=this._createConfiguration(o,a,s,n,t),p===this._tileRendererHash?[3,9]:[4,this._initTileRenderer(o)];case 3:return r.sent(),[4,this._createServiceOptions()];case 4:return w=r.sent(),this.effects.forEach((function(e){return d.isSome(e)&&d.isSome(e.filter)&&e.filter.enable()})),this.tileRenderer.onConfigUpdate(o),[4,this._proxy.startup(this.view.featuresTilingScheme,P,w,b)];case 5:return r.sent(),this.hasHighlight()?[4,this._proxy.setHighlight(c.keysOfMap(this._highlightIds))]:[3,7];case 6:r.sent(),r.label=7;case 7:return[4,this._onceTilesUpdated()];case 8:return r.sent(),this.tileRenderer.onConfigUpdate(o),[3,14];case 9:return this._lockAttributeTextureUpload(),_||y||v||m?[4,this._proxy.update(P,b)]:[3,11];case 10:r.sent(),r.label=11;case 11:return y?[4,this._onceTilesUpdated()]:[3,13];case 12:r.sent(),r.label=13;case 13:this._unlockAttributeTextureUpload(),this.effects.forEach((function(e){return d.isSome(e)&&d.isSome(e.filter)&&e.filter.enable()})),this.tileRenderer.onConfigUpdate(o),this._forceAttributeTextureUpload(),r.label=14;case 14:return this._clientDataHash=u,this._layerFilterHash=l,this._tileRendererHash=p,this._meshHash=h,this._featureDataHash=f,this.tileRenderer.invalidateLabels(),this.requestUpdate(),[2]}}))}))})),t._updateHighlight=f.debounce((function(){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,this._proxy.setHighlight(c.keysOfMap(this._highlightIds))]}))}))})),t}return r.__extends(t,e),t.prototype.destroy=function(){this._proxy.destroy(),d.andThen(this._updateClusterSizeTask,(function(e){return e.remove()}))},t.prototype.initialize=function(){var e=this;this.addResolvingPromise(this._initProxy()),this.handles.add([this.on("valueRangesChanged",(function(t){e._set("_aggregateValueRanges",t.valueRanges)}))])},t.prototype._initProxy=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n;return r.__generator(this,(function(r){if("stream"!==this.layer.type&&"ogc-feature"!==this.layer.type&&this.layer.isTable)throw new u("featurelayerview:table-not-supported","table feature layer can't be displayed",{layer:this.layer});if(e=this.layer.spatialReference,t=i.SpatialReference.WGS84,this.layer.featureReduction&&!y.doesBrowserSupportProjection(e,t))throw new u("featurelayerview:featureReduction-not-supported","cannot project feature layer to WGS84",{inSpatialReference:e,outSpatialReference:t});return this._proxy&&this._proxy.destroy(),n=this._createClientOptions(),this._set("_proxy",new x.default({client:n})),[2,this._proxy.when()]}))}))},Object.defineProperty(t.prototype,"_effectiveRendererPromise",{get:function(){var e=this,t=this._getEffectiveRenderer();return t.then((function(t){var r=t.renderer;return e._set("_effectiveRenderer",r)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelsVisible",{get:function(){return!this.suspended&&this.layer.labelingInfo&&this.layer.labelsVisible},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"effect",{get:function(){return d.unwrapOr(this._effect,null)},set:function(e){var t=this._effect;d.isSome(t)&&d.isSome(t.filter)&&t.filter.enabled&&d.isSome(e)&&d.isSome(e.filter)&&e.filter.enable(),this._effect=e,this.notifyChange("effect")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"effects",{get:function(){return this.effect&&[this.effect]||[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numFeatures",{get:function(){var e=0;return this._tileStrategy.tiles.forEach((function(t){e+=t.iconDisplayRecords?t.iconDisplayRecords.length:0})),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderingConfigHash",{get:function(){if(!this.layer)return null;var e=this.availableFields,t=this.layer,r=t.definitionExpression,n=t.renderer,i=t.labelingInfo,o="feature"===t.type?t.gdbVersion:void 0,a="feature"===t.type&&t.historicMoment?t.historicMoment.getTime():void 0,s=this.timeExtent,u="stream"===t.type?""+JSON.stringify(t.geometryDefinition)+t.definitionExpression:null,l=JSON.stringify(this.clips),p=t.featureReduction&&t.featureReduction.toJSON();return JSON.stringify({filterHash:d.isSome(this.filter)&&this.filter.toJSON(),effectHash:d.isSome(this.effect)&&this.effect.toJSON(),streamFilter:u,gdbVersion:o,definitionExpression:r,historicMoment:a,availableFields:e,renderer:n,labelingInfo:i,timeExtent:s,clipsHash:l,featureReduction:p})},enumerable:!0,configurable:!0}),t.prototype.highlight=function(e){var t,r=this;return e instanceof o?t=[e.getObjectId()]:"number"==typeof e?t=[e]:s.isCollection(e)?t=e.map((function(e){return e&&e.getAttribute(r.layer.objectIdField)})).toArray():Array.isArray(e)&&e.length>0&&(t="number"==typeof e[0]?e:e.map((function(e){return e&&e.getAttribute(r.layer.objectIdField)}))),t&&t.length?(t=t.filter((function(e){return null!=e})),this._addHighlight(t),{remove:function(){return r._removeHighlight(t)},pause:function(){return r._removeHighlight(t)},resume:function(){return r._addHighlight(t)}}):{remove:function(){},pause:function(){},resume:function(){}}},t.prototype.hasHighlight=function(){return!!this._highlightIds.size},t.prototype.hitTest=function(e,t){return this._hitTest(e,t)},t.prototype.queryStatistics=function(){return this._proxy.queryStatistics()},t.prototype.queryFeatures=function(e,t){var r=this;return this.queryFeaturesJSON(e,t).then((function(e){var t=g.fromJSON(e);return t.features.forEach((function(e){e.layer=r.layer,e.sourceLayer=r.layer})),t}))},t.prototype.queryFeaturesJSON=function(e,t){return this._proxy.queryFeatures(this._cleanUpQuery(e),t)},t.prototype.queryObjectIds=function(e,t){return this._proxy.queryObjectIds(this._cleanUpQuery(e),t)},t.prototype.queryFeatureCount=function(e,t){return this._proxy.queryFeatureCount(this._cleanUpQuery(e),t)},t.prototype.queryExtent=function(e,t){return this._proxy.queryExtent(this._cleanUpQuery(e),t).then((function(e){return{count:e.count,extent:i.Extent.fromJSON(e.extent)}}))},t.prototype.setVisibility=function(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._renderingConfigHashChanged()},t.prototype.update=function(e){if(this._tileStrategy&&this.tileRenderer){this._tileStrategy.update(e)||this.requestUpdate();var t=e.state;this._viewStateId!==t.id&&(this._proxy.setViewState(t),this._viewStateId=t.id),this.notifyChange("numFeatures"),this.notifyChange("updating")}},t.prototype.attach=function(){var e=this;this.view.timeline.record(this.layer.title+" (FeatureLayer) Attach"),this._tileStrategy=new O({cachePolicy:"purge",acquireTile:function(t){return e._acquireTile(t)},releaseTile:function(t){return e._releaseTile(t)},tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.handles.add(h.init(this,"renderingConfigHash",(function(){return e._renderingConfigHashChanged()}),!0),"attach"),"stream"!==this.layer.type&&this.handles.add(this.layer.on("edits",(function(t){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this._onGoingEdits++,[4,this._proxy.onEdits(t)];case 1:return e.sent(),this._onGoingEdits=Math.max(0,this._onGoingEdits-1),[2]}}))}))})),"attach")},t.prototype.detach=function(){this.container.removeAllChildren(),this.handles.remove("attach"),this._updatingPipelineConfig=!1,this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null),this._tileRendererHash=null,this._meshHash=null,this._clientDataHash=null,this._layerFilterHash=null},t.prototype.moveStart=function(){this.requestUpdate()},t.prototype.viewChange=function(){this.requestUpdate()},t.prototype.moveEnd=function(){this.requestUpdate()},t.prototype.fetchPopupFeatures=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var i,o,s,u;return r.__generator(this,(function(r){return d.isSome(t)&&t.clientGraphics.length&&(i=t.clientGraphics[0])instanceof n?[2,[i]]:(o=this.validateFetchPopupFeatures(t))?[2,f.reject(o)]:d.isSome(t)&&0===t.clientGraphics.length?[2,f.resolve([])]:(s=this.fetchClientPopupFeatures(t),e?(u=this._fetchServicePopupFeatures(e,t),[2,f.eachAlwaysValues([s,u]).then(a.flatten)]):[2,s])}))}))},t.prototype._fetchServicePopupFeatures=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,u,l,p,c,f,h;return r.__generator(this,(function(r){switch(r.label){case 0:return"stream"===this.layer.type?[2,[]]:[4,this.createPopupQuery(t)];case 1:if(n=r.sent(),i=this.layer,o=i.renderer,a=d.isSome(t)?t.event:null,s=v.calculateTolerance({renderer:o,event:a}),n.geometry=this.createFetchPopupFeaturesQueryGeometry(e,s),u=new Set,l=i.objectIdField,p=d.isSome(t)?t.clientGraphics:null)for(c=0,f=p;c<f.length;c++)h=f[c],u.add(h.attributes[l]);return[2,i.queryFeatures(n).then((function(e){return e.features.filter((function(e){return!u.has(e.attributes[l])}))}))]}}))}))},t.prototype.createFetchPopupFeaturesQueryGeometry=function(e,t){return A.createQueryGeometry(e,t,this.view)},t.prototype.isUpdating=function(){return null!=this.layer.renderer&&(null!=this._updatingRequiredFieldsPromise||null==this.tileRenderer||!this._proxy||!this._proxy.isReady||this._pipelineIsUpdating||this._updatingPipelineConfig||this.tileRenderer.updating||this._onGoingEdits>0)},t.prototype._createClientOptions=function(){var e=this;return{setUpdating:function(t){e._set("_pipelineIsUpdating",t)},emitEvent:function(t){e.emit(t.name,t.event)}}},t.prototype._createServiceOptions=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,i,o,a,s,u,l,p,c;return r.__generator(this,(function(r){switch(r.label){case 0:return"stream"===(e=this.layer).type?[2,null]:(t=e.capabilities,n=e.objectIdField,i=e.fields.map((function(e){return e.toJSON()})),o=e.fullExtent&&e.fullExtent.toJSON(),a=M.toJSONGeometryType(e.geometryType),s=e.timeInfo&&e.timeInfo.toJSON()||null,u=e.spatialReference?e.spatialReference.toJSON():null,"ogc-feature"!==e.type?[3,1]:(p=function(e){var t=e.capabilities,r=e.collectionId,n=e.source.layerDefinition;return{capabilities:t,collectionId:r,url:e.url,layerDefinition:n}}(e),[3,5]));case 1:return function(e){return e&&"openPorts"in e}(e.source)?[4,e.source.openPorts()]:[3,3];case 2:return c=r.sent(),[3,4];case 3:c="dynamicDataSource"in e?e.dynamicDataSource?e.parsedUrl:e.url+"/"+e.layerId:e.parsedUrl,r.label=4;case 4:p=c,r.label=5;case 5:return l=p,[2,{type:"on-demand",maxRecordCount:t.query.maxRecordCount,tileMaxRecordCount:t.query.tileMaxRecordCount,capabilities:t,fields:i,fullExtent:o,geometryType:a,objectIdField:n,source:l,timeInfo:s,spatialReference:u}]}}))}))},t.prototype._createMemoryServiceOptions=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return[4,e.openPorts()];case 1:return t=n.sent(),[2,r.__assign(r.__assign({},this._createServiceOptions()),{type:"memory",source:t})]}}))}))},t.prototype._cleanUpQuery=function(e){var t=m.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t},t.prototype._createUpdateClusterSizeTask=function(e,t){var n=this;return this.watch("_aggregateValueRanges",(function(i){return r.__awaiter(n,void 0,void 0,(function(){return r.__generator(this,(function(r){return this._updateClusterEffectiveRendererSizeVariable(e,t,i),this._updatingPipelineConfig||this.tileRenderer.onConfigUpdate(this._effectiveRenderer),[2]}))}))}))},t.prototype._updateClusterEffectiveRendererSizeVariable=function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a;return r.__generator(this,(function(r){return e.dynamicClusterSize&&"visualVariables"in e&&e.visualVariables&&(i=S.findSizeVV(e.visualVariables),d.isSome(i)&&"cluster_count"===i.field&&(o=e.visualVariables.indexOf(i),e.visualVariables[o]=S.createClusterCountSizeVariable(t,n),(a=e.clone()).dynamicClusterSize=!0,this._set("_effectiveRenderer",a))),[2]}))}))},t.prototype._getEffectiveRenderer=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return e=this.layer.renderer,t=this.layer.featureReduction,d.isSome(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null),t&&"cluster"===t.type&&S.isClusterCompatibleRenderer(e)?(n=t,i=[],[4,S.createClusterRenderer(i,this.layer.fields,e,n,this._aggregateValueRanges)]):[3,2];case 1:return o=r.sent(),d.andThen(this._updateClusterSizeTask,(function(e){return e.remove()})),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(o,n),[2,{renderer:o,aggregateFields:i,featureReduction:t}];case 2:return[2,{renderer:e,aggregateFields:[],featureReduction:null}]}}))}))},t.prototype._acquireTile=function(e){var t=this,r=this.tileRenderer.acquireTile(e);return r.once("attach",(function(){t.requestUpdate()})),r},t.prototype._releaseTile=function(e){this.tileRenderer.releaseTile(e)},t.prototype._initTileRenderer=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,w.createOrReuseTileRenderer(e,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer})];case 1:return t=r.sent(),this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null),this._proxy.tileRenderer=t,this._set("tileRenderer",t),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(e),this.requestUpdate(),[2,this.tileRenderer]}}))}))},t.prototype._createLayerFilterHash=function(){return this.layer.definitionExpression+"."+("feature"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0)+"."+("feature"===this.layer.type?this.layer.gdbVersion:void 0)},t.prototype._createTileRendererHash=function(e){return("heatmap"===e.type?"heatmap":"symbol")+"."+("dot-density"===e.type)},t.prototype._createFeatureDataHash=function(e,t,r){var n=e.getAttributeHash(),i=JSON.stringify(t),o=d.isSome(r)&&JSON.stringify(r.filter),a=JSON.stringify(this.timeExtent),s="";return this._visibilityOverrides.forEach((function(e){return s+=e})),n+"."+i+"."+o+"."+a+"."+s},t.prototype._createMeshHash=function(e){var t=b.getVVFlags("visualVariables"in e&&e.visualVariables||[]),r=this.layer.labelingInfo&&this.layer.labelingInfo.map((function(e){return JSON.stringify(e)})).join("/"),n=JSON.stringify(this.layer.featureReduction);return e.getMeshHash()+"."+t+"."+r+"."+n},t.prototype._injectOverrides=function(e){var t=d.isSome(e)?e.timeExtent:null,r=this.timeExtent&&t?this.timeExtent.intersection(t):this.timeExtent||t;if(!this._visibilityOverrides.size&&!r)return e;var n=d.isSome(e)&&e.clone()||new I;return n.hiddenIds=this._visibilityOverrides,n.timeExtent=r,n},t.prototype._createConfiguration=function(e,t,r,n,i){var o=E.simplifyVVRenderer(e),a=this.layer.labelingInfo,s="feature"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,u="feature"===this.layer.type?this.layer.gdbVersion:void 0,l=new Array(b.definitions.MAX_FILTERS),p=this._injectOverrides(n);return l[0]=d.isSome(p)?p.toJSON():null,l[1]=d.isSome(i)&&i.filter?i.filter.toJSON():null,{featureReduction:d.andThen(r,(function(e){var t=e.toJSON();return"showLabels"in t&&!t.showLabels&&t.drawingInfo&&(t.drawingInfo.labelingInfo=null),t})),definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,labelingInfo:a&&a.map((function(e){return e.toJSON()})),renderer:o.toJSON(),gdbVersion:u,historicMoment:s,devicePixelRatio:window.devicePixelRatio||1,filters:l,aggregateFields:t}},t.prototype._hasRequiredSupport=function(e){return!("dot-density"===e.renderer.type&&!l("esri-webgl-texture-float")&&(C.error(new u("webgl-missing-extension","Missing WebGL extension OES_Texture_Float which is required for DotDensity")),1))},t.prototype._onceTilesUpdated=function(){return this.requestUpdate(),h.whenFalseOnce(this,"_pipelineIsUpdating",!0)},t.prototype._lockAttributeTextureUpload=function(){this.tileRenderer&&this.tileRenderer.lockAttributeTextureUpload()},t.prototype._unlockAttributeTextureUpload=function(){this.tileRenderer&&this.tileRenderer.unlockAttributeTextureUpload()},t.prototype._forceAttributeTextureUpload=function(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()},t.prototype._renderingConfigHashChanged=function(){var e=this;this.view.timeline.begin(this.layer.title+" (FeatureLayer) Initial Pipeline Config");var t=this._onRenderingConfigChange();this._updatingPromise=t;var r=function(){t===e._updatingPromise&&e._set("_updatingPipelineConfig",!1),e.view&&e.view.timeline.end(e.layer.title+" (FeatureLayer) Initial Pipeline Config")};t.then(r).catch((function(e){f.isAbortError(e)||C.error(e),r()}))},t.prototype._addHighlight=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];if(this._highlightIds.has(n)){var i=this._highlightIds.get(n);this._highlightIds.set(n,i+1)}else this._highlightIds.set(n,1)}this._updateHighlight().catch((function(e){f.isAbortError(e)||C.error(e)}))},t.prototype._removeHighlight=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];if(this._highlightIds.has(n)){var i=this._highlightIds.get(n)-1;0===i?this._highlightIds.delete(n):this._highlightIds.set(n,i)}}this._updateHighlight().catch((function(e){f.isAbortError(e)||C.error(e)}))},t.prototype._createHittestResult=function(e){return e.layer=this.layer,e.sourceLayer=this.layer,d.isSome(e.geometry)&&(e.geometry.spatialReference=this.view.spatialReference),e},t.prototype._queryFeature=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this._proxy.getObjectId(e)];case 1:return t=r.sent(),[4,this._proxy.queryFeatures(new m({objectIds:[t],outSpatialReference:this.view.spatialReference,returnGeometry:!0}))];case 2:return n=r.sent(),(i=n.features[0])?[2,i]:[2,null]}}))}))},t.prototype._hitTest=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var i,a,s,u,l=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.suspended||!this.tileRenderer?[2,null]:[4,this.tileRenderer.hitTest(e,t)];case 1:return 0!==(i=r.sent()).length?[3,3]:[4,f.after(1)];case 2:return r.sent(),[2,null];case 3:return function(e){return(2147483648&e)>>>31==1}(a=i[0])?[3,5]:[4,this._queryFeature(a)];case 4:return u=r.sent(),[2,d.andThen(u,(function(e){return l._createHittestResult(o.fromJSON(e))}))];case 5:return[4,this._proxy.getAggregate(a)];case 6:return s=r.sent(),d.isNone(s)?[2,null]:d.isSome(s.referenceId)?[4,this._queryFeature(s.referenceId)]:[3,8];case 7:return u=r.sent(),[2,d.andThen(u,(function(e){return l._createHittestResult(o.fromJSON(e))}))];case 8:return[2,this._createHittestResult(n.fromJSON(s))]}}))}))},r.__decorate([_.property()],t.prototype,"_proxy",void 0),r.__decorate([_.property()],t.prototype,"_pipelineIsUpdating",void 0),r.__decorate([_.property()],t.prototype,"_updatingPipelineConfig",void 0),r.__decorate([_.property()],t.prototype,"_effectiveRenderer",void 0),r.__decorate([_.property()],t.prototype,"_aggregateValueRanges",void 0),r.__decorate([_.property()],t.prototype,"_onGoingEdits",void 0),r.__decorate([_.property({dependsOn:["layer.renderer","layer.featureReduction"]})],t.prototype,"_effectiveRendererPromise",null),r.__decorate([_.property({dependsOn:["suspended","layer.labelingInfo","layer.labelsVisible"]})],t.prototype,"labelsVisible",null),r.__decorate([_.property({type:I})],t.prototype,"filter",void 0),r.__decorate([_.property({type:N})],t.prototype,"effect",null),r.__decorate([_.property({readOnly:!0,dependsOn:["effect"]})],t.prototype,"effects",null),r.__decorate([_.property()],t.prototype,"numFeatures",null),r.__decorate([_.property({dependsOn:["layer.renderer","availableFields","layer.definitionExpression","layer.gdbVersion?","layer.geometryDefinition?","layer.historicMoment?","layer.labelingInfo","layer.featureReduction","filter","effect","timeExtent","clips"]})],t.prototype,"renderingConfigHash",null),r.__decorate([_.property()],t.prototype,"tileRenderer",void 0),r.__decorate([_.property({dependsOn:["layer.renderer","tileRenderer.updating","_updatingPipelineConfig","_pipelineIsUpdating","_updatingRequiredFieldsPromise","_proxy","_proxy.isReady?","_onGoingEdits"]})],t.prototype,"updating",void 0),r.__decorate([_.subclass("esri.views.2d.layers.FeatureLayerView2D")],t)}(R.FeatureLayerView(F.RefreshableLayerView(P.LayerView2DMixin(T))))}.apply(null,n))||(e.exports=i)},"/E+R":function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function n(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?function(e){for(var t=0,r=0,n=0;n<e.length;n++){var i=e[n].size;"number"==typeof i&&(t+=i,r++)}return t/r}(e.stops):t}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateTolerance=function(e){var t=e&&e.renderer,i="touch"===(e&&e.event&&e.event.pointerType)?9:6;if(!t)return i;var o="visualVariables"in t?function(e,t){if(!t)return e;var r=t.filter((function(e){return"size"===e.type})).map((function(t){var r=t.maxSize,i=t.minSize;return(n(r,e)+n(i,e))/2})),i=0,o=r.length;if(0===o)return e;for(var a=0;a<o;a++)i+=r[a];var s=Math.floor(i/o);return Math.max(s,e)}(i,t.visualVariables):i;if("simple"===t.type)return r(o,t.symbol);if("unique-value"===t.type){var a=o;return t.uniqueValueInfos.forEach((function(e){a=r(a,e.symbol)})),a}if("class-breaks"===t.type){var s=o;return t.classBreakInfos.forEach((function(e){s=r(s,e.symbol)})),s}return t.type,o}}.apply(null,n))||(e.exports=i)},"20TT":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("Vx27"),r("ZMIQ")],void 0===(i=function(e,t,r,n,i){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="path",t.path=[],t}return r.__extends(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),r.__decorate([n.property({type:[[[Number]]],json:{write:!0}})],t.prototype,"path",void 0),r.__decorate([n.property({readOnly:!0,dependsOn:["path"]})],t.prototype,"version",null),r.__decorate([n.subclass("esri.views.layers.support.Path")],t)}(i)}.apply(null,n))||(e.exports=i)},"3MK9":function(e,t,r){var n,i,o;i=[],void 0===(o="function"==typeof(n=function(){"use strict";function e(t,r,n,i){this.message=t,this.expected=r,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(e,Error),e.buildMessage=function(e,t){var r={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t,r="";for(t=0;t<e.parts.length;t++)r+=e.parts[t]instanceof Array?o(e.parts[t][0])+"-"+o(e.parts[t][1]):o(e.parts[t]);return"["+(e.inverted?"^":"")+r+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function o(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}return"Expected "+function(e){var t,n,i,o=new Array(e.length);for(t=0;t<e.length;t++)o[t]=(i=e[t],r[i.type](i));if(o.sort(),o.length>0){for(t=1,n=1;t<o.length;t++)o[t-1]!==o[t]&&(o[n]=o[t],n++);o.length=n}switch(o.length){case 1:return o[0];case 2:return o[0]+" or "+o[1];default:return o.slice(0,-1).join(", ")+", or "+o[o.length-1]}}(e)+" but "+function(e){return e?'"'+i(e)+'"':"end of input"}(t)+" found."},{SyntaxError:e,parse:function(t,r){r=void 0!==r?r:{};var n,i={},o={start:Ie},a=Ie,s=Oe("none"),u=xe("none",!1),l=Oe("blur()"),p=xe("blur(",!1),c=xe(")",!1),d=Oe("brightness()"),f=xe("brightness(",!1),h=Oe("contrast()"),_=xe("contrast(",!1),y=Oe("drop-shadow()"),v=xe("drop-shadow(",!1),g=Oe("grayscale()"),m=xe("grayscale(",!1),b=Oe("hue-rotate()"),P=xe("hue-rotate(",!1),w=Oe("invert()"),E=xe("invert(",!1),S=Oe("opacity()"),x=xe("opacity(",!1),M=Oe("saturate()"),O=xe("saturate(",!1),R=Oe("sepia()"),T=xe("sepia(",!1),F=Oe("<number-percentage>"),I=Oe("<integer>"),N=/^[0-9]/,A=Me([["0","9"]],!1,!1),C=Oe("<number>"),j=xe(".",!1),q=function(){return parseFloat(Se())},L=Oe("<signedNumber>"),k=/^[+\-]/,V=Me(["+","-"],!1,!1),G=xe("%",!1),U=Oe("<angle>"),D=function(e,t){return e*t},z=xe("0",!1),H=Oe("<unit>"),Y=xe("deg",!1),J=xe("grad",!1),Z=xe("rad",!1),X=xe("turn",!1),B=Oe("<length>"),Q=xe("px",!1),W=xe("cm",!1),K=xe("mm",!1),$=xe("Q",!1),ee=xe("in",!1),te=xe("pc",!1),re=xe("pt",!1),ne=xe("#",!1),ie=xe("rgba(",!1),oe=xe(",",!1),ae=function(e,t,r){return[255*e,255*t,255*r,1]},se=function(e,t,r){return[e,t,r,1]},ue=xe("rgb(",!1),le=/^[0-9a-fA-F]/,pe=Me([["0","9"],["a","f"],["A","F"]],!1,!1),ce=Oe("whitespace"),de=/^[ \t\n\r]/,fe=Me([" ","\t","\n","\r"],!1,!1),he=Oe("<named-color>"),_e=/^[a-z]/,ye=Me([["a","z"]],!1,!1),ve=function(){var t=Se();return De.has(t)||function(t,r){throw function(t,r){return new e(t,null,null,r)}(t,r=void 0!==r?r:Te(me,ge))}('unknown color "'+t+'"'),Ue[t].concat(1)},ge=0,me=0,be=[{line:1,column:1}],Pe=0,we=[],Ee=0;if("startRule"in r){if(!(r.startRule in o))throw new Error("Can't start parsing from rule \""+r.startRule+'".');a=o[r.startRule]}function Se(){return t.substring(me,ge)}function xe(e,t){return{type:"literal",text:e,ignoreCase:t}}function Me(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function Oe(e){return{type:"other",description:e}}function Re(e){var r,n=be[e];if(n)return n;for(r=e-1;!be[r];)r--;for(n={line:(n=be[r]).line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return be[e]=n,n}function Te(e,t){var r=Re(e),n=Re(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function Fe(e){ge<Pe||(ge>Pe&&(Pe=ge,we=[]),we.push(e))}function Ie(){var e;return(e=function(){var e,r;return Ee++,e=ge,Ge()!==i?("none"===t.substr(ge,4)?(r="none",ge+=4):(r=i,0===Ee&&Fe(u)),r!==i&&Ge()!==i?(me=e,e=null):(ge=e,e=i)):(ge=e,e=i),Ee--,e===i&&0===Ee&&Fe(s),e}())===i&&(e=function(){var e,t;if(e=[],(t=Ne())!==i)for(;t!==i;)e.push(t),t=Ne();else e=i;return e}()),e}function Ne(){var e;return(e=function(){var e,r,n,o;return Ee++,e=ge,Ge()!==i?("blur("===t.substr(ge,5)?(r="blur(",ge+=5):(r=i,0===Ee&&Fe(p)),r!==i&&Ge()!==i&&(n=Le())!==i&&Ge()!==i?(41===t.charCodeAt(ge)?(o=")",ge++):(o=i,0===Ee&&Fe(c)),o!==i&&Ge()!==i?(me=e,e={type:"blur",radius:n}):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i),Ee--,e===i&&0===Ee&&Fe(l),e}())===i&&(e=function(){var e,r,n,o;return Ee++,e=ge,Ge()!==i?("brightness("===t.substr(ge,11)?(r="brightness(",ge+=11):(r=i,0===Ee&&Fe(f)),r!==i&&Ge()!==i&&(n=Ae())!==i&&Ge()!==i?(41===t.charCodeAt(ge)?(o=")",ge++):(o=i,0===Ee&&Fe(c)),o!==i&&Ge()!==i?(me=e,e={type:"brightness",amount:n}):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i),Ee--,e===i&&0===Ee&&Fe(d),e}())===i&&(e=function(){var e,r,n,o;return Ee++,e=ge,Ge()!==i?("contrast("===t.substr(ge,9)?(r="contrast(",ge+=9):(r=i,0===Ee&&Fe(_)),r!==i&&Ge()!==i&&(n=Ae())!==i&&Ge()!==i?(41===t.charCodeAt(ge)?(o=")",ge++):(o=i,0===Ee&&Fe(c)),o!==i&&Ge()!==i?(me=e,e={type:"contrast",amount:n}):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i),Ee--,e===i&&0===Ee&&Fe(h),e}())===i&&(e=function(){var e,r,n,o,a,s,u;return Ee++,e=ge,Ge()!==i?("drop-shadow("===t.substr(ge,12)?(r="drop-shadow(",ge+=12):(r=i,0===Ee&&Fe(v)),r!==i&&Ge()!==i&&(n=Le())!==i&&Ge()!==i&&(o=Le())!==i&&Ge()!==i?((a=Le())===i&&(a=null),a!==i&&Ge()!==i?((s=function(){var e,r,n,o,a,s,u,l,p,d,f,h,_,y,v,g,m;return e=ge,35===t.charCodeAt(ge)?(r="#",ge++):(r=i,0===Ee&&Fe(ne)),r!==i?(n=ge,(o=Ve())!==i&&(a=Ve())!==i?n=o=[o,a]:(ge=n,n=i),n!==i?(o=ge,(a=Ve())!==i&&(s=Ve())!==i?o=a=[a,s]:(ge=o,o=i),o!==i?(a=ge,(s=Ve())!==i&&(u=Ve())!==i?a=s=[s,u]:(ge=a,a=i),a!==i?(me=e,g=o,m=a,e=r=[parseInt(n.join(""),16),parseInt(g.join(""),16),parseInt(m.join(""),16)]):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i),e===i&&(e=ge,35===t.charCodeAt(ge)?(r="#",ge++):(r=i,0===Ee&&Fe(ne)),r!==i&&(n=Ve())!==i&&(o=Ve())!==i&&(a=Ve())!==i?(me=e,r=function(e,t,r){return[parseInt([e,e].join(""),16),parseInt([t,t].join(""),16),parseInt([r,r].join(""),16)]}(n,o,a),e=r):(ge=e,e=i),e===i&&(e=ge,"rgba("===t.substr(ge,5)?(r="rgba(",ge+=5):(r=i,0===Ee&&Fe(ie)),r!==i&&(n=Ge())!==i&&(o=je())!==i&&(a=Ge())!==i?(44===t.charCodeAt(ge)?(s=",",ge++):(s=i,0===Ee&&Fe(oe)),s!==i&&(u=Ge())!==i&&(l=je())!==i&&Ge()!==i?(44===t.charCodeAt(ge)?(p=",",ge++):(p=i,0===Ee&&Fe(oe)),p!==i&&Ge()!==i&&(d=je())!==i&&(f=Ge())!==i?(44===t.charCodeAt(ge)?(h=",",ge++):(h=i,0===Ee&&Fe(oe)),h!==i&&(_=Ge())!==i&&(y=Ae())!==i&&Ge()!==i?(41===t.charCodeAt(ge)?(v=")",ge++):(v=i,0===Ee&&Fe(c)),v!==i?(me=e,e=r=function(e,t,r,n){return[255*e,255*t,255*r,n]}(o,l,d,y)):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i),e===i&&(e=ge,"rgba("===t.substr(ge,5)?(r="rgba(",ge+=5):(r=i,0===Ee&&Fe(ie)),r!==i&&(n=Ge())!==i&&(o=Ce())!==i&&(a=Ge())!==i?(44===t.charCodeAt(ge)?(s=",",ge++):(s=i,0===Ee&&Fe(oe)),s!==i&&(u=Ge())!==i&&(l=Ce())!==i&&Ge()!==i?(44===t.charCodeAt(ge)?(p=",",ge++):(p=i,0===Ee&&Fe(oe)),p!==i&&Ge()!==i&&(d=Ce())!==i?(44===t.charCodeAt(ge)?(f=",",ge++):(f=i,0===Ee&&Fe(oe)),f!==i&&(h=Ge())!==i&&(_=Ae())!==i?(41===t.charCodeAt(ge)?(y=")",ge++):(y=i,0===Ee&&Fe(c)),y!==i?(me=e,e=r=function(e,t,r,n){return[e,t,r,n]}(o,l,d,_)):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i),e===i&&(e=ge,"rgba("===t.substr(ge,5)?(r="rgba(",ge+=5):(r=i,0===Ee&&Fe(ie)),r!==i&&(n=Ge())!==i&&(o=je())!==i&&(a=Ge())!==i?(44===t.charCodeAt(ge)?(s=",",ge++):(s=i,0===Ee&&Fe(oe)),s!==i&&(u=Ge())!==i&&(l=je())!==i&&Ge()!==i?(44===t.charCodeAt(ge)?(p=",",ge++):(p=i,0===Ee&&Fe(oe)),p!==i&&Ge()!==i&&(d=je())!==i&&(f=Ge())!==i?(41===t.charCodeAt(ge)?(h=")",ge++):(h=i,0===Ee&&Fe(c)),h!==i?(me=e,e=r=ae(o,l,d)):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i),e===i&&(e=ge,"rgba("===t.substr(ge,5)?(r="rgba(",ge+=5):(r=i,0===Ee&&Fe(ie)),r!==i&&(n=Ge())!==i&&(o=Ce())!==i&&(a=Ge())!==i?(44===t.charCodeAt(ge)?(s=",",ge++):(s=i,0===Ee&&Fe(oe)),s!==i&&(u=Ge())!==i&&(l=Ce())!==i&&Ge()!==i?(44===t.charCodeAt(ge)?(p=",",ge++):(p=i,0===Ee&&Fe(oe)),p!==i&&Ge()!==i&&(d=Ce())!==i?(41===t.charCodeAt(ge)?(f=")",ge++):(f=i,0===Ee&&Fe(c)),f!==i?(me=e,e=r=se(o,l,d)):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i),e===i&&(e=ge,"rgb("===t.substr(ge,4)?(r="rgb(",ge+=4):(r=i,0===Ee&&Fe(ue)),r!==i&&(n=Ge())!==i&&(o=je())!==i&&(a=Ge())!==i?(44===t.charCodeAt(ge)?(s=",",ge++):(s=i,0===Ee&&Fe(oe)),s!==i&&(u=Ge())!==i&&(l=je())!==i&&Ge()!==i?(44===t.charCodeAt(ge)?(p=",",ge++):(p=i,0===Ee&&Fe(oe)),p!==i&&Ge()!==i&&(d=je())!==i&&(f=Ge())!==i?(41===t.charCodeAt(ge)?(h=")",ge++):(h=i,0===Ee&&Fe(c)),h!==i?(me=e,e=r=ae(o,l,d)):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i),e===i&&(e=ge,"rgb("===t.substr(ge,4)?(r="rgb(",ge+=4):(r=i,0===Ee&&Fe(ue)),r!==i&&(n=Ge())!==i&&(o=Ce())!==i&&(a=Ge())!==i?(44===t.charCodeAt(ge)?(s=",",ge++):(s=i,0===Ee&&Fe(oe)),s!==i&&(u=Ge())!==i&&(l=Ce())!==i&&Ge()!==i?(44===t.charCodeAt(ge)?(p=",",ge++):(p=i,0===Ee&&Fe(oe)),p!==i&&Ge()!==i&&(d=Ce())!==i&&(f=Ge())!==i?(41===t.charCodeAt(ge)?(h=")",ge++):(h=i,0===Ee&&Fe(c)),h!==i?(me=e,e=r=se(o,l,d)):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i),e===i&&(e=function(){var e,r,n;if(Ee++,e=ge,r=[],_e.test(t.charAt(ge))?(n=t.charAt(ge),ge++):(n=i,0===Ee&&Fe(ye)),n!==i)for(;n!==i;)r.push(n),_e.test(t.charAt(ge))?(n=t.charAt(ge),ge++):(n=i,0===Ee&&Fe(ye));else r=i;return r!==i&&(me=e,r=ve()),Ee--,(e=r)===i&&(r=i,0===Ee&&Fe(he)),e}())))))))),e}())===i&&(s=null),s!==i&&Ge()!==i?(41===t.charCodeAt(ge)?(u=")",ge++):(u=i,0===Ee&&Fe(c)),u!==i&&Ge()!==i?(me=e,e={type:"drop-shadow",offsetX:n,offsetY:o,blurRadius:a,color:s}):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i),Ee--,e===i&&0===Ee&&Fe(y),e}())===i&&(e=function(){var e,r,n,o;return Ee++,e=ge,Ge()!==i?("grayscale("===t.substr(ge,10)?(r="grayscale(",ge+=10):(r=i,0===Ee&&Fe(m)),r!==i&&Ge()!==i&&(n=Ae())!==i&&Ge()!==i?(41===t.charCodeAt(ge)?(o=")",ge++):(o=i,0===Ee&&Fe(c)),o!==i&&Ge()!==i?(me=e,e={type:"grayscale",amount:n}):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i),Ee--,e===i&&0===Ee&&Fe(g),e}())===i&&(e=function(){var e,r,n,o;return Ee++,e=ge,Ge()!==i?("hue-rotate("===t.substr(ge,11)?(r="hue-rotate(",ge+=11):(r=i,0===Ee&&Fe(P)),r!==i&&Ge()!==i&&(n=function(){var e,r,n;return Ee++,e=ge,(r=function(){var e,r;return Ee++,e=ge,k.test(t.charAt(ge))?(r=t.charAt(ge),ge++):(r=i,0===Ee&&Fe(V)),r===i&&(r=null),r!==i&&Ce()!==i?(me=e,e=r=q()):(ge=e,e=i),Ee--,e===i&&(r=i,0===Ee&&Fe(L)),e}())!==i&&(n=qe())!==i?(me=e,e=r=D(r,n)):(ge=e,e=i),e===i&&(e=ge,48===t.charCodeAt(ge)?(r="0",ge++):(r=i,0===Ee&&Fe(z)),r!==i?((n=qe())===i&&(n=null),n!==i?(me=e,e=r=0):(ge=e,e=i)):(ge=e,e=i)),Ee--,e===i&&(r=i,0===Ee&&Fe(U)),e}())!==i&&Ge()!==i?(41===t.charCodeAt(ge)?(o=")",ge++):(o=i,0===Ee&&Fe(c)),o!==i&&Ge()!==i?(me=e,e={type:"hue-rotate",angle:n}):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i),Ee--,e===i&&0===Ee&&Fe(b),e}())===i&&(e=function(){var e,r,n,o;return Ee++,e=ge,Ge()!==i?("invert("===t.substr(ge,7)?(r="invert(",ge+=7):(r=i,0===Ee&&Fe(E)),r!==i&&Ge()!==i&&(n=Ae())!==i&&Ge()!==i?(41===t.charCodeAt(ge)?(o=")",ge++):(o=i,0===Ee&&Fe(c)),o!==i&&Ge()!==i?(me=e,e={type:"invert",amount:n}):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i),Ee--,e===i&&0===Ee&&Fe(w),e}())===i&&(e=function(){var e,r,n,o;return Ee++,e=ge,Ge()!==i?("opacity("===t.substr(ge,8)?(r="opacity(",ge+=8):(r=i,0===Ee&&Fe(x)),r!==i&&Ge()!==i&&(n=Ae())!==i&&Ge()!==i?(41===t.charCodeAt(ge)?(o=")",ge++):(o=i,0===Ee&&Fe(c)),o!==i&&Ge()!==i?(me=e,e={type:"opacity",amount:n}):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i),Ee--,e===i&&0===Ee&&Fe(S),e}())===i&&(e=function(){var e,r,n,o;return Ee++,e=ge,Ge()!==i?("saturate("===t.substr(ge,9)?(r="saturate(",ge+=9):(r=i,0===Ee&&Fe(O)),r!==i&&Ge()!==i&&(n=Ae())!==i&&Ge()!==i?(41===t.charCodeAt(ge)?(o=")",ge++):(o=i,0===Ee&&Fe(c)),o!==i&&Ge()!==i?(me=e,e={type:"saturate",amount:n}):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i),Ee--,e===i&&0===Ee&&Fe(M),e}())===i&&(e=function(){var e,r,n,o;return Ee++,e=ge,Ge()!==i?("sepia("===t.substr(ge,6)?(r="sepia(",ge+=6):(r=i,0===Ee&&Fe(T)),r!==i&&Ge()!==i&&(n=Ae())!==i&&Ge()!==i?(41===t.charCodeAt(ge)?(o=")",ge++):(o=i,0===Ee&&Fe(c)),o!==i&&Ge()!==i?(me=e,e={type:"sepia",amount:n}):(ge=e,e=i)):(ge=e,e=i)):(ge=e,e=i),Ee--,e===i&&0===Ee&&Fe(R),e}()),e}function Ae(){var e;return Ee++,(e=je())===i&&(e=Ce()),Ee--,e===i&&0===Ee&&Fe(F),e}function Ce(){var e,r,n,o,a;if(Ee++,e=ge,r=[],N.test(t.charAt(ge))?(n=t.charAt(ge),ge++):(n=i,0===Ee&&Fe(A)),n!==i)for(;n!==i;)r.push(n),N.test(t.charAt(ge))?(n=t.charAt(ge),ge++):(n=i,0===Ee&&Fe(A));else r=i;if(r!==i)if(46===t.charCodeAt(ge)?(n=".",ge++):(n=i,0===Ee&&Fe(j)),n!==i){if(o=[],N.test(t.charAt(ge))?(a=t.charAt(ge),ge++):(a=i,0===Ee&&Fe(A)),a!==i)for(;a!==i;)o.push(a),N.test(t.charAt(ge))?(a=t.charAt(ge),ge++):(a=i,0===Ee&&Fe(A));else o=i;o!==i?(me=e,e=r=q()):(ge=e,e=i)}else ge=e,e=i;else ge=e,e=i;return e===i&&(e=function(){var e,r,n;if(Ee++,e=ge,r=[],N.test(t.charAt(ge))?(n=t.charAt(ge),ge++):(n=i,0===Ee&&Fe(A)),n!==i)for(;n!==i;)r.push(n),N.test(t.charAt(ge))?(n=t.charAt(ge),ge++):(n=i,0===Ee&&Fe(A));else r=i;return r!==i&&(me=e,r=parseInt(Se(),10)),Ee--,(e=r)===i&&(r=i,0===Ee&&Fe(I)),e}()),Ee--,e===i&&(r=i,0===Ee&&Fe(C)),e}function je(){var e,r,n;return e=ge,(r=Ce())!==i?(37===t.charCodeAt(ge)?(n="%",ge++):(n=i,0===Ee&&Fe(G)),n!==i?(me=e,e=r/=100):(ge=e,e=i)):(ge=e,e=i),e}function qe(){var e,r;return Ee++,e=ge,"deg"===t.substr(ge,3)?(r="deg",ge+=3):(r=i,0===Ee&&Fe(Y)),r!==i&&(me=e,r=1),(e=r)===i&&(e=ge,"grad"===t.substr(ge,4)?(r="grad",ge+=4):(r=i,0===Ee&&Fe(J)),r!==i&&(me=e,r=.9),(e=r)===i&&(e=ge,"rad"===t.substr(ge,3)?(r="rad",ge+=3):(r=i,0===Ee&&Fe(Z)),r!==i&&(me=e,r=180/Math.PI),(e=r)===i&&(e=ge,"turn"===t.substr(ge,4)?(r="turn",ge+=4):(r=i,0===Ee&&Fe(X)),r!==i&&(me=e,r=1/360),e=r))),Ee--,e===i&&(r=i,0===Ee&&Fe(H)),e}function Le(){var e,r,n;return Ee++,e=ge,(r=Ce())!==i&&(n=ke())!==i?(me=e,e=r=D(r,n)):(ge=e,e=i),e===i&&(e=ge,48===t.charCodeAt(ge)?(r="0",ge++):(r=i,0===Ee&&Fe(z)),r!==i?((n=ke())===i&&(n=null),n!==i?(me=e,e=r=0):(ge=e,e=i)):(ge=e,e=i)),Ee--,e===i&&(r=i,0===Ee&&Fe(B)),e}function ke(){var e,r;return e=ge,"px"===t.substr(ge,2)?(r="px",ge+=2):(r=i,0===Ee&&Fe(Q)),r!==i&&(me=e,r=1),(e=r)===i&&(e=ge,"cm"===t.substr(ge,2)?(r="cm",ge+=2):(r=i,0===Ee&&Fe(W)),r!==i&&(me=e,r=96/2.54),(e=r)===i&&(e=ge,"mm"===t.substr(ge,2)?(r="mm",ge+=2):(r=i,0===Ee&&Fe(K)),r!==i&&(me=e,r=96/2.54/10),(e=r)===i&&(e=ge,81===t.charCodeAt(ge)?(r="Q",ge++):(r=i,0===Ee&&Fe($)),r!==i&&(me=e,r=96/2.54/40),(e=r)===i&&(e=ge,"in"===t.substr(ge,2)?(r="in",ge+=2):(r=i,0===Ee&&Fe(ee)),r!==i&&(me=e,r=96),(e=r)===i&&(e=ge,"pc"===t.substr(ge,2)?(r="pc",ge+=2):(r=i,0===Ee&&Fe(te)),r!==i&&(me=e,r=16),(e=r)===i&&(e=ge,"pt"===t.substr(ge,2)?(r="pt",ge+=2):(r=i,0===Ee&&Fe(re)),r!==i&&(me=e,r=96/73),e=r)))))),e}function Ve(){var e;return le.test(t.charAt(ge))?(e=t.charAt(ge),ge++):(e=i,0===Ee&&Fe(pe)),e}function Ge(){var e,r;for(Ee++,e=[],de.test(t.charAt(ge))?(r=t.charAt(ge),ge++):(r=i,0===Ee&&Fe(fe));r!==i;)e.push(r),de.test(t.charAt(ge))?(r=t.charAt(ge),ge++):(r=i,0===Ee&&Fe(fe));return Ee--,e===i&&(r=i,0===Ee&&Fe(ce)),e}var Ue={transparent:[0,0,0,0],black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rebeccapurple:[102,51,153],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]},De=new Set(Object.keys(Ue));if((n=a())!==i&&ge===t.length)return n;throw n!==i&&ge<t.length&&Fe({type:"end"}),function(t,r,n){return new e(e.buildMessage(t,r),t,r,n)}(we,Pe<t.length?t.charAt(Pe):null,Pe<t.length?Te(Pe,Pe+1):Te(Pe,Pe))}}})?n.apply(null,i):n)||(e.exports=o)},"6i4F":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("y4WC"),r("K2Kz"),r("8MXS"),r("Vx27"),r("YaB4"),r("ZMIQ"),r("7MXx"),r("ts8o"),r("20TT")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,p,c){Object.defineProperty(t,"__esModule",{value:!0});var d=n.ofType({key:"type",base:u,typeMap:{rect:l,path:c,geometry:p}});t.LayerView2DMixin=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clips=new d,t.moving=!1,t.attached=!1,t.lastUpdateId=-1,t.updateRequested=!1,t}return r.__extends(t,e),t.prototype.initialize=function(){var e,t=this;this.container||(this.container=new s.Container),this.handles.add([o.init(this,"suspended",(function(e){t.container&&(t.container.visible=!e),t.view&&!e&&t.updateRequested&&t.view.requestUpdate()}),!0),o.init(this,["layer.opacity","container"],(function(){var e,r;t.container&&(t.container.opacity=null!==(r=null===(e=t.layer)||void 0===e?void 0:e.opacity)&&void 0!==r?r:1)}),!0),o.init(this,["layer.blendMode"],(function(e){t.container&&(t.container.blendMode=e)}),!0),this.clips.on("change",(function(){t.container.clips=t.clips,t.notifyChange("clips")}))]),this.container.clips=this.clips,(null===(e=this.view)||void 0===e?void 0:e.whenLayerView)?this.view.whenLayerView(this.layer).then((function(e){e!==t||t.attached||t.destroyed||(t.attach(),t.requestUpdate(),t.attached=!0)}),(function(){})):this.when().then((function(){t.attached||t.destroyed||(t.attach(),t.requestUpdate(),t.attached=!0)}),(function(){}))},t.prototype.destroy=function(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove("initialize"),this.updateRequested=!1,this.layer=null,this.view=null},Object.defineProperty(t.prototype,"updating",{get:function(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())},enumerable:!0,configurable:!0}),t.prototype.isVisibleAtScale=function(e){var t=!0,r=this.layer,n=r.minScale,i=r.maxScale;if(null!=n&&null!=i){var o=!n,a=!i;!o&&e<=n&&(o=!0),!a&&e>=i&&(a=!0),t=o&&a}return t},t.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())},t.prototype.processUpdate=function(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1},t.prototype.isUpdating=function(){return!1},t.prototype.isRendering=function(){return!1},t.prototype.canResume=function(){return!!e.prototype.canResume.call(this)&&this.isVisibleAtScale(this.view.scale)},r.__decorate([a.property({type:d,set:function(e){var t=i.referenceSetter(e,this._get("clips"),d);this._set("clips",t)}})],t.prototype,"clips",void 0),r.__decorate([a.property()],t.prototype,"moving",void 0),r.__decorate([a.property()],t.prototype,"attached",void 0),r.__decorate([a.property()],t.prototype,"container",void 0),r.__decorate([a.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],t.prototype,"suspended",void 0),r.__decorate([a.property({readOnly:!0})],t.prototype,"updateParameters",void 0),r.__decorate([a.property()],t.prototype,"updateRequested",void 0),r.__decorate([a.property({dependsOn:["attached","updateRequested","suspended"]})],t.prototype,"updating",null),r.__decorate([a.property()],t.prototype,"view",void 0),r.__decorate([a.subclass("esri.views.2d.layers.LayerView2D")],t)}(e)}}.apply(null,n))||(e.exports=i)},"7MXx":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("Vx27"),r("ZMIQ")],void 0===(i=function(e,t,r,n,i){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="rect",t.left=null,t.right=null,t.top=null,t.bottom=null,t}var i;return r.__extends(t,e),i=t,t.prototype.clone=function(){return new i({left:this.left,right:this.right,top:this.top,bottom:this.bottom})},Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),r.__decorate([n.property({type:[Number,String],json:{write:!0}})],t.prototype,"left",void 0),r.__decorate([n.property({type:[Number,String],json:{write:!0}})],t.prototype,"right",void 0),r.__decorate([n.property({type:[Number,String],json:{write:!0}})],t.prototype,"top",void 0),r.__decorate([n.property({type:[Number,String],json:{write:!0}})],t.prototype,"bottom",void 0),r.__decorate([n.property({readOnly:!0,dependsOn:["left","right","top","bottom"]})],t.prototype,"version",null),i=r.__decorate([n.subclass("esri.views.layers.support.ClipRect")],t)}(i)}.apply(null,n))||(e.exports=i)},"8iBb":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("qsST"),r("LxLY"),r("qMld"),r("ULaq"),r("8MXS"),r("Vx27"),r("k7g7"),r("ml7j"),r("sCbS"),r("IpeC"),r("dDbr"),r("e4th"),r("I6zq")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,p,c,d,f,h,_,y){Object.defineProperty(t,"__esModule",{value:!0});var v=i.getLogger("esri.views.layers.FeatureLayerView");t.FeatureLayerView=function(e){return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=e.apply(this,t)||this;return n._updatingRequiredFieldsPromise=null,n.effect=null,n.filter=null,n.layer=null,n.requiredFields=[],n.view=null,n}return r.__extends(t,e),t.prototype.initialize=function(){var e=this;u.init(this,["layer.renderer","layer.labelingInfo","layer.elevationInfo.featureExpressionInfo","layer.displayField","filter","effect","layer.timeInfo","timeExtent"],(function(){return e._handleRequiredFieldsChange()}),!0)},Object.defineProperty(t.prototype,"availableFields",{get:function(){var e=this.layer,t=this.layer.fields,n=this.requiredFields;return"outFields"in e&&e.outFields?p.fixFields(t,r.__spreadArrays(p.unpackFieldNames(t,e.outFields),n)):p.fixFields(t,n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximumNumberOfFeatures",{get:function(){return 0},set:function(e){v.error("#maximumNumberOfFeatures=","Setting maximum number of features is not supported")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maximumNumberOfFeaturesExceeded",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.highlight=function(e,t){throw void 0===t&&(t={}),new Error("missing implementation")},t.prototype.createQuery=function(){var e={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},t=o.isSome(this.filter)?this.filter.createQuery(e):new f(e);return this.timeExtent&&(t.timeExtent=t.timeExtent?t.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),t},t.prototype.queryFeatures=function(e,t){throw new Error("missing implementation")},t.prototype.queryObjectIds=function(e,t){throw new Error("missing implementation")},t.prototype.queryFeatureCount=function(e,t){throw new Error("missing implementation")},t.prototype.queryExtent=function(e,t){throw new Error("missing implementation")},t.prototype._loadArcadeModules=function(e){if(e.get("expressionInfos.length"))return d.loadArcade()},t.prototype._handleRequiredFieldsChange=function(){var e=this,t=this._updateRequiredFields();this._set("_updatingRequiredFieldsPromise",t),t.then((function(){e._updatingRequiredFieldsPromise===t&&e._set("_updatingRequiredFieldsPromise",null)}))},t.prototype._updateRequiredFields=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,i,u,l,c,d,f,h,_,y,g,m,b;return r.__generator(this,(function(r){switch(r.label){case 0:return this.layer&&this.view?(e="3d"===this.view.type,n=(t=this).layer,i=t.layer,u=i.fields,l=i.objectIdField,c=i.renderer,d=i.displayField,f=n.featureReduction,h=new Set,[4,a.eachAlways([c?c.collectRequiredFields(h,u):null,p.collectLabelingFields(h,n),e?p.collectElevationFields(h,n):null,o.isSome(this.filter)?p.collectFilterFields(h,n,this.filter):null,this.effect?p.collectFilterFields(h,n,this.effect.filter):null,f?p.collectFeatureReductionFields(h,n,f):null])]):[2];case 1:for(_=r.sent(),n.timeInfo&&this.timeExtent&&p.collectFields(h,n.fields,[n.timeInfo.startField,n.timeInfo.endField]),y=0,g=_;y<g.length;y++)(m=g[y]).error&&v.error(m.error);return p.collectField(h,u,l),e&&d&&p.collectField(h,u,d),b=s.valuesOfSet(h).sort(),this._set("requiredFields",b),[2]}}))}))},t.prototype.validateFetchPopupFeatures=function(e){var t=this.layer;return this.layer.popupEnabled?y.getFetchPopupTemplate(this.layer,e)?void 0:new n("featurelayerview:fetchPopupFeatures","Layer does not define a popup template",{layer:t}):new n("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:t})},t.prototype.fetchClientPopupFeatures=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,s,u,l,c,d,f,h,_,v;return r.__generator(this,(function(r){switch(r.label){case 0:return(t=o.isSome(e)?e.clientGraphics:null)&&0!==t.length?(n=[],i=[],s=this.layer,u=y.getFetchPopupTemplate(s,e),o.isSome(u)?[4,this._loadArcadeModules(u)]:[2,a.resolve([])]):[2,a.resolve([])];case 1:return l=r.sent(),c=l&&l.arcadeUtils.hasGeometryOperations(u),[4,this.createPopupQuery(e)];case 2:for(d=r.sent(),f=p.unpackFieldNames(s.fields,d.outFields),h=0,_=t;h<_.length;h++)v=_[h],c||!p.featureHasFields(f,v)?i.push(v):n.push(v);return"stream"===s.type||0===i.length?[2,a.resolve(n)]:(d.objectIds=i.map((function(e){return e.attributes[s.objectIdField]})),[2,s.queryFeatures(d).then((function(e){return n.concat(e.features)})).catch((function(){return i}))])}}))}))},t.prototype.createPopupQuery=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return t=this.layer,(n=t.createQuery()).returnGeometry=!0,n.returnZ=!0,n.returnM=!0,i=n,[4,y.getRequiredFields(this.layer,y.getFetchPopupTemplate(this.layer,e))];case 1:return i.outFields=r.sent(),n.outSpatialReference=this.view.spatialReference,[2,n]}}))}))},t.prototype.canResume=function(){var t;return!(!e.prototype.canResume.call(this)||null!==(t=this.timeExtent)&&void 0!==t&&t.isEmpty)},r.__decorate([l.property()],t.prototype,"_updatingRequiredFieldsPromise",void 0),r.__decorate([l.property({readOnly:!0,dependsOn:["layer.outFields?","requiredFields"]})],t.prototype,"availableFields",null),r.__decorate([l.property({type:h})],t.prototype,"effect",void 0),r.__decorate([l.property({type:_})],t.prototype,"filter",void 0),r.__decorate([l.property(c.combinedViewLayerTimeExtentProperty)],t.prototype,"timeExtent",void 0),r.__decorate([l.property()],t.prototype,"layer",void 0),r.__decorate([l.property({type:Number})],t.prototype,"maximumNumberOfFeatures",null),r.__decorate([l.property({readOnly:!0,type:Boolean})],t.prototype,"maximumNumberOfFeaturesExceeded",null),r.__decorate([l.property({readOnly:!0})],t.prototype,"requiredFields",void 0),r.__decorate([l.property({dependsOn:["timeExtent"]})],t.prototype,"suspended",void 0),r.__decorate([l.property()],t.prototype,"view",void 0),r.__decorate([l.subclass("esri.views.layers.FeatureLayerView")],t)}(e)}}.apply(null,n))||(e.exports=i)},CaYo:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function n(e,t,n,i,o,a){return r((s=r(r(t,e),r(i,a)))<<(u=o)|s>>>32-u,n);var s,u}function i(e,t,r,i,o,a,s){return n(t&r|~t&i,e,t,o,a,s)}function o(e,t,r,i,o,a,s){return n(t&i|r&~i,e,t,o,a,s)}function a(e,t,r,i,o,a,s){return n(t^r^i,e,t,o,a,s)}function s(e,t,r,i,o,a,s){return n(r^(t|~i),e,t,o,a,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.outputTypes={Base64:0,Hex:1,String:2,Raw:3},t.createMD5Hash=function(e,n){void 0===n&&(n=t.outputTypes.Hex);var u=n||t.outputTypes.Base64,l=function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,u=-271733879,l=-1732584194,p=271733878,c=0;c<e.length;c+=16){var d=n,f=u,h=l,_=p;n=i(n,u,l,p,e[c+0],7,-680876936),p=i(p,n,u,l,e[c+1],12,-389564586),l=i(l,p,n,u,e[c+2],17,606105819),u=i(u,l,p,n,e[c+3],22,-1044525330),n=i(n,u,l,p,e[c+4],7,-176418897),p=i(p,n,u,l,e[c+5],12,1200080426),l=i(l,p,n,u,e[c+6],17,-1473231341),u=i(u,l,p,n,e[c+7],22,-45705983),n=i(n,u,l,p,e[c+8],7,1770035416),p=i(p,n,u,l,e[c+9],12,-1958414417),l=i(l,p,n,u,e[c+10],17,-42063),u=i(u,l,p,n,e[c+11],22,-1990404162),n=i(n,u,l,p,e[c+12],7,1804603682),p=i(p,n,u,l,e[c+13],12,-40341101),l=i(l,p,n,u,e[c+14],17,-1502002290),n=o(n,u=i(u,l,p,n,e[c+15],22,1236535329),l,p,e[c+1],5,-165796510),p=o(p,n,u,l,e[c+6],9,-1069501632),l=o(l,p,n,u,e[c+11],14,643717713),u=o(u,l,p,n,e[c+0],20,-373897302),n=o(n,u,l,p,e[c+5],5,-701558691),p=o(p,n,u,l,e[c+10],9,38016083),l=o(l,p,n,u,e[c+15],14,-660478335),u=o(u,l,p,n,e[c+4],20,-405537848),n=o(n,u,l,p,e[c+9],5,568446438),p=o(p,n,u,l,e[c+14],9,-1019803690),l=o(l,p,n,u,e[c+3],14,-187363961),u=o(u,l,p,n,e[c+8],20,1163531501),n=o(n,u,l,p,e[c+13],5,-1444681467),p=o(p,n,u,l,e[c+2],9,-51403784),l=o(l,p,n,u,e[c+7],14,1735328473),n=a(n,u=o(u,l,p,n,e[c+12],20,-1926607734),l,p,e[c+5],4,-378558),p=a(p,n,u,l,e[c+8],11,-2022574463),l=a(l,p,n,u,e[c+11],16,1839030562),u=a(u,l,p,n,e[c+14],23,-35309556),n=a(n,u,l,p,e[c+1],4,-1530992060),p=a(p,n,u,l,e[c+4],11,1272893353),l=a(l,p,n,u,e[c+7],16,-155497632),u=a(u,l,p,n,e[c+10],23,-1094730640),n=a(n,u,l,p,e[c+13],4,681279174),p=a(p,n,u,l,e[c+0],11,-358537222),l=a(l,p,n,u,e[c+3],16,-722521979),u=a(u,l,p,n,e[c+6],23,76029189),n=a(n,u,l,p,e[c+9],4,-640364487),p=a(p,n,u,l,e[c+12],11,-421815835),l=a(l,p,n,u,e[c+15],16,530742520),n=s(n,u=a(u,l,p,n,e[c+2],23,-995338651),l,p,e[c+0],6,-198630844),p=s(p,n,u,l,e[c+7],10,1126891415),l=s(l,p,n,u,e[c+14],15,-1416354905),u=s(u,l,p,n,e[c+5],21,-57434055),n=s(n,u,l,p,e[c+12],6,1700485571),p=s(p,n,u,l,e[c+3],10,-1894986606),l=s(l,p,n,u,e[c+10],15,-1051523),u=s(u,l,p,n,e[c+1],21,-2054922799),n=s(n,u,l,p,e[c+8],6,1873313359),p=s(p,n,u,l,e[c+15],10,-30611744),l=s(l,p,n,u,e[c+6],15,-1560198380),u=s(u,l,p,n,e[c+13],21,1309151649),n=s(n,u,l,p,e[c+4],6,-145523070),p=s(p,n,u,l,e[c+11],10,-1120210379),l=s(l,p,n,u,e[c+2],15,718787259),u=s(u,l,p,n,e[c+9],21,-343485551),n=r(n,d),u=r(u,f),l=r(l,h),p=r(p,_)}return[n,u,l,p]}(function(e){for(var t=[],r=0,n=8*e.length;r<n;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<r%32;return t}(e),8*e.length);switch(u){case t.outputTypes.Raw:return l;case t.outputTypes.Hex:return function(e){for(var t="0123456789abcdef",r=[],n=0,i=4*e.length;n<i;n++)r.push(t.charAt(e[n>>2]>>n%4*8+4&15)+t.charAt(e[n>>2]>>n%4*8&15));return r.join("")}(l);case t.outputTypes.String:return function(e){for(var t=[],r=0,n=32*e.length;r<n;r+=8)t.push(String.fromCharCode(e[r>>5]>>>r%32&255));return t.join("")}(l);case t.outputTypes.Base64:return function(e){for(var t=[],r=0,n=4*e.length;r<n;r+=3)for(var i=(e[r>>2]>>r%4*8&255)<<16|(e[r+1>>2]>>(r+1)%4*8&255)<<8|e[r+2>>2]>>(r+2)%4*8&255,o=0;o<4;o++)8*r+6*o>32*e.length?t.push("="):t.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>6*(3-o)&63));return t.join("")}(l)}}}.apply(null,n))||(e.exports=i)},FXVB:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("Jl7l")],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.mat4=r}.apply(null,n))||(e.exports=i)},H9Hv:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.jsonAdapter={convertToGEGeometry:function(e,t){return null==t?null:e.convertJSONToGeometry(t)},exportPoint:function(e,t,n){var i=new r(e.getPointX(t),e.getPointY(t),n),o=e.hasZ(t),a=e.hasM(t);return o&&(i.z=e.getPointZ(t)),a&&(i.m=e.getPointM(t)),i},exportPolygon:function(e,t,r){return new n(e.exportPaths(t),r,e.hasZ(t),e.hasM(t))},exportPolyline:function(e,t,r){return new i(e.exportPaths(t),r,e.hasZ(t),e.hasM(t))},exportMultipoint:function(e,t,r){return new o(e.exportPoints(t),r,e.hasZ(t),e.hasM(t))},exportExtent:function(e,t,r){var n=e.hasZ(t),i=e.hasM(t),o=new a(e.getXMin(t),e.getYMin(t),e.getXMax(t),e.getYMax(t),r);if(n){var s=e.getZExtent(t);o.zmin=s.vmin,o.zmax=s.vmax}if(i){var u=e.getMExtent(t);o.mmin=u.vmin,o.mmax=u.vmax}return o}};var r=function(e,t,r){this.x=e,this.y=t,this.spatialReference=r,this.z=void 0,this.m=void 0},n=function(e,t,r,n){this.rings=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),n&&(this.hasM=n)},i=function(e,t,r,n){this.paths=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),n&&(this.hasM=n)},o=function(e,t,r,n){this.points=e,this.spatialReference=t,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),n&&(this.hasM=n)},a=function(e,t,r,n,i){this.xmin=e,this.ymin=t,this.xmax=r,this.ymax=n,this.spatialReference=i,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}.apply(null,n))||(e.exports=i)},I6zq:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ll/V"),r("LxLY"),r("k7g7")],void 0===(i=function(e,t,r,n,i,o){Object.defineProperty(t,"__esModule",{value:!0}),t.getRequiredFields=function(e,t){return void 0===t&&(t=e.popupTemplate),r.__awaiter(this,void 0,void 0,(function(){var a,s,u,l,p,c,d,f,h;return r.__generator(this,(function(_){switch(_.label){case 0:return i.isSome(t)?[4,t.getRequiredFields(e.fields)]:[2,[]];case 1:return a=_.sent(),s=t.lastEditInfoEnabled,u=e.objectIdField,l=e.typeIdField,p=e.globalIdField,c=e.relationships,n.includes(a,"*")?[2,["*"]]:s?[4,o.getFeatureEditFields(e)]:[3,3];case 2:return f=_.sent(),[3,4];case 3:f=[],_.label=4;case 4:return d=f,h=o.fixFields(e.fields,r.__spreadArrays(a,d)),l&&h.push(l),h&&u&&o.hasField(e.fields,u)&&-1===h.indexOf(u)&&h.push(u),h&&p&&o.hasField(e.fields,p)&&-1===h.indexOf(p)&&h.push(p),c&&c.forEach((function(t){var r=t.keyField;h&&r&&o.hasField(e.fields,r)&&-1===h.indexOf(r)&&h.push(r)})),[2,h]}}))}))},t.getFetchPopupTemplate=function(e,t){return e.popupTemplate?e.popupTemplate:i.isSome(t)&&t.defaultPopupTemplateEnabled&&i.isSome(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}}.apply(null,n))||(e.exports=i)},Jl7l:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("jaBu"),r("qysZ")],void 0===(i=function(e,t,r,n){function i(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function o(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],l=t[6],p=t[7],c=t[8],d=t[9],f=t[10],h=t[11],_=t[12],y=t[13],v=t[14],g=t[15],m=r[0],b=r[1],P=r[2],w=r[3];return e[0]=m*n+b*s+P*c+w*_,e[1]=m*i+b*u+P*d+w*y,e[2]=m*o+b*l+P*f+w*v,e[3]=m*a+b*p+P*h+w*g,m=r[4],b=r[5],P=r[6],w=r[7],e[4]=m*n+b*s+P*c+w*_,e[5]=m*i+b*u+P*d+w*y,e[6]=m*o+b*l+P*f+w*v,e[7]=m*a+b*p+P*h+w*g,m=r[8],b=r[9],P=r[10],w=r[11],e[8]=m*n+b*s+P*c+w*_,e[9]=m*i+b*u+P*d+w*y,e[10]=m*o+b*l+P*f+w*v,e[11]=m*a+b*p+P*h+w*g,m=r[12],b=r[13],P=r[14],w=r[15],e[12]=m*n+b*s+P*c+w*_,e[13]=m*i+b*u+P*d+w*y,e[14]=m*o+b*l+P*f+w*v,e[15]=m*a+b*p+P*h+w*g,e}function a(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=n+n,u=i+i,l=o+o,p=n*s,c=n*u,d=n*l,f=i*u,h=i*l,_=o*l,y=a*s,v=a*u,g=a*l;return e[0]=1-(f+_),e[1]=c+g,e[2]=d-v,e[3]=0,e[4]=c-g,e[5]=1-(p+_),e[6]=h+y,e[7]=0,e[8]=d+v,e[9]=h-y,e[10]=1-(p+f),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}Object.defineProperty(t,"__esModule",{value:!0}),t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.set=function(e,t,r,n,i,o,a,s,u,l,p,c,d,f,h,_,y){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=u,e[8]=l,e[9]=p,e[10]=c,e[11]=d,e[12]=f,e[13]=h,e[14]=_,e[15]=y,e},t.identity=i,t.transpose=function(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},t.invert=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],p=t[8],c=t[9],d=t[10],f=t[11],h=t[12],_=t[13],y=t[14],v=t[15],g=r*s-n*a,m=r*u-i*a,b=r*l-o*a,P=n*u-i*s,w=n*l-o*s,E=i*l-o*u,S=p*_-c*h,x=p*y-d*h,M=p*v-f*h,O=c*y-d*_,R=c*v-f*_,T=d*v-f*y,F=g*T-m*R+b*O+P*M-w*x+E*S;return F?(F=1/F,e[0]=(s*T-u*R+l*O)*F,e[1]=(i*R-n*T-o*O)*F,e[2]=(_*E-y*w+v*P)*F,e[3]=(d*w-c*E-f*P)*F,e[4]=(u*M-a*T-l*x)*F,e[5]=(r*T-i*M+o*x)*F,e[6]=(y*b-h*E-v*m)*F,e[7]=(p*E-d*b+f*m)*F,e[8]=(a*R-s*M+l*S)*F,e[9]=(n*M-r*R-o*S)*F,e[10]=(h*w-_*b+v*g)*F,e[11]=(c*b-p*w-f*g)*F,e[12]=(s*x-a*O-u*S)*F,e[13]=(r*O-n*x+i*S)*F,e[14]=(_*m-h*P-y*g)*F,e[15]=(p*P-c*m+d*g)*F,e):null},t.adjoint=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],l=t[7],p=t[8],c=t[9],d=t[10],f=t[11],h=t[12],_=t[13],y=t[14],v=t[15];return e[0]=s*(d*v-f*y)-c*(u*v-l*y)+_*(u*f-l*d),e[1]=-(n*(d*v-f*y)-c*(i*v-o*y)+_*(i*f-o*d)),e[2]=n*(u*v-l*y)-s*(i*v-o*y)+_*(i*l-o*u),e[3]=-(n*(u*f-l*d)-s*(i*f-o*d)+c*(i*l-o*u)),e[4]=-(a*(d*v-f*y)-p*(u*v-l*y)+h*(u*f-l*d)),e[5]=r*(d*v-f*y)-p*(i*v-o*y)+h*(i*f-o*d),e[6]=-(r*(u*v-l*y)-a*(i*v-o*y)+h*(i*l-o*u)),e[7]=r*(u*f-l*d)-a*(i*f-o*d)+p*(i*l-o*u),e[8]=a*(c*v-f*_)-p*(s*v-l*_)+h*(s*f-l*c),e[9]=-(r*(c*v-f*_)-p*(n*v-o*_)+h*(n*f-o*c)),e[10]=r*(s*v-l*_)-a*(n*v-o*_)+h*(n*l-o*s),e[11]=-(r*(s*f-l*c)-a*(n*f-o*c)+p*(n*l-o*s)),e[12]=-(a*(c*y-d*_)-p*(s*y-u*_)+h*(s*d-u*c)),e[13]=r*(c*y-d*_)-p*(n*y-i*_)+h*(n*d-i*c),e[14]=-(r*(s*y-u*_)-a*(n*y-i*_)+h*(n*u-i*s)),e[15]=r*(s*d-u*c)-a*(n*d-i*c)+p*(n*u-i*s),e},t.determinant=function(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],p=e[9],c=e[10],d=e[11],f=e[12],h=e[13],_=e[14],y=e[15];return(t*a-r*o)*(c*y-d*_)-(t*s-n*o)*(p*y-d*h)+(t*u-i*o)*(p*_-c*h)+(r*s-n*a)*(l*y-d*f)-(r*u-i*a)*(l*_-c*f)+(n*u-i*s)*(l*h-p*f)},t.multiply=o,t.translate=function(e,t,r){var n=r[0],i=r[1],o=r[2],a=void 0,s=void 0,u=void 0,l=void 0,p=void 0,c=void 0,d=void 0,f=void 0,h=void 0,_=void 0,y=void 0,v=void 0;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*o+t[12],e[13]=t[1]*n+t[5]*i+t[9]*o+t[13],e[14]=t[2]*n+t[6]*i+t[10]*o+t[14],e[15]=t[3]*n+t[7]*i+t[11]*o+t[15]):(a=t[0],s=t[1],u=t[2],l=t[3],p=t[4],c=t[5],d=t[6],f=t[7],h=t[8],_=t[9],y=t[10],v=t[11],e[0]=a,e[1]=s,e[2]=u,e[3]=l,e[4]=p,e[5]=c,e[6]=d,e[7]=f,e[8]=h,e[9]=_,e[10]=y,e[11]=v,e[12]=a*n+p*i+h*o+t[12],e[13]=s*n+c*i+_*o+t[13],e[14]=u*n+d*i+y*o+t[14],e[15]=l*n+f*i+v*o+t[15]),e},t.scale=function(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.rotate=function(e,t,r,i){var o,a,s,u,l,p,c,d,f,h,_,y,v,g,m,b,P,w,E,S,x,M,O,R,T=i[0],F=i[1],I=i[2],N=Math.sqrt(T*T+F*F+I*I);return N<n.EPSILON?null:(T*=N=1/N,F*=N,I*=N,o=Math.sin(r),s=1-(a=Math.cos(r)),u=t[0],l=t[1],p=t[2],c=t[3],d=t[4],f=t[5],h=t[6],_=t[7],y=t[8],v=t[9],g=t[10],m=t[11],b=T*T*s+a,P=F*T*s+I*o,w=I*T*s-F*o,E=T*F*s-I*o,S=F*F*s+a,x=I*F*s+T*o,M=T*I*s+F*o,O=F*I*s-T*o,R=I*I*s+a,e[0]=u*b+d*P+y*w,e[1]=l*b+f*P+v*w,e[2]=p*b+h*P+g*w,e[3]=c*b+_*P+m*w,e[4]=u*E+d*S+y*x,e[5]=l*E+f*S+v*x,e[6]=p*E+h*S+g*x,e[7]=c*E+_*S+m*x,e[8]=u*M+d*O+y*R,e[9]=l*M+f*O+v*R,e[10]=p*M+h*O+g*R,e[11]=c*M+_*O+m*R,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},t.rotateX=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],s=t[6],u=t[7],l=t[8],p=t[9],c=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+l*n,e[5]=a*i+p*n,e[6]=s*i+c*n,e[7]=u*i+d*n,e[8]=l*i-o*n,e[9]=p*i-a*n,e[10]=c*i-s*n,e[11]=d*i-u*n,e},t.rotateY=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],u=t[3],l=t[8],p=t[9],c=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-l*n,e[1]=a*i-p*n,e[2]=s*i-c*n,e[3]=u*i-d*n,e[8]=o*n+l*i,e[9]=a*n+p*i,e[10]=s*n+c*i,e[11]=u*n+d*i,e},t.rotateZ=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],u=t[3],l=t[4],p=t[5],c=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+l*n,e[1]=a*i+p*n,e[2]=s*i+c*n,e[3]=u*i+d*n,e[4]=l*i-o*n,e[5]=p*i-a*n,e[6]=c*i-s*n,e[7]=d*i-u*n,e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotation=function(e,t,r){var i,o,a,s=r[0],u=r[1],l=r[2],p=Math.sqrt(s*s+u*u+l*l);return p<n.EPSILON?null:(s*=p=1/p,u*=p,l*=p,i=Math.sin(t),a=1-(o=Math.cos(t)),e[0]=s*s*a+o,e[1]=u*s*a+l*i,e[2]=l*s*a-u*i,e[3]=0,e[4]=s*u*a-l*i,e[5]=u*u*a+o,e[6]=l*u*a+s*i,e[7]=0,e[8]=s*l*a+u*i,e[9]=u*l*a-s*i,e[10]=l*l*a+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},t.fromXRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromYRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromZRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotationTranslation=a,t.fromQuat2=function(e,t){var r=s,n=-t[0],i=-t[1],o=-t[2],u=t[3],l=t[4],p=t[5],c=t[6],d=t[7],f=n*n+i*i+o*o+u*u;return f>0?(r[0]=2*(l*u+d*n+p*o-c*i)/f,r[1]=2*(p*u+d*i+c*n-l*o)/f,r[2]=2*(c*u+d*o+l*i-p*n)/f):(r[0]=2*(l*u+d*n+p*o-c*i),r[1]=2*(p*u+d*i+c*n-l*o),r[2]=2*(c*u+d*o+l*i-p*n)),a(e,t,r),e};var s=r.create();function u(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}t.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},t.getScaling=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[4],a=t[5],s=t[6],u=t[8],l=t[9],p=t[10];return e[0]=Math.sqrt(r*r+n*n+i*i),e[1]=Math.sqrt(o*o+a*a+s*s),e[2]=Math.sqrt(u*u+l*l+p*p),e},t.getRotation=function(e,t){var r=t[0]+t[5]+t[10],n=0;return r>0?(n=2*Math.sqrt(r+1),e[3]=.25*n,e[0]=(t[6]-t[9])/n,e[1]=(t[8]-t[2])/n,e[2]=(t[1]-t[4])/n):t[0]>t[5]&&t[0]>t[10]?(n=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/n,e[0]=.25*n,e[1]=(t[1]+t[4])/n,e[2]=(t[8]+t[2])/n):t[5]>t[10]?(n=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/n,e[0]=(t[1]+t[4])/n,e[1]=.25*n,e[2]=(t[6]+t[9])/n):(n=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/n,e[0]=(t[8]+t[2])/n,e[1]=(t[6]+t[9])/n,e[2]=.25*n),e},t.fromRotationTranslationScale=function(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=t[3],u=i+i,l=o+o,p=a+a,c=i*u,d=i*l,f=i*p,h=o*l,_=o*p,y=a*p,v=s*u,g=s*l,m=s*p,b=n[0],P=n[1],w=n[2];return e[0]=(1-(h+y))*b,e[1]=(d+m)*b,e[2]=(f-g)*b,e[3]=0,e[4]=(d-m)*P,e[5]=(1-(c+y))*P,e[6]=(_+v)*P,e[7]=0,e[8]=(f+g)*w,e[9]=(_-v)*w,e[10]=(1-(c+h))*w,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},t.fromRotationTranslationScaleOrigin=function(e,t,r,n,i){var o=t[0],a=t[1],s=t[2],u=t[3],l=o+o,p=a+a,c=s+s,d=o*l,f=o*p,h=o*c,_=a*p,y=a*c,v=s*c,g=u*l,m=u*p,b=u*c,P=n[0],w=n[1],E=n[2],S=i[0],x=i[1],M=i[2],O=(1-(_+v))*P,R=(f+b)*P,T=(h-m)*P,F=(f-b)*w,I=(1-(d+v))*w,N=(y+g)*w,A=(h+m)*E,C=(y-g)*E,j=(1-(d+_))*E;return e[0]=O,e[1]=R,e[2]=T,e[3]=0,e[4]=F,e[5]=I,e[6]=N,e[7]=0,e[8]=A,e[9]=C,e[10]=j,e[11]=0,e[12]=r[0]+S-(O*S+F*x+A*M),e[13]=r[1]+x-(R*S+I*x+C*M),e[14]=r[2]+M-(T*S+N*x+j*M),e[15]=1,e},t.fromQuat=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,u=i+i,l=r*a,p=n*a,c=n*s,d=i*a,f=i*s,h=i*u,_=o*a,y=o*s,v=o*u;return e[0]=1-c-h,e[1]=p+v,e[2]=d-y,e[3]=0,e[4]=p-v,e[5]=1-l-h,e[6]=f+_,e[7]=0,e[8]=d+y,e[9]=f-_,e[10]=1-l-c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.frustum=function(e,t,r,n,i,o,a){var s=1/(r-t),u=1/(i-n),l=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*u,e[10]=(a+o)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*l,e[15]=0,e},t.perspective=function(e,t,r,n,i){var o=1/Math.tan(t/2),a=void 0;return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(n-i),e[10]=(i+n)*a,e[14]=2*i*n*a):(e[10]=-1,e[14]=-2*n),e},t.perspectiveFromFieldOfView=function(e,t,r,n){var i=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(a+s),l=2/(i+o);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(a-s)*u*.5,e[9]=(i-o)*l*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e},t.ortho=function(e,t,r,n,i,o,a){var s=1/(t-r),u=1/(n-i),l=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*u,e[14]=(a+o)*l,e[15]=1,e},t.lookAt=function(e,t,r,o){var a=void 0,s=void 0,u=void 0,l=void 0,p=void 0,c=void 0,d=void 0,f=void 0,h=void 0,_=void 0,y=t[0],v=t[1],g=t[2],m=o[0],b=o[1],P=o[2],w=r[0],E=r[1],S=r[2];return Math.abs(y-w)<n.EPSILON&&Math.abs(v-E)<n.EPSILON&&Math.abs(g-S)<n.EPSILON?i(e):(d=y-w,f=v-E,h=g-S,a=b*(h*=_=1/Math.sqrt(d*d+f*f+h*h))-P*(f*=_),s=P*(d*=_)-m*h,u=m*f-b*d,(_=Math.sqrt(a*a+s*s+u*u))?(a*=_=1/_,s*=_,u*=_):(a=0,s=0,u=0),l=f*u-h*s,p=h*a-d*u,c=d*s-f*a,(_=Math.sqrt(l*l+p*p+c*c))?(l*=_=1/_,p*=_,c*=_):(l=0,p=0,c=0),e[0]=a,e[1]=l,e[2]=d,e[3]=0,e[4]=s,e[5]=p,e[6]=f,e[7]=0,e[8]=u,e[9]=c,e[10]=h,e[11]=0,e[12]=-(a*y+s*v+u*g),e[13]=-(l*y+p*v+c*g),e[14]=-(d*y+f*v+h*g),e[15]=1,e)},t.targetTo=function(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=n[0],u=n[1],l=n[2],p=i-r[0],c=o-r[1],d=a-r[2],f=p*p+c*c+d*d;f>0&&(p*=f=1/Math.sqrt(f),c*=f,d*=f);var h=u*d-l*c,_=l*p-s*d,y=s*c-u*p;return(f=h*h+_*_+y*y)>0&&(h*=f=1/Math.sqrt(f),_*=f,y*=f),e[0]=h,e[1]=_,e[2]=y,e[3]=0,e[4]=c*y-d*_,e[5]=d*h-p*y,e[6]=p*_-c*h,e[7]=0,e[8]=p,e[9]=c,e[10]=d,e[11]=0,e[12]=i,e[13]=o,e[14]=a,e[15]=1,e},t.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},t.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e},t.subtract=u,t.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e},t.multiplyScalarAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},t.equals=function(e,t){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],p=e[7],c=e[8],d=e[9],f=e[10],h=e[11],_=e[12],y=e[13],v=e[14],g=e[15],m=t[0],b=t[1],P=t[2],w=t[3],E=t[4],S=t[5],x=t[6],M=t[7],O=t[8],R=t[9],T=t[10],F=t[11],I=t[12],N=t[13],A=t[14],C=t[15];return Math.abs(r-m)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(i-b)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-P)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(P))&&Math.abs(a-w)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-E)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-S)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(l-x)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(p-M)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(M))&&Math.abs(c-O)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(O))&&Math.abs(d-R)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(f-T)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(h-F)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(_-I)<=n.EPSILON*Math.max(1,Math.abs(_),Math.abs(I))&&Math.abs(y-N)<=n.EPSILON*Math.max(1,Math.abs(y),Math.abs(N))&&Math.abs(v-A)<=n.EPSILON*Math.max(1,Math.abs(v),Math.abs(A))&&Math.abs(g-C)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(C))},t.mul=o,t.sub=u}.apply(null,n))||(e.exports=i)},MbkH:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){var r=0;return function(){function e(e){void 0===e&&(e=null),this.uid=r++,e?(this._wkt=void 0!==e.wkt?e.wkt:null,this._wkid=void 0!==e.wkid?e.wkid:-1,this._isInverse=void 0!==e.isInverse&&!0===e.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}return e.fromGE=function(t){var r=new e;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r},Object.defineProperty(e.prototype,"wkt",{get:function(){return this._wkt},set:function(e){this._wkt=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wkid",{get:function(){return this._wkid},set:function(e){this._wkid=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInverse",{get:function(){return this._isInverse},set:function(e){this._isInverse=e,this.uid=r++},enumerable:!0,configurable:!0}),e.prototype.getInverse=function(){var t=new e;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t},e}()}.apply(null,n))||(e.exports=i)},NbdF:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("TMur"),r("LxLY"),r("8uEs"),r("/E+R")],void 0===(i=function(e,t,r,n,i,o){function a(e,t,n,o){var a;if(void 0===o&&(o=new r.Extent),"2d"===n.type)a=t*n.resolution;else if("3d"===n.type){var s=n.basemapTerrain,u=s.overlayManager,l=u?u.overlayPixelSizeInMapUnits(e):1;a=s&&!s.spatialReference.equals(n.spatialReference)?i.getMetersPerUnitForSR(s.spatialReference)/i.getMetersPerUnitForSR(n.spatialReference):t*l}var p=e.x-a,c=e.y-a,d=e.x+a,f=e.y+a,h=n.spatialReference;return o.xmin=Math.min(p,d),o.ymin=Math.min(c,f),o.xmax=Math.max(p,d),o.ymax=Math.max(c,f),o.spatialReference=h,o}Object.defineProperty(t,"__esModule",{value:!0}),t.createQueryGeometry=a,t.intersectsDrapedGeometry=function(e,t,r){var i=r.toMap(e);return n.isNone(i)?null:a(i,o.calculateTolerance(),r,s).intersects(t)?i:null};var s=new r.Extent}.apply(null,n))||(e.exports=i)},NfUe:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("qsST"),r("jBNx"),r("YaB4")],void 0===(i=function(e,t,r,n,i,o){Object.defineProperty(t,"__esModule",{value:!0});var a=o.definitions.WEBGL_MAX_INNER_STOPS,s=o.definitions.WEBGL_MAX_STOPS,u=n.getLogger("esri.renderers.visualVariables.support.utils");function l(e,t,r){return(1-r)*e+r*t}t.simplifyVVRenderer=function(e){if(!("visualVariables"in e&&e.visualVariables&&e.visualVariables.length))return e;var t=e.clone(),n=t.visualVariables.map((function(e){return function(e){return("size"===e.type||"color"===e.type||"opacity"===e.type)&&null!=e.stops}(e)?function(e){return e.stops=function(e,t){return t.length<=s?t:(u.warn("Found "+t.length+" Visual Variable stops, but MapView only supports "+s+". Displayed stops will be simplified."),t.length>2*s?function(e,t){for(var n=t[0],o=t.slice(1),s=o.pop(),u=o[0].value,p=o[o.length-1].value,c=(p-u)/a,d=[],f=u;f<p;f+=c){for(var h=0;f>=o[h].value;)h++;var _=o[h],y=t[h-1],v=f-y.value,g=_.value===y.value?1:v/(_.value-y.value);if("color"===e){var m=o[h],b=t[h-1],P=m.color.clone();P.r=l(b.color.r,P.r,g),P.g=l(b.color.g,P.g,g),P.b=l(b.color.b,P.b,g),P.a=l(b.color.a,P.a,g),d.push({value:f,color:P,label:m.label})}else if("size"===e){var w=o[h],E=t[h-1],S=i.toPt(w.size),x=l(i.toPt(E.size),S,g);d.push({value:f,size:x,label:w.label})}else{var M=o[h],O=l(t[h-1].opacity,M.opacity,g);d.push({value:f,opacity:O,label:M.label})}}return r.__spreadArrays([n],d,[s])}(e,t):function(e){for(var t=e[0],n=e.slice(1),i=n.pop();n.length>a;){for(var o=0,s=0,u=1;u<n.length;u++){var l=n[u-1],p=n[u],c=Math.abs(p.value-l.value);c>s&&(s=c,o=u)}n.splice(o,1)}return r.__spreadArrays([t],n,[i])}(t))}(e.type,e.stops),e}(e):e}));return t.visualVariables=n,t}}.apply(null,n))||(e.exports=i)},OkCb:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("MbkH")],void 0===(i=function(e,t,r){return function(){function e(e){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(var t=0,n=e.steps;t<n.length;t++){var i=n[t];i instanceof r?this.steps.push(i):this.steps.push(new r({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}}return e.cacheKey=function(e,t){return[void 0!==e.wkid&&null!==e.wkid?e.wkid.toString():"-1",void 0!==e.wkt&&null!==e.wkt?e.wkt.toString():"",void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():""].join(",")},e.fromGE=function(t){for(var n=new e,i="",o=0,a=t.steps;o<a.length;o++){var s=a[o],u=r.fromGE(s);n.steps.push(u),i+=u.uid.toString()+","}return n._cached_projection={},n._gtlistentry=null,n._chain=i,n},e.prototype.getInverse=function(){var t=new e;t.steps=[];for(var r=this.steps.length-1;r>=0;r--){var n=this.steps[r];t.steps.push(n.getInverse())}return t},e.prototype.getGTListEntry=function(){for(var e="",t=0,r=this.steps;t<r.length;t++)e+=r[t].uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=e),this._gtlistentry},e.prototype.assignCachedGe=function(t,r,n){this._cached_projection[e.cacheKey(t,r)]=n},e.prototype.getCachedGeTransformation=function(t,r){for(var n="",i=0,o=this.steps;i<o.length;i++)n+=o[i].uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=n);var a=this._cached_projection[e.cacheKey(t,r)];return void 0===a?null:a},e}()}.apply(null,n))||(e.exports=i)},Q2Em:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("qMld"),r("wIC5"),r("H9Hv"),r("nrlZ"),r("vtMp")],void 0===(i=function(e,t,r,n,i,o,a,s,u){Object.defineProperty(t,"__esModule",{value:!0});var l=[0,0];function p(e,t){var r,n,i;if(!t)return null;if("x"in t){var o={x:0,y:0};return r=e(t.x,t.y,l),o.x=r[0],o.y=r[1],null!=t.z&&(o.z=t.z),null!=t.m&&(o.m=t.m),o}return"xmin"in t?(o={xmin:0,ymin:0,xmax:0,ymax:0},n=e(t.xmin,t.ymin,l),o.xmin=n[0],o.ymin=n[1],i=e(t.xmax,t.ymax,l),o.xmax=i[0],o.ymax=i[1],t.hasZ&&(o.zmin=t.zmin,o.zmax=t.zmax,o.hasZ=!0),t.hasM&&(o.mmin=t.mmin,o.mmax=t.mmax,o.hasM=!0),o):"rings"in t?{rings:c(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:c(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:d(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:void 0}function c(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n];r.push(d(o,t))}return r}function d(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n],a=t(o[0],o[1],[0,0]);r.push(a),o.length>2&&a.push(o[2]),o.length>3&&a.push(o[3])}return r}function f(e,t){return!(!s.isValid(e)||!s.isValid(t)||s.equals(e,t)||u.canProject(e,t))}t.doesBrowserSupportProjection=function(e,t){return!f(e,t)||o.isSupported()},t.checkProjectionSupport=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var i,a,s;return r.__generator(this,(function(r){if(!t)return[2];if(Array.isArray(e)){for(i=0,a=e;i<a.length;i++)if(f((s=a[i]).geometry&&s.geometry.spatialReference,t)){if(o.isSupported())return[2,o.load()];throw new n("feature-store:unsupported-query","projection not supported",{inSpatialReference:e,outSpatialReference:t})}return[2]}if(!f(e,t))return[2];if(o.isSupported())return[2,o.load()];throw new n("feature-store:unsupported-query","projection not supported",{inSpatialReference:e,outSpatialReference:t})}))}))};var h=p.bind(null,u.lngLatToXY),_=p.bind(null,u.xyToLngLat);t.project=function(e,t,r){return e?(r||(r=t,t=e.spatialReference),s.isValid(t)&&s.isValid(r)&&!s.equals(t,r)?u.canProject(t,r)?s.isWebMercator(r)?h(e):_(e):o.projectMany(a.jsonAdapter,[e],t,r,null)[0]:e):e};var y=new(function(){function e(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}return e.prototype.push=function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var o,a=this;return r.__generator(this,(function(r){return e&&e.length&&t&&n&&!s.equals(t,n)||i.resolve(e),o={geometries:e,inSpatialReference:t,outSpatialReference:n,resolve:null},this._jobs.push(o),[2,i.create((function(e){o.resolve=e,null===a._timer&&(a._timer=setTimeout(a._process,10))}))]}))}))},e.prototype._process=function(){this._timer=null;var e=this._jobs.shift();if(e){var t=e.geometries,r=e.inSpatialReference,n=e.outSpatialReference,i=e.resolve;u.canProject(r,n)?s.isWebMercator(n)?i(t.map(h)):i(t.map(_)):i(o.projectMany(a.jsonAdapter,t,r,n,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}},e}());t.projectMany=function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){return[2,y.push(e,t,n)]}))}))}}.apply(null,n))||(e.exports=i)},WbzV:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("SZNs"),r("qMld"),r("8V7H"),r("Vx27")],void 0===(i=function(e,t,r,n,i,o,a){Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(t){var r=e.call(this,t)||this;return r._startupResolver=i.createResolver(),r.isReady=!1,r}return r.__extends(t,e),t.prototype.initialize=function(){this._controller=i.createAbortController(),this.addResolvingPromise(this._startWorker(this._controller.signal))},t.prototype.destroy=function(){this._controller.abort(),this._connection&&this._connection.close()},Object.defineProperty(t.prototype,"tileRenderer",{set:function(e){this.client.tileRenderer=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closed",{get:function(){return this._connection.closed},enumerable:!0,configurable:!0}),t.prototype.startup=function(e,t,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,a,s,u;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.when()];case 1:return r.sent(),o=this._controller.signal,l=n.source,a=Array.isArray(l)?{transferList:n.source,signal:o}:void 0,s=e.tileInfo.toJSON(),u={service:n,config:t,tileInfo:s,options:i},[4,this._connection.invoke("startup",u,a)];case 2:return r.sent(),this._startupResolver.resolve(),this._set("isReady",!0),[2]}var l}))}))},t.prototype.update=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n;return r.__generator(this,(function(r){switch(r.label){case 0:return n={config:e,options:t},[4,this._startupResolver.promise];case 1:return r.sent(),[2,this._connection.invoke("update",n)]}}))}))},t.prototype.setHighlight=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("controller.setHighlight",e)]}}))}))},t.prototype.refresh=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.refresh")]}}))}))},t.prototype.setViewState=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("setViewState",e.toJSON())]}}))}))},t.prototype.queryFeatures=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this._startupResolver.promise];case 1:return r.sent(),[2,this._connection.invoke("controller.queryFeatures",e.toJSON(),t)]}}))}))},t.prototype.queryObjectIds=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this._startupResolver.promise];case 1:return r.sent(),[2,this._connection.invoke("controller.queryObjectIds",e.toJSON(),t)]}}))}))},t.prototype.queryFeatureCount=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this._startupResolver.promise];case 1:return r.sent(),[2,this._connection.invoke("controller.queryFeatureCount",e.toJSON(),t)]}}))}))},t.prototype.queryExtent=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){return[2,this._connection.invoke("controller.queryExtent",e.toJSON(),t)]}))}))},t.prototype.queryLatestObservations=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this._startupResolver.promise];case 1:return r.sent(),[2,this._connection.invoke("controller.queryLatestObservations",e.toJSON(),t)]}}))}))},t.prototype.queryStatistics=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("controller.queryStatistics",e)]}}))}))},t.prototype.getObjectId=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("controller.getObjectId",e)]}}))}))},t.prototype.getLocalId=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("controller.getLocalId",e)]}}))}))},t.prototype.getAggregate=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("controller.getAggregate",e)]}}))}))},t.prototype.getAggregateValueRanges=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.getAggregateValueRanges")]}}))}))},t.prototype.mapValidLocalIds=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this._startupResolver.promise];case 1:return t.sent(),[2,this._connection.invoke("controller.mapValidLocalIds",e)]}}))}))},t.prototype.onEdits=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this._startupResolver.promise];case 1:return r.sent(),t=e.addedFeatures,n=e.deletedFeatures,i=e.updatedFeatures,[2,this._connection.invoke("controller.onEdits",{addedFeatures:t,deletedFeatures:n,updatedFeatures:i})]}}))}))},t.prototype.enableEvent=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this._startupResolver.promise];case 1:return r.sent(),[2,this._connection.invoke("controller.enableEvent",{name:e,value:t})]}}))}))},t.prototype._startWorker=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=this,[4,o.open("Pipeline",{client:this.client,strategy:"dedicated",signal:e})];case 1:return t._connection=r.sent(),[3,3];case 2:return n=r.sent(),i.throwIfNotAbortError(n),[3,3];case 3:return[2]}}))}))},r.__decorate([a.property()],t.prototype,"isReady",void 0),r.__decorate([a.property()],t.prototype,"client",void 0),r.__decorate([a.property()],t.prototype,"tileRenderer",null),r.__decorate([a.subclass("esri.views.2d.layers.support.FeatureLayerProxy")],t)}(n.EsriPromise);t.default=s}.apply(null,n))||(e.exports=i)},WsO6:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("Gtr7"),r("BcWh"),r("7MDj"),r("NfRO"),r("qsST"),r("SZNs"),r("Vx27")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l){return function(e){function t(t){var r=e.call(this,t)||this;return r.layer=null,r.parent=null,r}return r.__extends(t,e),t.prototype.initialize=function(){var e=this;this.when().catch((function(t){if("layerview:create-error"!==t.name){var r=e.layer&&e.layer.id||"no id",n=e.layer&&e.layer.title||"no title";throw s.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+n+"', id: '"+r+"')",t),t}}))},t.prototype.destroy=function(){this.layer=this.parent=null},Object.defineProperty(t.prototype,"fullOpacity",{get:function(){var e=function(e){return null==e?1:e};return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"suspendInfo",{get:function(){return this.getSuspendInfo()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")},enumerable:!0,configurable:!0}),t.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},t.prototype.getSuspendInfo=function(){var e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e},t.prototype.isUpdating=function(){return!1},r.__decorate([l.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],t.prototype,"fullOpacity",null),r.__decorate([l.property()],t.prototype,"layer",void 0),r.__decorate([l.property()],t.prototype,"parent",void 0),r.__decorate([l.property({readOnly:!0,dependsOn:["visible","layer.loaded","parent.suspended","view?.ready"]})],t.prototype,"suspended",null),r.__decorate([l.property({readOnly:!0,dependsOn:["visible","layer.loaded","parent.suspended","view?.ready"]})],t.prototype,"suspendInfo",null),r.__decorate([l.property({type:Boolean,dependsOn:["updatingHandles.updating"],readOnly:!0})],t.prototype,"updating",null),r.__decorate([l.property({dependsOn:["layer.visible"]})],t.prototype,"visible",null),r.__decorate([l.subclass("esri.views.layers.LayerView")],t)}(o.HandleOwnerMixin(a.IdentifiableMixin(u.EsriPromiseMixin(i.EventedMixin(n)))))}.apply(null,n))||(e.exports=i)},ZMIQ:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ycL1"),r("Vx27")],void 0===(i=function(e,t,r,n,i){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),r.__decorate([i.subclass("esri.views.layers.support.ClipArea")],t)}(n.JSONSupport)}.apply(null,n))||(e.exports=i)},dDbr:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ycL1"),r("qsST"),r("LxLY"),r("Vx27"),r("e4th"),r("iO/m"),r("gd70")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l){var p=i.getLogger("esri.views.layers.support.FeatureEffect");return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.filter=null,t.includedEffect=null,t.excludedEffect=null,t.excludedLabelsVisible=!1,t}var n;return r.__extends(t,e),n=t,Object.defineProperty(t.prototype,"insideEffect",{get:function(){return p.warn("insideEffect is a temporary interface that will be removed. Use includedEffect instead"),this.includedEffect},set:function(e){p.warn("insideEffect is a temporary interface that will be removed. Use includedEffect instead"),this.includedEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outsideEffect",{get:function(){return p.warn("outsideEffect is a temporary interface that will be removed. Use excludedEffect instead"),this.excludedEffect},set:function(e){p.warn("outsideEffect is a temporary interface that will be removed. Use excludedEffect instead"),this.excludedEffect=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parsedIncludedEffect",{get:function(){return o.isSome(this.includedEffect)?"string"==typeof this.includedEffect?u.fromString(this.includedEffect):new l({from:u.fromString(this.includedEffect.from),to:u.fromString(this.includedEffect.to),duration:this.includedEffect.duration}):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parsedExcludedEffect",{get:function(){return o.isSome(this.excludedEffect)?"string"==typeof this.excludedEffect?u.fromString(this.excludedEffect):new l({from:u.fromString(this.excludedEffect.from),to:u.fromString(this.excludedEffect.to),duration:this.excludedEffect.duration}):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderingHash",{get:function(){return this.excludedLabelsVisible+"-"+this.includedEffect+"-"+this.excludedEffect},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"done",{get:function(){return(!o.isSome(this.parsedIncludedEffect)||this.parsedIncludedEffect.done)&&(!o.isSome(this.parsedExcludedEffect)||this.parsedExcludedEffect.done)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new n({filter:this.filter&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})},r.__decorate([a.property({type:s,json:{write:!0}})],t.prototype,"filter",void 0),r.__decorate([a.property({type:String,json:{write:!0}})],t.prototype,"includedEffect",void 0),r.__decorate([a.property({type:String,json:{write:!0}})],t.prototype,"excludedEffect",void 0),r.__decorate([a.property({type:Boolean,json:{write:!0}})],t.prototype,"excludedLabelsVisible",void 0),r.__decorate([a.property({dependsOn:["includedEffect"]})],t.prototype,"parsedIncludedEffect",null),r.__decorate([a.property({dependsOn:["excludedEffect"]})],t.prototype,"parsedExcludedEffect",null),r.__decorate([a.property({dependsOn:["includedEffect","excludedEffect"]})],t.prototype,"renderingHash",null),n=r.__decorate([a.subclass("esri.views.layers.support.FeatureEffect")],t)}(n.JSONSupport)}.apply(null,n))||(e.exports=i)},e4th:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("TMur"),r("9gfz"),r("ImIS"),r("ycL1"),r("rg9i"),r("ULaq"),r("Vx27"),r("Lzvl"),r("IpeC")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,p,c){var d=new o.default({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),f=new o.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});return function(e){function t(t){var r=e.call(this,t)||this;return r.where=null,r.geometry=null,r.spatialRelationship="intersects",r.hiddenIds=new Set,r.distance=void 0,r.objectIds=null,r.units=null,r.timeExtent=null,r.enabled=!1,r}var o;return r.__extends(t,e),o=t,t.prototype.writeWhere=function(e,t){t.where=e||"1=1"},t.prototype.enable=function(){this._set("enabled",!0)},t.prototype.createQuery=function(e){void 0===e&&(e={});var t=this,n=t.where,i=t.geometry,o=t.spatialRelationship,a=t.timeExtent,u=t.objectIds,l=t.units,p=t.distance;return new c(r.__assign({geometry:s.clone(i),objectIds:s.clone(u),spatialRelationship:o,timeExtent:s.clone(a),where:n,units:l,distance:p},e))},t.prototype.clone=function(){var e=this,t=e.where,r=e.geometry,n=e.spatialRelationship,i=e.hiddenIds,a=e.timeExtent,u=e.objectIds,l=e.units,p=e.distance,c=new Set;return i.forEach((function(e){return c.add(e)})),new o({geometry:s.clone(r),hiddenIds:c,objectIds:s.clone(u),spatialRelationship:n,timeExtent:s.clone(a),where:t,units:l,distance:p})},r.__decorate([l.property({type:String})],t.prototype,"where",void 0),r.__decorate([l.writer("where")],t.prototype,"writeWhere",null),r.__decorate([l.property({types:n.geometryTypes,json:{read:p.fromJSON,write:!0}})],t.prototype,"geometry",void 0),r.__decorate([l.property({type:String,json:{read:{source:"spatialRel",reader:d.read},write:{target:"spatialRel",writer:d.write}}})],t.prototype,"spatialRelationship",void 0),r.__decorate([l.property({json:{write:function(e,t,r){return t[r]=u.valuesOfSet(e)},read:function(e){return u.SetFromValues(e)}}})],t.prototype,"hiddenIds",void 0),r.__decorate([l.property({type:Number,json:{write:{overridePolicy:function(e){return{enabled:e>0}}}}})],t.prototype,"distance",void 0),r.__decorate([l.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),r.__decorate([l.property({type:String,json:{read:f.read,write:{writer:f.write,overridePolicy:function(e){return{enabled:e&&this.distance>0}}}}})],t.prototype,"units",void 0),r.__decorate([l.property({type:i,json:{write:!0}})],t.prototype,"timeExtent",void 0),r.__decorate([l.property({readOnly:!0})],t.prototype,"enabled",void 0),o=r.__decorate([l.subclass("esri.views.layers.support.FeatureFilter")],t)}(a.JSONSupport)}.apply(null,n))||(e.exports=i)},gd70:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("Gtr7"),r("Vx27"),r("FXVB")],void 0===(i=function(e,t,r,n,i,o){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.from=null,t.to=null,t.duration=4e3,t.repeat=!0,t.done=!1,t}var n;return r.__extends(t,e),n=t,t.prototype.getColorMatrix=function(){if(this.done=!1,null==this._lastTime)this._currentStep=0,this._lastTime=Date.now();else{var e=this._lastTime,t=Date.now(),r=t-e;this._currentStep=this._currentStep+r,this._currentStep>=2147483647&&(this._currentStep=0),this._lastTime=t}var n=this._currentStep%this.duration/(this.duration/2),i=n<=1?n:2-n,a=this.from.getColorMatrix(),s=this.to.getColorMatrix();return o.mat4.multiplyScalar(a,a,1-i),o.mat4.multiplyScalar(s,s,i),!this.repeat&&this._currentStep>=this.duration&&(this.done=!0),o.mat4.add(a,a,s)},t.prototype.getOpacity=function(){throw new Error("No getOpacity definition for Transition")},t.prototype.clone=function(){var e=new n({from:this.from.clone(),to:this.to.clone(),duration:this.duration});return e._lastTime=this._lastTime,e._currentStep=this._currentStep,e},r.__decorate([i.property()],t.prototype,"from",void 0),r.__decorate([i.property()],t.prototype,"to",void 0),r.__decorate([i.property({type:Number})],t.prototype,"duration",void 0),r.__decorate([i.property({type:Boolean})],t.prototype,"repeat",void 0),n=r.__decorate([i.subclass("esri.views.layers.support.Transition")],t)}(n)}.apply(null,n))||(e.exports=i)},"iO/m":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("ycL1"),r("qsST"),r("LxLY"),r("Vx27"),r("FXVB"),r("oZZu"),r("3MK9")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,p){var c=o.getLogger("esri.views.layers.support.ParsedFeatureEffect"),d={grayscale:function(e){var t=1-e.amount,r=l.mat4f32.fromValues(.2126+.7874*t,.7152-.7152*t,.0722-.0722*t,0,.2126-.2126*t,.7152+.2848*t,.0722-.0722*t,0,.2126-.2126*t,.7152-.7152*t,.0722+.9278*t,0,0,0,0,1);return u.mat4.transpose(r,r)},sepia:function(e){var t=1-e.amount,r=l.mat4f32.fromValues(.393+.607*t,.769-.769*t,.189-.189*t,0,.349-.349*t,.686+.314*t,.168-.168*t,0,.272-.272*t,.534-.534*t,.131+.869*t,0,0,0,0,1);return u.mat4.transpose(r,r)},saturate:function(e){var t=e.amount,r=l.mat4f32.fromValues(.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return u.mat4.transpose(r,r)},"hue-rotate":function(e){var t=Math.sin(e.angle*Math.PI/180),r=Math.cos(e.angle*Math.PI/180),n=l.mat4f32.fromValues(.213+.787*r-.213*t,.715-.715*r-.715*t,.072-.072*r+.928*t,0,.213-.213*r+.143*t,.715+.285*r+.14*t,.072-.072*r-.283*t,0,.213-.213*r-.787*t,.715-.715*r+.715*t,.072+.928*r+.072*t,0,0,0,0,1);return u.mat4.transpose(n,n)},invert:function(e){var t=1-2*e.amount,r=e.amount,n=l.mat4f32.fromValues(t,0,0,r,0,t,0,r,0,0,t,r,0,0,0,1);return u.mat4.transpose(n,n)},brightness:function(e){var t=e.amount,r=l.mat4f32.fromValues(t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return u.mat4.transpose(r,r)},contrast:function(e){var t=e.amount,r=l.mat4f32.fromValues(t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return u.mat4.transpose(r,r)}};return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.customTransforms=null,t.done=!0,t}var i;return r.__extends(t,e),i=t,t.fromString=function(e){var t=[],r=null;try{for(var o=0,a=p.parse(e);o<a.length;o++){var s=a[o];"opacity"===s.type?r=s:t.push(s)}}catch(e){c.error(new n("invalid-type","Encountered an error when parsing css",e))}return new i({transforms:t,opacity:r})},t.prototype.getOpacity=function(){return a.isSome(this.opacity)?this.opacity.amount:1},t.prototype.getColorMatrix=function(){var e=this;return(this.transforms||[]).map((function(e){return r.__assign({},e)})).reverse().reduce((function(t,r){return u.mat4.multiply(t,t,e._getFactory(r)(r))}),l.mat4f32.create())},t.prototype.clone=function(){return new i({transforms:this.transforms&&this.transforms.map((function(e){return r.__assign({},e)})),customTransforms:this.customTransforms&&this.customTransforms.map((function(e){return r.__assign({},e)}))})},t.prototype._getFactory=function(e){var t=d[e.type];if(t)return t;if(this.customTransforms)for(var r=function(t){if(t.type===e.type){var r=l.mat4f32.fromValues.apply(l.mat4f32,t.matrix),n=u.mat4.transpose(r,r);return{value:function(){return n}}}},n=0,i=this.customTransforms;n<i.length;n++){var o=r(i[n]);if("object"==typeof o)return o.value}return c.error("invalid-type","No effect "+e.type+" exists"),function(){return l.mat4f32.create()}},r.__decorate([s.property()],t.prototype,"opacity",void 0),r.__decorate([s.property()],t.prototype,"transforms",void 0),r.__decorate([s.property()],t.prototype,"customTransforms",void 0),i=r.__decorate([s.subclass("esri.views.layers.support.ParsedFeatureEffect")],t)}(i.JSONSupport)}.apply(null,n))||(e.exports=i)},jci6:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("jZlN"),r("Vx27")],void 0===(i=function(e,t,r,n,i){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return r.__extends(t,e),n=t,t.prototype.getEffectivePopupTemplate=function(e){if(void 0===e&&(e=!1),this.popupTemplate)return this.popupTemplate;var t=this.sourceLayer&&this.sourceLayer.featureReduction;return t&&"popupTemplate"in t&&t.popupEnabled?t.popupTemplate:null},t.prototype.getObjectId=function(){return this.objectId},t.prototype.clone=function(){return new n(r.__assign({objectId:this.objectId},this.cloneProperties()))},r.__decorate([i.property({type:Number,json:{read:!0}})],t.prototype,"objectId",void 0),n=r.__decorate([i.subclass("esri.AggregateGraphic")],t)}(n)}.apply(null,n))||(e.exports=i)},"sQ+t":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("2Kdy")],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createOrReuseTileRenderer=function(e,t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(n){switch(n.label){case 0:if(!e)return[2,null];switch(e.type){case"class-breaks":case"simple":case"unique-value":case"dot-density":case"dictionary":return[3,1];case"heatmap":return[3,3]}return[3,5];case 1:return[4,new Promise((function(e,t){r.e(53).then(function(){var t=[r("IBem")];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))];case 2:return[2,new(n.sent().default)(t)];case 3:return[4,new Promise((function(e,t){r.e(75).then(function(){var t=[r("GCYV")];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))];case 4:return[2,new(n.sent().default)(t)];case 5:return[2]}}))}))}}.apply(null,n))||(e.exports=i)},ts8o:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("TMur"),r("Vx27"),r("YADd"),r("Lzvl"),r("ZMIQ")],void 0===(i=function(e,t,r,n,i,o,a,s){var u={base:o,key:"type",typeMap:{extent:n.Extent,polygon:n.Polygon}};return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="geometry",t.geometry=null,t}var n;return r.__extends(t,e),n=t,Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new n({geometry:this.geometry.clone()})},r.__decorate([i.property({types:u,json:{read:a.fromJSON,write:!0}})],t.prototype,"geometry",void 0),r.__decorate([i.property({readOnly:!0,dependsOn:["geometry"]})],t.prototype,"version",null),n=r.__decorate([i.subclass("esri.views.layers.support.Geometry")],t)}(s)}.apply(null,n))||(e.exports=i)},w0Ef:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("ma1f"),r("H1tY"),r("qsST"),r("LxLY"),r("CaYo"),r("n7H0"),r("/3kq"),r("YaB4")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,p){var c=this;Object.defineProperty(t,"__esModule",{value:!0});var d=o.getLogger("esri.views.2d.layers.support.clusterUtils");i.add("esri-cluster-arcade-enabled",1);var f=i("esri-cluster-arcade-enabled");function h(e,t){var r=t.name,i=t.outStatistic,o=i.onStatisticField,a=i.onStatisticValueExpression,u=i.statisticType;if(a){var l=s.createMD5Hash(a.toLowerCase());e.push({name:r,outStatistic:{onStatisticField:l,onStatisticValueExpression:a,statisticType:u}})}else o?e.push({name:r,outStatistic:{onStatisticField:o,statisticType:u}}):d.error(new n("mapview-unsupported-field","Unable to handle field",{field:t}))}function _(e,t,r){var n=s.createMD5Hash(t),i="mode"===r?"cluster_type_"+n:"cluster_avg_"+n;return e.some((function(e){return e.name===i}))||e.push({name:i,outStatistic:{onStatisticField:n,onStatisticValueExpression:t,statisticType:r}}),i}function y(e,t,r,n){if("cluster_count"===t||e.some((function(e){return e.name===t})))return t;var i=function(e,t,r){switch(e){case"avg":case"avg_angle":return"cluster_avg_"+t;case"mode":return"cluster_type_"+t;case"norm":var n=r,i=t.toLowerCase()+",norm:field,"+n.toLowerCase();return"cluster_avg_"+s.createMD5Hash(i)}}(r,t,n);return e.some((function(e){return e.name===i}))||("norm"===r?e.push({name:i,outStatistic:{onStatisticField:t,onStatisticNormalizationField:n,statisticType:r}}):e.push({name:i,outStatistic:{onStatisticField:t,statisticType:r}})),i}t.createClusterRenderer=function(e,n,i,o,s){return r.__awaiter(c,void 0,void 0,(function(){var n,u,l,p,c,d;return r.__generator(this,(function(r){if(n=i.clone(),!t.isClusterCompatibleRenderer(n))return[2,n];if(o.fields)for(u=0,l=o.fields;u<l.length;u++)p=l[u],h(e,p);switch("visualVariables"in n&&(c=(n.visualVariables||[]).filter((function(e){return"$view.scale"!==e.valueExpression})),d=t.findSizeVV(c),c.forEach((function(t){"rotation"===t.type?t.field?t.field=y(e,t.field,"avg_angle"):t.valueExpression&&(t.field=_(e,t.valueExpression,"avg_angle"),t.valueExpression=null):t.normalizationField?(t.field=y(e,t.field,"norm",t.normalizationField),t.normalizationField=null):t.field?t.field=y(e,t.field,"avg"):(t.field=_(e,t.valueExpression,"avg"),t.valueExpression=null)})),a.isNone(d)&&!t.hasClusterCountVV(c)&&(c.push(t.createClusterCountSizeVariable(o,s)),n.dynamicClusterSize=!0),n.visualVariables=c),n.type){case"simple":break;case"unique-value":n.field?n.field=y(e,n.field,"mode"):n.valueExpression&&(n.field=_(e,n.valueExpression,"mode"),n.valueExpression=null);break;case"class-breaks":n.normalizationField?(n.field=y(e,n.field,"norm",n.normalizationField),n.normalizationField=null):n.field?n.field=y(e,n.field,"avg"):(n.field=_(e,n.valueExpression,"avg"),n.valueExpression=null)}return[2,n]}))}))},t.findSizeVV=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];if("size"===n.type)return n}return null},t.hasClusterCountVV=function(e){for(var t=0,r=e;t<r.length;t++)if("cluster_count"===r[t].field)return!0;return!1},t.createClusterCountSizeVariable=function(e,t){var n=[new l({value:0,size:0}),new l({value:1})];if(a.isNone(t))return new u({field:"cluster_count",stops:r.__spreadArrays(n,[new l({value:2,size:0})])});var i=Object.keys(t).reduce((function(i,o){var a;return r.__assign(r.__assign({},i),((a={})[o]=r.__spreadArrays(n,[new l({value:Math.max(2,t[o].minValue),size:e.clusterMinSize}),new l({value:Math.max(3,t[o].maxValue),size:e.clusterMaxSize})]),a))}),{});return new p.LevelDependentSizeVariable({field:"cluster_count",levels:i})},t.isClusterCompatibleRenderer=function(e){var t=function(t){return d.error(new n("Unsupported-renderer",t,{renderer:e}))};if("unique-value"===e.type){if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1}else if("class-breaks"===e.type){if(e.normalizationField){var r=e.normalizationType;if("field"!==r)return t("FeatureReductionCluster does not support a normalizationType of "+r),!1}}else if("simple"!==e.type)return t("FeatureReductionCluster does not support renderers of type "+e.type),!1;if(!f){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some((function(e){return!(!("valueExpression"in e)||!e.valueExpression)})))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0}}.apply(null,n))||(e.exports=i)},w1v0:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("TMur"),r("jZlN"),r("ImIS"),r("ycL1"),r("LxLY"),r("Vx27"),r("Z4y+"),r("Lzvl"),r("KQcO")],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,p,c){var d=new o.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),f=function(e){function t(t){var r=e.call(this,t)||this;return r.displayFieldName=null,r.exceededTransferLimit=!1,r.features=[],r.fields=null,r.geometryType=null,r.hasM=!1,r.hasZ=!1,r.queryGeometry=null,r.spatialReference=null,r}return r.__extends(t,e),t.prototype.readFeatures=function(e,t){for(var r=l.fromJSON(t.spatialReference),n=[],o=0;o<e.length;o++){var a=e[o],u=i.fromJSON(a),p=a.geometry&&a.geometry.spatialReference;s.isSome(u.geometry)&&!p&&(u.geometry.spatialReference=r),n.push(u)}return n},t.prototype.writeGeometryType=function(e,t,r,n){if(e)d.write(e,t,r,n);else{var i=this.features;if(i)for(var o=0,a=i;o<a.length;o++){var u=a[o];if(u&&s.isSome(u.geometry))return void d.write(u.geometry.type,t,r,n)}}},t.prototype.writeSpatialReference=function(e,t){if(e)t.spatialReference=e.toJSON();else{var r=this.features;if(r)for(var n=0,i=r;n<i.length;n++){var o=i[n];o&&s.isSome(o.geometry)&&o.geometry.spatialReference&&(t.spatialReference=o.geometry.spatialReference.toJSON())}}},t.prototype.toJSON=function(e){var t=this.write(null);if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var n=t.features[r];if(n.geometry){var i=e&&e[r];n.geometry=i&&i.toJSON()||n.geometry}}return t},t.prototype.quantize=function(e){for(var t=e.scale,r=t[0],n=t[1],i=e.translate,o=i[0],a=i[1],u=this.features,l=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-o)/r)}),(function(e){return Math.round((a-e)/n)})),p=0,c=u.length;p<c;p++)l(s.unwrap(u[p].geometry))||(u.splice(p,1),p--,c--);return this.transform=e,this},t.prototype.unquantize=function(){var e=this.geometryType,t=this.features,r=this.transform;if(!r)return this;for(var n=r.translate,i=n[0],o=n[1],a=r.scale,u=a[0],l=a[1],p=this._getHydrationFunction(e,(function(e){return e*u+i}),(function(e){return o-e*l})),c=0,d=t;c<d.length;c++){var f=d[c].geometry;s.isSome(f)&&p(f)}return this},t.prototype._quantizePoints=function(e,t,r){for(var n,i,o=[],a=0,s=e.length;a<s;a++){var u=e[a];if(a>0){var l=t(u[0]),p=r(u[1]);l===n&&p===i||(o.push([l-n,p-i]),n=l,i=p)}else n=t(u[0]),i=r(u[1]),o.push([n,i])}return o.length>0?o:null},t.prototype._getQuantizationFunction=function(e,t,r){var n=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var i=p.isPolygon(e)?e.rings:e.paths,o=[],a=0,s=i.length;a<s;a++){var u=i[a],l=n._quantizePoints(u,t,r);l&&o.push(l)}return o.length>0?(p.isPolygon(e)?e.rings=o:e.paths=o,e):null}:"multipoint"===e?function(e){var i;return(i=n._quantizePoints(e.points,t,r)).length>0?(e.points=i,e):null}:"extent"===e?function(e){return e}:null},t.prototype._getHydrationFunction=function(e,t,r){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?function(e){for(var n,i,o=p.isPolygon(e)?e.rings:e.paths,a=0,s=o.length;a<s;a++)for(var u=o[a],l=0,c=u.length;l<c;l++){var d=u[l];l>0?(n+=d[0],i+=d[1]):(n=d[0],i=d[1]),d[0]=t(n),d[1]=r(i)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?function(e){for(var n,i,o=e.points,a=0,s=o.length;a<s;a++){var u=o[a];a>0?(n+=u[0],i+=u[1]):(n=u[0],i=u[1]),u[0]=t(n),u[1]=r(i)}}:void 0},r.__decorate([u.property({type:String,json:{write:!0}})],t.prototype,"displayFieldName",void 0),r.__decorate([u.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"exceededTransferLimit",void 0),r.__decorate([u.property({type:[i],json:{write:!0}})],t.prototype,"features",void 0),r.__decorate([u.reader("features")],t.prototype,"readFeatures",null),r.__decorate([u.property({type:[c],json:{write:!0}})],t.prototype,"fields",void 0),r.__decorate([u.property({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:d.read}}})],t.prototype,"geometryType",void 0),r.__decorate([u.writer("geometryType")],t.prototype,"writeGeometryType",null),r.__decorate([u.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasM",void 0),r.__decorate([u.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasZ",void 0),r.__decorate([u.property({types:n.geometryTypes,json:{read:p.fromJSON,write:!0}})],t.prototype,"queryGeometry",void 0),r.__decorate([u.property({type:l,json:{write:!0}})],t.prototype,"spatialReference",void 0),r.__decorate([u.writer("spatialReference")],t.prototype,"writeSpatialReference",null),r.__decorate([u.property({json:{write:!0}})],t.prototype,"transform",void 0),r.__decorate([u.subclass("esri.tasks.support.FeatureSet")],t)}(a.JSONSupport);return f.prototype.toJSON.isDefaultToJSON=!0,f||(f={}),f}.apply(null,n))||(e.exports=i)},w7fK:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("zOht"),r("KFwS"),r("H1tY"),r("qMld"),r("2Kdy")],void 0===(i=function(e,t,n,i,o,a){var s,u,l,p,c,d;function f(e){function r(e,t,r){e[t]=r(e[t])}t._pe=e,u.init(),l.init(),p.init(),c.init(),d.init(),t.PeGCSExtent=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(r,e),r.prototype.destroy=function(){t._pe.destroy(this)},r}(t._pe.PeGCSExtent);for(var i=0,o=[t._pe.PeDatum,t._pe.PeGeogcs,t._pe.PeGeogtran,t._pe.PeObject,t._pe.PeParameter,t._pe.PePrimem,t._pe.PeProjcs,t._pe.PeSpheroid,t._pe.PeUnit];i<o.length;i++)r(o[i].prototype,"getName",(function(e){return function(){return e.call(this,new Array(u.PE_NAME_MAX))}}));for(var a=0,s=[t._pe.PeGeogtran,t._pe.PeProjcs];a<s.length;a++)r(s[a].prototype,"getParameters",(function(e){return function(){for(var r=new Array(u.PE_PARM_MAX),n=e.call(this),i=0;i<r.length;i++){var o=t._pe.getValue(n,"*");r[i]=o?t._pe.wrapPointer(o,t._pe.PeParameter):null,n+=Int32Array.BYTES_PER_ELEMENT}return r}}));r(t._pe.PeHorizon.prototype,"getCoord",(function(e){return function(){var t=this.getSize();if(!t)return null;var r=[];return v(r,t,e.call(this)),r}})),r(t._pe.PeGTlistExtendedEntry.prototype,"getEntries",(function(e){var r=t._pe._pe_getPeGTlistExtendedGTsSize();return function(){var n=null,i=e.call(this);if(!t._pe.compare(i,t._pe.NULL)){n=[i];var o=this.getSteps();if(o>1)for(var a=t._pe.getPointer(i),s=1;s<o;s++)n.push(t._pe.wrapPointer(a+r*s,t._pe.PeGTlistExtendedGTs))}return n}}));var f=t._pe._pe_getPeHorizonSize(),h=function(e){return function(){var r=this._cache;if(r||(r=new Map,this._cache=r),r.has(e))return r.get(e);var n=null,i=e.call(this);if(!t._pe.compare(i,t._pe.NULL)){n=[i];var o=i.getNump();if(o>1)for(var a=t._pe.getPointer(i),s=1;s<o;s++)n.push(t._pe.wrapPointer(a+f*s,t._pe.PeHorizon))}return r.set(e,n),n}};r(t._pe.PeProjcs.prototype,"horizonGcsGenerate",h),r(t._pe.PeProjcs.prototype,"horizonPcsGenerate",h),t._pe.PeObject.prototype.toString=function(e){void 0===e&&(e=u.PE_STR_OPTS_NONE),t._pe.ensureCache.prepare();var r=t._pe.getPointer(this),n=t._pe.ensureInt8(new Array(u.PE_BUFFER_MAX));return t._pe.UTF8ToString(t._pe._pe_object_to_string_ext(r,e,n))}}function h(e){if(e){var r=t._pe.getClass(e);if(r){var n=t._pe.getCache(r);if(n){var i=t._pe.getPointer(e);i&&delete n[i]}}}}function _(e,r){for(var n=[],i=new Array(r),o=0;o<e;o++)n.push(t._pe.ensureInt8(i));return n}function y(e){var t;return Array.isArray(e[0])?(t=[],e.forEach((function(e){t.push(e[0],e[1])}))):t=e,t}function v(e,r,n,i){if(void 0===i&&(i=!1),i)for(var o=0;o<2*r;o++)e[o]=t._pe.getValue(n+o*Float64Array.BYTES_PER_ELEMENT,"double");else{var a=0===e.length;for(o=0;o<r;o++)a&&(e[o]=new Array(2)),e[o][0]=t._pe.getValue(n,"double"),e[o][1]=t._pe.getValue(n+Float64Array.BYTES_PER_ELEMENT,"double"),n+=2*Float64Array.BYTES_PER_ELEMENT}}Object.defineProperty(t,"__esModule",{value:!0}),t._pe=null,t.isLoaded=function(){return!!t._pe},t.isSupported=function(){return!!o("esri-wasm")},t.load=function(){return s||(s=a.create((function(e,t){new Promise((function(e,t){Promise.resolve().then(function(){var t=[r("2yfh")];e.apply(null,t)}.bind(this)).catch(t.bind(this))})).then((function(r){r({locateFile:function(e){return i.getAssetUrl("esri/geometry/support/"+e)},onAbort:function(e){t(new Error(e))}}).then((function(t){f(t),e()}))}))})))},function(e){function r(e,r,n){t._pe.ensureCache.prepare();var i=y(n),o=n===i,a=t._pe.ensureFloat64(i),s=t._pe._pe_geog_to_proj(t._pe.getPointer(e),r,a);return s&&v(n,r,a,o),s}function n(e,t,r){return i(e,t,r,0)}function i(e,r,n,i){t._pe.ensureCache.prepare();var o=y(n),a=n===o,s=t._pe.ensureFloat64(o),u=t._pe._pe_proj_to_geog_center(t._pe.getPointer(e),r,s,i);return u&&v(n,r,s,a),u}e.geogToProj=r,e.projGeog=function(e,t,i,o){switch(o){case u.PE_TRANSFORM_P_TO_G:return n(e,t,i);case u.PE_TRANSFORM_G_TO_P:return r(e,t,i)}return 0},e.projToGeog=n,e.projToGeogCenter=i}(t.PeCSTransformations||(t.PeCSTransformations={})),function(e){e.init=function(){e.PE_BUFFER_MAX=t._pe.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=t._pe.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=t._pe.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=t._pe.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=t._pe.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=t._pe.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=t._pe.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=t._pe.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=t._pe.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=t._pe.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=t._pe.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=t._pe.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=t._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=t._pe.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=t._pe.PeDefs.prototype.PE_TYPE_UNIT,e.PE_STR_OPTS_NONE=t._pe.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=t._pe.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=t._pe.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=t._pe.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=t._pe.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=t._pe.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=t._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=t._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=t._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=t._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=t._pe.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=t._pe.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=t._pe.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=t._pe.PeDefs.prototype.PE_HORIZON_DELTA}}(u=t.PeDefs||(t.PeDefs={})),function(e){var r={},n={};function i(e,n){var i=null,a=r[e];if(a||(a={},r[e]=a),a.hasOwnProperty(String(n)))i=a[n];else{var s=t._pe.PeFactory.prototype.factoryByType(e,n);t._pe.compare(s,t._pe.NULL)||(i=s,a[n]=i)}return o(i)}function o(e){if(e){var r=e.getType();switch(r){case u.PE_TYPE_GEOGCS:e=t._pe.castObject(e,t._pe.PeGeogcs);break;case u.PE_TYPE_PROJCS:e=t._pe.castObject(e,t._pe.PeProjcs);break;case u.PE_TYPE_GEOGTRAN:e=t._pe.castObject(e,t._pe.PeGeogtran);break;default:r&u.PE_TYPE_UNIT&&(e=t._pe.castObject(e,t._pe.PeUnit))}}return e}e.initialize=function(){t._pe.PeFactory.prototype.initialize(null)},e.coordsys=function(e){return i(u.PE_TYPE_COORDSYS,e)},e.factoryByType=i,e.fromString=function(e,r){var i=null,a=n[e];if(a||(a={},n[e]=a),a.hasOwnProperty(r))i=a[r];else{var s=t._pe.PeFactory.prototype.fromString(e,r);t._pe.compare(s,t._pe.NULL)||(i=s,a[r]=i)}return o(i)},e.geogcs=function(e){return i(u.PE_TYPE_GEOGCS,e)},e.geogtran=function(e){return i(u.PE_TYPE_GEOGTRAN,e)},e.getCode=function(e){return t._pe.PeFactory.prototype.getCode(e)},e.projcs=function(e){return i(u.PE_TYPE_PROJCS,e)},e.unit=function(e){return i(u.PE_TYPE_UNIT,e)}}(t.PeFactory||(t.PeFactory={})),t.PeGCSExtent=null,function(e){var r;e.init=function(){e.PE_GTLIST_OPTS_COMMON=t._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,r=t._pe._pe_getPeGTlistExtendedEntrySize()},e.getGTlist=function(e,n,i,o,a,s){var u=null,l=new t._pe.PeInteger(s);try{var p=t._pe.PeGTlistExtended.prototype.getGTlist(e,n,i,o,a,l);if((s=l.val)&&(u=[p],s>1))for(var c=t._pe.getPointer(p),d=1;d<s;d++)u.push(t._pe.wrapPointer(c+r*d,t._pe.PeGTlistExtendedEntry))}finally{t._pe.destroy(l)}return u}}(l=t.PeGTlistExtended||(t.PeGTlistExtended={})),function(e){e.destroy=function(e){if(e&&e.length){for(var r=0,n=e;r<n.length;r++){var i=n[r];h(i),i.getEntries().forEach((function(e){h(e);var t=e.getGeogtran();h(t),t.getParameters().forEach(h),[t.getGeogcs1(),t.getGeogcs2()].forEach((function(e){h(e);var t=e.getDatum();h(t),h(t.getSpheroid()),h(e.getPrimem()),h(e.getUnit())}))}))}t._pe.PeGTlistExtendedEntry.prototype.Delete(e[0])}}}(t.PeGTlistExtendedEntry||(t.PeGTlistExtendedEntry={})),function(e){e.geogToGeog=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=y(n),s=n===a,u=t._pe.ensureFloat64(a),l=0;i&&(l=t._pe.ensureFloat64(i));var p=t._pe._pe_geog_to_geog(t._pe.getPointer(e),r,u,l,o);return p&&v(n,r,u,s),p}}(t.PeGTTransformations||(t.PeGTTransformations={})),function(e){function r(e,r,n,i,o,a){var s,l;switch(t._pe.ensureCache.prepare(),e){case"dd":s=t._pe._pe_geog_to_dd,l=u.PE_DD_MAX;break;case"ddm":s=t._pe._pe_geog_to_ddm,l=u.PE_DDM_MAX;break;case"dms":s=t._pe._pe_geog_to_dms,l=u.PE_DMS_MAX}var p=0;r&&(p=t._pe.getPointer(r));var c=y(i),d=t._pe.ensureFloat64(c),f=_(n,l),h=s(p,n,d,o,t._pe.ensureInt32(f));if(h)for(var v=0;v<n;v++)a[v]=t._pe.UTF8ToString(f[v]);return h}function n(e,r,n,i,o){var a;switch(t._pe.ensureCache.prepare(),e){case"dd":a=t._pe._pe_dd_to_geog;break;case"ddm":a=t._pe._pe_ddm_to_geog;break;case"dms":a=t._pe._pe_dms_to_geog}var s=0;r&&(s=t._pe.getPointer(r));var u=i.map((function(e){return t._pe.ensureString(e)})),l=t._pe.ensureInt32(u),p=t._pe.ensureFloat64(new Array(2*n)),c=a(s,n,l,p);return c&&v(o,n,p),c}e.geog_to_dms=function(e,t,n,i,o){return r("dms",e,t,n,i,o)},e.dms_to_geog=function(e,t,r,i){return n("dms",e,t,r,i)},e.geog_to_ddm=function(e,t,n,i,o){return r("ddm",e,t,n,i,o)},e.ddm_to_geog=function(e,t,r,i){return n("ddm",e,t,r,i)},e.geog_to_dd=function(e,t,n,i,o){return r("dd",e,t,n,i,o)},e.dd_to_geog=function(e,t,r,i){return n("dd",e,t,r,i)}}(t.PeNotationDms||(t.PeNotationDms={})),function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=t._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=t._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},e.geog_to_mgrs_extended=function(e,r,n,i,o,a,s){t._pe.ensureCache.prepare();var l=0;e&&(l=t._pe.getPointer(e));var p=y(n),c=t._pe.ensureFloat64(p),d=_(r,u.PE_MGRS_MAX),f=t._pe.ensureInt32(d),h=t._pe._pe_geog_to_mgrs_extended(l,r,c,i,o,a,f);if(h)for(var v=0;v<r;v++)s[v]=t._pe.UTF8ToString(d[v]);return h},e.mgrs_to_geog_extended=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var s=n.map((function(e){return t._pe.ensureString(e)})),u=t._pe.ensureInt32(s),l=t._pe.ensureFloat64(new Array(2*r)),p=t._pe._pe_mgrs_to_geog_extended(a,r,u,i,l);return p&&v(o,r,l),p}}(p=t.PeNotationMgrs||(t.PeNotationMgrs={})),function(e){e.geog_to_usng=function(e,r,n,i,o,a,s){t._pe.ensureCache.prepare();var l=0;e&&(l=t._pe.getPointer(e));var p=y(n),c=t._pe.ensureFloat64(p),d=_(r,u.PE_MGRS_MAX),f=t._pe.ensureInt32(d),h=t._pe._pe_geog_to_usng(l,r,c,i,o,a,f);if(h)for(var v=0;v<r;v++)s[v]=t._pe.UTF8ToString(d[v]);return h},e.usng_to_geog=function(e,r,n,i){t._pe.ensureCache.prepare();var o=0;e&&(o=t._pe.getPointer(e));var a=n.map((function(e){return t._pe.ensureString(e)})),s=t._pe.ensureInt32(a),u=t._pe.ensureFloat64(new Array(2*r)),l=t._pe._pe_usng_to_geog(o,r,s,u);return l&&v(i,r,u),l}}(t.PeNotationUsng||(t.PeNotationUsng={})),function(e){e.init=function(){e.PE_UTM_OPTS_NONE=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS},e.geog_to_utm=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var s=y(n),l=t._pe.ensureFloat64(s),p=_(r,u.PE_UTM_MAX),c=t._pe.ensureInt32(p),d=t._pe._pe_geog_to_utm(a,r,l,i,c);if(d)for(var f=0;f<r;f++)o[f]=t._pe.UTF8ToString(p[f]);return d},e.utm_to_geog=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var s=n.map((function(e){return t._pe.ensureString(e)})),u=t._pe.ensureInt32(s),l=t._pe.ensureFloat64(new Array(2*r)),p=t._pe._pe_utm_to_geog(a,r,u,i,l);return p&&v(o,r,l),p}}(c=t.PeNotationUtm||(t.PeNotationUtm={})),function(e){var r=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=t._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=t._pe.PePCSInfo.prototype.PE_POLE_POINT},e.generate=function(n,i){var o,a;return void 0===i&&(i=e.PE_PCSINFO_OPTION_DOMAIN),r.has(n)&&(a=r.get(n))[i]&&(o=a[i]),o||(o=t._pe.PePCSInfo.prototype.generate(n,i),a||(a=[],r.set(n,a)),a[i]=o),o}}(d=t.PePCSInfo||(t.PePCSInfo={})),function(e){e.version_string=function(){return t._pe.PeVersion.prototype.version_string()}}(t.PeVersion||(t.PeVersion={})),t._init=f}.apply(null,n))||(e.exports=i)},wIC5:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("qMld"),r("w7fK"),r("OkCb"),r("2Kdy")],void 0===(i=function(e,t,n,i,o){Object.defineProperty(t,"__esModule",{value:!0});var a=null,s=null;t.isLoaded=function(){return!!a&&i.isLoaded()},t.isSupported=function(){return i.isSupported()};var u=null;t.load=function(){return u||(u=n.all([i.load(),new Promise((function(e,t){r.e(8).then(function(){var t=[r("vFDJ")];e.apply(null,t)}.bind(this)).catch(t.bind(this))})),new Promise((function(e,t){r.e(93).then(function(){var t=[r("RBE7")];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))]).then((function(e){var t=e[1],r=e[2].hydratedAdapter;s=r,(a=t)._enableProjection(i)})))},t.project=function(e,t,r){return void 0===r&&(r=null),e instanceof Array?0===e.length?[]:p(s,e,e[0].spatialReference,t,r):p(s,[e],e.spatialReference,t,r)[0]};var l={};function p(e,t,r,n,i){if(void 0===i&&(i=null),null===i){var s=o.cacheKey(r,n);void 0!==l[s]?i=l[s]:(null===(i=c(r,n,null))&&(i=new o),l[s]=i)}return a._project(e,t,r,n,i)}function c(e,t,r){void 0===r&&(r=null);var n=a._getTransformation(s,e,t,r,null==r?void 0:r.spatialReference);return null!==n?o.fromGE(n):null}t.projectMany=p,t.getTransformation=c,t.getTransformations=function(e,t,r){void 0===r&&(r=null);var n=a._getTransformationBySuitability(s,e,t,r,null==r?void 0:r.spatialReference);if(null!==n){for(var i=[],u=0,l=n;u<l.length;u++){var p=l[u];i.push(o.fromGE(p))}return i}return[]}}.apply(null,n))||(e.exports=i)}}]);
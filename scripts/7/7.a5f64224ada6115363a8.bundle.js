(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/3d/support/geometryUtils/sphere":"/dtL","esri/views/3d/support/geometryUtils/vector":"18xY","esri/core/libs/gl-matrix-2/mat4f64":"1m5D","esri/views/3d/support/geometryUtils/boundedPlane":"2eYJ","esri/core/libs/gl-matrix-2/vec4":"2fXB","esri/views/3d/support/geometryUtils/ray":"4p4v","esri/core/libs/gl-matrix-2/mat3f64":"51bw","esri/views/3d/webgl-engine/lib/Util":"CIy2","esri/core/libs/gl-matrix-2/factories/mat4f64":"CIzB","esri/views/3d/support/geometryUtils/plane":"GG08","esri/views/3d/support/geometryUtils/axisAngle":"GyfB","esri/views/3d/support/stack":"JjCO","esri/views/3d/support/geometryUtils/lineSegment":"N5NQ","esri/core/libs/gl-matrix-2/vec4f64":"O7NG","esri/core/ObjectStack":"PHan","esri/core/libs/gl-matrix-2/factories/quatf64":"SgdR","esri/core/libs/gl-matrix-2/factories/vec4f64":"TPlk","esri/views/3d/support/geometryUtils/triangle":"ZjcA","esri/views/3d/support/geometryUtils":"aWgr","esri/core/libs/gl-matrix-2/math/vec4":"bH65","esri/views/3d/support/geometryUtils/frustum":"cpxo","esri/views/3d/support/geometryUtils/clipRay":"fXZm","esri/core/libs/gl-matrix-2/quatf64":"lLWD","esri/views/3d/webgl-engine/lib/ComponentUtils":"rjU6","esri/core/VectorStack":"wSO/","esri/core/libs/gl-matrix-2/factories/mat3f64":"xf8T"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"/dtL":function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n("pcDC"),n("qsST"),n("PHan"),n("FXVB"),n("0LE5"),n("Rdxj"),n("aWgr"),n("AzkI"),n("JjCO"),n("4p4v")],void 0===(i=function(e,t,n,r,i,o,c,a,s,u,v,f){function l(e){return e?{radius:e.radius,center:a.vec3f64.clone(e.center)}:{radius:1,center:a.vec3f64.create()}}function d(e,t){return void 0===t&&(t=l()),p(e.radius,e.center,t)}function p(e,t,n){return void 0===n&&(n=l()),c.vec3.copy(n.center,t),n.radius=e,n}function g(e,t,n){var r=c.vec3.subtract(v.sv3d.get(),t.origin,e.center),i=c.vec3.dot(t.direction,t.direction),o=2*c.vec3.dot(t.direction,r),a=o*o-4*i*(c.vec3.dot(r,r)-e.radius*e.radius);if(a<0)return!1;var s=Math.sqrt(a),u=(-o-s)/(2*i),f=(-o+s)/(2*i);return(u<0||f<u&&f>0)&&(u=f),!(u<0||(n&&c.vec3.add(n,t.origin,c.vec3.scale(v.sv3d.get(),t.direction,u)),0))}function h(e,t,n){var r=v.sv3d.get(),i=v.sm4d.get();c.vec3.cross(r,t.origin,t.direction),c.vec3.cross(n,r,t.origin),c.vec3.scale(n,n,1/c.vec3.length(n)*e.radius);var a=b(e,t.origin),u=s.vector.angle(t.origin,n);return o.mat4.identity(i),o.mat4.rotate(i,i,u+a,r),c.vec3.transformMat4(n,n,i),n}function m(e,t,n){var r=c.vec3.subtract(v.sv3d.get(),t,e.center),i=c.vec3.scale(v.sv3d.get(),r,e.radius/c.vec3.length(r));return c.vec3.add(n,i,e.center)}function b(e,t){var n=c.vec3.subtract(v.sv3d.get(),t,e.center),r=c.vec3.length(n),i=e.radius+Math.abs(e.radius-r);return u.acos(e.radius/i)}function y(e,t,r,i){var o=c.vec3.subtract(j,t,e.center);switch(r){case 0:var a=(s=u.cartesianToSpherical(o,j))[2];return c.vec3.set(i,-Math.sin(a),Math.cos(a),0);case 1:var s,v=(s=u.cartesianToSpherical(o,j))[1],f=(a=s[2],Math.sin(v));return c.vec3.set(i,-f*Math.cos(a),-f*Math.sin(a),Math.cos(v));case 2:return c.vec3.normalize(i,o);default:n.neverReached(r)}}function M(e,t){var n=c.vec3.subtract(A,t,e.center);return c.vec3.length(n)-e.radius}Object.defineProperty(t,"__esModule",{value:!0});var P=r.getLogger("esri.views.3d.support.geometryUtils.sphere");t.create=l,t.wrap=function(e,t){var n=x.get();return n.radius=e,n.center=t||w,n},t.copy=d,t.fromValues=p,t.elevate=function(e,t,n){return e!==n&&c.vec3.copy(n.center,e.center),n.radius=e.radius+t,n},t.setExtent=function(e,t,n){return P.error("sphere.setExtent is not yet supported"),e===n?n:d(e,n)},t.intersectRay=g,t.intersectScreen=function(e,t,n,r){return g(e,f.fromScreenAtEye(t,n,O),r)},t.intersectsRay=function(e,t){return g(e,t,null)},t.intersectRayClosestSilhouette=function(e,t,n){if(g(e,t,n))return n;var r=h(e,t,v.sv3d.get());return c.vec3.add(n,t.origin,c.vec3.scale(v.sv3d.get(),t.direction,c.vec3.distance(t.origin,r)/c.vec3.length(t.direction))),n},t.closestPointOnSilhouette=h,t.closestPoint=function(e,t,n){return g(e,t,n)?n:(f.closestPoint(t,e.center,n),m(e,n,n))},t.projectPoint=m,t.distanceToSilhouette=function(e,t){var n=c.vec3.subtract(v.sv3d.get(),t,e.center),r=c.vec3.squaredLength(n),i=e.radius*e.radius;return Math.sqrt(Math.abs(r-i))},t.angleToSilhouette=b;var j=a.vec3f64.create();t.axisAt=y,t.altitudeAt=M,t.setAltitudeAt=function(e,t,n,r){var i=M(e,t),o=y(e,t,2,A),a=c.vec3.scale(A,o,n-i);return c.vec3.add(r,t,a),r};var x=new i.ObjectStack(function(){return{center:null,radius:0}}),O=f.create(),w=a.vec3f64.create(),A=a.vec3f64.create();Object.freeze(w)}.apply(null,r))||(e.exports=i)},"18xY":function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n("0LE5"),n("AzkI")],void 0===(i=function(e,t,n,r){function i(e,t){return n.vec3.dot(e,t)/n.vec3.length(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.projectPoint=function(e,t,r){var o=i(e,t);return n.vec3.scale(r,e,o)},t.projectPointSignedLength=i,t.angle=function(e,t){var i=n.vec3.dot(e,t)/(n.vec3.length(e)*n.vec3.length(t));return-r.acos(i)}}.apply(null,r))||(e.exports=i)},"1m5D":function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n("CIzB")],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.mat4f64=n}.apply(null,r))||(e.exports=i)},"2eYJ":function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n("pcDC"),n("qsST"),n("PHan"),n("FXVB"),n("1m5D"),n("0LE5"),n("Rdxj"),n("AzkI"),n("JjCO"),n("N5NQ"),n("GG08"),n("4p4v"),n("18xY")],void 0===(i=function(e,t,n,r,i,o,c,a,s,u,v,f,l,d,p){function g(e){return void 0===e&&(e=t.UP),{plane:l.create(e.plane),origin:s.vec3f64.clone(e.origin),basis1:s.vec3f64.clone(e.basis1),basis2:s.vec3f64.clone(e.basis2)}}function h(e,t){return void 0===t&&(t=g()),m(e.origin,e.basis1,e.basis2,t)}function m(e,t,n,r){return void 0===r&&(r=g()),a.vec3.copy(r.origin,e),a.vec3.copy(r.basis1,t),a.vec3.copy(r.basis2,n),l.fromVectorsAndPoint(n,t,e,r.plane),B(r,"fromValues()"),r}function b(e,t,n){e!==n&&h(e,n);var r=a.vec3.scale(v.sv3d.get(),e.plane,t);return a.vec3.add(n.origin,n.origin,r),n.plane[3]-=t,n}function y(e,t){void 0===t&&(t=g());var n=(e[2]-e[0])/2,r=(e[3]-e[1])/2;return a.vec3.set(t.origin,e[0]+n,e[1]+r,0),a.vec3.set(t.basis1,n,0,0),a.vec3.set(t.basis2,0,r,0),l.fromValues(0,0,1,0,t.plane),t}function M(e,t,n){return!!l.intersectRay(e.plane,t,n)&&S(e,n)}function P(e,t,n){var r=R.get();I(e,t,r,R.get());for(var i=Number.POSITIVE_INFINITY,o=0,c=T;o<c.length;o++){var s=_(e,c[o],k.get()),f=v.sv3d.get();if(l.intersectLineSegment(r,s,f)){var d=u.directionFromTo(v.sv3d.get(),t.origin,f),p=Math.abs(u.acos(a.vec3.dot(t.direction,d)));p<i&&(i=p,a.vec3.copy(n,f))}}return i===Number.POSITIVE_INFINITY?j(e,t,n):n}function j(e,t,n){if(M(e,t,n))return n;var r=R.get(),i=R.get();I(e,t,r,i);for(var o=Number.POSITIVE_INFINITY,c=0,s=T;c<s.length;c++){var u=_(e,s[c],k.get()),f=v.sv3d.get();if(l.intersectLineSegmentClamp(r,u,f)){var p=d.distance2(t,f);if(!l.isPointInside(i,f))continue;p<o&&(o=p,a.vec3.copy(n,f))}}return O(e,t.origin)<o&&a.vec3.copy(n,t.origin),n}function x(e,t,n){var r=e.origin,i=e.basis1,o=e.basis2,c=a.vec3.subtract(v.sv3d.get(),t,r),s=p.projectPointSignedLength(i,c)/a.vec3.length(i),u=p.projectPointSignedLength(o,c)/a.vec3.length(o),f=p.projectPointSignedLength(e.plane,c);return a.vec3.set(n,s,u,f)}function O(e,t){var n=x(e,t,v.sv3d.get()),r=e.basis1,i=e.basis2,o=a.vec3.length(r),c=a.vec3.length(i),s=Math.max(Math.abs(n[0])-o,0),u=Math.max(Math.abs(n[1])-c,0),f=n[2];return s*s+u*u+f*f}function w(e,t){var n=-e.plane[3];return p.projectPointSignedLength(e.plane,t)-n}function A(e,t,r){switch(t){case 0:a.vec3.copy(r,e.basis1),a.vec3.normalize(r,r);break;case 1:a.vec3.copy(r,e.basis2),a.vec3.normalize(r,r);break;case 2:a.vec3.copy(r,e.plane);break;default:n.neverReached(t)}return r}function S(e,t){var n=a.vec3.subtract(v.sv3d.get(),t,e.origin),r=a.vec3.squaredLength(e.basis1),i=a.vec3.squaredLength(e.basis2),o=a.vec3.dot(e.basis1,n),c=a.vec3.dot(e.basis2,n);return-o-r<0&&o-r<0&&-c-i<0&&c-i<0}function V(e,t){var n=k.get();return a.vec3.copy(n.origin,e.origin),a.vec3.copy(n.vector,t),n}function _(e,t,n){var r=e.basis1,i=e.basis2,o=e.origin,c=a.vec3.scale(v.sv3d.get(),r,t.origin[0]),s=a.vec3.scale(v.sv3d.get(),i,t.origin[1]);a.vec3.add(n.origin,c,s),a.vec3.add(n.origin,n.origin,o);var u=a.vec3.scale(v.sv3d.get(),r,t.direction[0]),f=a.vec3.scale(v.sv3d.get(),i,t.direction[1]);return a.vec3.scale(n.vector,a.vec3.add(u,u,f),2),n}function B(e,t){Math.abs(a.vec3.dot(e.basis1,e.basis2)/(a.vec3.length(e.basis1)*a.vec3.length(e.basis2)))>1e-6&&N.warn(t,"Provided basis vectors are not perpendicular"),Math.abs(a.vec3.dot(e.basis1,e.plane))>1e-6&&N.warn(t,"Basis vectors and plane normal are not perpendicular"),Math.abs(-a.vec3.dot(e.plane,e.origin)-e.plane[3])>1e-6&&N.warn(t,"Plane offset is not consistent with plane origin")}function I(e,t,n,r){var i=e.plane;l.fromVectorsAndPoint(i,t.direction,t.origin,n),l.fromVectorsAndPoint(n,i,t.origin,r)}Object.defineProperty(t,"__esModule",{value:!0});var N=r.getLogger("esri.views.3d.support.geometryUtils.boundedPlane"),L=function(){this.plane=l.create(),this.origin=s.vec3f64.create(),this.basis1=s.vec3f64.create(),this.basis2=s.vec3f64.create()};t.BoundedPlaneClass=L,t.create=g,t.wrap=function(e,t,n){var r=C.get();return r.origin=e,r.basis1=t,r.basis2=n,r.plane=l.fromVectorsAndPoint(n,t,e,l.wrap(0,0,0,0)),r},t.copy=h,t.fromValues=m,t.elevate=b,t.setExtent=function(e,t,n){return y(t,n),b(n,w(e,e.origin),n),n},t.fromAABoundingRect=y,t.intersectRay=M,t.intersectRayClosestSilhouette=function(e,t,n){if(M(e,t,n))return n;var r=P(e,t,v.sv3d.get());return a.vec3.add(n,t.origin,a.vec3.scale(v.sv3d.get(),t.direction,a.vec3.distance(t.origin,r)/a.vec3.length(t.direction))),n},t.closestPointOnSilhouette=P,t.closestPoint=j,t.projectPoint=function(e,t,n){var r=l.projectPoint(e.plane,t,v.sv3d.get()),i=f.projectPointClamp(V(e,e.basis1),r,-1,1,v.sv3d.get()),o=f.projectPointClamp(V(e,e.basis2),r,-1,1,v.sv3d.get());return a.vec3.subtract(n,a.vec3.add(v.sv3d.get(),i,o),e.origin),n},t.projectPointLocal=x,t.distance2=O,t.distance=function(e,t){return Math.sqrt(O(e,t))},t.distanceToSilhouette=function(e,t){for(var n=Number.NEGATIVE_INFINITY,r=0,i=T;r<i.length;r++){var o=_(e,i[r],k.get()),c=f.distance2(o,t);c>n&&(n=c)}return Math.sqrt(n)},t.extrusionContainsPoint=function(e,t){return l.isPointInside(e.plane,t)&&S(e,t)},t.axisAt=function(e,t,n,r){return A(e,n,r)},t.altitudeAt=w,t.setAltitudeAt=function(e,t,n,r){var i=w(e,t),o=a.vec3.scale(E,e.plane,n-i);return a.vec3.add(r,t,o),r},t.transform=function(e,t,n){return e!==n&&h(e,n),o.mat4.invert(q,t),o.mat4.transpose(q,q),a.vec3.transformMat4(n.basis1,e.basis1,q),a.vec3.transformMat4(n.basis2,e.basis2,q),a.vec3.transformMat4(n.plane,e.plane,q),a.vec3.transformMat4(n.origin,e.origin,t),l.setOffsetFromPoint(n.plane,n.origin,n.plane),n},t.UP={plane:l.create(),origin:s.vec3f64.fromValues(0,0,0),basis1:s.vec3f64.fromValues(1,0,0),basis2:s.vec3f64.fromValues(0,1,0)};var R=new i.ObjectStack(l.create),k=new i.ObjectStack(f.create),E=s.vec3f64.create(),C=new i.ObjectStack(function(){return{origin:null,basis1:null,basis2:null,plane:null}}),T=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],q=c.mat4f64.create()}.apply(null,r))||(e.exports=i)},"2fXB":function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n("bH65")],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.vec4=n}.apply(null,r))||(e.exports=i)},"4p4v":function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n("PHan"),n("jBNx"),n("W9tT"),n("0LE5"),n("Rdxj"),n("JjCO")],void 0===(i=function(e,t,n,r,i,o,c,a){function s(e){return e?{origin:c.vec3f64.clone(e.origin),direction:c.vec3f64.clone(e.direction)}:{origin:c.vec3f64.create(),direction:c.vec3f64.create()}}function u(e,t,n){return void 0===n&&(n=s()),o.vec3.copy(n.origin,e),o.vec3.copy(n.direction,t),n}function v(e,t,n){void 0===n&&(n=s());var c=r.castRenderScreenPointArray3(i.vec2.copy(a.sv3d.get(),t));c[2]=0,e.unprojectPoint(c,n.origin);var u=r.castRenderScreenPointArray3(i.vec2.copy(a.sv3d.get(),t));u[2]=1;var v=e.unprojectPoint(u,a.sv3d.get());return o.vec3.subtract(n.direction,v,n.origin),n}function f(e,t,n){void 0===n&&(n=s()),o.vec3.copy(n.origin,e.eye);var r=o.vec3.set(a.sv3d.get(),t[0],t[1],1),i=e.unprojectPoint(r,a.sv3d.get());return o.vec3.subtract(n.direction,i,n.origin),n}function l(e,t){var n=o.vec3.cross(a.sv3d.get(),o.vec3.normalize(a.sv3d.get(),e.direction),o.vec3.subtract(a.sv3d.get(),t,e.origin));return o.vec3.dot(n,n)}function d(){return{origin:null,direction:null}}Object.defineProperty(t,"__esModule",{value:!0}),t.create=s,t.wrap=function(e,t){var n=p.get();return n.origin=e,n.direction=t,n},t.copy=function(e,t){return void 0===t&&(t=s()),u(e.origin,e.direction,t)},t.fromPoints=function(e,t,n){return void 0===n&&(n=s()),o.vec3.copy(n.origin,e),o.vec3.subtract(n.direction,t,e),n},t.fromValues=u,t.fromScreen=function(e,t,n){return void 0===n&&(n=s()),v(e,e.screenToRender(t,r.castRenderScreenPointArray3(a.sv3d.get())),n)},t.fromRender=v,t.fromScreenAtEye=function(e,t,n){return void 0===n&&(n=s()),f(e,e.screenToRender(t,r.castRenderScreenPointArray3(a.sv3d.get())),n)},t.fromRenderAtEye=f,t.distance2=l,t.distance=function(e,t){return Math.sqrt(l(e,t))},t.closestPoint=function(e,t,n){var r=o.vec3.dot(e.direction,o.vec3.subtract(n,t,e.origin));return o.vec3.add(n,e.origin,o.vec3.scale(n,e.direction,r)),n},t.createWrapper=d;var p=new n.ObjectStack(d)}.apply(null,r))||(e.exports=i)},"51bw":function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n("xf8T")],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.mat3f64=n}.apply(null,r))||(e.exports=i)},CIy2:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n("FXVB"),n("W9tT"),n("DIqE"),n("Rdxj"),n("2fXB"),n("O7NG"),n("AzkI")],void 0===(i=function(e,t,n,r,i,o,c,a,s){function u(e,t){if(!e)throw new Error(t||"assert").stack,new g(t)}function v(e){for(var t in e)return t}function f(e,t){e[12]=t[0],e[13]=t[1],e[14]=t[2]}function l(e,t){void 0===t&&(t=0);for(var n=0,r=0;r<4;r++)n+=e[t+r]*m[r];return n}function d(e){return e-Math.floor(e)}Object.defineProperty(t,"__esModule",{value:!0});var p=a.vec4f64.create(),g=function(){function e(e){this.message=e}return e.prototype.toString=function(){return"AssertException: "+this.message},e}();t.AssertException=g,t.VertexAttrConstants={POSITION:"position",NORMAL:"normal",NORMALCOMPRESSED:"normalCompressed",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",COLOR:"color",SYMBOLCOLOR:"symbolColor",SIZE:"size",REGION:"region",COMPONENTINDEX:"componentIndex",TANGENT:"aTangent"},t.assert=u,t.verify=function(e,t){e||(t=t||"")},t.encodeInt16=function(e){return s.clamp(Math.round(32767*e),-32767,32767)},t.encodeNormal=function(e,t){var n=Math.abs(e[0]),r=Math.abs(e[1]),i=1/(n+r+Math.abs(e[2])),o=n*i,c=r*i,a=Math.min(e[2]*i,0);t[0]=(e[0]<0?-1:1)*(o-a),t[1]=(e[1]<0?-1:1)*(c-a)},t.fallbackIfUndefined=function(e,t){return void 0===e?t:e},t.hex2rgb=function(e){return[((e=Math.floor(e))>>16&255)/255,(e>>8&255)/255,(255&e)/255]},t.rgb2hex=function(e){return"0x"+((s.clamp(Math.round(255*e[0]),0,255)<<16)+(s.clamp(Math.round(255*e[1]),0,255)<<8)+s.clamp(Math.round(255*e[2]),0,255)).toString(16)},t.dec2hex=function(e){var t=e.toString(16);return"00000000".substr(0,8-t.length)+t},t.rayTriangle3D=function(e,t,n,r,i,c,a,s,u){void 0===u&&(u=o.vec3f64.create());var v=r[a]-n[c],f=r[a+1]-n[c+1],l=r[a+2]-n[c+2],d=i[s]-n[c],p=i[s+1]-n[c+1],g=i[s+2]-n[c+2],h=t[1]*g-p*t[2],m=t[2]*d-g*t[0],b=t[0]*p-d*t[1],y=v*h+f*m+l*b;if(y>-1e-5&&y<1e-5)return!1;var M=1/y,P=e[0]-n[c],j=e[1]-n[c+1],x=e[2]-n[c+2];if(u[1]=M*(P*h+j*m+x*b),u[1]<0||u[1]>1)return!1;var O=j*l-f*x,w=x*v-l*P,A=P*f-v*j;return u[2]=M*(t[0]*O+t[1]*w+t[2]*A),!(u[2]<0||u[1]+u[2]>1||(u[0]=M*(d*O+p*w+g*A),0))},t.rayBoxTest=function(e,t,n,r){var i,o=(n[0]-e[0])/t[0],c=(r[0]-e[0])/t[0];o>c&&(i=o,o=c,c=i);var a=(n[1]-e[1])/t[1],s=(r[1]-e[1])/t[1];if(a>s&&(i=a,a=s,s=i),o>s||a>c)return!1;a>o&&(o=a),s<c&&(c=s);var u=(n[2]-e[2])/t[2],v=(r[2]-e[2])/t[2];return u>v&&(i=u,u=v,v=i),!(o>v||u>c||(v<c&&(c=v),c<0))},t.rayRay2D=function(e,t,n,r,o,c){void 0===c&&(c=i.vec2f64.create());var a=(r[o]-n[o])*(t[0]-e[0])-(r[0]-n[0])*(t[o]-e[o]),s=(r[0]-n[0])*(e[o]-n[o])-(r[o]-n[o])*(e[0]-n[0]);if(0===a)return!1;var u=s/a;return c[0]=e[0]+u*(t[0]-e[0]),c[1]=e[o]+u*(t[o]-e[o]),!0},t.project=function(e,t,n,r,i){i||(i=e),p[0]=e[0],p[1]=e[1],p[2]=e[2],p[3]=1,c.vec4.transformMat4(p,p,t),i.length>2&&(i[2]=-p[2]),c.vec4.transformMat4(p,p,n),u(0!==p[3]),i[0]=p[0]/p[3],i[1]=p[1]/p[3],i[2]=p[2]/p[3],i[0]=(.5*i[0]+.5)*r[2]+r[0],i[1]=(.5*i[1]+.5)*r[3]+r[1]},t.getFirstObjectKey=v,t.getFirstObjectValue=function(e){return e[v(e)]},t.objectEmpty=function(e){for(var t in e)return!1;return!0},t.logWithBase=function(e,t){return Math.log(e)/Math.log(t)},t.setMatrixTranslation=f,t.setMatrixTranslation3=function(e,t,n,r){e[12]=t,e[13]=n,e[14]=r},t.getMatrixTranslation=function(e,t){return void 0===t&&(t=o.vec3f64.create()),t[0]=e[12],t[1]=e[13],t[2]=e[14],t},t.createTranslationMatrix=function(e,t){return f(e=n.mat4.identity(e),t),e},t.isTranslationMatrix=function(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&1===e[15]},t.fovx2fovy=function(e,t,n){return 2*Math.atan(n*Math.tan(.5*e)/t)},t.fovy2fovx=function(e,t,n){return 2*Math.atan(t*Math.tan(.5*e)/n)},t.fovx2fovd=function(e,t,n){return 2*Math.atan(Math.sqrt(t*t+n*n)*Math.tan(.5*e)/t)},t.fovy2fovd=function(e,t,n){return 2*Math.atan(Math.sqrt(t*t+n*n)*Math.tan(.5*e)/n)},t.fovd2fovx=function(e,t,n){return 2*Math.atan(t*Math.tan(.5*e)/Math.sqrt(t*t+n*n))},t.fovd2fovy=function(e,t,n){return 2*Math.atan(n*Math.tan(.5*e)/Math.sqrt(t*t+n*n))},t.packFloatRGBA=function(e,t,n){void 0===n&&(n=0);for(var r=s.clamp(e,0,b),i=0;i<4;i++)t[n+i]=Math.floor(256*d(r*h[i]))},t.unpackFloatRGBA=l;var h=[1,256,65536,16777216],m=[1/256,1/65536,1/16777216,1/4294967296],b=l(new Uint8ClampedArray([255,255,255,255]));t.inverseProjectionInfo=function(e,t,n,i,o){var c=e;0===e[11]?(i[0]=2/(t*c[0]),i[1]=2/(n*c[5]),i[2]=(1+c[12])/c[0],i[3]=(1+c[13])/c[5],r.vec2.set(o,0,1)):(i[0]=-2/(t*c[0]),i[1]=-2/(n*c[5]),i[2]=(1-c[8])/c[0],i[3]=(1-c[9])/c[5],r.vec2.set(o,1,0))}}.apply(null,r))||(e.exports=i)},CIzB:function(e,t,n){var r,i;r=[n.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},t.clone=function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},t.fromValues=function(e,t,n,r,i,o,c,a,s,u,v,f,l,d,p,g){return[e,t,n,r,i,o,c,a,s,u,v,f,l,d,p,g]},t.createView=function(e,t){return new Float64Array(e,t,16)}}.apply(null,r))||(e.exports=i)},GG08:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n("0LE5"),n("AzkI"),n("JjCO")],void 0===(i=function(e,t,n,r,i){function o(e){return void 0===e&&(e=t.UP),[e[0],e[1],e[2],e[3]]}function c(e,t){return void 0===t&&(t=o()),a(e[0],e[1],e[2],e[3],t)}function a(e,t,n,r,i){return void 0===i&&(i=o()),i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function s(e,t,r){void 0===r&&(r=o()),n.vec3.copy(r,t);var i=n.vec3.dot(t,t);return Math.abs(i-1)>1e-5&&i>1e-12&&n.vec3.scale(r,r,1/Math.sqrt(i)),u(r,e,r),r}function u(e,t,r){return e!==r&&c(e,r),r[3]=-n.vec3.dot(r,t),r}function v(e,t,r,c){return void 0===c&&(c=o()),s(r,n.vec3.cross(i.sv3d.get(),t,e),c)}function f(e,t,r){var o=n.vec3.scale(i.sv3d.get(),e,n.vec3.dot(e,t));return n.vec3.subtract(r,t,o),r}function l(e,t){return n.vec3.dot(e,t)+e[3]}function d(e,t,i,o,c,a){var s=n.vec3.dot(e,i);if(0===s)return!1;var u=-(n.vec3.dot(e,t)+e[3])/s;return c&&(u=o?Math.max(0,u):r.clamp(u,0,1)),!(u<0||!o&&u>1||(n.vec3.add(a,t,n.vec3.scale(a,i,u)),0))}Object.defineProperty(t,"__esModule",{value:!0}),t.create=o,t.wrap=function(e,t,n,r){return a(e,t,n,r,i.sv4d.get())},t.copy=c,t.fromValues=a,t.fromNormalAndOffset=function(e,t,r){return void 0===r&&(r=o()),n.vec3.copy(r,e),r[3]=t,r},t.fromPositionAndNormal=s,t.fromPoints=function(e,t,r,c){return void 0===c&&(c=o()),v(n.vec3.subtract(i.sv3d.get(),e,t),n.vec3.subtract(i.sv3d.get(),r,t),e,c)},t.setOffsetFromPoint=u,t.negate=function(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},t.fromVectorsAndPoint=v,t.intersectRay=function(e,t,n){return d(e,t.origin,t.direction,!0,!1,n)},t.intersectLineSegment=function(e,t,n){return d(e,t.origin,t.vector,!1,!1,n)},t.intersectLineSegmentClamp=function(e,t,n){return d(e,t.origin,t.vector,!1,!0,n)},t.isSphereFullyInside=function(e,t){var n=t.center,r=t.radius;return l(e,n)-r>=0},t.isSphereFullyOutside=function(e,t){var n=t.center,r=t.radius;return l(e,n)+r<0},t.isPointInside=function(e,t){return l(e,t)>=0},t.isPointOutside=function(e,t){return l(e,t)<0},t.isAABBFullyInside=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],c=t[4],a=t[5];return e[0]*(e[0]>0?n:o)+e[1]*(e[1]>0?r:c)+e[2]*(e[2]>0?i:a)+e[3]>=0},t.clip=function(e,t){var r=n.vec3.dot(e,t.ray.direction),i=-l(e,t.ray.origin);if(i<0&&r>=0)return!1;if(r>-1e-6&&r<1e-6)return i>0;if((i<0||r<0)&&!(i<0&&r<0))return!0;var o=i/r;return r>0?o<t.c1&&(t.c1=o):o>t.c0&&(t.c0=o),t.c0<=t.c1},t.projectPoint=function(e,t,r){var o=n.vec3.scale(i.sv3d.get(),e,-e[3]),c=f(e,n.vec3.subtract(i.sv3d.get(),t,o),i.sv3d.get());return n.vec3.add(r,c,o),r},t.projectVector=f,t.distance=function(e,t){return Math.abs(l(e,t))},t.signedDistance=l,t.UP=[0,0,1,0]}.apply(null,r))||(e.exports=i)},GyfB:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n("0LE5"),n("JjCO"),n("18xY")],void 0===(i=function(e,t,n,r,i){function o(e){return void 0===e&&(e=t.UP),[e[0],e[1],e[2],e[3]]}function c(e,t,n,r,i){return void 0===i&&(i=o()),i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}Object.defineProperty(t,"__esModule",{value:!0}),t.create=o,t.wrap=function(e,t,n,i){return c(e,t,n,i,r.sv4d.get())},t.wrapAxisAngle=function(e,t){return c(e[0],e[1],e[2],t,r.sv4d.get())},t.copy=function(e,t){return void 0===t&&(t=o()),c(e[0],e[1],e[2],e[3],t)},t.fromValues=c,t.fromAxisAndAngle=function(e,t,r){return void 0===r&&(r=o()),n.vec3.copy(r,e),r[3]=t,r},t.fromPoints=function(e,t,r){return void 0===r&&(r=o()),n.vec3.cross(r,e,t),n.vec3.normalize(r,r),r[3]=i.angle(e,t),r},t.UP=[0,0,1,0]}.apply(null,r))||(e.exports=i)},JjCO:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n("wSO/")],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.sv2d=n.VectorStack.createVec2f64(),t.sv3d=n.VectorStack.createVec3f64(),t.sv4d=n.VectorStack.createVec4f64(),t.sm3d=n.VectorStack.createMat3f64(),t.sm4d=n.VectorStack.createMat4f64(),t.sq4d=n.VectorStack.createQuatf64()}.apply(null,r))||(e.exports=i)},N5NQ:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n("PHan"),n("0LE5"),n("Rdxj"),n("AzkI"),n("JjCO")],void 0===(i=function(e,t,n,r,i,o,c){function a(e){return e?{origin:i.vec3f64.clone(e.origin),vector:i.vec3f64.clone(e.vector)}:{origin:i.vec3f64.create(),vector:i.vec3f64.create()}}function s(e,t){var n=p.get();return n.origin=e,n.vector=t,n}function u(e,t,n){return void 0===n&&(n=a()),r.vec3.copy(n.origin,e),r.vec3.copy(n.vector,t),n}function v(e,t){var n=r.vec3.subtract(c.sv3d.get(),t,e.origin),i=r.vec3.dot(e.vector,n),a=r.vec3.dot(e.vector,e.vector),s=o.clamp(i/a,0,1),u=r.vec3.subtract(c.sv3d.get(),r.vec3.scale(c.sv3d.get(),e.vector,s),n);return r.vec3.dot(u,u)}function f(e,t,n,i,a){var s=e.vector,u=e.origin,v=r.vec3.subtract(c.sv3d.get(),t,u),f=r.vec3.length(s),l=r.vec3.dot(s,v)/f;return r.vec3.scale(a,s,o.clamp(l,n,i)),r.vec3.add(a,a,e.origin)}function l(e,t,n,i){var a=e.origin,s=r.vec3.add(c.sv3d.get(),a,e.vector),u=t.origin,v=r.vec3.add(c.sv3d.get(),u,t.vector),f=c.sv3d.get(),l=c.sv3d.get();if(f[0]=a[0]-u[0],f[1]=a[1]-u[1],f[2]=a[2]-u[2],l[0]=v[0]-u[0],l[1]=v[1]-u[1],l[2]=v[2]-u[2],Math.abs(l[0])<1e-6&&Math.abs(l[1])<1e-6&&Math.abs(l[2])<1e-6)return!1;var d=c.sv3d.get();if(d[0]=s[0]-a[0],d[1]=s[1]-a[1],d[2]=s[2]-a[2],Math.abs(d[0])<1e-6&&Math.abs(d[1])<1e-6&&Math.abs(d[2])<1e-6)return!1;var p=f[0]*l[0]+f[1]*l[1]+f[2]*l[2],g=l[0]*d[0]+l[1]*d[1]+l[2]*d[2],h=f[0]*d[0]+f[1]*d[1]+f[2]*d[2],m=l[0]*l[0]+l[1]*l[1]+l[2]*l[2],b=(d[0]*d[0]+d[1]*d[1]+d[2]*d[2])*m-g*g;if(Math.abs(b)<1e-6)return!1;var y=(p*g-h*m)/b,M=(p+g*y)/m;n&&(y=o.clamp(y,0,1),M=o.clamp(M,0,1));var P=c.sv3d.get(),j=c.sv3d.get();return P[0]=a[0]+y*d[0],P[1]=a[1]+y*d[1],P[2]=a[2]+y*d[2],j[0]=u[0]+M*l[0],j[1]=u[1]+M*l[1],j[2]=u[2]+M*l[2],i.tA=y,i.tB=M,i.pA=P,i.pB=j,i.distance2=r.vec3.squaredDistance(P,j),!0}Object.defineProperty(t,"__esModule",{value:!0}),t.create=a,t.wrap=s,t.copy=function(e,t){return void 0===t&&(t=a()),u(e.origin,e.vector,t)},t.fromValues=u,t.fromPoints=function(e,t,n){return void 0===n&&(n=a()),r.vec3.copy(n.origin,e),r.vec3.subtract(n.vector,t,e),n},t.distance2=v,t.distance=function(e,t){return Math.sqrt(v(e,t))},t.projectPoint=function(e,t,n){return f(e,t,0,1,n)},t.projectPointClamp=f,t.closestRayDistance2=function(e,t){if(l(e,s(t.origin,t.direction),!1,d)){var n=d.tA,i=d.pB,o=d.distance2;if(n>=0&&n<=1)return o;if(n<0)return r.vec3.squaredDistance(e.origin,i);if(n>1)return r.vec3.squaredDistance(r.vec3.add(c.sv3d.get(),e.origin,e.vector),i)}return null},t.closestLineSegmentPoint=function(e,t,n){return!!l(e,t,!0,d)&&(r.vec3.copy(n,d.pA),!0)},t.closestLineSegmentDistance2=function(e,t){return l(e,t,!0,d)?d.distance2:null};var d={tA:0,tB:0,pA:i.vec3f64.create(),pB:i.vec3f64.create(),distance2:0},p=new n.ObjectStack(function(){return{origin:null,vector:null}})}.apply(null,r))||(e.exports=i)},O7NG:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n("TPlk")],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.vec4f64=n}.apply(null,r))||(e.exports=i)},PHan:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n("6DRN")],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){var t=this;this.allocator=e,this.items=[],this.itemsPtr=0,this.tickHandle=n.before(function(){return t.reset()}),this.grow()}return e.prototype.destroy=function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=null),this.items=null},e.prototype.get=function(){return 0===this.itemsPtr&&n(function(){}),this.itemsPtr===this.items.length&&this.grow(),this.items[this.itemsPtr++]},e.prototype.reset=function(){var e=Math.min(3*Math.max(8,this.itemsPtr),this.itemsPtr+3*i);this.items.length=Math.min(e,this.items.length),this.itemsPtr=0},e.prototype.grow=function(){for(var e=0;e<Math.max(8,Math.min(this.items.length,i));e++)this.items.push(this.allocator())},e}();t.ObjectStack=r;var i=1024;t.default=r}.apply(null,r))||(e.exports=i)},SgdR:function(e,t,n){var r,i;r=[n.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){return[0,0,0,1]},t.clone=function(e){return[e[0],e[1],e[2],e[3]]},t.fromValues=function(e,t,n,r){return[e,t,n,r]},t.createView=function(e,t){return new Float64Array(e,t,4)}}.apply(null,r))||(e.exports=i)},TPlk:function(e,t,n){var r,i;r=[n.dj.c(e.i),t],void 0===(i=function(e,t){function n(){return[0,0,0,0]}Object.defineProperty(t,"__esModule",{value:!0}),t.create=n,t.clone=function(e){return[e[0],e[1],e[2],e[3]]},t.fromValues=function(e,t,n,r){return[e,t,n,r]},t.fromArray=function(e){for(var t=[0,0,0,0],n=Math.min(4,e.length),r=0;r<n;++r)t[r]=e[r];return t},t.createView=function(e,t){return new Float64Array(e,t,4)}}.apply(null,r))||(e.exports=i)},ZjcA:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n("PHan"),n("W9tT"),n("0LE5"),n("Rdxj"),n("JjCO"),n("N5NQ")],void 0===(i=function(e,t,n,r,i,o,c,a){function s(e){return e?{p0:o.vec3f64.clone(e.p0),p1:o.vec3f64.clone(e.p1),p2:o.vec3f64.clone(e.p2)}:{p0:o.vec3f64.create(),p1:o.vec3f64.create(),p2:o.vec3f64.create()}}function u(e,t,n,r){return void 0===r&&(r=s()),i.vec3.copy(r.p0,e),i.vec3.copy(r.p1,t),i.vec3.copy(r.p2,n),r}function v(e,t,n){var i=r.vec2.distance(e,t),o=r.vec2.distance(t,n),c=r.vec2.distance(n,e),a=(i+o+c)/2,s=a*(a-i)*(a-o)*(a-c);return s<=0?0:Math.sqrt(s)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=s,t.wrap=function(e,t,n){var r=l.get();return r.p0=e,r.p1=t,r.p2=n,r},t.copy=function(e,t){return void 0===t&&(t=s()),u(e.p0,e.p1,e.p2,t)},t.fromValues=u,t.distance2=function(e,t){var n=e.p0,r=e.p1,o=e.p2,s=i.vec3.subtract(c.sv3d.get(),r,n),u=i.vec3.subtract(c.sv3d.get(),o,r),v=i.vec3.subtract(c.sv3d.get(),n,o),l=i.vec3.subtract(c.sv3d.get(),t,n),d=i.vec3.subtract(c.sv3d.get(),t,r),p=i.vec3.subtract(c.sv3d.get(),t,o),g=i.vec3.cross(s,s,v),h=i.vec3.dot(i.vec3.cross(c.sv3d.get(),s,g),l),m=i.vec3.dot(i.vec3.cross(c.sv3d.get(),u,g),d),b=i.vec3.dot(i.vec3.cross(c.sv3d.get(),v,g),p);if(h>0&&m>0&&b>0){var y=i.vec3.dot(g,l);return y*y/i.vec3.dot(g,g)}var M=a.distance2(a.fromValues(n,s,f.get()),t),P=a.distance2(a.fromValues(r,u,f.get()),t),j=a.distance2(a.fromValues(o,v,f.get()),t);return Math.min(M,P,j)},t.areaPoints2d=v,t.area2d=function(e){return v(e.p0,e.p1,e.p2)};var f=new n.ObjectStack(a.create),l=new n.ObjectStack(function(){return{p0:null,p1:null,p2:null}})}.apply(null,r))||(e.exports=i)},aWgr:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n("GyfB"),n("2eYJ"),n("cpxo"),n("N5NQ"),n("GG08"),n("4p4v"),n("/dtL"),n("ZjcA"),n("18xY")],void 0===(i=function(e,t,n,r,i,o,c,a,s,u,v){Object.defineProperty(t,"__esModule",{value:!0}),t.plane=c,t.boundedPlane=r,t.triangle=u,t.lineSegment=o,t.ray=a,t.sphere=s,t.frustum=i,t.vector=v,t.axisAngle=n}.apply(null,r))||(e.exports=i)},bH65:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n("qysZ")],void 0===(i=function(e,t,n){function r(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function i(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function o(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function c(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+o*o)}function a(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return n*n+r*r+i*i+o*o}function s(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)}function u(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}Object.defineProperty(t,"__esModule",{value:!0}),t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},t.set=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},t.subtract=r,t.multiply=i,t.divide=o,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},t.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},t.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},t.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},t.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},t.distance=c,t.squaredDistance=a,t.length=s,t.squaredLength=u,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},t.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],c=n*n+r*r+i*i+o*o;return c>0&&(c=1/Math.sqrt(c),e[0]=n*c,e[1]=r*c,e[2]=i*c,e[3]=o*c),e},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},t.lerp=function(e,t,n,r){var i=t[0],o=t[1],c=t[2],a=t[3];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=c+r*(n[2]-c),e[3]=a+r*(n[3]-a),e},t.random=function(e,t){var r,i,o,c,a,s;t=t||1;do{a=(r=2*n.RANDOM()-1)*r+(i=2*n.RANDOM()-1)*i}while(a>=1);do{s=(o=2*n.RANDOM()-1)*o+(c=2*n.RANDOM()-1)*c}while(s>=1);var u=Math.sqrt((1-a)/s);return e[0]=t*r,e[1]=t*i,e[2]=t*o*u,e[3]=t*c*u,e},t.transformMat4=function(e,t,n){var r=t[0],i=t[1],o=t[2],c=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*c,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*c,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*c,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*c,e},t.transformQuat=function(e,t,n){var r=t[0],i=t[1],o=t[2],c=n[0],a=n[1],s=n[2],u=n[3],v=u*r+a*o-s*i,f=u*i+s*r-c*o,l=u*o+c*i-a*r,d=-c*r-a*i-s*o;return e[0]=v*u+d*-c+f*-s-l*-a,e[1]=f*u+d*-a+l*-c-v*-s,e[2]=l*u+d*-s+v*-a-f*-c,e[3]=t[3],e},t.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},t.equals=function(e,t){var r=e[0],i=e[1],o=e[2],c=e[3],a=t[0],s=t[1],u=t[2],v=t[3];return Math.abs(r-a)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-u)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(c-v)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))},t.sub=r,t.mul=i,t.div=o,t.dist=c,t.sqrDist=a,t.len=s,t.sqrLen=u}.apply(null,r))||(e.exports=i)},cpxo:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n("PHan"),n("FXVB"),n("0LE5"),n("Rdxj"),n("2fXB"),n("O7NG"),n("JjCO"),n("fXZm"),n("GG08")],void 0===(i=function(e,t,n,r,i,o,c,a,s,u,v){function f(e){if(e){var t=e.planes,n=e.points;return{planes:[v.create(t[0]),v.create(t[1]),v.create(t[2]),v.create(t[3]),v.create(t[4]),v.create(t[5])],points:[o.vec3f64.clone(n[0]),o.vec3f64.clone(n[1]),o.vec3f64.clone(n[2]),o.vec3f64.clone(n[3]),o.vec3f64.clone(n[4]),o.vec3f64.clone(n[5]),o.vec3f64.clone(n[6]),o.vec3f64.clone(n[7])]}}return{planes:[v.create(),v.create(),v.create(),v.create(),v.create(),v.create()],points:[o.vec3f64.create(),o.vec3f64.create(),o.vec3f64.create(),o.vec3f64.create(),o.vec3f64.create(),o.vec3f64.create(),o.vec3f64.create(),o.vec3f64.create()]}}function l(e,t,n){void 0===n&&(n=f());for(var r=0;r<6;r++)v.copy(e[r],n.planes[r]);for(r=0;r<8;r++)i.vec3.copy(n.points[r],t[r]);return n}function d(e){var t=e.planes,n=e.points;v.fromPoints(n[4],n[0],n[3],t[0]),v.fromPoints(n[1],n[5],n[6],t[1]),v.fromPoints(n[4],n[5],n[1],t[2]),v.fromPoints(n[3],n[2],n[6],t[3]),v.fromPoints(n[0],n[1],n[2],t[4]),v.fromPoints(n[5],n[4],n[7],t[5])}function p(e,t){for(var n=0;n<6;n++)if(!v.clip(e[n],t))return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.create=f,t.copy=function(e,t){return void 0===t&&(t=f()),l(e.planes,e.points,t)},t.fromValues=l,t.fromMatrix=function(e,t,n){void 0===n&&(n=f());var o=n.points,a=r.mat4.multiply(s.sm4d.get(),t,e);r.mat4.invert(a,a);for(var u=0;u<8;++u){var v=c.vec4.transformMat4(s.sv4d.get(),g[u],a);i.vec3.set(o[u],v[0]/v[3],v[1]/v[3],v[2]/v[3])}return d(n),n},t.recomputePlanes=d,t.intersectsSphere=function(e,t){for(var n=0;n<6;n++)if(v.isSphereFullyInside(e[n],t))return!1;return!0},t.intersectsRay=function(e,t){return p(e,u.fromRay(t,h.get()))},t.intersectsLineSegment=function(e,t,n){return p(e,u.fromLineSegmentAndDirection(t,n,h.get()))},t.intersectsPoint=function(e,t){for(var n=0;n<6;n++)if(v.signedDistance(e[n],t)>0)return!1;return!0},t.intersectsAABB=function(e,t){for(var n=0;n<6;n++)if(v.isAABBFullyInside(e[n],t))return!1;return!0},t.planePointIndices={bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]};var g=[a.vec4f64.fromValues(-1,-1,-1,1),a.vec4f64.fromValues(1,-1,-1,1),a.vec4f64.fromValues(1,1,-1,1),a.vec4f64.fromValues(-1,1,-1,1),a.vec4f64.fromValues(-1,-1,1,1),a.vec4f64.fromValues(1,-1,1,1),a.vec4f64.fromValues(1,1,1,1),a.vec4f64.fromValues(-1,1,1,1)],h=new n.ObjectStack(u.create)}.apply(null,r))||(e.exports=i)},fXZm:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n("PHan"),n("0LE5"),n("JjCO"),n("4p4v")],void 0===(i=function(e,t,n,r,i,o){function c(e){return e?{ray:o.create(e.ray),c0:e.c0,c1:e.c1}:{ray:o.create(),c0:0,c1:Number.MAX_VALUE}}function a(e,t,n,r){return void 0===r&&(r=c()),o.copy(e,r.ray),r.c0=t,r.c1=n,r}function s(e,t,n){void 0===n&&(n=c());var i=r.vec3.length(e.vector);return o.fromValues(e.origin,t,n.ray),n.c0=0,n.c1=i,n}Object.defineProperty(t,"__esModule",{value:!0}),t.create=c,t.wrap=function(e,t,n){var r=u.get();return r.ray=e,r.c0=t,r.c1=n,r},t.copy=function(e,t){return void 0===t&&(t=c()),a(e.ray,e.c0,e.c1,t)},t.fromValues=a,t.fromRay=function(e,t){return void 0===t&&(t=c()),o.copy(e,t.ray),t.c0=0,t.c1=Number.MAX_VALUE,t},t.fromLineSegment=function(e,t){return void 0===t&&(t=c()),s(e,r.vec3.normalize(i.sv3d.get(),e.vector),t)},t.fromLineSegmentAndDirection=s;var u=new n.ObjectStack(function(){return{c0:0,c1:0,ray:null}})}.apply(null,r))||(e.exports=i)},lLWD:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n("SgdR")],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.quatf64=n}.apply(null,r))||(e.exports=i)},rjU6:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n("KY0m"),n("LxLY")],void 0===(i=function(e,t,n,r){function i(e,t){if(null!=e){var n=e.isVisibleBit,r=e.data,i=m(r);return t<r.length*i?h(n,r,t,i):g(e)}return!0}function o(e){return r.isSome(e.component)?e.component:-1}function c(e,t,n,r,o){i(t,r)&&a(e,t,n,n[r],P(n[r+1]),o)}function a(e,t,n,r,i,o){var c=e.length>0?e[e.length-1]:null,a=c?c.range[1]:-1,s=c?c.options:null;if(!(a>=r))if(a+1===r&&s===o)c.range[1]=i;else{var u={range:[r,i],options:o};e.push(u)}}function s(e){return void 0===e&&(e=!0),{isVisibleBit:!e,data:new Uint32Array(0)}}function u(e,t){return!f(e,t)}function v(e,t){return l(e,t,!0)}function f(e,t){return l(e,t,!1)}function l(e,t,n){var r=!1,i=(e=e||x).isVisibleBit,o=e.data,c=j(t),a=m(o),s=o.length*a,u=n===i;if(0===o.length||0===c)r=!u;else if(s<c&&!u)r=!0;else{for(var v=M(a),f=M(0),l=0;l<o.length-1;l++)if(r=!u&&o[l]!==v||u&&o[l]!==f)return r;var d=o.length-1,p=M((c-1)%a+1);r=!u&&(o[d]&p)!==p||u&&(o[d]&p)!==f}return r}function d(e,t){return t<j(e)}function p(e){return e.length>0}function g(e){return!e.isVisibleBit}function h(e,t,n,r){var i=n/r|0,o=n-i*r;return y(t[i],o)===e}function m(e){return 8*e.BYTES_PER_ELEMENT}function b(e,t,n){return e&~(1<<t)|(n?1:0)<<t}function y(e,t){return 0!=(e&1<<t)}function M(e){return O[e]}function P(e){return e-1}function j(e){return Math.max(0,e.length-1)}Object.defineProperty(t,"__esModule",{value:!0}),t.updateVisibility=function(e,t,n,r){if(d(t,n)){null==e&&(e=s());var i=e.isVisibleBit,o=e.data,c=m(o),a=n/c|0,u=n-c*a,v=(j(t)-1)/c|0,f=o,l=r===i;if(!(n<f.length*c)&&l){var p=a+1,g=Math.ceil(1.5*f.length),h=v+1,y=Math.max(p,g);y=Math.min(y,h),(o=new Uint32Array(y)).set(f)}a<o.length&&(o[a]=b(o[a],u,l)),e.data=o}return e},t.getVisibility=i,t.hideAllComponents=function(e){var t;if(null==e)t=s(!1);else{(t=e).isVisibleBit=!0;for(var n=0;n<t.data.length;n++)t.data[n]=0}return t},t.unhideAllComponents=function(e){var t;if(null==e);else{(t=e).isVisibleBit=!1;for(var n=0;n<t.data.length;n++)t.data[n]=0}return t},t.generateVisibleIndexRanges=function(e,t){var n;if(e)if(p(t))if(0===e.data.length){var r=[],i=[[t[0],P(t[t.length-1])]];n=g(e)?i:r}else{n=[];for(var o=e.isVisibleBit,c=e.data,a=m(c),s=c.length*a,u=j(t),v=!1,f=0;f<s&&f<u;f++){var l=h(o,c,f,a);if(l!==v){var d=t[f];l?n.push([d,0]):(y=n[n.length-1])[1]=P(d),v=l}}var b=g(e);if(u>s&&b&&!v)n.push([t[s],P(t[u])]);else if(v){var y=n[n.length-1],M=b?u:Math.min(u,s);y[1]=P(t[M])}}else r=[],i=null,n=g(e)?i:r;else n=null;return n},t.addHighlight=function(e,t,n,r){var i,c={component:t,options:n,id:r};(e=e||[]).push(c);for(var a=o(c),s=e.length-1;s>0&&a<o(e[s-1]);)i=[e[s],e[s-1]],e[s-1]=i[0],e[s]=i[1],--s;return e},t.removeHighlight=function(e,t){if(!e)return e;var n=e.filter(function(e){return e.id!==t});return 0===n.length?null:n},t.generateHighlightedIndexRanges=function(e,t,n){if(!t)return null;if(!p(n))return!e||g(e)?t.map(function(e){return{range:null,options:e.options}}):null;for(var i=n[0],o=P(n[n.length-1]),s=[],v=u(e,n),f=0;f<t.length;++f){var l=t[f].options,d=t[f].component;if(r.isSome(d))c(s,e,n,d,l);else if(v)a(s,0,0,i,o,l);else for(var h=0;h<j(n);++h)c(s,e,n,h,l)}return s.length>0?s:null},t.hasHighlights=function(e,t,n){if(!t)return!1;if(!p(n))return!(e&&!g(e))&&t.length>0;for(var i=u(e,n),o=0,c=t;o<c.length;o++){var a=c[o].component;if(r.isSome(a))return!0;if(i)return!0;if(j(n)>0)return!0}return!1},t.defaultVisibilities=s,t.isAllVisible=u,t.isAllHidden=function(e,t){return!v(e,t)},t.hasVisible=v,t.hasHidden=f;var x=s();t.createOffsets=function(e){return Array.isArray(e)?new Uint32Array(e):e},t.hasComponent=d,t.hasComponents=p;for(var O=[],w=0;w<65;w++)O.push(Math.pow(2,w)-1);t.componentCount=j,t.componentFind=function(e,t){var r=n.binaryIndexOf(e,t,!0);return r>=0?r:null}}.apply(null,r))||(e.exports=i)},"wSO/":function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n("6DRN"),n("51bw"),n("1m5D"),n("lLWD"),n("DIqE"),n("Rdxj"),n("O7NG")],void 0===(i=function(e,t,n,r,i,o,c,a,s){Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t,r){var i=this;this.itemByteSize=e,this.itemCreate=t,this.buffers=[],this.items=[],this.itemsPerBuffer=0,this.itemsPtr=0,this.itemsPerBuffer=Math.ceil(r/this.itemByteSize),this.tickHandle=n.before(function(){return i.reset()})}return e.prototype.destroy=function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=null),this.itemsPtr=0,this.items=null,this.buffers=null},e.prototype.get=function(){0===this.itemsPtr&&n(function(){});for(var e=Math.floor(this.itemsPtr/this.itemsPerBuffer);this.buffers.length<=e;){for(var t=new ArrayBuffer(this.itemsPerBuffer*this.itemByteSize),r=0;r<this.itemsPerBuffer;++r)this.items.push(this.itemCreate(t,r*this.itemByteSize));this.buffers.push(t)}return this.items[this.itemsPtr++]},e.prototype.reset=function(){for(var e=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);this.buffers.length>e;)this.buffers.pop(),this.items.length=this.buffers.length*this.itemsPerBuffer;this.itemsPtr=0},e.createVec2f64=function(t){return void 0===t&&(t=v),new e(16,c.vec2f64.createView,t)},e.createVec3f64=function(t){return void 0===t&&(t=v),new e(24,a.vec3f64.createView,t)},e.createVec4f64=function(t){return void 0===t&&(t=v),new e(32,s.vec4f64.createView,t)},e.createMat3f64=function(t){return void 0===t&&(t=v),new e(72,r.mat3f64.createView,t)},e.createMat4f64=function(t){return void 0===t&&(t=v),new e(128,i.mat4f64.createView,t)},e.createQuatf64=function(t){return void 0===t&&(t=v),new e(32,o.quatf64.createView,t)},Object.defineProperty(e.prototype,"test",{get:function(){return{size:this.buffers.length*this.itemsPerBuffer*this.itemByteSize}},enumerable:!0,configurable:!0}),e}();t.VectorStack=u;var v=4096}.apply(null,r))||(e.exports=i)},xf8T:function(e,t,n){var r,i;r=[n.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(){return[1,0,0,0,1,0,0,0,1]},t.clone=function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},t.fromValues=function(e,t,n,r,i,o,c,a,s){return[e,t,n,r,i,o,c,a,s]},t.createView=function(e,t){return new Float64Array(e,t,9)}}.apply(null,r))||(e.exports=i)}}]);
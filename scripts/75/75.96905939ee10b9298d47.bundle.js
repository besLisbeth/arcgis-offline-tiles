(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/2d/layers/features/tileRenderers/HeatmapTileRenderer":"GCYV","esri/views/2d/layers/features/tileRenderers/support/HeatmapSource":"POfl","esri/views/2d/layers/features/tileRenderers/BaseTileRenderer":"Rt18","esri/renderers/support/heatmapUtils":"Wf0m"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{GCYV:function(e,t,i){var n,r;n=[i.dj.c(e.i),t,i("zOht"),i("qMld"),i("Vx27"),i("Wf0m"),i("DvfX"),i("Rt18"),i("POfl")],void 0===(r=function(e,t,i,n,r,a,o,s,l){Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(t){var i=e.call(this,t)||this;return i._intensityInfo={minPixelIntensity:0,maxPixelIntensity:0},i.featuresView={attributeView:{initialize:function(){},requestUpdate:function(){}},requestRender:function(){}},i._container=new o.BitmapTileContainer(t.tileInfoView),i}return i.__extends(t,e),t.prototype.createTile=function(e){var t=this._container.createTile(e);return this.tileInfoView.getTileCoords(t.bitmap,e),t.bitmap.resolution=this.tileInfoView.getTileResolution(e),t},t.prototype.onConfigUpdate=function(){var e=this,t=this.layer.renderer;if("heatmap"===t.type){var i=t.minPixelIntensity,n=t.maxPixelIntensity;this._intensityInfo.minPixelIntensity=i,this._intensityInfo.maxPixelIntensity=n,this._gradient=a.generateGradient(t.toJSON()),this.tiles.forEach((function(t){var r=t.bitmap.source;r&&(r.minPixelIntensity=i,r.maxPixelIntensity=n,r.gradient=e._gradient,t.bitmap.invalidateTexture())}))}},t.prototype.hitTest=function(){return n.resolve([])},t.prototype.install=function(e){e.addChild(this._container)},t.prototype.uninstall=function(e){this._container.removeAllChildren(),e.removeChild(this._container)},t.prototype.disposeTile=function(e){this._container.removeChild(e),e.destroy()},t.prototype.supportsRenderer=function(e){return e&&"heatmap"===e.type},t.prototype.onTileData=function(e){var t=this.tiles.get(e.tileKey);if(t){var i=e.intensityInfo,n=this._intensityInfo,r=n.minPixelIntensity,a=n.maxPixelIntensity,o=t.bitmap.source||new l.HeatmapSource;o.intensities=i&&i.matrix||null,o.minPixelIntensity=r,o.maxPixelIntensity=a,o.gradient=this._gradient,t.bitmap.source=o,this._container.addChild(t),this.requestUpdate()}},t.prototype.onTileError=function(e){},i.__decorate([r.subclass("esri.views.2d.layers.features.tileRenderers.HeatmapTileRenderer")],t)}(s.default);t.default=u}.apply(null,n))||(e.exports=r)},POfl:function(e,t,i){var n,r;n=[i.dj.c(e.i),t,i("Wf0m")],void 0===(r=function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.gradient=null,this.height=512,this.width=512}return e.prototype.render=function(e){i.drawHeatmap(e,512,this.intensities,this.gradient,this.minPixelIntensity,this.maxPixelIntensity)},e}();t.HeatmapSource=n}.apply(null,n))||(e.exports=r)},Rt18:function(e,t,i){var n,r;n=[i.dj.c(e.i),t,i("zOht"),i("7MDj"),i("Vx27")],void 0===(r=function(e,t,i,n,r){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t){var i=e.call(this,t)||this;return i.tiles=new Map,i}return i.__extends(t,e),t.prototype.destroy=function(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null},Object.defineProperty(t.prototype,"updating",{get:function(){return this.isUpdating()},enumerable:!0,configurable:!0}),t.prototype.acquireTile=function(e){var t=this,i=this.createTile(e);return i.once("isReady",(function(){return t.notifyChange("updating")})),this.tiles.set(e.id,i),i},t.prototype.lockAttributeTextureUpload=function(){},t.prototype.unlockAttributeTextureUpload=function(){},t.prototype.forceAttributeTextureUpload=function(){},t.prototype.forEachTile=function(e){this.tiles.forEach(e)},t.prototype.releaseTile=function(e){this.tiles.delete(e.key.id),this.disposeTile(e)},t.prototype.isUpdating=function(){var e=!0;return this.tiles.forEach((function(t){e=e&&t.isReady})),!e},t.prototype.setHighlight=function(){},t.prototype.invalidateLabels=function(){},t.prototype.requestUpdate=function(){this.layerView.requestUpdate()},i.__decorate([r.property()],t.prototype,"layer",void 0),i.__decorate([r.property()],t.prototype,"layerView",void 0),i.__decorate([r.property()],t.prototype,"tileInfoView",void 0),i.__decorate([r.property()],t.prototype,"updating",null),i.__decorate([r.subclass("esri.views.2d.layers.features.tileRenderers.BaseTileRenderer")],t)}(n.HandleOwner);t.default=a}.apply(null,n))||(e.exports=r)},Wf0m:function(e,t,i){var n,r;n=[i.dj.c(e.i),t,i("J3YA"),i("xoE+")],void 0===(r=function(e,t,i,n){function r(e,t,i,r,a){for(var o=new Uint32Array(e*e),s=("buffer"in t?t:new Float64Array(t)),l=("buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer)),u=l.length/(a-r),p=0;p<s.length;p++){var f=s[p],c=Math.floor((f-r)*u);o[p]=l[n.clamp(c,0,l.length-1)]}return o.buffer}function a(e){for(var t=Math.round(3*e),i=2*e*e,n=new Float64Array(2*t+1),r=0;r<=n.length;r++)n[r]=Math.exp(-Math.pow(r-t,2)/i)/Math.sqrt(2*Math.PI)*(e/2);return n}function o(e,t){return"function"==typeof e?e:e?"string"==typeof t?function(t){return-1*+t[e]}:function(i){return+i[e]+t}:function(){return 1}}Object.defineProperty(t,"__esModule",{value:!0}),t.generateGradient=function(){if(!("document"in i))return function(){return null};var e=document.createElement("canvas"),t=e.getContext("2d");return e.height=512,e.width=1,function(i){t.clearRect(0,0,1,e.height);for(var n=t.createLinearGradient(0,0,0,e.height),r=0,a=i.colorStops;r<a.length;r++){var o=a[r],s=o.ratio,l=o.color;n.addColorStop(Math.max(s,.001),"rgba("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+")")}return t.fillStyle=n,t.fillRect(0,0,1,e.height),t.getImageData(0,0,1,e.height).data}}(),t.calculateHeatmapIntensityInfo=function(e,t,i,n){for(var r,s=t.blurRadius,l=t.fieldOffset,u=t.field,p=new Float64Array(i*n),f=a(s),c=Math.round(3*s),d=Number.NEGATIVE_INFINITY,h=o(u,l),y=0,m=e;y<m.length;y++)for(var v=m[y],g=v.geometry,x=v.attributes,w=g.x-c,_=g.y-c,I=Math.max(0,w),b=Math.max(0,_),T=Math.min(n,g.y+c),P=Math.min(i,g.x+c),R=+h(x),M=b;M<T;M++)for(var U=f[M-_],V=I;V<P;V++){var A=f[V-w];(r=p[M*i+V]+=U*A*R)>d&&(d=r)}return{matrix:p.buffer,max:d}},t.drawHeatmap=function(e,t,i,n,a,o){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);var s=e.getImageData(0,0,t,t);i&&n&&s.data.set(new Uint8ClampedArray(r(t,i,n,a,o))),e.putImageData(s,0,0)},t.createHeatmapImageData=r,t.createKernel=a,t.createValueFunction=o}.apply(null,n))||(e.exports=r)}}]);
(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/2d/engine/vectorTiles/style/StyleDefinition":"+6dI","esri/views/2d/engine/vectorTiles/Feature":"0+xL","esri/views/2d/engine/vectorTiles/Bucket":"2yK+","esri/views/2d/engine/vectorTiles/CircleBucket":"7CQW","esri/views/2d/engine/vectorTiles/style/StyleRepository":"Am75","esri/views/2d/engine/vectorTiles/TextShaping":"BWOx","esri/views/2d/engine/vectorTiles/BackgroundBucket":"EO7D","esri/views/2d/engine/vectorTiles/IndexMemoryBuffer":"Gc+D","esri/views/2d/engine/vectorTiles/style/Filter":"Ismy","esri/views/2d/engine/vectorTiles/style/StyleProperty":"KXmM","esri/views/2d/engine/vectorTiles/WorkerTileHandler":"OBe7","esri/views/2d/engine/vectorTiles/ScriptUtils":"PB92","esri/views/2d/engine/vectorTiles/VertexMemoryBuffer":"RY7r","esri/views/2d/tiling/enums":"UTXC","esri/views/2d/engine/vectorTiles/style/StyleLayer":"UXHw","esri/views/2d/engine/vectorTiles/MemoryBuffer":"ahJM","esri/views/2d/engine/vectorTiles/LineBucket":"c0+/","esri/views/2d/engine/vectorTiles/GeometryUtils":"c9QS","esri/views/2d/engine/vectorTiles/Conflict":"ki27","esri/views/2d/engine/vectorTiles/TileParser":"qDf7","esri/views/2d/engine/vectorTiles/FillBucket":"tVEB","esri/views/2d/engine/vectorTiles/WorkerTile":"ujH7","esri/views/2d/engine/vectorTiles/SourceLayerData":"wodO","esri/views/2d/engine/vectorTiles/SymbolBucket":"yaQU","esri/views/2d/engine/vectorTiles/Placement":"zywo"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"+6dI":function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}},e.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}},e.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"line-cap":{type:"enum",values:["butt","round","square"],default:"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],default:"miter"},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}},e.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",values:["point","line"],default:"point"},"symbol-spacing":{type:"number",minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},"icon-ignore-placement":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",minimum:0,default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"icon-size":{type:"number",minimum:0,default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:"center"},"text-field":{type:"string"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",values:["left","center","right"],default:"center"},"text-keep-upright":{type:"boolean",default:!0},"text-letter-spacing":{type:"number",default:0},"text-line-height":{type:"number",default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",minimum:0,default:2},"text-rotate":{type:"number",default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"text-size":{type:"number",minimum:0,default:16},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:"none"},"text-writing-mode":{type:"array",value:"enum",values:["horizontal","vertical"],default:["horizontal"]}},e.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}},e.backgroundPaintDefinition={"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-pattern":{type:"string"}},e.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"}},e.linePaintDefinition={"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"line-width":{type:"number",minimum:0,default:1}},e.symbolPaintDefinition={"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"}},e.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}},e.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,default:0},"circle-color":{type:"color",default:[0,0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"}},e}();t.StyleDefinition=r}.apply(null,i))||(e.exports=n)},"0+xL":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("6+ni")],void 0===(n=function(e,t,r){return function(){function e(e,t){this.values={};for(var r=t.keys,i=t.values;e.next();)switch(e.tag()){case 1:this.id=e.getUInt64();break;case 2:for(var n=e.getMessage(),a=this.values;!n.empty();){var o=n.getUInt32(),s=n.getUInt32();a[r[o]]=i[s]}n.release();break;case 3:this.type=e.getUInt32();break;case 4:this._pbfGeometry=e.getMessage();break;default:e.skip()}}return e.prototype.getGeometry=function(e){if(void 0!==this._geometry)return this._geometry;if(!this._pbfGeometry)return null;var t,i,n=this._pbfGeometry;this._pbfGeometry=null,e?e.reset(this.type):t=[];for(var a,o=1,s=0,l=0,u=0;!n.empty();){if(0===s){var f=n.getUInt32();o=7&f,s=f>>3}switch(s--,o){case 1:l+=n.getSInt32(),u+=n.getSInt32(),e?e.moveTo(l,u):(i&&t.push(i),(i=[]).push(new r.Point(l,u)));break;case 2:l+=n.getSInt32(),u+=n.getSInt32(),e?e.lineTo(l,u):i.push(new r.Point(l,u));break;case 7:e?e.close():i&&!i[0].equals(l,u)&&i.push(i[0].clone());break;default:throw n.release(),new Error("Invalid path operation")}}return e?a=e.result():(i&&t.push(i),a=t),n.release(),this._geometry=a,a},e}()}.apply(null,i))||(e.exports=n)},"2yK+":function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(e,t){this.layerExtent=4096,this._features=[],this.layer=e,this.zoom=t,this._filter=e.getFeatureFilter()}return e.prototype.pushFeature=function(e){this._filter.filter(e)&&this._features.push(e)},e.prototype.hasFeatures=function(){return this._features.length>0},e}()}.apply(null,i))||(e.exports=n)},"7CQW":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("2yK+")],void 0===(n=function(e,t,r,i){return function(e){function t(t,r,i,n){var a=e.call(this,t,r)||this;return a._circleVertexBuffer=i,a._circleIndexBuffer=n,a}return r.__extends(t,e),Object.defineProperty(t.prototype,"circleIndexStart",{get:function(){return this._circleIndexStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"circleIndexCount",{get:function(){return this._circleIndexCount},enumerable:!0,configurable:!0}),t.prototype.assignBufferInfo=function(e){var t=e;t._circleIndexStart=this._circleIndexStart,t._circleIndexCount=this._circleIndexCount},t.prototype.processFeatures=function(e){var t=this._circleVertexBuffer,r=this._circleIndexBuffer;this._circleIndexStart=r.index,this._circleIndexCount=0;var i=this.layer,n=this.zoom;e&&e.setExtent(this.layerExtent);for(var a=1,o=[1,1,1,1],s=1,l=0,u=1,f=[1,1,1,1],c=1,h=0,y=this._features;h<y.length;h++){var p=y[h],d=p.getGeometry(e);if(d){i.hasDataDrivenRadius&&(a=i.getPaintValue("circle-radius",n,p)),i.hasDataDrivenColor&&(o=i.getPaintValue("circle-color",n,p)),i.hasDataDrivenOpacity&&(s=i.getPaintValue("circle-opacity",n,p)),i.hasDataDrivenStrokeWidth&&(u=i.getPaintValue("circle-stroke-width",n,p)),i.hasDataDrivenStrokeColor&&(f=i.getPaintValue("circle-stroke-color",n,p)),i.hasDataDrivenStrokeOpacity&&(c=i.getPaintValue("circle-stroke-opacity",n,p)),i.hasDataDrivenBlur&&(l=i.getPaintValue("circle-blur",n,p));for(var x=0,v=d;x<v.length;x++){var m=v[x];if(m)for(var _=0,g=m;_<g.length;_++){var D=g[_],I=t.index;t.add(D.x,D.y,0,0,a,o,s,l,u,f,c),t.add(D.x,D.y,0,1,a,o,s,l,u,f,c),t.add(D.x,D.y,1,0,a,o,s,l,u,f,c),t.add(D.x,D.y,1,1,a,o,s,l,u,f,c),r.add(I+0,I+1,I+2),r.add(I+1,I+2,I+3),this._circleIndexCount+=6}}}}},t}(i)}.apply(null,i))||(e.exports=n)},Am75:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("H1tY"),r("UXHw")],void 0===(n=function(e,t,r,i){return function(){function e(t,i){if(this.backgroundBucketIds=[],this._layerByName={},this.styleJSON=t,this.version=parseFloat(t.version),this.sprite=i?i.spriteUrl:t.sprite,this.glyphs=i?i.glyphsUrl:t.glyphs,r("stable-symbol-rendering")){var n=(t.layers||[]).filter((function(e){return e.layout&&e.layout["text-font"]}))[0];n&&(t.layers||[]).forEach((function(e){e.layout&&e.layout["text-font"]&&(e.layout["text-font"]=n.layout["text-font"])}))}if(this.layers=(t.layers||[]).map(e._create),this.layers)for(var a=void 0,o=0;o<this.layers.length;o++)a=this.layers[o],this._layerByName[a.id.toLowerCase()]=a,0===a.type&&this.backgroundBucketIds.push(o);this._identifyRefLayers()}return e.prototype.isPainterDataDriven=function(e){var t=this._layerByName[e.toLowerCase()];return!!t&&t.isPainterDataDriven()},e.prototype.getStyleLayerId=function(e){return e>=this.layers.length?null:this.layers[e].id},e.prototype.getLayoutProperties=function(e){var t=this._layerByName[e.toLowerCase()];return t?t.layout:null},e.prototype.getPaintProperties=function(e){var t=this._layerByName[e.toLowerCase()];return t?t.paint:null},e.prototype.setPaintProperties=function(t,r){var i=this._layerByName[t.toLowerCase()];if(!i)return"";var n=this.layers.indexOf(i);this.styleJSON.layers[n].paint=r;var a={id:i.id,type:i.typeName,source:i.source,sourceLayer:i["source-layer"],minzoom:i.minzoom,maxzoom:i.maxzoom,filter:i.filter,layout:i.layout,paint:r},o=e._recreateLayer(a,i);return this.layers[n]=o,this._layerByName[i.id.toLowerCase()]=o,i.id},e.prototype.setLayoutProperties=function(t,r){var i=this._layerByName[t.toLowerCase()];if(!i)return"";var n=this.layers.indexOf(i);this.styleJSON.layers[n].layout=r;var a={id:i.id,type:i.typeName,source:i.source,sourceLayer:i["source-layer"],minzoom:i.minzoom,maxzoom:i.maxzoom,filter:i.filter,layout:r,paint:i.paint},o=e._recreateLayer(a,i);return this.layers[n]=o,this._layerByName[i.id.toLowerCase()]=o,i.id},e.prototype._identifyRefLayers=function(){for(var e=[],t=[],r=0,i=0,n=this.layers;i<n.length;i++){var a=n[i];if(1===a.type){var o=a,s=a.source+"|"+a.sourceLayer;s+="|"+JSON.stringify(a.layout&&a.layout.visibility),s+="|"+JSON.stringify(a.minzoom),s+="|"+JSON.stringify(a.maxzoom),s+="|"+JSON.stringify(a.filter),(o.hasDataDrivenFill||o.hasDataDrivenOutline)&&(s+="|"+JSON.stringify(r)),e.push({key:s,layer:a})}if(2===a.type){var l=a;s=a.source+"|"+a.sourceLayer,s+="|"+JSON.stringify(a.layout&&a.layout.visibility),s+="|"+JSON.stringify(a.minzoom),s+="|"+JSON.stringify(a.maxzoom),s+="|"+JSON.stringify(a.filter),s+="|"+JSON.stringify(a.layout&&a.layout["line-cap"]),s+="|"+JSON.stringify(a.layout&&a.layout["line-join"]),l.hasDataDrivenLine&&(s+="|"+JSON.stringify(r)),t.push({key:s,layer:a})}++r}this._assignRefLayers(e),this._assignRefLayers(t)},e.prototype._assignRefLayers=function(e){var t,r;e.sort((function(e,t){return e.key<t.key?-1:e.key>t.key?1:0}));for(var i=e.length,n=0;n<i;n++){var a=e[n];if(a.key===t)a.layer.refLayerId=r;else if(t=a.key,r=a.layer.id,1===a.layer.type&&!a.layer.getPaintProperty("fill-outline-color"))for(var o=n+1;o<i;o++){var s=e[o];if(s.key!==t)break;if(s.layer.getPaintProperty("fill-outline-color")){e[n]=s,e[o]=a,r=s.layer.id;break}}}},e._create=function(e,t,r){var n=1-(1+t)*(1/(r.length+1));switch(e.type){case"background":return new i.BackgroundStyleLayer(0,e,n);case"fill":return new i.FillStyleLayer(1,e,n);case"line":return new i.LineStyleLayer(2,e,n);case"symbol":return new i.SymbolStyleLayer(3,e,n);case"raster":throw new Error("Unsupported vector tile raster layer");case"circle":return new i.CircleStyleLayer(4,e,n)}throw new Error("Unknown vector tile layer")},e._recreateLayer=function(e,t){switch(e.type){case"background":return new i.BackgroundStyleLayer(0,e,t.z);case"fill":return new i.FillStyleLayer(1,e,t.z);case"line":return new i.LineStyleLayer(2,e,t.z);case"symbol":return new i.SymbolStyleLayer(3,e,t.z);case"raster":throw new Error("Unsupported vector tile raster layer");case"circle":return new i.CircleStyleLayer(4,e,t.z)}},e}()}.apply(null,i))||(e.exports=n)},BWOx:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("PB92"),r("6cAc")],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SDF_GLYPH_SIZE=24,t.SDF_GLYPH_BASELINE=17;var n=function(){function e(e,t,r,i,n,a,o){this._glyphItems=e,this._maxWidth=t,this._lineHeight=r,this._letterSpacing=i,this._hAnchor=n,this._vAnchor=a,this._justify=o}return e.prototype.getShaping=function(e,t,i){for(var n=this._letterSpacing,a=this._lineHeight,o=this._justify,s=this._maxWidth,l=[],u=0,f=0,c=0,h=0,y=-1,p=0,d=-1,x=e.length,v=0;v<x;v++){var m=e.charCodeAt(v),_=i&&r.hasVerticalOrientation(m);if(10!==m){for(var g=void 0,D=0,I=this._glyphItems;D<I.length&&!(g=I[D][m]);D++);if(g){if(l.push({codePoint:m,x:u,y:f,vertical:_,glyphMosaicItem:g}),u+=g.metrics.advance+n,s>0&&u>s&&d>=0){var b=d+1;B=l[b].x,p=Math.max(B,p);for(var V=b;V<l.length;V++)t?l[V].y-=a:l[V].y+=a,l[V].x-=B;o&&this._applyJustification(l,h,d),t?f-=a:f+=a,u-=B,++c,h=b,d=-1}++y,32===m&&(d=l.length-1)}}else{if(v===x-1)continue;if(y>=h){var B=(w=l[y]).x+w.glyphMosaicItem.metrics.advance;p=Math.max(B,p),o&&this._applyJustification(l,h,y),h=l.length}t?f-=a:f+=a,u=0,++c}}if(y>=h){var w,P=(w=l[y]).x+w.glyphMosaicItem.metrics.advance;p=Math.max(p,P),o&&this._applyJustification(l,h,y)}if(l.length>0){var L=(o-this._hAnchor)*p,S=(-this._vAnchor*(c+1)+.5)*a;t&&c&&(S+=c*a);for(var M=0,C=l;M<C.length;M++){var k=C[M];k.x+=L,k.y+=S}}return l},e.getTextBox=function(e,r){if(!e.length)return null;for(var i=1/0,n=1/0,a=0,o=0,s=0,l=e;s<l.length;s++){var u=l[s],f=u.glyphMosaicItem.metrics.advance,c=u.x,h=u.y-t.SDF_GLYPH_BASELINE,y=c+f,p=h+r;i=Math.min(i,c),a=Math.max(a,y),n=Math.min(n,h),o=Math.max(o,p)}return{x:i,y:n,width:a-i,height:o-n}},e.getBox=function(e){if(!e.length)return null;for(var t=1/0,r=1/0,i=0,n=0,a=0,o=e;a<o.length;a++){var s=o[a],l=s.glyphMosaicItem.metrics,u=l.height,f=l.left,c=l.top,h=l.width,y=s.x,p=s.y-(u-Math.abs(c)),d=y+h+f,x=p+u;t=Math.min(t,y),i=Math.max(i,d),r=Math.min(r,p),n=Math.max(n,x)}return{x:t,y:r,width:i-t,height:n-r}},e.addDecoration=function(e,t){var r=e.length;if(0!==r){for(var n=e[0].x+e[0].glyphMosaicItem.metrics.left,a=e[0].y,o=1;o<r;o++){var s=e[o];if(s.y!==a){var l=e[o-1].x+e[o-1].glyphMosaicItem.metrics.left+e[o-1].glyphMosaicItem.metrics.width;e.push({codePoint:0,x:n,y:a+t-3,vertical:!1,glyphMosaicItem:{sdf:!0,rect:new i.default(4,0,4,8),metrics:{width:l-n,height:8,left:0,top:0,advance:0},page:0,code:0}}),a=s.y,n=s.x+s.glyphMosaicItem.metrics.left}}var u=e[r-1].x+e[r-1].glyphMosaicItem.metrics.left+e[r-1].glyphMosaicItem.metrics.width;e.push({codePoint:0,x:n,y:a+t-3,vertical:!1,glyphMosaicItem:{sdf:!0,rect:new i.default(4,0,4,8),metrics:{width:u-n,height:8,left:0,top:0,advance:0},page:0,code:0}})}},e.prototype._applyJustification=function(e,r,i){for(var n=e[i],a=n.vertical?t.SDF_GLYPH_SIZE:n.glyphMosaicItem.metrics.advance,o=(n.x+a)*this._justify,s=r;s<=i;s++)e[s].x-=o},e}();t.TextShaping=n}.apply(null,i))||(e.exports=n)},EO7D:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("2yK+")],void 0===(n=function(e,t,r,i){return function(e){function t(t,r){return e.call(this,t,r)||this}return r.__extends(t,e),t.prototype.processFeatures=function(){},t.prototype.assignBufferInfo=function(){},t}(i)}.apply(null,i))||(e.exports=n)},"Gc+D":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("ahJM")],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){return e.call(this,12)||this}return r.__extends(t,e),t.prototype.add=function(e,t,r){var i=this.array;i.push(e),i.push(t),i.push(r)},t}(i);t.TriangleIndexBuffer=n;var a=function(e){function t(){return e.call(this,4)||this}return r.__extends(t,e),t.prototype.add=function(e){this.array.push(e)},t}(i);t.PointElementMemoryBuffer=a}.apply(null,i))||(e.exports=n)},Ismy:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(t,r,i){this._op=t,"$type"===r?(this._val=i instanceof Array?i.map((function(t){return e._types.indexOf(t)})):e._types.indexOf(i),this._op+=11):(this._key=r,this._val=i)}return e.prototype.filter=function(e){switch(this._op){case 0:return this._val;case 1:return e.values[this._key]===this._val;case 2:return e.values[this._key]!==this._val;case 3:return e.values[this._key]<this._val;case 4:return e.values[this._key]>this._val;case 5:return e.values[this._key]<=this._val;case 6:return e.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(e.values[this._key]);case 8:return-1===this._val.indexOf(e.values[this._key]);case 9:for(var t=0,r=this._val;t<r.length;t++)if(r[t].filter(e))return!0;return!1;case 10:for(var i=0,n=this._val;i<n.length;i++)if(!n[i].filter(e))return!1;return!0;case 11:for(var a=0,o=this._val;a<o.length;a++)if(o[a].filter(e))return!1;return!0;case 12:return e.type===this._val;case 13:return e.type!==this._val;case 14:return e.type<this._val;case 15:return e.type>this._val;case 16:return e.type>=this._val;case 17:return e.type<=this._val;case 18:return-1!==this._val.indexOf(e.type);case 19:return-1===this._val.indexOf(e.type);case 20:return void 0!==e.values[this._key];case 21:return void 0===e.values[this._key]}},e.createFilter=function(t){if(!t)return new e(0,void 0,!0);var r=t[0];if(t.length<=1)return new e(0,void 0,"any"!==r);switch(r){case"==":return new e(1,t[1],t[2]);case"!=":return new e(2,t[1],t[2]);case">":return new e(4,t[1],t[2]);case"<":return new e(3,t[1],t[2]);case">=":return new e(6,t[1],t[2]);case"<=":return new e(5,t[1],t[2]);case"in":return new e(7,t[1],t.slice(2));case"!in":return new e(8,t[1],t.slice(2));case"any":return new e(9,void 0,t.slice(1).map(e.createFilter.bind(this)));case"all":return new e(10,void 0,t.slice(1).map(e.createFilter.bind(this)));case"none":return new e(11,void 0,t.slice(1).map(e.createFilter.bind(this)));case"has":return new e(20,t[1],void 0);case"!has":return new e(21,t[1],void 0);default:throw new Error("invalid operator: "+r)}},e._types=["Unknown","Point","LineString","Polygon"],e}()}.apply(null,i))||(e.exports=n)},KXmM:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("QDcU"),r("c9QS")],void 0===(n=function(e,t,r,i){return function(){function e(t,r){var i;switch(this.isDataDriven=!1,t.type){case"number":i=!0;break;case"color":i=!0,r=e._parseColor(r);break;case"array":i="number"===t.value;break;default:i=!1}null==r&&(r=t.default),i&&"interval"===r.type&&(i=!1);var n=r&&r.stops&&r.stops.length>0;if(n)for(var a=0,o=r.stops;a<o.length;a++){var s=o[a];s[1]=this._validate(s[1],t)}if(this.isDataDriven=!!r&&!!r.property,this.isDataDriven)if(void 0!==r.default&&(r.default=this._validate(r.default,t)),n)switch(r.type){case"identity":this.getValue=this._buildIdentity(r,t);break;case"categorical":this.getValue=this._buildCategorical(r,t);break;default:this.getValue=i?this._buildInterpolate(r,t):this._buildInterval(r,t)}else this.getValue=this._buildIdentity(r,t);else n?this.getValue=i?this._buildZoomInterpolate(r):this._buildZoomInterval(r):(r=this._validate(r,t),this.getValue=this._buildSimple(r))}return e.prototype._validate=function(e,t){if("number"===t.type){if(e<t.minimum)return t.minimum;if(e>t.maximum)return t.maximum}return e},e.prototype._buildSimple=function(e){return function(){return e}},e.prototype._buildIdentity=function(t,r){var i=this;return function(n,a){var o;return a&&(o=a.values[t.property],"color"===r.type&&(o=e._parseColor(o))),void 0===o&&(o=t.default),void 0!==o?i._validate(o,r):r.default}},e.prototype._buildCategorical=function(e,t){var r=this;return function(i,n){var a;return n&&(a=n.values[e.property]),void 0!==(a=r._categorical(a,e.stops))?a:void 0!==e.default?e.default:t.default}},e.prototype._buildInterval=function(e,t){var r=this;return function(i,n){var a;return n&&(a=n.values[e.property]),"number"==typeof a?r._interval(a,e.stops):void 0!==e.default?e.default:t.default}},e.prototype._buildInterpolate=function(e,t){var r=this;return function(i,n){var a;return n&&(a=n.values[e.property]),"number"==typeof a?r._interpolate(a,e.stops,e.base||1):void 0!==e.default?e.default:t.default}},e.prototype._buildZoomInterpolate=function(e){var t=this;return function(r){return t._interpolate(r,e.stops,e.base||1)}},e.prototype._buildZoomInterval=function(e){var t=this;return function(r){return t._interval(r,e.stops)}},e.prototype._categorical=function(e,t){for(var r=t.length,i=0;i<r;i++)if(t[i][0]===e)return t[i][1]},e.prototype._interval=function(e,t){for(var r=t.length,i=0,n=0;n<r&&t[n][0]<=e;n++)i=n;return t[i][1]},e.prototype._interpolate=function(e,t,r){for(var n,a,o=t.length,s=0;s<o;s++){var l=t[s];if(!(l[0]<=e)){a=l;break}n=l}if(n&&a){var u=a[0]-n[0],f=e-n[0],c=1===r?f/u:(Math.pow(r,f)-1)/(Math.pow(r,u)-1);if(Array.isArray(n[1])){var h=n[1],y=a[1],p=[];for(s=0;s<h.length;s++)p.push(i.interpolate(h[s],y[s],c));return p}return i.interpolate(n[1],a[1],c)}return n?n[1]:a?a[1]:void 0},e._isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},e._parseColor=function(t){if(Array.isArray(t))return t;if("string"==typeof t){var i=new r(t);return this._isEmpty(i)?void 0:r.toUnitRGBA(i)}return t&&t.default&&(t.default=e._parseColor(t.default)),t&&t.stops&&(t.stops=t.stops.map((function(t){return[t[0],e._parseColor(t[1])]}))),t},e}()}.apply(null,i))||(e.exports=n)},OBe7:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("qMld"),r("ujH7"),r("Am75")],void 0===(n=function(e,t,r,i,n){return function(){function e(){this._tiles=new Map,this._spriteInfo={},this._glyphInfo={}}return e.prototype.reset=function(){this._spriteInfo={},this._glyphInfo={};var e=this._tiles;return e.forEach((function(e){return e.setObsolete()})),e.clear(),r.resolve()},e.prototype.getLayers=function(){return this._layers},e.prototype.setLayers=function(e){var t=new n(e.style);return this._layers=t.layers,this._enableCachingTiles=e.enableCachingTiles,r.resolve({data:""})},e.prototype.createTileAndParse=function(e,t){for(var n=this,a=e.key,o=new i,s={},l=0,u=Object.keys(e.sourceName2DataAndRefKey);l<u.length;l++){var f=u[l],c=e.sourceName2DataAndRefKey[f];s[f]=c.refKey}return o.initialize(a,s,this,e.rotation),o.setDataAndParse(e.sourceName2DataAndRefKey,t).then((function(e){return n._enableCachingTiles&&n._tiles.set(a,o),e})).catch((function(e){if(o.setObsolete(),o.release(),!r.isAbortError(e))throw e}))},e.prototype.updateSymbols=function(e,t){var i=this._tiles.get(e.key);return i?i.updateSymbols(e.rotation,t):r.reject()},e.prototype.updateStyle=function(e,t){var i=new n(e);return this._layers=i.layers,this._tiles.forEach((function(e){e.reparse(t).then((function(r){t.client.invoke("updateTileData",{tileId:e.tileKey,tileData:r.result})}))})),r.resolve({data:""})},e.prototype.destructTileData=function(e){if(this._enableCachingTiles){var t=this._tiles.get(e);t&&(t.release(),this._tiles.delete(e))}},e.prototype.fetchSprites=function(e,t,i){var n=[],a=this._spriteInfo;return e.forEach((function(e){void 0===a[e]&&n.push(e)})),0===n.length?r.resolve():t.invoke("getSprites",n,{signal:i&&i.signal}).then((function(e){for(var t in e){var r=e[t];a[t]=r}}))},e.prototype.getSpriteItems=function(){return this._spriteInfo},e.prototype.fetchGlyphs=function(e,t,i,n,a){var o=[],s=this._glyphInfo[t];return s?i.forEach((function(e){s[e]||o.push(e)})):(s=this._glyphInfo[t]=[],i.forEach((function(e){return o.push(e)}))),0===o.length?r.resolve():n.invoke("getGlyphs",{tileID:e,font:t,codePoints:o},a).then((function(e){for(var t=0;t<e.length;t++)e[t]&&(s[t]=e[t])}))},e.prototype.getGlyphItems=function(e){return this._glyphInfo[e]},e}()}.apply(null,i))||(e.exports=n)},PB92:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.hasVerticalOrientation=function(e){return 746===e||747===e||!(e<4352)&&(e>=12704&&e<=12735||e>=12544&&e<=12591||e>=65072&&e<=65103&&!(e>=65097&&e<=65103)||e>=63744&&e<=64255||e>=13056&&e<=13311||e>=11904&&e<=12031||e>=12736&&e<=12783||e>=12288&&e<=12351&&!(e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||e>=13312&&e<=19903||e>=19968&&e<=40959||e>=12800&&e<=13055||e>=12592&&e<=12687||e>=43360&&e<=43391||e>=55216&&e<=55295||e>=4352&&e<=4607||e>=44032&&e<=55215||e>=12352&&e<=12447||e>=12272&&e<=12287||e>=12688&&e<=12703||e>=12032&&e<=12255||e>=12784&&e<=12799||e>=12448&&e<=12543&&12540!==e||e>=65280&&e<=65519&&!(65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||e>=65104&&e<=65135&&!(e>=65112&&e<=65118||e>=65123&&e<=65126)||e>=5120&&e<=5759||e>=6320&&e<=6399||e>=65040&&e<=65055||e>=19904&&e<=19967||e>=40960&&e<=42127||e>=42128&&e<=42191)},t.isWhiteSpace=function(e){return 32===e}}.apply(null,i))||(e.exports=n)},RY7r:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("c9QS"),r("ahJM")],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0});var a=new Float32Array(1),o=new Uint32Array(a.buffer),s=function(e){function t(t){var r=e.call(this,t?20:12)||this;return r._isDataDriven=t,r}return r.__extends(t,e),t.prototype.isDataDriven=function(){return this._isDataDriven},t.prototype.add=function(e,t,r,i,s,l,u,f){var c=this.array,h=n.i1616to32(e,t);if(c.push(h),h=n.i8888to32(Math.round(31*r),Math.round(31*i),Math.round(31*s),Math.round(31*l)),c.push(h),h=n.i1616to32(u,0),c.push(h),this._isDataDriven){if(!f)throw new Error("Expecting data driven values.");var y=f.color,p=y[3]*f.opacity*255;c.push(n.i8888to32(y[0]*p,y[1]*p,y[2]*p,p)),a[0]=f.size,c.push(o[0])}},t}(n);t.LineVertexBuffer=s;var l=function(e){function t(t){var r=e.call(this,t?8:4)||this;return r._isDataDriven=t,r}return r.__extends(t,e),t.prototype.isDataDriven=function(){return this._isDataDriven},t.prototype.add=function(e,t,r){var i=this.array;if(i.push(n.i1616to32(e,t)),this._isDataDriven){if(!r)throw new Error("Expecting data driven values.");var a=r.color,o=a[3]*r.opacity*255;i.push(n.i8888to32(a[0]*o,a[1]*o,a[2]*o,o))}},t}(n);t.FillVertexBuffer=l;var u=function(e){function t(t){var r=e.call(this,t?12:8)||this;return r._isDataDriven=t,r}return r.__extends(t,e),t.prototype.isDataDriven=function(){return this._isDataDriven},t.prototype.add=function(e,t,r,i,a,o,s){var l=this.array,u=this.index,f=n.i1616to32(e,t);if(l.push(f),f=n.i8888to32(Math.round(15*r),Math.round(15*i),a,o),l.push(f),this._isDataDriven){if(!s)throw new Error("Expecting data driven values.");var c=s.color,h=c[3]*s.opacity*255;l.push(n.i8888to32(c[0]*h,c[1]*h,c[2]*h,h))}return u},t}(n);t.OutlineVertexBuffer=u;var f=function(e){function t(t){var r=e.call(this,t?28:20)||this;return r._isDataDriven=t,r}return r.__extends(t,e),t.prototype.isDataDriven=function(){return this._isDataDriven},t.prototype.add=function(e,t,r,s,l,u,f,c,h,y,p,d,x){var v=this.array,m=n.i1616to32(e,t);if(v.push(m),m=n.i1616to32(Math.round(8*r),Math.round(8*s)),v.push(m),m=n.i8888to32(l/4,u/4,0,0),v.push(m),m=n.i8888to32(Math.ceil(10*d),i.radToByte(f),10*y,Math.min(10*p,255)),v.push(m),m=n.i8888to32(c,h,0,0),v.push(m),this._isDataDriven){if(!x)throw new Error("Expecting data driven values.");var _=x.color,g=_[3]*x.opacity*255;v.push(n.i8888to32(_[0]*g,_[1]*g,_[2]*g,g)),a[0]=x.size,v.push(o[0])}},t}(n);t.SymbolVertexBuffer=f;var c=function(e){function t(){return e.call(this,16)||this}return r.__extends(t,e),t.prototype.add=function(e,t,r,i,a,o,s,l,u,f,c){var h=this.array,y=n.i1616to32(2*e+r,2*t+i);h.push(y);var p=o[3]*s*255;y=n.i8888to32(o[0]*p,o[1]*p,o[2]*p,p),h.push(y);var d=f[3]*c*255;y=n.i8888to32(f[0]*d,f[1]*d,f[2]*d,d),h.push(y),y=n.i8888to32(Math.min(32*l,255),Math.min(4*u,255),Math.min(a,255),0),h.push(y)},t}(n);t.CircleVertexBuffer=c}.apply(null,i))||(e.exports=n)},UTXC:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.NO_DATA=1]="NO_DATA",e[e.READY=2]="READY",e[e.MODIFIED=3]="MODIFIED",e[e.INVALID=4]="INVALID"}(t.TileStatus||(t.TileStatus={}))}.apply(null,i))||(e.exports=n)},UXHw:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("Ismy"),r("+6dI"),r("KXmM"),r("tI6k")],void 0===(n=function(e,t,r,i,n,a,o){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t,r){switch(this.type=e,this.typeName=t.type,this.id=t.id,this.source=t.source,this.sourceLayer=t["source-layer"],this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,this.filter=t.filter,this.layout=t.layout,this.paint=t.paint,this.z=r,e){case 0:this._layoutDefinition=n.StyleDefinition.backgroundLayoutDefinition,this._paintDefinition=n.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=n.StyleDefinition.fillLayoutDefinition,this._paintDefinition=n.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=n.StyleDefinition.lineLayoutDefinition,this._paintDefinition=n.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=n.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=n.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=n.StyleDefinition.circleLayoutDefinition,this._paintDefinition=n.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout),this._paintProperties=this._parsePaint(this.paint)}return e.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=i.createFilter(this.filter)},e.prototype.getLayoutProperty=function(e){var t=this._layoutProperties;if(t)return t[e]},e.prototype.getPaintProperty=function(e){var t=this._paintProperties;if(t)return t[e]},e.prototype.getLayoutValue=function(e,t,r){var i,n=this._layoutProperties;if(n){var a=n[e];a&&(i=a.getValue(t,r))}var o=this._layoutDefinition[e];return void 0===i&&(i=o.default),"enum"===o.type?i=o.values.indexOf(i):"array"===o.type&&"enum"===o.value&&(i=i.map((function(e){return o.values.indexOf(e)}))),i},e.prototype.getPaintValue=function(e,t,r){var i,n=this._paintProperties;if(n){var a=n[e];a&&(i=a.getValue(t,r))}var o=this._paintDefinition[e];return void 0===i&&(i=o.default),"enum"===o.type&&(i=o.values.indexOf(i)),i},e.prototype.isPainterDataDriven=function(){var e=this._paintProperties;if(e)for(var t in e)if(e[t].isDataDriven)return!0;return!1},e.prototype._parseLayout=function(e){var t={};for(var r in e){var i=this._layoutDefinition[r];i&&(t[r]=new a(i,e[r]))}return t},e.prototype._parsePaint=function(e){var t={};for(var r in e){var i=this._paintDefinition[r];i&&(t[r]=new a(i,e[r]))}return t},e}();t.StyleLayer=s;var l=function(e){function t(t,r,i){return e.call(this,t,r,i)||this}return r.__extends(t,e),t}(s);t.BackgroundStyleLayer=l;var u=function(e){function t(t,r,i){var n=e.call(this,t,r,i)||this,a=n.getPaintProperty("fill-color");n.hasDataDrivenColor=!!a&&a.isDataDriven;var o=n.getPaintProperty("fill-opacity");n.hasDataDrivenOpacity=!!o&&o.isDataDriven,n.hasDataDrivenFill=n.hasDataDrivenColor||n.hasDataDrivenOpacity;var s=n.getPaintProperty("fill-outline-color");return n.outlineUsesFillColor=!s,n.hasDataDrivenOutlineColor=!!s&&s.isDataDriven,n.hasDataDrivenOutline=(s?n.hasDataDrivenOutlineColor:n.hasDataDrivenColor)||n.hasDataDrivenOpacity,n}return r.__extends(t,e),t}(s);t.FillStyleLayer=u;var f=function(e){function t(t,r,i){var a=e.call(this,t,r,i)||this,s=a.getPaintProperty("line-color");a.hasDataDrivenColor=!!s&&s.isDataDriven;var l=a.getPaintProperty("line-opacity");a.hasDataDrivenOpacity=!!l&&l.isDataDriven;var u=a.getPaintProperty("line-width");a.hasDataDrivenWidth=!!u&&u.isDataDriven,a.hasDataDrivenLine=a.hasDataDrivenColor||a.hasDataDrivenOpacity||a.hasDataDrivenWidth;var f=r.paint["line-width"];return f||(f=n.StyleDefinition.linePaintDefinition["line-width"].default),a.isThinLine=!a.hasDataDrivenWidth&&"number"==typeof f&&f<o.THIN_LINE_THRESHOLD,a}return r.__extends(t,e),t}(s);t.LineStyleLayer=f;var c=function(e){function t(t,r,i){var n=e.call(this,t,r,i)||this,a=n.getPaintProperty("icon-color");n.hasDataDrivenIconColor=!!a&&a.isDataDriven;var o=n.getPaintProperty("icon-opacity");n.hasDataDrivenIconOpacity=!!o&&o.isDataDriven;var s=n.getLayoutProperty("icon-size");n.hasDataDrivenIconSize=!!s&&s.isDataDriven,n.hasDataDrivenIcon=n.hasDataDrivenIconColor||n.hasDataDrivenIconOpacity||n.hasDataDrivenIconSize;var l=n.getPaintProperty("text-color");n.hasDataDrivenTextColor=!!l&&l.isDataDriven;var u=n.getPaintProperty("text-opacity");n.hasDataDrivenTextOpacity=!!u&&u.isDataDriven;var f=n.getLayoutProperty("text-size");return n.hasDataDrivenTextSize=!!f&&f.isDataDriven,n.hasDataDrivenText=n.hasDataDrivenTextColor||n.hasDataDrivenTextOpacity||n.hasDataDrivenTextSize,n}return r.__extends(t,e),t}(s);t.SymbolStyleLayer=c;var h=function(e){function t(t,r,i){var n=e.call(this,t,r,i)||this,a=n.getPaintProperty("circle-radius");n.hasDataDrivenRadius=!!a&&a.isDataDriven;var o=n.getPaintProperty("circle-color");n.hasDataDrivenColor=!!o&&o.isDataDriven;var s=n.getPaintProperty("circle-opacity");n.hasDataDrivenOpacity=!!s&&s.isDataDriven;var l=n.getPaintProperty("circle-stroke-width");n.hasDataDrivenStrokeWidth=!!l&&l.isDataDriven;var u=n.getPaintProperty("circle-stroke-color");n.hasDataDrivenStrokeColor=!!u&&u.isDataDriven;var f=n.getPaintProperty("circle-stroke-opacity");n.hasDataDrivenStrokeOpacity=!!f&&f.isDataDriven;var c=n.getPaintProperty("circle-blur");return n.hasDataDrivenBlur=!!c&&c.isDataDriven,n}return r.__extends(t,e),t}(s);t.CircleStyleLayer=h;t.LineLayout=function(e,t,r){this.cap=e.getLayoutValue("line-cap",t,r),this.join=e.getLayoutValue("line-join",t,r),this.miterLimit=e.getLayoutValue("line-miter-limit",t,r),this.roundLimit=e.getLayoutValue("line-round-limit",t,r)};t.IconLayout=function(e,t,r,i){this.allowOverlap=e.getLayoutValue("icon-allow-overlap",t,i),this.ignorePlacement=e.getLayoutValue("icon-ignore-placement",t,i),this.optional=e.getLayoutValue("icon-optional",t,i),this.rotationAlignment=e.getLayoutValue("icon-rotation-alignment",t,i),this.size=e.getLayoutValue("icon-size",t,i),this.rotate=e.getLayoutValue("icon-rotate",t,i),this.padding=e.getLayoutValue("icon-padding",t,i),this.keepUpright=e.getLayoutValue("icon-keep-upright",t,i),this.offset=e.getLayoutValue("icon-offset",t,i),2===this.rotationAlignment&&(this.rotationAlignment=r?0:1)};t.TextLayout=function(e,t,r,i){this.allowOverlap=e.getLayoutValue("text-allow-overlap",t,i),this.ignorePlacement=e.getLayoutValue("text-ignore-placement",t,i),this.optional=e.getLayoutValue("text-optional",t,i),this.rotationAlignment=e.getLayoutValue("text-rotation-alignment",t,i),this.fontArray=e.getLayoutValue("text-font",t,i),this.maxWidth=e.getLayoutValue("text-max-width",t,i),this.lineHeight=e.getLayoutValue("text-line-height",t,i),this.letterSpacing=e.getLayoutValue("text-letter-spacing",t,i),this.justify=e.getLayoutValue("text-justify",t,i),this.anchor=e.getLayoutValue("text-anchor",t,i),this.maxAngle=e.getLayoutValue("text-max-angle",t,i),this.size=e.getLayoutValue("text-size",t,i),this.rotate=e.getLayoutValue("text-rotate",t,i),this.padding=e.getLayoutValue("text-padding",t,i),this.keepUpright=e.getLayoutValue("text-keep-upright",t,i),this.transform=e.getLayoutValue("text-transform",t,i),this.offset=e.getLayoutValue("text-offset",t,i),this.writingMode=e.getLayoutValue("text-writing-mode",t,i),2===this.rotationAlignment&&(this.rotationAlignment=r?0:1)}}.apply(null,i))||(e.exports=n)},ahJM:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(e){this._array=[],this._stride=e}return Object.defineProperty(e.prototype,"array",{get:function(){return this._array},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.array.length=0},e.prototype.toBuffer=function(){return new Uint32Array(this._array).buffer},e.i1616to32=function(e,t){return 65535&e|t<<16},e.i8888to32=function(e,t,r,i){return 255&e|(255&t)<<8|(255&r)<<16|i<<24},e.i8816to32=function(e,t,r){return 255&e|(255&t)<<8|r<<16},e}()}.apply(null,i))||(e.exports=n)},"c0+/":function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("H1tY"),r("2yK+"),r("UXHw"),r("tBzM"),r("8Lwu")],void 0===(n=function(e,t,r,i,n,a,o,s){i("esri-tiles-performance")&&setInterval((function(){}),1e4);var l=function(e){function t(t,r,i,n){var a=e.call(this,t,r)||this;if(a._tessellationOptions={},a.tessellationProperties={_lineVertexBuffer:null,_lineIndexBuffer:null,_hasPattern:null,_ddValues:null,_capType:null,_joinType:null,_miterLimitCosine:null,_roundLimitCosine:null},t.hasDataDrivenLine!==i.isDataDriven())throw new Error("incompatible line buffer");return a.tessellationProperties._lineVertexBuffer=i,a.tessellationProperties._lineIndexBuffer=n,a.tessellationProperties._hasPattern=t.getPaintValue("line-pattern",a.zoom)||t.getPaintValue("line-dasharray",a.zoom).length>0,a._isThinLine=t.isThinLine,a._isThinLine?a._tessellationCallbacks={vertex:u(a.tessellationProperties),bridge:f(a.tessellationProperties)}:a._tessellationCallbacks={vertex:c(a.tessellationProperties),bridge:h(a.tessellationProperties)},a}return r.__extends(t,e),Object.defineProperty(t.prototype,"lineIndexStart",{get:function(){return this._lineIndexStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineIndexCount",{get:function(){return this._lineIndexCount},enumerable:!0,configurable:!0}),t.prototype.assignBufferInfo=function(e){var t=e;t._lineIndexStart=this._lineIndexStart,t._lineIndexCount=this._lineIndexCount},t.prototype.processFeatures=function(e){this._lineIndexStart=this.tessellationProperties._lineIndexBuffer.index,this._lineIndexCount=0;var t=this.layer,r=this.zoom,i=t.hasDataDrivenLine;e&&e.setExtent(this.layerExtent);for(var n=[1,1,1,1],l=1,u=1,f=0,c=this._features;f<c.length;f++){var h=c[f],y=new a.LineLayout(t,r,h);!this.tessellationProperties._hasPattern&&t.hasDataDrivenColor&&(n=t.getPaintValue("line-color",r,h)),t.hasDataDrivenOpacity&&(l=t.getPaintValue("line-opacity",r,h)),t.hasDataDrivenWidth&&(u=t.getPaintValue("line-width",r,h));var p=void 0;if(!i||!((p={color:n,opacity:l,size:Math.max(Math.min(u,256),0)}).size<=0||p.opacity<=0||p.color[3]<=0)){this.tessellationProperties._capType=y.cap,this.tessellationProperties._joinType=y.join,this.tessellationProperties._miterLimitCosine=s.getLimitCosine(y.miterLimit),this.tessellationProperties._roundLimitCosine=s.getLimitCosine(y.roundLimit);var d=h.getGeometry(e);this._processFeature(d,p)}}o.cleanup()},t.prototype._processFeature=function(e,t){if(e)for(var r=e.length,i=0;i<r;i++)this._processGeometry(e[i],t)},t.prototype._processGeometry=function(e,t){var r;if(i("esri-tiles-performance")&&(r=performance.now()),!(e.length<2)){for(var n,a,s=e[0],l=1;l<e.length;)(n=e[l].x-s.x)*n+(a=e[l].y-s.y)*a<1e-6?e.splice(l,1):(s=e[l],++l);if(!(e.length<2)){var u=this.tessellationProperties._lineIndexBuffer.index;this._tessellationOptions.trackDistance=this.tessellationProperties._hasPattern,this._tessellationOptions.initialDistance=0,this._tessellationOptions.thin=this._isThinLine,this._tessellationOptions.wrapDistance=65535,this._tessellationOptions.outerBisectorAutoSplitThreshold=1/3.8,this._tessellationOptions.enableOuterBisectorSplit=this.tessellationProperties._hasPattern,this._tessellationOptions.innerBisectorAutoSplitThreshold=1/3.8,this._tessellationOptions.enableInnerBisectorSplit=this.tessellationProperties._hasPattern,this.tessellationProperties._ddValues=t,o.tessellate(e,this._tessellationOptions,this._tessellationCallbacks),this._lineIndexCount+=3*(this.tessellationProperties._lineIndexBuffer.index-u),i("esri-tiles-performance")&&((performance.now()-r)/1e3,this.tessellationProperties._lineIndexBuffer.index-u)}}},t}(n),u=function(e){return function(t){t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.prevNormal.x,t.prevNormal.y,0,-1,t.distance,e._ddValues),t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.prevNormal.x,-t.prevNormal.y,0,1,t.distance,e._ddValues),t.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.nextNormal.x,t.nextNormal.y,0,-1,t.distance,e._ddValues),t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.nextNormal.x,-t.nextNormal.y,0,1,t.distance,e._ddValues)}},f=function(e){return function(t){e._lineIndexBuffer.add(t.leftExit0,t.rightEntry0,t.leftExit2),e._lineIndexBuffer.add(t.rightEntry0,t.rightEntry2,t.leftExit2)}},c=function(e){return function(t){var r,i=2===e._joinType?e._miterLimitCosine:e._roundLimitCosine,n=t.isCap&&0!==e._capType,a=!1;if(t.cosine>.97?(t.exit0=t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.bisector.x/t.cosine,t.bisector.y/t.cosine,0,-1,t.distance,e._ddValues),t.exit2=t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.bisector.x/t.cosine,-t.bisector.y/t.cosine,0,1,t.distance,e._ddValues)):t.cosine<1-.97?(t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.prevNormal.x,t.prevNormal.y,0,-1,t.distance,e._ddValues),t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.prevNormal.x,-t.prevNormal.y,0,1,t.distance,e._ddValues),t.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.nextNormal.x,t.nextNormal.y,0,-1,t.distance,e._ddValues),t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.nextNormal.x,-t.nextNormal.y,0,1,t.distance,e._ddValues)):t.canSplit?(o.splitVertex(),t.sign>0?(t.splitInner?(t.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.leftInner.x,t.leftInner.y,0,-1,t.distance,e._ddValues),t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.rightInner.x,t.rightInner.y,0,-1,t.distance,e._ddValues)):(t.exit0=t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.bisector.x/t.cosine,t.bisector.y/t.cosine,0,-1,t.distance,e._ddValues)),t.cosine<i?(a=!t.isCap,t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.prevNormal.x,-t.prevNormal.y,0,1,t.distance,e._ddValues),t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.nextNormal.x,-t.nextNormal.y,0,1,t.distance,e._ddValues)):t.splitOuter?(a=a||t.gapOuter,t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.leftOuter.x,-t.leftOuter.y,0,1,t.distance,e._ddValues),t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.rightOuter.x,-t.rightOuter.y,0,1,t.distance,e._ddValues)):(t.entry2=t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.bisector.x/t.cosine,-t.bisector.y/t.cosine,0,1,t.distance,e._ddValues))):(t.splitInner?(t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.leftInner.x,-t.leftInner.y,0,1,t.distance,e._ddValues),t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.rightInner.x,-t.rightInner.y,0,1,t.distance,e._ddValues)):(t.exit2=t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.bisector.x/t.cosine,-t.bisector.y/t.cosine,0,1,t.distance,e._ddValues)),t.cosine<i?(a=!t.isCap,t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.prevNormal.x,t.prevNormal.y,0,-1,t.distance,e._ddValues),t.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.nextNormal.x,t.nextNormal.y,0,-1,t.distance,e._ddValues)):t.splitOuter?(a=a||t.gapOuter,t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.leftOuter.x,t.leftOuter.y,0,-1,t.distance,e._ddValues),t.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.rightOuter.x,t.rightOuter.y,0,-1,t.distance,e._ddValues)):(t.exit0=t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.bisector.x/t.cosine,t.bisector.y/t.cosine,0,-1,t.distance,e._ddValues)))):t.sign>0?(t.exit0=t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.bisector.x/t.cosine,t.bisector.y/t.cosine,0,-1,t.distance,e._ddValues),t.cosine<i?(a=!t.isCap,t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.prevNormal.x,-t.prevNormal.y,0,1,t.distance,e._ddValues),t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.nextNormal.x,-t.nextNormal.y,0,1,t.distance,e._ddValues)):(t.entry2=t.exit2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.bisector.x/t.cosine,-t.bisector.y/t.cosine,0,1,t.distance,e._ddValues))):(t.exit2=t.entry2=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.bisector.x/t.cosine,-t.bisector.y/t.cosine,0,1,t.distance,e._ddValues),t.cosine<i?(a=!t.isCap,t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.prevNormal.x,t.prevNormal.y,0,-1,t.distance,e._ddValues),t.exit0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.nextNormal.x,t.nextNormal.y,0,-1,t.distance,e._ddValues)):(t.exit0=t.entry0=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.bisector.x/t.cosine,t.bisector.y/t.cosine,0,-1,t.distance,e._ddValues))),t.canSplit&&(t.splitInner||t.splitOuter)||a||n?(r=t.entry1=t.exit1=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,0,0,0,0,t.distance,e._ddValues)):r=t.entry1=t.exit1=null,a&&1!==e._joinType)e._lineIndexBuffer.add(r,t.sign>0?t.exit2:t.entry0,t.sign>0?t.entry2:t.exit0);else if(n&&1===e._capType||a&&1===e._joinType){var s,l=void 0,u=void 0,f=void 0,c=void 0,h=void 0,y=void 0;t.isCap?(y=(s=Math.PI)/(h=Math.ceil(s/.8)),t.isFirstVertex?(l=t.prevNormal.x,u=t.prevNormal.y,f=t.entry0,c=t.entry2):t.isLastVertex&&(l=-t.nextNormal.x,u=-t.nextNormal.y,f=t.exit2,c=t.exit0)):(y=(s=2*Math.acos(t.cosine))/(h=Math.ceil(s/.8)),l=t.sign>0?-t.prevNormal.x:t.nextNormal.x,u=t.sign>0?-t.prevNormal.y:t.nextNormal.y,f=t.sign>0?t.entry2:t.exit0,c=t.sign>0?t.exit2:t.entry0);var p=Math.cos(y),d=Math.sin(y),x=d*l+p*u;l=p*l-d*u,u=x;for(var v=void 0,m=void 0,_=0;_<h;++_){if(v=m,_<h-1)if(t.isCap){var g=t.isFirstVertex?-1:1;m=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,l,u,g,0,t.distance,e._ddValues)}else m=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,l,u,0,t.sign,t.distance,e._ddValues);e._lineIndexBuffer.add(0===_?f:v,r,_===h-1?c:m);var D=d*l+p*u;l=p*l-d*u,u=D}}else if(n&&2===e._capType){var I=t.isFirstVertex?1:-1,b=void 0,V=void 0;e._hasPattern?(b=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.prevNormal.x-I*t.inbound.x,t.prevNormal.y-I*t.inbound.y,-I,-1,t.distance,e._ddValues),V=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.prevNormal.x-I*t.inbound.x,-t.prevNormal.y-I*t.inbound.y,-I,1,t.distance,e._ddValues)):(b=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,t.prevNormal.x-I*t.inbound.x,t.prevNormal.y-I*t.inbound.y,0,-1,t.distance,e._ddValues),V=e._lineVertexBuffer.index,e._lineVertexBuffer.add(t.currentVertex.x,t.currentVertex.y,-t.prevNormal.x-I*t.inbound.x,-t.prevNormal.y-I*t.inbound.y,0,1,t.distance,e._ddValues)),I>0?(e._lineIndexBuffer.add(r,t.entry2,V),e._lineIndexBuffer.add(r,V,b),e._lineIndexBuffer.add(r,b,t.entry0)):(e._lineIndexBuffer.add(r,V,t.exit2),e._lineIndexBuffer.add(r,b,V),e._lineIndexBuffer.add(r,t.exit0,b))}}},h=function(e){return function(t){e._lineIndexBuffer.add(t.leftExit0,t.rightEntry0,null!=t.leftExit1?t.leftExit1:t.leftExit2),e._lineIndexBuffer.add(t.rightEntry0,null!=t.rightEntry1?t.rightEntry1:t.rightEntry2,null!=t.leftExit1?t.leftExit1:t.leftExit2),null!=t.leftExit1&&null!=t.rightEntry1?(e._lineIndexBuffer.add(t.leftExit1,t.rightEntry1,t.leftExit2),e._lineIndexBuffer.add(t.rightEntry1,t.rightEntry2,t.leftExit2)):null!=t.leftExit1?e._lineIndexBuffer.add(t.leftExit1,t.rightEntry2,t.leftExit2):null!=t.rightEntry1&&e._lineIndexBuffer.add(t.rightEntry1,t.rightEntry2,t.leftExit2)}};return l}.apply(null,i))||(e.exports=n)},c9QS:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.C_INFINITY=Number.POSITIVE_INFINITY,t.C_PI=Math.PI,t.C_2PI=2*t.C_PI,t.C_PI_BY_2=t.C_PI/2,t.C_RAD_TO_256=128/t.C_PI,t.C_256_TO_RAD=t.C_PI/128,t.C_DEG_TO_256=256/360,t.C_DEG_TO_RAD=t.C_PI/180,t.C_SQRT2=1.414213562,t.C_SQRT2_INV=1/t.C_SQRT2;var r=1/Math.LN2;function i(e,t){return(e%=t)>=0?e:e+t}t.positiveMod=i,t.radToByte=function(e){return i(e*t.C_RAD_TO_256,256)},t.degToByte=function(e){return i(e*t.C_DEG_TO_256,256)},t.log2=function(e){return Math.log(e)*r},t.sqr=function(e){return e*e},t.interpolate=function(e,t,r){return e*(1-r)+t*r},t.between=function(e,t,r){return e>=t&&e<=r||e>=r&&e<=t}}.apply(null,i))||(e.exports=n)},ki27:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("xoE+"),r("c9QS"),r("6+ni")],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t,r,i){this.left=e,this.top=t,this.right=r,this.bottom=i}return e.prototype.clone=function(){return new e(this.left,this.top,this.right,this.bottom)},e.prototype.move=function(e,t){this.left+=e,this.top+=t,this.right+=e,this.bottom+=t},e.prototype.rotate=function(e,t){var r=this.left,i=this.right,n=this.top,a=this.bottom,o=r*e-n*t,s=r*t+n*e,l=i*e-n*t,u=i*t+n*e,f=r*e-a*t,c=r*t+a*e,h=i*e-a*t,y=i*t+a*e;this.left=Math.min(o,l,f,h),this.top=Math.min(s,u,c,y),this.right=Math.max(o,l,f,h),this.bottom=Math.max(s,u,c,y)},e.overlaps=function(e,t){return e.right>t.left&&e.left<t.right&&e.bottom>t.top&&e.top<t.bottom},e}();t.Box=a;var o=function(){function e(e,t,r,i){this.anchor=e,this.corners=t,this.minzoom=r,this.maxzoom=i}return e.prototype.left=function(){return this.corners[0].x},e.prototype.right=function(){return this.corners[2].x},e.prototype.top=function(){return this.corners[1].y},e.prototype.bottom=function(){return this.corners[3].y},e}();t.Obstacle=o;var s=function(){function e(e,t,r){this.obstacles=[],this.mapAngle=e,this.padding=t,this.isScreenAligned=r,this.minzoom=l}return e.prototype.addBox=function(e,t,r,i,a,s,l){var u=t.left*r-this.padding,f=t.top*r-this.padding,c=t.right*r+this.padding,h=t.bottom*r+this.padding,y=[new n.Point(u,f),new n.Point(c,f),new n.Point(c,h),new n.Point(u,h)];if(0!==this.mapAngle){var p=Math.cos(this.mapAngle),d=Math.sin(this.mapAngle);(e=e.clone()).rotate(p,d)}if(this.isScreenAligned||(i+=this.mapAngle),0!==i){p=Math.cos(i),d=Math.sin(i),y[0].rotate(p,d),y[1].rotate(p,d),y[2].rotate(p,d),y[3].rotate(p,d);for(var x=0,v=1;v<4;v++)(y[v].x<y[x].x||y[v].x===y[x].x&&y[v].y<y[x].y)&&(x=v);if(x){var m=[];for(v=0;v<4;v++)m.push(y[(v+x)%4]);y=m}}if(a)for(var _=0,g=y;_<g.length;_++)g[_].move(a[0],a[1]);this.obstacles.push(new o(e,y,s,l))},e}();t.Footprint=s;var l=.5,u=function(){function e(){this._grid=[]}return e.prototype.reset=function(){this._grid=[]},e.prototype.add=function(t){for(var r=this._grid,i=0,n=t.obstacles;i<n.length;i++)for(var a=n[i],o=a.anchor,s=e._gridClamp(Math.min(a.left()+o.x,o.x)),l=e._gridClamp(Math.max(a.right()+o.x,o.x)),u=e._gridClamp(Math.min(a.top()+o.y,o.y)),f=e._gridClamp(Math.max(a.bottom()+o.y,o.y)),c=u;c<=f;c++)for(var h=s;h<=l;h++){var y=r[16*c+h];y||(y=r[16*c+h]=[]),y.push(a)}},e.prototype.getMinZoom=function(t,r){if(0===t.obstacles.length)return i.C_INFINITY;for(var n=r,a=this._grid,o=0,s=t.obstacles;o<s.length;o++)for(var l=s[o],u=l.anchor,f=e._gridClamp(Math.min(l.left()+u.x,u.x)),c=e._gridClamp(Math.max(l.right()+u.x,u.x)),h=e._gridClamp(Math.min(l.top()+u.y,u.y)),y=e._gridClamp(Math.max(l.bottom()+u.y,u.y)),p=h;p<=y;p++)for(var d=f;d<=c;d++){var x=a[16*p+d];if(x)for(var v=0,m=x;v<m.length;v++){var _=m[v];if(!(l.minzoom>=_.maxzoom||_.minzoom>=l.maxzoom)&&(n=e._calcPlacementZoom(l,_,n))>=2)return i.C_INFINITY}}return n<2?n:i.C_INFINITY},e._gridClamp=function(e){return r.clamp(e>>9,-7,8)},e._calcPlacementZoom=function(t,r,n){var a=r.anchor.x-t.anchor.x;if(0===a&&(t.right()<r.left()||r.right()<t.left()))return n;var o=r.anchor.y-t.anchor.y;if(0===o&&(t.bottom()<r.top()||r.bottom()<t.top()))return n;var s=i.C_INFINITY;if(0!==a){var l=(a>0?t.right()-r.left():t.left()-r.right())/a;l<s&&(s=l);var u=a>0?e._calcExtZoomX(t,r,l):e._calcExtZoomX(r,t,l);u<s&&(s=u)}if(0!==o){var f=(o>0?t.bottom()-r.top():t.top()-r.bottom())/o;f<s&&(s=f);var c=o>0?e._calcExtZoomY(t,r,f):e._calcExtZoomY(r,t,f);c<s&&(s=c)}return s<t.minzoom||s<r.minzoom?n:((s=Math.min(s,t.maxzoom,r.maxzoom))<n&&(s=n),s)},e._calcExtZoomX=function(e,t,r){var i,n,a,o;if(e.anchor.y+e.corners[2].y/r<t.anchor.y+t.corners[0].y/r){var s=e.corners[2].x-e.corners[3].x,l=e.corners[2].y-e.corners[3].y,u=t.corners[1].x-t.corners[0].x;s*(t.corners[1].y-t.corners[0].y)-l*u>=0?e.anchor.y+e.corners[3].y/r<t.anchor.y+t.corners[0].y/r?(i=e.corners[3],n=t.corners[0],a=t.corners[1],o=1):(i=t.corners[0],n=e.corners[3],a=e.corners[2],o=-1):e.anchor.y+e.corners[2].y/r>t.anchor.y+t.corners[1].y/r?(i=e.corners[2],n=t.corners[0],a=t.corners[1],o=1):(i=t.corners[1],n=e.corners[3],a=e.corners[2],o=-1)}else s=e.corners[2].x-e.corners[1].x,l=e.corners[2].y-e.corners[1].y,u=t.corners[3].x-t.corners[0].x,s*(t.corners[3].y-t.corners[0].y)-l*u<0?e.anchor.y+e.corners[1].y/r>t.anchor.y+t.corners[0].y/r?(i=e.corners[1],n=t.corners[0],a=t.corners[3],o=1):(i=t.corners[0],n=e.corners[1],a=e.corners[2],o=-1):e.anchor.y+e.corners[2].y/r<t.anchor.y+t.corners[3].y/r?(i=e.corners[2],n=t.corners[0],a=t.corners[3],o=1):(i=t.corners[3],n=e.corners[1],a=e.corners[2],o=-1);var f=a.x-n.x,c=a.y-n.y;return o*((i.y-n.y)*f-(i.x-n.x)*c)/((e.anchor.x-t.anchor.x)*c-(e.anchor.y-t.anchor.y)*f)},e._calcExtZoomY=function(e,t,r){var i,n,a,o;if(e.anchor.x+e.corners[3].x/r<t.anchor.x+t.corners[1].x/r){var s=e.corners[3].x-e.corners[2].x,l=e.corners[3].y-e.corners[2].y,u=t.corners[0].x-t.corners[1].x;s*(t.corners[0].y-t.corners[1].y)-l*u<0?e.anchor.x+e.corners[2].x/r<t.anchor.x+t.corners[1].x/r?(i=e.corners[2],n=t.corners[1],a=t.corners[0],o=1):(i=t.corners[1],n=e.corners[2],a=e.corners[3],o=-1):e.anchor.x+e.corners[3].x/r>t.anchor.x+t.corners[0].x/r?(i=e.corners[3],n=t.corners[1],a=t.corners[0],o=1):(i=t.corners[0],n=e.corners[2],a=e.corners[3],o=-1)}else s=e.corners[3].x-e.corners[0].x,l=e.corners[3].y-e.corners[0].y,u=t.corners[2].x-t.corners[1].x,s*(t.corners[2].y-t.corners[1].y)-l*u>0?e.anchor.x+e.corners[0].x/r>t.anchor.x+t.corners[1].x/r?(i=e.corners[0],n=t.corners[1],a=t.corners[2],o=1):(i=t.corners[1],n=e.corners[0],a=e.corners[3],o=-1):e.anchor.x+e.corners[3].x/r<t.anchor.x+t.corners[2].x/r?(i=e.corners[3],n=t.corners[1],a=t.corners[2],o=1):(i=t.corners[2],n=e.corners[0],a=e.corners[3],o=-1);var f=a.x-n.x,c=a.y-n.y;return o*((i.y-n.y)*f-(i.x-n.x)*c)/((e.anchor.x-t.anchor.x)*c-(e.anchor.y-t.anchor.y)*f)},e}();t.ConflictEngine=u}.apply(null,i))||(e.exports=n)},qDf7:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("v7zm"),r("qMld"),r("EO7D"),r("7CQW"),r("0+xL"),r("tVEB"),r("c0+/"),r("wodO"),r("yaQU"),r("GDRe"),r("UTXC")],void 0===(n=function(e,t,r,i,n,a,o,s,l,u,f,c,h,y){return function(){function e(e,t,r){this._pbfTiles={},this._tileClippers={},this._client=r,this._tile=t,this._layers=t.getLayers();var n=t.tileKey.split("/").map(parseFloat),a=n[0],o=n[1],s=n[2];this._level=a;for(var l=Math.max(8,Math.round(1*this._level)-8),u=0,f=Object.keys(e);u<f.length;u++){var c=f[u],y=e[c];if(this._pbfTiles[c]=new i(new Uint8Array(y.protobuff),new DataView(y.protobuff)),y.refKey){var p=a-y.refKey.split("/").map(parseFloat)[0];if(p>0){var d=(1<<p)-1,x=o&d,v=s&d;this._tileClippers[c]=new h.TileClipper(p,x,v,8,l)}}this._tileClippers[c]||(this._tileClippers[c]=new h.SimpleBuilder)}}return e.prototype.parse=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,i,a,o,l,u,f,c,h,p,d,x,v,m,_,g,D,I,b,V,B,w,P,L,S,M,C,k,z,T,E,O,N,A,F,j,G,R,U,Y,H,Z,J,K,W,Q,q,X,$,ee,te,re,ie,ne,ae,oe,se,le;return r.__generator(this,(function(r){for(t=e&&e.signal,i=this._parseTileData(this._pbfTiles),a=this._layers,o=this._level,u=[],f=this._tileClippers,c={},h={},p=a.length-1;p>=0;p--)(l=a[p]).minzoom&&o<Math.floor(l.minzoom)||l.maxzoom&&o>=l.maxzoom||l.layout&&l.layout.visibility&&"none"===l.layout.visibility||0!==l.type&&i[l.source]&&f[l.source]&&(z=i[l.source],d=f[l.source],W=l.sourceLayer,(T=z[W])&&((x=h[l.source])||(x=h[l.source]=new Set),x.add(l.sourceLayer),(te=this._createBucket(l))&&(te.layerIndex=p,te.layerExtent=T.extent,te.tileClipper=d,(E=c[l.source])||(E=c[l.source]={}),(v=E[W])||(v=E[W]=[]),v.push(te))));for(m=10*this._level,_=10*(this._level+1),g=[],D=[],I=[],b=[],V=new Set,B={},w=[],P=[],L=function(e){h[e].forEach((function(t){w.push(t),P.push(e)}))},S=0,M=Object.keys(h);S<M.length;S++)J=M[S],L(J);for(C=0;C<w.length;C++)if(J=P[C],k=w[C],i[J]&&c[J]&&(z=i[J],T=z[k],E=c[J],(Q=E[k])&&0!==Q.length)){if(n.isAborted(t))return[2,void 0];for(O=T.getData();O.next(2);){if(N=O.getMessage(),A=new s(N,T),N.release(),F=A.values){if((j=F._minzoom)&&j>=_)continue;if((G=F._maxzoom)&&G<=m)continue}for(R=0,U=Q;R<U.length;R++)(te=U[R]).pushFeature(A)}}for(Y=this._tile,H=0,Z=Object.keys(c);H<Z.length;H++)for(W in J=Z[H],K=c[J])for(Q=K[W],q=0,X=Q;q<X.length;q++)(te=X[q]).hasFeatures()&&(3===te.layer.type?(g.push(te),Y.addBucket(te)):te.layer.refLayerId?I.push(te):(D.push(te),b[te.layer.id]=te));for($=0,ee=g;$<ee.length;$++)te=ee[$],(re=te).getResources(re.tileClipper,V,B);if(this._tile.status===y.TileStatus.INVALID)return[2,n.resolve([])];for(se in ie=[],ne=this._tile.getWorkerTileHandler(),V.size>0&&(ae=ne.fetchSprites(V,this._client,e),ie.push(ae)),B)(le=B[se]).size>0&&(oe=ne.fetchGlyphs(this._tile.tileKey,se,le,this._client,e),ie.push(oe));return[2,n.all(ie).then((function(){for(var e=0,t=D;e<t.length;e++){var r=t[e];r.processFeatures(r.tileClipper),u.push(r)}for(var i=0,n=I;i<n.length;i++){var a=n[i],o=b[a.layer.refLayerId];o&&(o.assignBufferInfo(a),u.push(a))}for(var s=0,l=g;s<l.length;s++){var f=l[s];f.processFeatures(f.tileClipper),u.push(f)}return u.sort((function(e,t){return e.layerIndex-t.layerIndex})),u}))]}))}))},e.prototype._parseTileData=function(e){for(var t={},r=0,i=Object.keys(e);r<i.length;r++){for(var n=i[r],a=e[n],o={};a.next();)switch(a.tag()){case 3:var s=a.getMessage(),l=new f(s);s.release(),o[l.name]=l;break;default:a.skip()}t[n]=o}return t},e.prototype._createBucket=function(e){switch(e.type){case 0:return this._createBackgroundBucket(e);case 1:return this._createFillBucket(e);case 2:return this._createLineBucket(e);case 4:return this._createCircleBucket(e);case 3:return this._createSymbolBucket(e)}},e.prototype._createBackgroundBucket=function(e){return new a(e,this._level)},e.prototype._createFillBucket=function(e){var t=this._tile;return new l(e,this._level,e.hasDataDrivenFill?t.fillDDVertexBuffer:t.fillVertexBuffer,t.fillIndexBuffer,e.hasDataDrivenOutline?t.outlineDDVertexBuffer:t.outlineVertexBuffer,t.outlineIndexBuffer)},e.prototype._createLineBucket=function(e){var t=this._tile;return new u(e,this._level,e.hasDataDrivenLine?t.lineDDVertexBuffer:t.lineVertexBuffer,t.lineIndexBuffer)},e.prototype._createCircleBucket=function(e){var t=this._tile;return new o(e,this._level,t.circleVertexBuffer,t.circleIndexBuffer)},e.prototype._createSymbolBucket=function(e){var t=this._tile;return new c(e,this._level,e.hasDataDrivenIcon?t.iconDDVertexBuffer:t.iconVertexBuffer,t.iconIndexBuffer,e.hasDataDrivenText?t.textDDVertexBuffer:t.textVertexBuffer,t.textIndexBuffer,t.placementEngine,t.getWorkerTileHandler())},e}()}.apply(null,i))||(e.exports=n)},tVEB:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("QVms"),r("1E+e"),r("2yK+"),r("6+ni")],void 0===(n=function(e,t,r,i,n,a,o){return function(e){function t(t,r,i,n,a,o){var s=e.call(this,t,r)||this;if(t.hasDataDrivenFill!==i.isDataDriven())throw new Error("incompatible fill buffer");if(t.hasDataDrivenOutline!==a.isDataDriven())throw new Error("incompatible outline buffer");return s._fillVertexBuffer=i,s._fillIndexBuffer=n,s._outlineVertexBuffer=a,s._outlineIndexBuffer=o,s}return r.__extends(t,e),Object.defineProperty(t.prototype,"fillIndexStart",{get:function(){return this._fillIndexStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillIndexCount",{get:function(){return this._fillIndexCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outlineIndexStart",{get:function(){return this._outlineIndexStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outlineIndexCount",{get:function(){return this._outlineIndexCount},enumerable:!0,configurable:!0}),t.prototype.assignBufferInfo=function(e){var t=e;t._fillIndexStart=this._fillIndexStart,t._fillIndexCount=this._fillIndexCount,e.layer.getPaintProperty("fill-outline-color")?(t._outlineIndexStart=this._outlineIndexStart,t._outlineIndexCount=this._outlineIndexCount):(t._outlineIndexStart=0,t._outlineIndexCount=0)},t.prototype.processFeatures=function(e){this._fillIndexStart=this._fillIndexBuffer.index,this._fillIndexCount=0,this._outlineIndexStart=this._outlineIndexBuffer.index,this._outlineIndexCount=0;var t=this.layer,r=this.zoom,i=t.hasDataDrivenFill,n=t.hasDataDrivenOutline;e&&e.setExtent(this.layerExtent);var a=t.getPaintValue("fill-pattern",r),o=t.getPaintValue("fill-antialias",r)&&void 0===a,s=[1,1,1,1],l=[1,1,1,1],u=1;if(t.outlineUsesFillColor){if(o&&!t.hasDataDrivenOpacity){var f=t.getPaintValue("fill-opacity",r),c=t.getPaintValue("fill-opacity",r+1);f<1&&c<1&&(o=!1)}if(o&&!t.hasDataDrivenColor){var h=t.getPaintValue("fill-color",r),y=t.getPaintValue("fill-color",r+1);h[3]<1&&y[3]<1&&(o=!1)}}for(var p=0,d=this._features;p<d.length;p++){var x=d[p];!a&&t.hasDataDrivenColor&&(s=t.getPaintValue("fill-color",r,x)),t.hasDataDrivenOpacity&&(u=t.getPaintValue("fill-opacity",r,x)),!a&&t.hasDataDrivenOutlineColor&&(l=t.getPaintValue("fill-outline-color",r,x));var v=void 0;i&&(v={color:s,opacity:u});var m=void 0;n&&(m={color:t.outlineUsesFillColor?s:l,opacity:u});var _=x.getGeometry(e);this._processFeature(_,o,t.outlineUsesFillColor,v,m)}},t.prototype._processFeature=function(e,r,i,n,a){if(e){var o,s=e.length;if(r&&(!i||!a||a.color[3]*a.opacity==1))for(var l=0;l<s;l++)this._processOutline(e[l],a);for(l=0;l<s;l++){var u=t._area(e[l]);u>128?(void 0!==o&&this._processFill(e,o,n),o=[l]):u<-128&&void 0!==o&&o.push(l)}void 0!==o&&this._processFill(e,o,n)}},t.prototype._processOutline=function(e,t){var r,i,n,a=this._outlineVertexBuffer,s=this._outlineIndexBuffer,l=s.index,u=new o.Point(0,0),f=new o.Point(0,0),c=new o.Point(0,0),h=-1,y=-1,p=-1,d=-1,x=-1,v=!1,m=e.length;if(!(m<2)){for(var _=e[0],g=e[m-1];m&&g.isEqual(_);)g=e[--m-1];if(!(m-0<2)){for(var D=0;D<m;++D){0===D?(r=e[m-1],i=e[0],n=e[1],u.assignSub(i,r),u.normalize(),u.rightPerpendicular()):(r=i,i=n,n=D!==m-1?e[D+1]:e[0],u.assign(f));var I=this._isClipEdge(r,i);-1===d&&(v=I),f.assignSub(n,i),f.normalize(),f.rightPerpendicular();var b=u.x*f.y-u.y*f.x;c.assignAdd(u,f),c.normalize();var V=-c.x*-u.x+-c.y*-u.y,B=Math.abs(0!==V?1/V:1);B>8&&(B=8),b>=0?(p=a.add(i.x,i.y,u.x,u.y,0,1,t),-1===d&&(d=p),h>=0&&y>=0&&p>=0&&!I&&s.add(h,y,p),y=a.add(i.x,i.y,B*-c.x,B*-c.y,0,-1,t),-1===x&&(x=y),h>=0&&y>=0&&p>=0&&!I&&s.add(h,y,p),h=y,y=p,p=a.add(i.x,i.y,c.x,c.y,0,1,t),h>=0&&y>=0&&p>=0&&!I&&s.add(h,y,p),y=a.add(i.x,i.y,f.x,f.y,0,1,t),h>=0&&y>=0&&p>=0&&!I&&s.add(h,y,p)):(p=a.add(i.x,i.y,B*c.x,B*c.y,0,1,t),-1===d&&(d=p),h>=0&&y>=0&&p>=0&&!I&&s.add(h,y,p),y=a.add(i.x,i.y,-u.x,-u.y,0,-1,t),-1===x&&(x=y),h>=0&&y>=0&&p>=0&&!I&&s.add(h,y,p),h=y,y=p,p=a.add(i.x,i.y,-c.x,-c.y,0,-1,t),h>=0&&y>=0&&p>=0&&!I&&s.add(h,y,p),(h=a.add(i.x,i.y,-f.x,-f.y,0,-1,t))>=0&&y>=0&&p>=0&&!I&&s.add(h,y,p))}h>=0&&y>=0&&d>=0&&!v&&s.add(h,y,d),h>=0&&d>=0&&x>=0&&!v&&s.add(h,x,d),this._outlineIndexCount+=3*(s.index-l)}}},t.prototype._processFill=function(e,t,r){var a;t.length>1&&(a=[]);for(var o=0,s=0,l=t;s<l.length;s++){var u=l[s];0!==o&&a.push(o),o+=e[u].length}for(var f=2*o,c=i.acquire(),h=0,y=t;h<y.length;h++)for(var p=e[u=y[h]],d=p.length,x=0;x<d;++x)c.push(p[x].x),c.push(p[x].y);var v=n.earcut(c,a,2),m=v.length;if(m>0){for(var _=this._fillVertexBuffer.index,g=0;g<f;)this._fillVertexBuffer.add(c[g++],c[g++],r);for(var D=0;D<m;)this._fillIndexBuffer.add(_+v[D++],_+v[D++],_+v[D++]);this._fillIndexCount+=m}i.release(c)},t.prototype._isClipEdge=function(e,t){return e.x===t.x?e.x<=-64||e.x>=4160:e.y===t.y&&(e.y<=-64||e.y>=4160)},t._area=function(e){for(var t=0,r=e.length-1,i=0;i<r;i++)t+=(e[i].x-e[i+1].x)*(e[i].y+e[i+1].y);return.5*(t+(e[r].x-e[0].x)*(e[r].y+e[0].y))},t}(a)}.apply(null,i))||(e.exports=n)},ujH7:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("LxLY"),r("qMld"),r("EO7D"),r("7CQW"),r("tVEB"),r("c9QS"),r("Gc+D"),r("c0+/"),r("zywo"),r("yaQU"),r("qDf7"),r("RY7r"),r("UTXC")],void 0===(n=function(e,t,r,i,n,a,o,s,l,u,f,c,h,y,p,d){return function(){function e(){this.rotation=0,this.status=d.TileStatus.INITIALIZED,this._symbolBuckets=[],this.placementEngine=new c.PlacementEngine,this.fillVertexBuffer=new p.FillVertexBuffer(!1),this.fillDDVertexBuffer=new p.FillVertexBuffer(!0),this.fillIndexBuffer=new u.TriangleIndexBuffer,this.outlineVertexBuffer=new p.OutlineVertexBuffer(!1),this.outlineDDVertexBuffer=new p.OutlineVertexBuffer(!0),this.outlineIndexBuffer=new u.TriangleIndexBuffer,this.lineVertexBuffer=new p.LineVertexBuffer(!1),this.lineDDVertexBuffer=new p.LineVertexBuffer(!0),this.lineIndexBuffer=new u.TriangleIndexBuffer,this.iconVertexBuffer=new p.SymbolVertexBuffer(!1),this.iconDDVertexBuffer=new p.SymbolVertexBuffer(!0),this.iconIndexBuffer=new u.TriangleIndexBuffer,this.textVertexBuffer=new p.SymbolVertexBuffer(!1),this.textDDVertexBuffer=new p.SymbolVertexBuffer(!0),this.textIndexBuffer=new u.TriangleIndexBuffer,this.circleVertexBuffer=new p.CircleVertexBuffer,this.circleIndexBuffer=new u.TriangleIndexBuffer}return e.prototype.initialize=function(e,t,r,i){void 0===i&&(i=0),this.tileKey=e,this.refKeys=t,this._workerTileHandler=r,this.rotation=i,this.placementEngine.setAngle(l.C_DEG_TO_RAD*i)},e.prototype.release=function(){this.tileKey="",this.refKeys=null,this.status=d.TileStatus.INITIALIZED,this.rotation=0,this.resetData(),this._workerTileHandler=null},e.prototype.resetData=function(){this.fillVertexBuffer.reset(),this.fillDDVertexBuffer.reset(),this.fillIndexBuffer.reset(),this.outlineVertexBuffer.reset(),this.outlineDDVertexBuffer.reset(),this.outlineIndexBuffer.reset(),this.lineVertexBuffer.reset(),this.lineDDVertexBuffer.reset(),this.lineIndexBuffer.reset(),this.iconVertexBuffer.reset(),this.iconDDVertexBuffer.reset(),this.iconIndexBuffer.reset(),this.textVertexBuffer.reset(),this.textDDVertexBuffer.reset(),this.textIndexBuffer.reset(),this.circleVertexBuffer.reset(),this.circleIndexBuffer.reset(),this.placementEngine.reset(),this._symbolBuckets.length=0},e.prototype.reparse=function(e){return this.resetData(),this.setDataAndParse(this._data,e)},e.prototype.setDataAndParse=function(e,t){var r=this,n=t&&t.signal;if(i.isSome(n)){var l=function(){n.removeEventListener("abort",l),r.status=d.TileStatus.INVALID};n.addEventListener("abort",l)}return this._data=e,this._parse(e,t).then((function(e){r.status=d.TileStatus.READY;for(var t=[1,r.fillVertexBuffer.sizeInBytes,2,r.fillDDVertexBuffer.sizeInBytes,3,r.fillIndexBuffer.sizeInBytes,4,r.outlineVertexBuffer.sizeInBytes,5,r.outlineDDVertexBuffer.sizeInBytes,6,r.outlineIndexBuffer.sizeInBytes,7,r.lineVertexBuffer.sizeInBytes,8,r.lineDDVertexBuffer.sizeInBytes,9,r.lineIndexBuffer.sizeInBytes,10,r.iconVertexBuffer.sizeInBytes,11,r.iconDDVertexBuffer.sizeInBytes,12,r.iconIndexBuffer.sizeInBytes,13,r.textVertexBuffer.sizeInBytes,14,r.textDDVertexBuffer.sizeInBytes,15,r.textIndexBuffer.sizeInBytes,16,r.circleVertexBuffer.sizeInBytes,17,r.circleIndexBuffer.sizeInBytes],i=new Uint32Array(t),n=[],l=e.length,u=0;u<l;u++){var c=e[u];if(c instanceof s)n.push(c.layerIndex),n.push(1),n.push(c.fillIndexStart),n.push(c.fillIndexCount),n.push(c.outlineIndexStart),n.push(c.outlineIndexCount);else if(c instanceof f)n.push(c.layerIndex),n.push(2),n.push(c.lineIndexStart),n.push(c.lineIndexCount);else if(c instanceof h){n.push(c.layerIndex),n.push(3),n.push(c.sdfMarker?1:0);var y=c.markerPageMap;n.push(y.size),y.forEach((function(e,t){n.push(t),n.push(e[0]),n.push(e[1])}));var p=c.glyphsPageMap;n.push(p.size),p.forEach((function(e,t){n.push(t),n.push(e[0]),n.push(e[1])}))}else c instanceof o?(n.push(c.layerIndex),n.push(4),n.push(c.circleIndexStart),n.push(c.circleIndexCount)):c instanceof a&&(n.push(c.layerIndex),n.push(0))}var x=new Uint32Array(n),v=r.fillVertexBuffer.toBuffer(),m=r.fillDDVertexBuffer.toBuffer(),_=r.fillIndexBuffer.toBuffer(),g=r.outlineVertexBuffer.toBuffer(),D=r.outlineDDVertexBuffer.toBuffer(),I=r.outlineIndexBuffer.toBuffer(),b=r.lineVertexBuffer.toBuffer(),V=r.lineDDVertexBuffer.toBuffer(),B=r.lineIndexBuffer.toBuffer(),w=r.iconVertexBuffer.toBuffer(),P=r.iconDDVertexBuffer.toBuffer(),L=r.iconIndexBuffer.toBuffer(),S=r.textVertexBuffer.toBuffer(),M=r.textDDVertexBuffer.toBuffer(),C=r.textIndexBuffer.toBuffer(),k=r.circleVertexBuffer.toBuffer(),z=r.circleIndexBuffer.toBuffer();return{result:{bufferDataInfo:i.buffer,bucketDataInfo:x.buffer,bufferData:[v,m,_,g,D,I,b,V,B,w,P,L,S,M,C,k,z]},transferList:[v,m,_,g,D,I,b,V,B,w,P,L,S,M,C,k,z,i.buffer,x.buffer]}}))},e.prototype.addBucket=function(e){this._symbolBuckets.push(e)},e.prototype.updateSymbols=function(e,t){var r=this,a=this._symbolBuckets;if(!a||0===a.length)return n.resolve();var o=t&&t.signal;if(i.isSome(o)){var s=function(){o.removeEventListener("abort",s),r.status=d.TileStatus.INVALID};o.addEventListener("abort",s)}this.rotation=e;var u=this.placementEngine;u.reset(),u.setAngle(e/256*360*l.C_DEG_TO_RAD);var f=this.iconVertexBuffer;f.reset();var c=this.iconDDVertexBuffer;c.reset();var h=this.iconIndexBuffer;h.reset();var y=this.textVertexBuffer;y.reset();var p=this.textDDVertexBuffer;p.reset();var x=this.textIndexBuffer;x.reset();for(var v=[],m=0;m<a.length;m++){var _=a[m];if(_&&_.layer){var g=_.layer,D=_.copy(g.hasDataDrivenIcon?c:f,h,g.hasDataDrivenText?p:y,x,u);D&&(v.push(D),D.updateSymbols())}}if(this.status===d.TileStatus.INVALID||this.status===d.TileStatus.INITIALIZED||0===f.sizeInBytes&&0===c.sizeInBytes&&0===h.sizeInBytes&&0===y.sizeInBytes&&0===p.sizeInBytes&&0===x.sizeInBytes)return n.reject();var I=[10,f.sizeInBytes,11,c.sizeInBytes,12,h.sizeInBytes,13,y.sizeInBytes,14,p.sizeInBytes,15,x.sizeInBytes],b=new Uint32Array(I),V=[];for(m=0;m<v.length;m++){var B=v[m];V.push(B.layerIndex),V.push(3),V.push(B.sdfMarker?1:0);var w=B.markerPageMap;V.push(w.size),w.forEach((function(e,t){V.push(t),V.push(e[0]),V.push(e[1])}));var P=B.glyphsPageMap;V.push(P.size),P.forEach((function(e,t){V.push(t),V.push(e[0]),V.push(e[1])}))}var L=new Uint32Array(V),S=f.toBuffer(),M=c.toBuffer(),C=h.toBuffer(),k=y.toBuffer(),z=p.toBuffer(),T=x.toBuffer();return n.resolve({result:{bufferDataInfo:b.buffer,bucketDataInfo:L.buffer,bufferData:[S,M,C,k,z,T]},transferList:[S,M,C,k,z,T,b.buffer,L.buffer]})},e.prototype.setObsolete=function(){this.status=d.TileStatus.INVALID},e.prototype.getLayers=function(){return this._workerTileHandler.getLayers()},e.prototype.getWorkerTileHandler=function(){return this._workerTileHandler},e.prototype._parse=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){return 0===Object.keys(e).length?[2,[]]:(this.status=d.TileStatus.MODIFIED,[2,new y(e,this,t.client).parse(t)])}))}))},e}()}.apply(null,i))||(e.exports=n)},wodO:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(t){for(this.extent=4096,this.keys=[],this.values=[],this._pbfLayer=t.clone();t.next();)switch(t.tag()){case 1:this.name=t.getString();break;case 3:this.keys.push(t.getString());break;case 4:this.values.push(t.processMessage(e._parseValue));break;case 5:this.extent=t.getUInt32();break;default:t.skip()}}return e.prototype.getData=function(){return this._pbfLayer},e._parseValue=function(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getInt64();case 5:return e.getUInt64();case 6:return e.getSInt64();case 7:return e.getBool();default:e.skip()}return null},e}()}.apply(null,i))||(e.exports=n)},yaQU:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("zOht"),r("uhzp"),r("2yK+"),r("c9QS"),r("zywo"),r("BWOx"),r("UXHw"),r("6+ni")],void 0===(n=function(e,t,r,i,n,a,o,s,l,u){function f(e,t){return e.iconMosaicItem&&t.iconMosaicItem?e.iconMosaicItem.page===t.iconMosaicItem.page?0:e.iconMosaicItem.page<t.iconMosaicItem.page?-1:1:e.iconMosaicItem&&!t.iconMosaicItem?1:!e.iconMosaicItem&&t.iconMosaicItem?-1:0}return function(e){function t(t,r,i,n,a,o,s,l){var u=e.call(this,t,r)||this;if(u._markerMap=new Map,u._glyphMap=new Map,u._glyphBufferDataStorage=new Map,u._sdfMarkers=!1,t.hasDataDrivenIcon!==i.isDataDriven())throw new Error("incompatible icon buffer");if(t.hasDataDrivenText!==a.isDataDriven())throw new Error("incompatible text buffer");return u._iconVertexBuffer=i,u._iconIndexBuffer=n,u._textVertexBuffer=a,u._textIndexBuffer=o,u._placementEngine=s,u._workerTileHandler=l,u}return r.__extends(t,e),Object.defineProperty(t.prototype,"markerPageMap",{get:function(){return this._markerMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"glyphsPageMap",{get:function(){return this._glyphMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sdfMarker",{get:function(){return this._sdfMarkers},enumerable:!0,configurable:!0}),t.prototype.copy=function(e,r,i,n,a){var o=new t(this.layer,this.zoom,e,r,i,n,a,this._workerTileHandler);return o.layerIndex=this.layerIndex,o.layerExtent=this.layerExtent,o._iconIndexStart=r.index,o._textIndexStart=n.index,o._iconIndexCount=0,o._textIndexCount=0,o._symbolInstances=this._symbolInstances,o._workerTileHandler=this._workerTileHandler,o._fontArray=this._fontArray,o._textLayout=this._textLayout,o._iconLayout=this._iconLayout,o._isLinePlacement=this._isLinePlacement,o._avoidEdges=this._avoidEdges,o},t.prototype.getResources=function(e,r,i){var n=this.layer,a=this.zoom,o=n.hasDataDrivenIcon,s=n.hasDataDrivenText;e&&e.setExtent(this.layerExtent);for(var l=n.getLayoutProperty("icon-image"),u=n.getLayoutProperty("text-field"),f=n.getLayoutValue("text-font",a),c=n.getLayoutValue("text-transform",a),h=[],y=[1,1,1,1],p=1,d=1,x=[1,1,1,1],v=1,m=1,_=0,g=this._features;_<g.length;_++){var D=g[_],I=D.getGeometry(e);if(I&&0!==I.length){var b=void 0;l&&(b=n.getLayoutValue("icon-image",a,D),l.isDataDriven||(b=this._replaceKeys(b,D.values)),b&&r.add(b));var V=void 0,B=!1;if(u&&((V=n.getLayoutValue("text-field",a,D))&&!u.isDataDriven&&(V=this._replaceKeys(V,D.values)),V)){switch(V=V.replace(/\\n/g,"\n"),c){case 2:V=V.toLowerCase();break;case 1:V=V.toUpperCase()}if(t._bidiEngine.hasBidiChar(V)){var w;w="rtl"===t._bidiEngine.checkContextual(V)?"IDNNN":"ICNNN",V=t._bidiEngine.bidiTransform(V,w,"VLYSN"),B=!0}var P=V.length;if(P>0)for(var L=0,S=f;L<S.length;L++){var M=S[L],C=i[M];C||(C=i[M]=new Set);for(var k=0;k<P;k++){var z=V.charCodeAt(k);C.add(z)}}}if(b||V){var T=n.getLayoutValue("icon-size",a,D),E=n.getLayoutValue("text-size",a,D);n.hasDataDrivenIconColor&&(y=n.getPaintValue("icon-color",a,D)),n.hasDataDrivenIconOpacity&&(p=n.getPaintValue("icon-opacity",a,D)),n.hasDataDrivenIconSize&&(d=T),n.hasDataDrivenTextColor&&(x=n.getPaintValue("text-color",a,D)),n.hasDataDrivenTextOpacity&&(v=n.getPaintValue("text-opacity",a,D)),n.hasDataDrivenTextSize&&(m=E);var O={sprite:b,label:V,rtl:B,type:D.type,geometry:I,iconSize:T,iconRotate:n.getLayoutValue("icon-rotate",a,D),ddIconValues:o?{color:y,opacity:p,size:d}:null,textSize:E,textRotate:n.getLayoutValue("text-rotate",a,D),ddTextValues:s?{color:x,opacity:v,size:m}:null};h.push(O)}}}this._symbolFeatures=h},t.prototype.processFeatures=function(e){e&&e.setExtent(this.layerExtent);var r,i,n,u,c,h=this.layer,y=this.zoom,p=this._isLinePlacement=1===h.getLayoutValue("symbol-placement",y),d=8*h.getLayoutValue("symbol-spacing",y),x=h.getLayoutProperty("icon-image"),v=h.getLayoutProperty("text-field"),m=this._workerTileHandler;if(x&&(this._iconLayout=new l.IconLayout(h,y,p),r=m.getSpriteItems(),i=this._getTranslate(!0)),v){var _=this._textLayout=new l.TextLayout(h,y,p);this._fontArray=_.fontArray;var g=.5;switch(_.anchor){case 5:case 1:case 7:g=0;break;case 6:case 2:case 8:g=1}var D=.5;switch(_.anchor){case 5:case 3:case 6:D=0;break;case 7:case 4:case 8:D=1}var I=.5;switch(_.justify){case 0:I=0;break;case 2:I=1}var b=_.letterSpacing*s.SDF_GLYPH_SIZE,V=p?0:_.maxWidth*s.SDF_GLYPH_SIZE,B=_.lineHeight*s.SDF_GLYPH_SIZE;n=this._fontArray.map((function(e){return m.getGlyphItems(e)})),u=new s.TextShaping(n,V,B,b,g,D,I),c=this._getTranslate(!1)}this._iconIndexStart=this._iconIndexBuffer.index,this._textIndexStart=this._textIndexBuffer.index,this._iconIndexCount=0,this._textIndexCount=0,this._markerMap.clear(),this._glyphMap.clear();var w=[];this._symbolInstances=w;var P=this._textLayout,L=1;P&&P.size&&(L=P.size/s.SDF_GLYPH_SIZE);for(var S=P?P.maxAngle*a.C_DEG_TO_RAD:0,M=P?8*P.size:0,C=0,k=this._symbolFeatures;C<k.length;C++){var z=k[C],T=void 0;z.sprite&&(T=r[z.sprite])&&T.sdf&&(this._sdfMarkers=!0);var E=void 0,O=z.label,N=0;if(O){var A=p?P.keepUpright:P.writingMode&&P.writingMode.indexOf(1)>=0;if((E=u.getShaping(O,z.rtl,A))&&E.length>0){for(var F=1e30,j=-1e30,G=0,R=E;G<R.length;G++){var U=R[G];F=Math.min(F,U.x),j=Math.max(j,U.x)}N=(j-F+2*s.SDF_GLYPH_SIZE)*L*8}}for(var Y=0,H=z.geometry;Y<H.length;Y++){var Z=H[Y],J=void 0;if(p){if(E&&E.length>0&&P&&P.size){var K=8*P.size*(2+Math.min(2,4*Math.abs(P.offset[1])));t._smoothVertices(Z,K)}J=t._findAnchors(Z,d,N)}else J=3===z.type?t._findCentroid(Z):[new o.Anchor(Z[0].x,Z[0].y)];for(var W=0,Q=J;W<Q.length;W++){var q=Q[W];q.x<0||q.x>4096||q.y<0||q.y>4096||p&&N>0&&0===P.rotationAlignment&&!t._honorsTextMaxAngle(Z,q,N,S,M)||w.push({shaping:E,line:Z,iconMosaicItem:T,anchor:q,iconSize:z.iconSize,iconRotate:z.iconRotate,ddIconValues:z.ddIconValues,textSize:z.textSize,textRotate:z.textRotate,ddTextValues:z.ddTextValues})}}}w.sort(f);for(var X=0,$=w;X<$.length;X++){var ee=$[X];this._processFeature(ee,i,c)}this._addPlacedGlyphs()},t.prototype.updateSymbols=function(){this._iconIndexStart=this._iconIndexBuffer.index,this._textIndexStart=this._textIndexBuffer.index,this._iconIndexCount=0,this._textIndexCount=0,this._markerMap.clear(),this._glyphMap.clear();var e,t,r=this.layer;r.getLayoutProperty("icon-image")&&(e=this._getTranslate(!0)),r.getLayoutProperty("text-field")&&(t=this._getTranslate(!1));for(var i=0,n=this._symbolInstances;i<n.length;i++){var a=n[i];this._processFeature(a,e,t)}this._addPlacedGlyphs()},t.prototype.assignBufferInfo=function(){},t.prototype._getTranslate=function(e){var t=this.layer.getPaintValue(e?"icon-translate":"text-translate",this.zoom);if(0!==t[0]||0!==t[1]){var r=this._placementEngine.mapAngle;if(0!==r&&0===this.layer.getPaintValue(e?"icon-translate-anchor":"text-translate-anchor",this.zoom)){var i=Math.sin(r),n=Math.cos(r);return[8*(t[0]*n-t[1]*i),8*(t[0]*i+t[1]*n)]}return[8*t[0],8*t[1]]}},t.prototype._replaceKeys=function(e,t){return e.replace(/{([^{}]+)}/g,(function(e,r){return r in t?t[r]:""}))},t.prototype._processFeature=function(e,t,r){var i=e.line,n=e.iconMosaicItem,o=e.shaping,l=e.anchor,u=this._iconLayout,f=u&&!!n,c=!0,h=1;f&&(u.size=e.iconSize,u.rotate=e.iconRotate,h=8*u.size,c=u.optional||!n);var y,p,d=this._textLayout,x=d&&o&&o.length>0,v=1,m=v,_=!0;if(x&&(d.size=e.textSize,d.rotate=e.textRotate,m=8*(v=d.size/s.SDF_GLYPH_SIZE),_=d.optional||!o||0===o.length),f&&(y=this._placementEngine.getIconPlacement(l,t,n,h,u),l.minzoom>y.footprint.minzoom&&(y.footprint.minzoom=l.minzoom),y.footprint.minzoom===a.C_INFINITY&&(y=null)),(y||c)&&(x&&(p=this._placementEngine.getTextPlacement(l,r,o,m,i,d))&&(l.minzoom>p.footprint.minzoom&&(p.footprint.minzoom=l.minzoom),p.footprint.minzoom===a.C_INFINITY&&(p=null)),p||_)){if(y&&p||(_||c?_||p?c||y||(p=null):y=null:(y=null,p=null)),y&&p&&!_&&!c){var g=Math.max(y.footprint.minzoom,p.footprint.minzoom);y.footprint.minzoom=g,p.footprint.minzoom=g}p&&(d.ignorePlacement||this._placementEngine.add(p),this._storePlacedGlyphs(p.shapes,p.footprint.minzoom,this.zoom,e.ddTextValues)),y&&(u.ignorePlacement||this._placementEngine.add(y),this._addPlacedIcons(y.shapes,y.footprint.minzoom,this.zoom,n.page,e.ddIconValues))}},t.prototype._addPlacedIcons=function(e,t,r,i,n){for(var o=Math.max(r+a.log2(t),0),s=this._iconVertexBuffer,l=this._iconIndexBuffer,u=0,f=e;u<f.length;u++){var c=f[u],h=Math.max(r+a.log2(c.minzoom),o),y=Math.min(r+a.log2(c.maxzoom),25);if(!(y<=h)){var p=c.tl,d=c.tr,x=c.bl,v=c.br,m=c.mosaicRect,_=c.labelAngle,g=c.minAngle,D=c.maxAngle,I=c.anchor,b=s.index,V=m.x,B=m.y,w=V+m.width,P=B+m.height;s.add(I.x,I.y,p.x,p.y,V,B,_,g,D,h,y,o,n),s.add(I.x,I.y,d.x,d.y,w,B,_,g,D,h,y,o,n),s.add(I.x,I.y,x.x,x.y,V,P,_,g,D,h,y,o,n),s.add(I.x,I.y,v.x,v.y,w,P,_,g,D,h,y,o,n),l.add(b+0,b+1,b+2),l.add(b+1,b+2,b+3),this._markerMap.has(i)?this._markerMap.get(i)[1]+=6:this._markerMap.set(i,[this._iconIndexStart+this._iconIndexCount,6]),this._iconIndexCount+=2}}},t.prototype._addPlacedGlyphs=function(){var e=this,t=this._textVertexBuffer,r=this._textIndexBuffer;this._glyphBufferDataStorage.forEach((function(i,n){for(var a=0,o=i;a<o.length;a++){var s=o[a],l=t.index;t.add(s.glyphAnchor[0],s.glyphAnchor[1],s.tl[0],s.tl[1],s.xmin,s.ymin,s.labelAngle,s.minAngle,s.maxAngle,s.minLod,s.maxLod,s.placementLod,s.ddValues),t.add(s.glyphAnchor[0],s.glyphAnchor[1],s.tr[0],s.tr[1],s.xmax,s.ymin,s.labelAngle,s.minAngle,s.maxAngle,s.minLod,s.maxLod,s.placementLod,s.ddValues),t.add(s.glyphAnchor[0],s.glyphAnchor[1],s.bl[0],s.bl[1],s.xmin,s.ymax,s.labelAngle,s.minAngle,s.maxAngle,s.minLod,s.maxLod,s.placementLod,s.ddValues),t.add(s.glyphAnchor[0],s.glyphAnchor[1],s.br[0],s.br[1],s.xmax,s.ymax,s.labelAngle,s.minAngle,s.maxAngle,s.minLod,s.maxLod,s.placementLod,s.ddValues),r.add(l+0,l+1,l+2),r.add(l+1,l+2,l+3),e._glyphMap.has(n)?e._glyphMap.get(n)[1]+=6:e._glyphMap.set(n,[e._textIndexStart+e._textIndexCount,6]),e._textIndexCount+=2}})),this._glyphBufferDataStorage.clear()},t.prototype._storePlacedGlyphs=function(e,t,r,i){for(var n=Math.max(r+a.log2(t),0),o=0,s=e;o<s.length;o++){var l=s[o],u=Math.max(r+a.log2(l.minzoom),n),f=Math.min(r+a.log2(l.maxzoom),25);if(!(f<=u)){var c=l.tl,h=l.tr,y=l.bl,p=l.br,d=l.labelAngle,x=l.minAngle,v=l.maxAngle,m=l.anchor,_=l.mosaicRect;this._glyphBufferDataStorage.has(l.page)||this._glyphBufferDataStorage.set(l.page,[]),this._glyphBufferDataStorage.get(l.page).push({glyphAnchor:[m.x,m.y],tl:[c.x,c.y],tr:[h.x,h.y],bl:[y.x,y.y],br:[p.x,p.y],xmin:_.x,ymin:_.y,xmax:_.x+_.width,ymax:_.y+_.height,labelAngle:d,minAngle:x,maxAngle:v,minLod:u,maxLod:f,placementLod:n,ddValues:i})}}},t._findAnchors=function(e,t,r){t+=r;for(var i=0,n=e.length-1,s=0;s<n;s++)i+=u.Point.distance(e[s],e[s+1]);var l=r||t;if(i<=(l*=.5))return[];var f=l/i,c=0,h=-(t=i/Math.max(Math.round(i/t),1))/2,y=[],p=e.length-1;for(s=0;s<p;s++){for(var d=e[s],x=e[s+1],v=x.x-d.x,m=x.y-d.y,_=Math.sqrt(v*v+m*m),g=void 0;h+t<c+_;){var D=((h+=t)-c)/_,I=a.interpolate(d.x,x.x,D),b=a.interpolate(d.y,x.y,D);void 0===g&&(g=Math.atan2(m,v)),y.push(new o.Anchor(I,b,g,s,f))}c+=_}return y},t._deviation=function(e,t,r){var i=(t.x-e.x)*(r.x-t.x)+(t.y-e.y)*(r.y-t.y),n=(t.x-e.x)*(r.y-t.y)-(t.y-e.y)*(r.x-t.x);return Math.atan2(n,i)},t._honorsTextMaxAngle=function(e,t,r,i,n){for(var a=0,o=r/2,s=new u.Point(t.x,t.y),l=t.segment+1;a>-o;){if(--l<0)return!1;a-=u.Point.distance(e[l],s),s=e[l]}a+=u.Point.distance(e[l],e[l+1]);for(var f=[],c=0,h=e.length;a<o;){var y=e[l],p=l,d=void 0;do{if(++p===h)return!1;d=e[p]}while(d.isEqual(y));var x=p,v=void 0;do{if(++x===h)return!1;v=e[x]}while(v.isEqual(d));var m=this._deviation(y,d,v);for(f.push({deviation:m,distToAnchor:a}),c+=m;a-f[0].distToAnchor>n;)c-=f.shift().deviation;if(Math.abs(c)>i)return!1;a+=u.Point.distance(d,v),l=p}return!0},t._smoothVertices=function(e,t){if(!(t<=0)){var r=e.length;if(!(r<3)){var i=[],n=0;i.push(0);for(var a=1;a<r;a++)n+=u.Point.distance(e[a],e[a-1]),i.push(n);t=Math.min(t,.2*n);var o=[];o.push(e[0].x),o.push(e[0].y);var s=e[r-1].x,l=e[r-1].y,f=u.Point.sub(e[0],e[1]);for(f.normalize(),e[0].x+=t*f.x,e[0].y+=t*f.y,f.assignSub(e[r-1],e[r-2]),f.normalize(),e[r-1].x+=t*f.x,e[r-1].y+=t*f.y,a=1;a<r;a++)i[a]+=t;i[r-1]+=t;var c=.5*t;for(a=1;a<r-1;a++){for(var h=0,y=0,p=0,d=a-1;d>=0&&!(i[d+1]<i[a]-c);d--){var x=c+i[d+1]-i[a],v=i[d+1]-i[d],m=i[a]-i[d]<c?1:x/v;if(Math.abs(m)<1e-6)break;var _=m*x-.5*(V=m*m)*v,g=m*v/t,D=e[d+1],I=e[d].x-D.x,b=e[d].y-D.y;h+=g/_*(D.x*m*x+.5*V*(x*I-v*D.x)-V*m*v*I/3),y+=g/_*(D.y*m*x+.5*V*(x*b-v*D.y)-V*m*v*b/3),p+=g}for(d=a+1;d<r&&!(i[d-1]>i[a]+c)&&(x=c-i[d-1]+i[a],v=i[d]-i[d-1],m=i[d]-i[a]<c?1:x/v,!(Math.abs(m)<1e-6));d++){var V;_=m*x-.5*(V=m*m)*v,g=m*v/t,D=e[d-1],I=e[d].x-D.x,b=e[d].y-D.y,h+=g/_*(D.x*m*x+.5*V*(x*I-v*D.x)-V*m*v*I/3),y+=g/_*(D.y*m*x+.5*V*(x*b-v*D.y)-V*m*v*b/3),p+=g}o.push(h/p),o.push(y/p)}for(o.push(s),o.push(l),a=0,d=0;a<r;a++)e[a].x=o[d++],e[a].y=o[d++]}}},t._findCentroid=function(e){var t=e.length-1,r=0,i=0,n=0,a=e[0].x,s=e[0].y;a>4096&&(a=4096),a<0&&(a=0),s>4096&&(s=4096),s<0&&(s=0);for(var l=1;l<t;l++){var u=e[l].x,f=e[l].y,c=e[l+1].x,h=e[l+1].y;u>4096&&(u=4096),u<0&&(u=0),f>4096&&(f=4096),f<0&&(f=0),c>4096&&(c=4096),c<0&&(c=0),h>4096&&(h=4096),h<0&&(h=0);var y=(u-a)*(h-s)-(c-a)*(f-s);r+=y*(a+u+c),i+=y*(s+f+h),n+=y}return r/=3*n,i/=3*n,isNaN(r)||isNaN(i)?[]:[new o.Anchor(r,i)]},t._bidiEngine=new i.default,t}(n)}.apply(null,i))||(e.exports=n)},zywo:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r("ki27"),r("c9QS"),r("BWOx"),r("6+ni")],void 0===(n=function(e,t,r,i,n,a){Object.defineProperty(t,"__esModule",{value:!0});t.Anchor=function(e,t,r,i,n){void 0===r&&(r=0),void 0===i&&(i=-1),void 0===n&&(n=u),this.x=e,this.y=t,this.angle=r,this.segment=i,this.minzoom=n};var o=function(e,t,r,n,a,o,s){void 0===o&&(o=u),void 0===s&&(s=i.C_INFINITY),this.anchor=e,this.labelAngle=t,this.glyphAngle=r,this.page=n,this.alternateVerticalGlyph=a,this.minzoom=o,this.maxzoom=s},s=function(e,t,r,i,n,a,o,s,l,u,f,c){this.tl=e,this.tr=t,this.bl=r,this.br=i,this.mosaicRect=n,this.labelAngle=a,this.minAngle=o,this.maxAngle=s,this.anchor=l,this.minzoom=u,this.maxzoom=f,this.page=c};t.PlacedSymbol=s;var l=function(e,t){this.footprint=e,this.shapes=t};t.Placement=l;var u=.5,f=function(){function e(){this.mapAngle=0,this._conflictEngine=new r.ConflictEngine}return e.prototype.reset=function(){this._conflictEngine.reset()},e.prototype.setAngle=function(e){this.mapAngle=e},e.prototype.getIconPlacement=function(e,t,n,o,f){var c=n.width/n.pixelRatio,h=n.height/n.pixelRatio,y=f.offset[0]-c/2,p=f.offset[1]-h/2,d=y+c,x=p+h,v=n.rect,m=2/n.pixelRatio,_=y-m,g=p-m,D=_+v.width/n.pixelRatio,I=g+v.height/n.pixelRatio,b=new a.Point(_,g),V=new a.Point(D,I),B=new a.Point(_,I),w=new a.Point(D,g),P=f.rotate*i.C_DEG_TO_RAD,L=1===f.rotationAlignment;if(e.segment>=0&&!L&&(P+=e.angle),0!==P){var S=Math.cos(P),M=Math.sin(P);b.rotate(S,M),V.rotate(S,M),B.rotate(S,M),w.rotate(S,M)}var C=8*f.padding,k=new a.Point(e.x,e.y),z=new r.Footprint(this.mapAngle,C,L);z.addBox(k,new r.Box(y,p,d,x),o,P,t,u,i.C_INFINITY);var T=new s(b,w,B,V,v,0,0,256,k,u,i.C_INFINITY,0),E=new l(z,[T]),O=u;return f.allowOverlap||(O=this._conflictEngine.getMinZoom(E.footprint,O)),z.minzoom=O,E},e.prototype.getTextPlacement=function(e,t,f,c,h,y){for(var p=new a.Point(e.x,e.y),d=y.rotate*i.C_DEG_TO_RAD,x=0===y.rotationAlignment,v=y.keepUpright,m=u,_=!x,g=_?0:e.angle,D=e.segment>=0&&x,I=8*y.padding,b=new r.Footprint(this.mapAngle,I,_),V=[],B=!D,w=Number.POSITIVE_INFINITY,P=Number.NEGATIVE_INFINITY,L=w,S=P,M=(D||x)&&v,C=!1,k=0,z=f;k<z.length;k++)if((j=z[k]).vertical){C=!0;break}var T,E=0,O=0;if(!D&&C){var N=n.TextShaping.getTextBox(f,y.lineHeight*n.SDF_GLYPH_SIZE);switch(y.anchor){case 1:E=N.height/2,O=-N.width/2;break;case 2:E=-N.height/2,O=N.width/2;break;case 3:E=N.height/2,O=N.width/2;break;case 4:E=-N.height/2,O=-N.width/2;break;case 5:E=N.height;break;case 7:O=-N.width;break;case 6:O=N.width;break;case 8:E=-N.height}}E+=y.offset[0]*n.SDF_GLYPH_SIZE,O+=y.offset[1]*n.SDF_GLYPH_SIZE;for(var A=0,F=f;A<F.length;A++){var j,G=(j=F[A]).glyphMosaicItem;if(G&&!G.rect.isEmpty){var R=G.rect,U=G.metrics,Y=G.page;B&&(T&&T!==j.y&&(N=void 0,N=C?new r.Box(-S+E,w+O,-L+E,P+O):new r.Box(w+E,L+O,P+E,S+O),b.addBox(p,N,c,d,t,u,i.C_INFINITY),L=w=Number.POSITIVE_INFINITY,S=P=Number.NEGATIVE_INFINITY),T=j.y);var H=[];if(D){var Z=.5*G.metrics.width,J=(j.x+U.left-4+Z)*c;if(m=this._placeGlyph(e,m,J,h,e.segment,1,j.vertical,Y,H),v&&(m=this._placeGlyph(e,m,J,h,e.segment,-1,j.vertical,Y,H)),m>=2)break}else H.push(new o(p,g,g,Y,!1)),x&&v&&H.push(new o(p,g+i.C_PI,g+i.C_PI,Y,!1));var K=j.x+U.left,W=j.y-n.SDF_GLYPH_BASELINE-U.top,Q=K+U.width,q=W+U.height,X=void 0,$=void 0,ee=void 0,te=void 0;if(!D&&C)if(j.vertical){var re=(K+Q)/2-U.height/2,ie=(W+q)/2+U.width/2;X=new a.Point(-ie-4+E,re-4+O),$=new a.Point(X.x+R.width,X.y+R.height),ee=new a.Point(X.x,$.y),te=new a.Point($.x,X.y)}else X=new a.Point(4-W+E,K-4+O),$=new a.Point(X.x-R.height,X.y+R.width),ee=new a.Point($.x,X.y),te=new a.Point(X.x,$.y);else X=new a.Point(K-4+E,W-4+O),$=new a.Point(X.x+R.width,X.y+R.height),ee=new a.Point(X.x,$.y),te=new a.Point($.x,X.y);for(var ne=void 0,ae=void 0,oe=void 0,se=void 0,le=0,ue=H;le<ue.length;le++){var fe=ue[le],ce=void 0,he=void 0,ye=void 0,pe=void 0;fe.alternateVerticalGlyph?(ne||(re=(K+Q)/2+E,ie=(W+q)/2+O,ne=new a.Point(re-U.height/2-4,ie+U.width/2+4),ae=new a.Point(ne.x+R.height,ne.y-R.width),oe=new a.Point(ae.x,ne.y),se=new a.Point(ne.x,ae.y)),ce=ne,he=oe,ye=se,pe=ae):(ce=X,he=ee,ye=te,pe=$);var de=W,xe=q,ve=fe.glyphAngle+d;if(0!==ve){var me=Math.cos(ve),_e=Math.sin(ve);ce=ce.clone(),he=he.clone(),ye=ye.clone(),pe=pe.clone(),ce.rotate(me,_e),pe.rotate(me,_e),he.rotate(me,_e),ye.rotate(me,_e)}var ge=0,De=256;D&&C?j.vertical?fe.alternateVerticalGlyph?(ge=32,De=96):(ge=224,De=32):(ge=224,De=96):(ge=192,De=64),V.push(new s(ce,ye,he,pe,R,fe.labelAngle,ge,De,fe.anchor,fe.minzoom,fe.maxzoom,fe.page)),M&&!this._legible(fe.labelAngle)||(B?(K<w&&(w=K),de<L&&(L=de),Q>P&&(P=Q),xe>S&&(S=xe)):fe.minzoom<2&&b.addBox(fe.anchor,new r.Box(K+E,de+O,Q+E,xe+O),c,ve,t,fe.minzoom,fe.maxzoom))}}}if(m>=2)return null;B&&(N=void 0,N=C?new r.Box(-S+E,w+O,-L+E,P+O):new r.Box(w+E,L+O,P+E,S+O),b.addBox(p,N,c,d,t,u,i.C_INFINITY));var Ie=new l(b,V);return y.allowOverlap||(m=this._conflictEngine.getMinZoom(Ie.footprint,m)),b.minzoom=m,Ie},e.prototype.add=function(e){this._conflictEngine.add(e.footprint)},e.prototype._legible=function(e){var t=i.radToByte(e);return t<65||t>=193},e.prototype._placeGlyph=function(e,t,r,n,s,l,u,f,c){var h=l,y=h<0?i.positiveMod(e.angle+i.C_PI,i.C_2PI):e.angle,p=0;r<0&&(h*=-1,r*=-1,p=i.C_PI),h>0&&++s;var d=new a.Point(e.x,e.y),x=n[s],v=i.C_INFINITY;if(n.length<=s)return v;for(;;){var m=x.x-d.x,_=x.y-d.y,g=Math.sqrt(m*m+_*_),D=Math.max(r/g,t),I=m/g,b=_/g,V=i.positiveMod(Math.atan2(b,I)+p,i.C_2PI);if(c.push(new o(d,y,V,f,!1,D,v)),u&&c.push(new o(d,y,V,f,!0,D,v)),D<=t)return D;d=x.clone();do{if(s+=h,n.length<=s||s<0)return D;x=n[s]}while(d.isEqual(x));var B=x.x-d.x,w=x.y-d.y,P=Math.sqrt(B*B+w*w);B*=g/P,w*=g/P,d.x-=B,d.y-=w,v=D}},e}();t.PlacementEngine=f}.apply(null,i))||(e.exports=n)}}]);
(function(){(this||window).webpackJsonp.registerAbsMids({"esri/layers/support/lazyLayerLoader":"FayN","esri/portal/support/jsonContext":"OECU","esri/renderers/support/styleUtils":"PhdM","esri/portal/support/layersCreator":"RDRC","esri/portal/support/portalItemUtils":"WYOF","esri/portal/support/featureCollectionUtils":"pOAQ","esri/portal/support/portalLayers":"uLAD"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[57,21,74,81,143],{"1xFi":function(e,r,t){var a,n;a=[t.dj.c(e.i),r,t("zOht"),t("0J3i"),t("ma1f"),t("Qwus"),t("xuSL"),t("3k9p"),t("2Kdy")],void 0===(n=function(e,r,t,a,n,i,o,u){function s(e,r){return void 0===e&&(e=null),t.__awaiter(this,void 0,void 0,(function(){var u;return t.__generator(this,(function(t){switch(t.label){case 0:if(a.geometryServiceUrl)return[2,new o({url:a.geometryServiceUrl})];if(!e)throw new n("internal:geometry-service-url-not-configured");return[4,(u="portal"in e?e.portal||i.getDefault():e).load({signal:r})];case 1:if(t.sent(),u.helperServices&&u.helperServices.geometry&&u.helperServices.geometry.url)return[2,new o({url:u.helperServices.geometry.url})];throw new n("internal:geometry-service-url-not-configured")}}))}))}Object.defineProperty(r,"__esModule",{value:!0}),r.create=s,r.projectGeometry=function(e,r,a,i){return void 0===a&&(a=null),t.__awaiter(this,void 0,void 0,(function(){var o,l,c;return t.__generator(this,(function(t){switch(t.label){case 0:return[4,s(a,i)];case 1:return o=t.sent(),(l=new u).geometries=[e],l.outSpatialReference=r,[4,o.project(l,{signal:i})];case 2:if((c=t.sent())&&Array.isArray(c)&&1===c.length)return[2,c[0]];throw new n("internal:geometry-service-projection-failed")}}))}))}}.apply(null,a))||(e.exports=n)},"3uRw":function(e,r,t){var a={"./Portal":"Qwus","./Portal.js":"Qwus","./PortalFolder":"NnwI","./PortalFolder.js":"NnwI","./PortalGroup":"qHC3","./PortalGroup.js":"qHC3","./PortalItem":"QmTF","./PortalItem.js":"QmTF","./PortalItemResource":"PiqQ","./PortalItemResource.js":"PiqQ","./PortalQueryParams":"kW9H","./PortalQueryParams.js":"kW9H","./PortalQueryResult":"MYBG","./PortalQueryResult.js":"MYBG","./PortalRating":"Wq0j","./PortalRating.js":"Wq0j","./PortalUser":"6yKj","./PortalUser.js":"6yKj","./schemas/buildingSceneLayerItem":"SDhx","./schemas/buildingSceneLayerItem.js":"SDhx","./schemas/integratedMeshLayerItem":"qmEF","./schemas/integratedMeshLayerItem.js":"qmEF","./schemas/pointCloudLayerItem":"C3W0","./schemas/pointCloudLayerItem.js":"C3W0","./schemas/sceneLayerItem":"tZ6z","./schemas/sceneLayerItem.js":"tZ6z","./schemas/validator":"S7rV","./schemas/validator.js":"S7rV","./support/featureCollectionUtils":"pOAQ","./support/featureCollectionUtils.js":"pOAQ","./support/geometryServiceUtils":"1xFi","./support/geometryServiceUtils.js":"1xFi","./support/jsonContext":"OECU","./support/jsonContext.js":"OECU","./support/layersCreator":"RDRC","./support/layersCreator.js":"RDRC","./support/layersLoader":"6hwa","./support/layersLoader.js":"6hwa","./support/portalItemUtils":"WYOF","./support/portalItemUtils.js":"WYOF","./support/portalLayers":"uLAD","./support/portalLayers.js":"uLAD","./support/resourceUtils":"bzQL","./support/resourceUtils.js":"bzQL"};function n(e){var r=i(e);return t(r)}function i(e){if(!t.o(a,e)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=i,e.exports=n,n.id="3uRw"},"6hwa":function(e,r,t){var a,n;a=[t.dj.c(e.i),r,t("zOht"),t("zp6E"),t("ma1f"),t("qMld"),t("FayN"),t("Qwus"),t("OECU"),t("PhdM")],void 0===(n=function(e,r,t,a,n,i,o,u,s,l){function c(e,r){return t.__awaiter(this,void 0,void 0,(function(){var a,n,i,o,u,c;return t.__generator(this,(function(t){switch(t.label){case 0:return a=e.instance,n=a.portalItem,i=n.url,o=n.title,u=s.createForItem(n),"group"===a.type?(a.read({title:o},u),[2,y(a,e)]):(i&&a.read({url:i},u),[4,d(e,r)]);case 1:return(c=t.sent())&&a.read(c,u),a.resourceReferences={portalItem:n,paths:u.readResourcePaths},a.read({title:o},u),[2,l.loadStyleRenderer(a,u)]}}))}))}function y(e,r){var t,u,s=e.portalItem.type;switch(s){case"Feature Service":t=o.layerLookupMap.FeatureLayer;break;case"Stream Service":t=o.layerLookupMap.StreamLayer;break;case"Scene Service":t=o.layerLookupMap.SceneLayer;break;case"Feature Collection":t=o.layerLookupMap.FeatureLayer;break;default:throw new n("portal:unsupported-item-type-as-group","The item type '"+s+"' is not supported as a 'GroupLayer'")}return t().then((function(e){return u=e,d(r)})).then((function(r){return r&&Array.isArray(r.layers)?p(e,u,r):function(e,r){return e.portalItem.url?a(e.portalItem.url,{responseType:"json",query:{f:"json"}}).then((function(t){var a=t.data;if(a&&Array.isArray(a.layers)){var n=a.layers.map((function(e){return{id:e.id,name:e.name}}));return p(e,r,{layers:n})}})):i.resolve()}(e,u)}))}function p(e,r,t){var a=t.showLegend,n=t.layers.slice();n.reverse(),n.forEach((function(t){var n=new r({portalItem:e.portalItem,layerId:t.id,sublayerTitleMode:"service-name"});if("Feature Collection"===e.portalItem.type){var i={origin:"portal-item",portal:e.portalItem.portal||u.getDefault()};n.read(t,i),null!=a&&n.read({showLegend:a},i)}e.add(n)}))}function d(e,r){if(!1===e.supportsData)return i.resolve();var t=e.instance;return t.portalItem.fetchData("json",r).catch((function(){return null})).then((function(e){var r,a=e;if(function(e){return"stream"!==e.type&&"layerId"in e}(t)){var n=!0;if(e&&Array.isArray(a.layers)){null==t.layerId&&(t.layerId=a.layers[0].id);for(var i=0;i<a.layers.length;i++)if(a.layers[i].id===t.layerId){r=a.layers[i];break}r&&(1===a.layers.length&&(n=!1),null!=e.showLegend&&(r.showLegend=e.showLegend))}return n&&"service-name"!==t.sublayerTitleMode&&(t.sublayerTitleMode="item-title-and-service-name"),r}return e}))}Object.defineProperty(r,"__esModule",{value:!0}),r.load=function(e,r){return t.__awaiter(this,void 0,void 0,(function(){var a;return t.__generator(this,(function(t){switch(t.label){case 0:return(a=e.instance.portalItem)&&a.id?[4,a.load(r)]:[2,i.resolve()];case 1:return t.sent(),function(e){var r=e.instance.portalItem;if(-1===e.supportedTypes.indexOf(r.type))throw new n("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}'",{type:r.type,expectedType:e.supportedTypes.join(", ")})}(e),[2,c(e,r)]}}))}))}}.apply(null,a))||(e.exports=n)},FayN:function(e,r,t){var a,n;a=[t.dj.c(e.i),r,t("2Kdy")],void 0===(n=function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.layerLookupMap={BingMapsLayer:function(){return new Promise((function(e,r){t.e(87).then(function(){var r=[t("V7mb")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},BuildingSceneLayer:function(){return new Promise((function(e,r){t.e(42).then(function(){var r=[t("gRqF")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},CSVLayer:function(){return new Promise((function(e,r){Promise.all([t.e(5),t.e(80)]).then(function(){var r=[t("zwOT")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},ElevationLayer:function(){return new Promise((function(e,r){t.e(22).then(function(){var r=[t("GAgw")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},FeatureLayer:function(){return new Promise((function(e,r){t.e(5).then(function(){var r=[t("Zvuv")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},GroupLayer:function(){return new Promise((function(e,r){t.e(26).then(function(){var r=[t("lAGb")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},GeoRSSLayer:function(){return new Promise((function(e,r){t.e(94).then(function(){var r=[t("Hpgp")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},ImageryLayer:function(){return new Promise((function(e,r){Promise.all([t.e(7),t.e(10),t.e(11),t.e(44)]).then(function(){var r=[t("G5N4")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},ImageryTileLayer:function(){return new Promise((function(e,r){Promise.all([t.e(11),t.e(20),t.e(49)]).then(function(){var r=[t("EhmR")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},IntegratedMeshLayer:function(){return new Promise((function(e,r){Promise.all([t.e(17),t.e(62)]).then(function(){var r=[t("wehw")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},KMLLayer:function(){return new Promise((function(e,r){t.e(68).then(function(){var r=[t("hPxN")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},MapImageLayer:function(){return new Promise((function(e,r){t.e(19).then(function(){var r=[t("d+WR")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},MapNotesLayer:function(){return new Promise((function(e,r){Promise.all([t.e(5),t.e(95)]).then(function(){var r=[t("2OQv")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},OpenStreetMapLayer:function(){return new Promise((function(e,r){t.e(96).then(function(){var r=[t("793k")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},PointCloudLayer:function(){return new Promise((function(e,r){t.e(37).then(function(){var r=[t("wvIq")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},RouteLayer:function(){return new Promise((function(e,r){Promise.all([t.e(5),t.e(97)]).then(function(){var r=[t("BdvN")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},SceneLayer:function(){return new Promise((function(e,r){Promise.all([t.e(5),t.e(63)]).then(function(){var r=[t("yf9t")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},StreamLayer:function(){return new Promise((function(e,r){t.e(48).then(function(){var r=[t("QiYT")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},TileLayer:function(){return new Promise((function(e,r){Promise.resolve().then(function(){var r=[t("WiXY")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},UnknownLayer:function(){return new Promise((function(e,r){t.e(98).then(function(){var r=[t("N1SI")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},UnsupportedLayer:function(){return new Promise((function(e,r){t.e(99).then(function(){var r=[t("9ZiH")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},VectorTileLayer:function(){return new Promise((function(e,r){t.e(47).then(function(){var r=[t("UW67")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},WebTileLayer:function(){return new Promise((function(e,r){Promise.resolve().then(function(){var r=[t("a2fw")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},WMSLayer:function(){return new Promise((function(e,r){t.e(69).then(function(){var r=[t("dWJG")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))},WMTSLayer:function(){return new Promise((function(e,r){t.e(70).then(function(){var r=[t("AgRT")];e.apply(null,r)}.bind(this)).catch(r.bind(this))}))}}}.apply(null,a))||(e.exports=n)},OECU:function(e,r,t){var a,n;a=[t.dj.c(e.i),r,t("jfWY"),t("Qwus")],void 0===(n=function(e,r,t,a){Object.defineProperty(r,"__esModule",{value:!0}),r.createForItem=function(e){return{origin:"portal-item",url:t.urlToObject(e.itemUrl),portal:e.portal||a.getDefault(),portalItem:e,readResourcePaths:[]}}}.apply(null,a))||(e.exports=n)},PhdM:function(e,r,t){var a,n;a=[t.dj.c(e.i),r,t("zOht"),t("WYKK"),t("qMld"),t("V2ZO")],void 0===(n=function(e,r,t,a,n,i){Object.defineProperty(r,"__esModule",{value:!0}),r.loadStyleRenderer=function(e,r,o){return t.__awaiter(this,void 0,void 0,(function(){var u,s,l;return t.__generator(this,(function(t){switch(t.label){case 0:return(u=e&&e.getAtOrigin&&e.getAtOrigin("renderer",r.origin))&&"unique-value"===u.type&&u.styleOrigin?[4,a.result(u.populateFromStyle())]:[3,2];case 1:s=t.sent(),n.throwIfAborted(o),!1===s.ok&&(l=s.error,r&&r.messages&&r.messages.push(new i("renderer:style-reference","Failed to create unique value renderer from style reference: "+l.message,{error:l,context:r})),e.clear("renderer",r.origin)),t.label=2;case 2:return[2]}}))}))}}.apply(null,a))||(e.exports=n)},RDRC:function(e,r,t){var a,n;a=[t.dj.c(e.i),r,t("zOht"),t("y4WC"),t("H1tY"),t("qMld"),t("FayN"),t("QmTF"),t("pOAQ"),t("uLAD"),t("PhdM")],void 0===(n=function(e,r,t,a,n,i,o,u,s,l,c){Object.defineProperty(r,"__esModule",{value:!0});var y=n("esri-debug-messages"),p={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer"},d={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},f={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",DefaultTileLayer:"TileLayer"},h={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",VectorTileLayer:"VectorTileLayer",GroupLayer:"GroupLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",GeoRSS:"GeoRSSLayer",KML:"KMLLayer",WFS:"UnsupportedLayer",SubtypeGroupLayer:"UnsupportedLayer",WMS:"WMSLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",DefaultTileLayer:"TileLayer"},L={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"};function v(e,r,a){return t.__awaiter(this,void 0,void 0,(function(){var n;return t.__generator(this,(function(t){switch(t.label){case 0:return(n=new e).read(r,a.context),"group"===n.type&&g(r)?[4,b(n,r,a.context)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[4,c.loadStyleRenderer(n,a.context)];case 3:return t.sent(),[2,n]}}))}))}function m(e,r){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return[4,w(e,r)];case 1:return[2,v(t.sent(),e,r)]}}))}))}function w(e,r){return t.__awaiter(this,void 0,void 0,(function(){var a,n,i,c,y,v,m,w,I;return t.__generator(this,(function(t){switch(t.label){case 0:return a=r.context,n=function(e){var r;switch(e.origin){case"web-scene":switch(e.layerContainerType){case"basemap":r=f;break;case"ground":r=d;break;default:r=p}break;default:switch(e.layerContainerType){case"basemap":r=L;break;default:r=h}}return r}(a),!(i=e.layerType||e.type)&&r&&r.defaultLayerType&&(i=r.defaultLayerType),c=n[i],y=c?o.layerLookupMap[c]:o.layerLookupMap.UnknownLayer,v=a&&a.portal,S(e)?e.itemId?[4,(m=new u({id:e.itemId,portal:v})).load()]:[3,3]:[3,4];case 1:return t.sent(),[4,l.selectLayerClassPath(m)];case 2:w=t.sent(),I=w.className||"UnknownLayer",y=o.layerLookupMap[I],t.label=3;case 3:return[3,8];case 4:return"ArcGISFeatureLayer"!==i?[3,8]:[4,s.isMapNotesLayer(e,v)];case 5:return t.sent()?(y=o.layerLookupMap.MapNotesLayer,[3,8]):[3,6];case 6:return[4,s.isRouteLayer(e,v)];case 7:t.sent()?y=o.layerLookupMap.RouteLayer:g(e)&&(y=o.layerLookupMap.GroupLayer),t.label=8;case 8:return e.wmtsInfo&&e.wmtsInfo.url&&e.wmtsInfo.layerIdentifier&&(y=o.layerLookupMap.WMTSLayer),[2,y()]}}))}))}function g(e){if("ArcGISFeatureLayer"!==e.layerType||S(e))return!1;var r=e.featureCollection;return!!(r&&r.layers&&r.layers.length>1)}function S(e){return"Feature Collection"===e.type}function I(e,r,n){return t.__awaiter(this,void 0,void 0,(function(){var i,o,u;return t.__generator(this,(function(t){switch(t.label){case 0:return i=new a,o=M(i,Array.isArray(r.layers)?r.layers:[],n),[4,e];case 1:return u=t.sent(),[4,o];case 2:return t.sent(),"group"===u.type?(u.layers.addMany(i),[2,u]):[2,void 0]}}))}))}function b(e,r,a){return t.__awaiter(this,void 0,void 0,(function(){var n,i,u,s;return t.__generator(this,(function(t){switch(t.label){case 0:return[4,(0,o.layerLookupMap.FeatureLayer)()];case 1:return n=t.sent(),i=r.featureCollection,u=i.showLegend,s=i.layers.map((function(e){var r=new n;return r.read(e,a),null!=u&&r.read({showLegend:u},a),r})),e.layers.addMany(s),[2]}}))}))}function M(e,r,a){return t.__awaiter(this,void 0,void 0,(function(){var n,o,u,s,l,c,p,d,f;return t.__generator(this,(function(t){switch(t.label){case 0:if(!r)return[2];for(n=[],o=0,u=r;o<u.length;o++)s=u[o],l=m(s,a),"GroupLayer"===s.layerType?n.push(I(l,s,a)):n.push(l);return[4,i.eachAlways(n)];case 1:for(c=t.sent(),p=0,d=c;p<d.length;p++)f=d[p],y&&f.error||!f.value||a.filter&&!a.filter(f.value)||e.add(f.value);return[2]}}))}))}r.createLayer=m,r.populateOperationalLayers=function(e,r,a){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){return[2,M(e,r,a)]}))}))}}.apply(null,a))||(e.exports=n)},WYOF:function(e,r,t){var a,n;a=[t.dj.c(e.i),r],void 0===(n=function(e,r){function t(e,r){return!!e.typeKeywords&&e.typeKeywords.indexOf(r)>-1}Object.defineProperty(r,"__esModule",{value:!0}),r.addTypeKeyword=function(e,r){if(!t(e,r)){var a=e.typeKeywords;a?a.push(r):e.typeKeywords=[r]}},r.hasTypeKeyword=t,r.removeTypeKeyword=function(e,r){var t=e.typeKeywords;if(t){var a=t.indexOf(r);a>-1&&t.splice(a,1)}}}.apply(null,a))||(e.exports=n)},pOAQ:function(e,r,t){var a,n;a=[t.dj.c(e.i),r,t("zOht"),t("QmTF"),t("WYOF")],void 0===(n=function(e,r,t,a,n){function i(e,r,i,o){return t.__awaiter(this,void 0,void 0,(function(){var u;return t.__generator(this,(function(t){switch(t.label){case 0:return e.layerType&&"ArcGISFeatureLayer"===e.layerType?e.url?[2,!1]:e.featureCollectionType&&e.featureCollectionType===i?[2,!0]:e.itemId?[4,(u=new a({id:e.itemId,portal:r})).load()]:[3,2]:[2,!1];case 1:return t.sent(),[2,"Feature Collection"===u.type&&n.hasTypeKeyword(u,o)];case 2:return[2,!1]}}))}))}Object.defineProperty(r,"__esModule",{value:!0}),r.isMapNotesLayer=function(e,r){return i(e,r,"notes","Map Notes")},r.isRouteLayer=function(e,r){return i(e,r,"route","Route Layer")}}.apply(null,a))||(e.exports=n)},uLAD:function(e,r,t){var a,n;a=[t.dj.c(e.i),r,t("zOht"),t("zp6E"),t("ma1f"),t("qMld"),t("FayN"),t("QmTF"),t("WYOF")],void 0===(n=function(e,r,t,a,n,i,o,u,s){function l(e){switch(e.type){case"Map Service":return function(e){return function(e){return p(e.url).then((function(e){return e.tileInfo}))}(e).then((function(e){return e?{className:"TileLayer"}:{className:"MapImageLayer"}}))}(e);case"Feature Service":return function(e){return y(e).then((function(e){if("object"==typeof e){var r={};return null!=e.id&&(r.layerId=e.id),{className:"FeatureLayer",properties:r}}return{className:"GroupLayer"}}))}(e);case"Feature Collection":return function(e){return t.__awaiter(this,void 0,void 0,(function(){var r;return t.__generator(this,(function(t){switch(t.label){case 0:return[4,e.load()];case 1:return t.sent(),s.hasTypeKeyword(e,"Map Notes")?[2,{className:"MapNotesLayer"}]:s.hasTypeKeyword(e,"Route Layer")?[2,{className:"RouteLayer"}]:[4,e.fetchData()];case 2:return(r=t.sent())&&Array.isArray(r.layers)&&1===r.layers.length?[2,{className:"FeatureLayer"}]:[2,{className:"GroupLayer"}]}}))}))}(e);case"Scene Service":return function(e){return y(e).then((function(r){if("object"==typeof r){var t={},a=void 0;if(null!=r.id?(t.layerId=r.id,a=e.url+"/layers/"+r.id):a=e.url,Array.isArray(e.typeKeywords)&&e.typeKeywords.length>0)for(var n={IntegratedMesh:"IntegratedMeshLayer","3DObject":"SceneLayer",Point:"SceneLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"},i=0,o=Object.keys(n);i<o.length;i++){var u=o[i];if(-1!==e.typeKeywords.indexOf(u))return{className:n[u]}}return p(a).then((function(e){var r="SceneLayer",a={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};return e&&e.layerType&&a[e.layerType]&&(r=a[e.layerType]),{className:r,properties:t}}))}return{className:"GroupLayer"}}))}(e);case"Image Service":return function(e){var r,a,n;return t.__awaiter(this,void 0,void 0,(function(){var i,o,u,s;return t.__generator(this,(function(t){switch(t.label){case 0:return[4,e.load()];case 1:return t.sent(),(i=null!==(a=null===(r=e.typeKeywords)||void 0===r?void 0:r.map((function(e){return e.toLowerCase()})))&&void 0!==a?a:[]).indexOf("elevation 3d layer")>-1?[2,{className:"ElevationLayer"}]:i.indexOf("tiled imagery")>-1?[2,{className:"ImageryTileLayer"}]:[4,e.fetchData()];case 2:return o=t.sent(),"ArcGISTiledImageServiceLayer"===(u=null==o?void 0:o.layerType)?[2,{className:"ImageryTileLayer"}]:"ArcGISImageServiceLayer"===u?[2,{className:"ImageryLayer"}]:[4,p(e.url)];case 3:return s=t.sent(),"map"===(null===(n=s.cacheType)||void 0===n?void 0:n.toLowerCase())?[2,{className:"ImageryTileLayer"}]:[2,{className:"ImageryLayer"}]}}))}))}(e);case"Stream Service":return{className:"StreamLayer"};case"Vector Tile Service":return{className:"VectorTileLayer"};case"KML":return{className:"KMLLayer"};case"WMTS":return{className:"WMTSLayer"};case"WMS":return{className:"WMSLayer"};default:return i.reject(new n("portal:unknown-item-type","Unknown item type '${type}'",{type:e.type}))}}function c(e){return(0,o.layerLookupMap[e.className])().then((function(r){return{constructor:r,properties:e.properties}}))}function y(e){return!e.url||e.url.match(/\/\d+$/)?i.resolve({}):e.load().then((function(){return e.fetchData()})).then((function(r){return r&&Array.isArray(r.layers)?1===r.layers.length&&{id:r.layers[0].id}:p(e.url).then((function(e){return e&&Array.isArray(e.layers)?1===e.layers.length&&{id:e.layers[0].id}:{}}))}))}function p(e){return a(e,{responseType:"json",query:{f:"json"}}).then((function(e){return e.data}))}Object.defineProperty(r,"__esModule",{value:!0}),r.fromItem=function(e){return!e.portalItem||e.portalItem instanceof u||(e=t.__assign(t.__assign({},e),{portalItem:new u(e.portalItem)})),(r=e.portalItem,r.load().then(l).then(c)).then((function(r){var a=t.__assign({portalItem:e.portalItem},r.properties),n=r.constructor;return i.resolve(new n(a))}));var r},r.selectLayerClassPath=l}.apply(null,a))||(e.exports=n)}}]);
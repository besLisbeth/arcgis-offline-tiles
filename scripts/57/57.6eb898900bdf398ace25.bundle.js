(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/2d/layers/features/controllers/MemoryController":"2X62","esri/views/2d/engine/webgl/color":"4F/P","esri/views/2d/engine/webgl/SymbolProperties":"7AYJ","esri/core/HandleOwner":"7MDj","esri/layers/support/FeatureProcessing":"B0tL","esri/views/2d/layers/features/controllers/BaseController":"Btct","esri/views/2d/engine/webgl/number":"Dos2","esri/views/2d/engine/webgl/enums":"JNkf","esri/geometry/support/GeographicTransformationStep":"MbkH","esri/geometry/support/GeographicTransformation":"OkCb","esri/layers/graphics/data/projectionSupport":"Q2Em","esri/layers/graphics/data/FeatureFilter":"Z0JH","esri/views/webgl/Texture":"Zp3t","esri/views/2d/engine/webgl/Utils":"apbF","esri/views/2d/layers/features/support/TileUpdateQueue":"sOkP","esri/geometry/support/quantizationUtils":"u90+","esri/geometry/pe":"w7fK","esri/geometry/projection":"wIC5"})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{"2X62":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("2Atf"),r("Q2wQ"),r("HZ3d"),r("TMur"),r("ma1f"),r("qsST"),r("LxLY"),r("qMld"),r("8V7H"),r("Vx27"),r("nrlZ"),r("+6sX"),r("B0tL"),r("lAK8"),r("IpeC"),r("apbF"),r("Btct"),r("sOkP")],void 0===(i=function(e,t,r,n,i,o,s,a,u,p,_,l,c,h,f,d,y,E,g,m,T,P){Object.defineProperty(t,"__esModule",{value:!0});var v=p.getLogger("esri.views.2d.layers.features.controllers.MemoryController"),I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="memory",t._processingInMainThread=!1,t}return r(t,e),t.prototype.initialize=function(){var e=this;this._tileQueue=new P.default({tileInfoView:this.tileStore.tileScheme,process:function(t,r){return e._fetchFeatureSet(t,r)}}),this._memorySource=c.openWithPorts(this.service.source,{client:this}),this.handles.add(this.watch("processor",this._switchProcessor.bind(this)))},t.prototype.destroy=function(){this._memorySource.close(),this._memorySource=null,this._tileQueue.clear(),this._tileQueue.pause()},Object.defineProperty(t.prototype,"processing",{get:function(){return y.fromWorker(this.configuration.processing)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return this._tileQueue.updating},enumerable:!0,configurable:!0}),t.prototype.onEdits=function(e){this.refresh()},t.prototype.queryFeatures=function(e){return this._memorySource.invoke("queryFeatures",e)},t.prototype.queryFeatureCount=function(e){return this._memorySource.invoke("queryFeatureCount",e)},t.prototype.queryObjectIds=function(e){return this._memorySource.invoke("queryObjectIds",e)},t.prototype.queryExtent=function(e){return this._memorySource.invoke("queryExtent",e)},t.prototype.redraw=function(){this.refresh()},t.prototype.refresh=function(){this._tileQueue.refresh();for(var e=0,t=this.tileStore.tiles;e<t.length;e++){var r=t[e];this._tileQueue.push(r.id,r.updateTimestamp)}},t.prototype.setViewState=function(e){this._tileQueue.state=e},t.prototype.setFilter=function(e){var t=e.index,r=e.filter;return s(this,void 0,void 0,function(){var e;return o(this,function(n){switch(n.label){case 0:return[4,this.setFilterBase(t,r)];case 1:return e=n.sent(),this.processor&&!this.processor.supportsTileUpdates&&this.redraw(),_.isNone(e)?(v.error(new u("featurelayer-controller:required-fields-error","Tried to set filter but was unable to find required fields")),[2,{show:[],hide:[]}]):[2,e]}})})},t.prototype.onTileUpdate=function(e){this._tileQueue.pause();for(var t=0,r=e.removed;t<r.length;t++){var n=r[t];this._tileQueue.cancel(n.id)}for(var i=0,o=e.added;i<o.length;i++){n=o[i];this._tileQueue.push(n.id,n.updateTimestamp)}this.processor&&this._tileQueue.resume()},t.prototype._switchProcessor=function(e,t){this.refresh(),e&&this._tileQueue.resume()},t.prototype._fetchFeatureSet=function(e,t){var r=this,n=this.tileStore.get(e),i=this.processor.queryInfo;return this._query(n,i).then(function(e){return r._setFilterFlags(e)}).then(function(e){return r._wrapPoints(e,i)}).then(function(e){return r._sortFeatures(e,i)}).then(function(e){return e.features.length?e:null}).then(function(e){return n.updateTimestamp=t,r.processor.onTileData(n,{addOrUpdate:e&&e.features,clear:!0,transformParams:e&&m.getTransformParams(e)})}).catch(function(e){return n.updateTimestamp=t,"cancel"!==e.dojoType&&(r.processor.onTileError(n,e.message),v.error("query-error",{error:e})),l.reject(e)})},t.prototype._query=function(e,t){var r=this,n=new g,i=this._getQuantizationParameters(e),o=t.pixelBuffer*e.resolution,s=e.bounds.slice();return s[0]-=o,s[1]-=o,s[2]+=o,s[3]+=o,n.outFields=this.processor.queryInfo.outFields,n.where=this.processor.queryInfo.definitionExpression||"1=1",n.geometry=new a.Extent({xmin:s[0],ymin:s[1],xmax:s[2],ymax:s[3],spatialReference:this.spatialReference}),this.service.capabilities.query.supportsQuantization?(n.quantizationParameters=i,"esriGeometryPolyline"===this.service.geometryType&&(n.maxAllowableOffset=i.tolerance)):n.maxAllowableOffset=i.tolerance,n.resultType="tile",n.returnExceededLimitFeatures=!1,n.returnGeometry=!0,n.returnCentroid=t.returnCentroid,n.orderByFields=t.orderByFields,this.queryFeatures(n.toJSON()).then(function(e){return t.returnCentroid?e.features=e.features.filter(function(e){return null!=e.geometry&&null!=e.centroid}):e.features=e.features.filter(function(e){return null!=e.geometry}),e}).then(function(e){return r._applyProcessing(e)})},t.prototype._applyProcessing=function(e){var t=this.processing;if(!t)return e;if(this._processingInMainThread)return this.remoteClient.invoke("executeProcessing",{featureSet:e});try{return t.process(e,t.options)||l.reject(new u("FeatureLayer","invalid processing.process() method, returns nothing"))}catch(t){return this._processingInMainThread=!0,this.remoteClient.invoke("executeProcessing",{featureSet:e})}},t.prototype._getQuantizationParameters=function(e){return new E.default({mode:"view",originPosition:"lower-left",tolerance:e.resolution,extent:new a.Extent({xmin:e.bounds[0],ymin:e.bounds[1],xmax:e.bounds[2],ymax:e.bounds[3],spatialReference:this.spatialReference})})},t.prototype._wrapPoints=function(e,t){if(0===e.features.length)return e;var r=t.returnCentroid,n=t.pixelBuffer,o=e.geometryType,s=e.spatialReference,a=e.transform;if("esriGeometryPoint"!==o&&"esriGeometryMultipoint"!==o&&!r||!f.isWrappable(s))return e;var u=e.features,p=f.getInfo(s),_=Math.round((p.valid[1]-p.valid[0])/a.scale[0]);if(512===_){for(var l=[],c=0,h=u;c<h.length;c++){var d=h[c],y=d.geometry,E=d.attributes;if(y)if(y.x<n){(g={geometry:i({},y),attributes:E}).geometry.x+=_,l.push(g)}else if(y.x>512-n){var g;(g={geometry:i({},y),attributes:E}).geometry.x-=_,l.push(g)}}u.push.apply(u,l)}else for(var m=0,T=u;m<T.length;m++){(y=T[m].geometry)&&(y.x<-n?y.x+=_:y.x>512+n&&(y.x-=_))}return e},t.prototype._sortFeatures=function(e,t){var r=t.orderByFields;if(r){var n=r[0].split(" "),i=n[0];"DESC"===n[1]&&e.features.sort(function(e,t){return t.attributes[i]-e.attributes[i]})}return e},t.prototype._setFilterFlags=function(e){var t=d.convertFromFeatureSet(e,this.service.objectIdField);this.hasGeometryFilter()&&(t=d.hydrateOptimizedFeatureSet(t));for(var r=t.features,n=0;n<r.length;n++)e.features[n].filterFlags=this._getFilterFlags(r[n]);return e},n([h.property()],t.prototype,"_tileQueue",void 0),n([h.property({readOnly:!0,dependsOn:["configuration"]})],t.prototype,"processing",null),n([h.property({dependsOn:["_tileQueue.updating"]})],t.prototype,"updating",null),n([h.subclass()],t)}(h.declared(T.default));t.default=I}.apply(null,n))||(e.exports=i)},"4F/P":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("Dos2")],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.white=[255,255,255,1];var n=[0,0,0,0];function i(e,t){return Array.isArray(t)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]):(e[0]=t.r,e[1]=t.g,e[2]=t.b,e[3]=t.a),e}function o(e,t,r){void 0===t&&(t=0),void 0===r&&(r=!1);var n=e[t+3];return e[t+0]*=n,e[t+1]*=n,e[t+2]*=n,r||(e[t+3]*=255),e}t.premultiplyAlpha=o,t.copyAndPremultiply=function(e){return o(i([],e))},t.premultiplyAlphaUint32=function(e){return o(i(n,e)),r.i8888to32(n[0],n[1],n[2],n[3])},t.premultiplyAlphaRGBA=function(e){var t=e.r,n=e.g,i=e.b,o=e.a,s=t*o,a=n*o,u=i*o,p=255*o;return r.i8888to32(s,a,u,p)}}.apply(null,n))||(e.exports=i)},"7AYJ":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("SyoC")],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.color=[0,0,0,0],this.haloColor=[0,0,0,0],this.haloSize=0,this.size=12,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}return e.prototype.acquire=function(e,t,r,n,i,o,s,a,u){this.color=e,this.haloColor=t,this.haloSize=r,this.size=n,this.angle=i,this.offsetX=o,this.offsetY=s,this.hAnchor=a,this.vAnchor=u},e.prototype.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0,this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0,this.haloSize=0,this.size=0,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0},e.pool=new r(e),e}();t.TextProperties=n}.apply(null,n))||(e.exports=i)},"7MDj":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("Gtr7"),r("eIBl"),r("Vx27")],void 0===(i=function(e,t,r,n,i,o,s){return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=e.call(this)||this;return n.handles=new o,n}return r(t,e),t.prototype.destroy=function(){this.handles.destroy()},n([s.property({readOnly:!0})],t.prototype,"handles",void 0),n([s.subclass("esri.core.HandleOwner")],t)}(s.declared(i))}.apply(null,n))||(e.exports=i)},B0tL:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("Gtr7"),r("rg9i"),r("Vx27"),r("KQcO"),r("k7g7")],void 0===(i=function(e,t,r,n,i,o,s,a,u){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var i;return r(t,e),i=t,t.fromWorker=function(e){if(!e)return null;var t=JSON.parse(e),r=new i;return r.fields=t.fields&&t.fields.map(function(e){return a.fromJSON(e)}),r.options=t.options,r.process=new(Function.bind.apply(Function,[void 0].concat(t.process.args,[t.process.body]))),r},Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new i(o.clone({fields:this.fields,options:this.options,process:this.process}))},t.prototype.getField=function(e){return u.getField(this.fields,e)},t.prototype.refresh=function(){this.notifyChange("version")},t.prototype.toWorker=function(){var e=this.process.toString();return JSON.stringify({fields:this.fields,options:this.options,process:{body:e.substring(e.indexOf("{")+1,e.lastIndexOf("}")),args:e.slice(e.indexOf("(")+1,e.indexOf(")")).match(/([^\s,]+)/g)}})},n([s.property({type:[a]})],t.prototype,"fields",void 0),n([s.property()],t.prototype,"options",void 0),n([s.property()],t.prototype,"process",void 0),n([s.property({readOnly:!0,dependsOn:["process","options","fields"]})],t.prototype,"version",null),i=n([s.subclass("esri.layers.support.FeatureProcessing")],t)}(s.declared(i))}.apply(null,n))||(e.exports=i)},Btct:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("qKT0"),r("Q2wQ"),r("HZ3d"),r("9opi"),r("Gtr7"),r("ma1f"),r("7MDj"),r("qsST"),r("LxLY"),r("Vx27"),r("Z0JH"),r("zDti"),r("tI6k")],void 0===(i=function(e,t,r,n,i,o,s,a,u,p,_,l,c,h,f){Object.defineProperty(t,"__esModule",{value:!0});var d=p.getLogger("esri.views.2d.layers.features.controllers.BaseController"),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.configuration=null,t.processor=null,t.remoteClient=null,t.service=null,t.tileStore=null,t.filters=new Array(f.MAX_FILTERS),t}return o(t,e),t.prototype.initialize=function(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))])},t.prototype.destroy=function(){},Object.defineProperty(t.prototype,"spatialReference",{get:function(){return this.tileStore.tileScheme.spatialReference},enumerable:!0,configurable:!0}),t.prototype.setFilterBase=function(e,t){return i(this,void 0,void 0,function(){var r,i,o,s;return n(this,function(n){switch(n.label){case 0:return[4,this._getFilter(e)];case 1:return r=n.sent(),[4,h.normalizeFilter(t,null,this.spatialReference)];case 2:return i=n.sent(),this.configuration.filter=i,i?[4,r.update(i)]:[2,r.clear()];case 3:n.sent(),n.label=4;case 4:return n.trys.push([4,6,,7]),[4,this.queryObjectIds(r.createQuery().toJSON())];case 5:return o=n.sent(),[2,r.setTrue(o)];case 6:return s=n.sent(),d.error(new a("featurelayer-controller:query-filter-error","An error occurred while executing the query",{error:s})),[2,{show:[],hide:[]}];case 7:return[2]}})})},t.prototype.enableEvent=function(e){},t.prototype._getFilter=function(e){return i(this,void 0,void 0,function(){var t,r,i;return n(this,function(n){switch(n.label){case 0:return t=this.filters[e],_.isSome(t)?[2,t]:(r=new c.default({geometryType:this.service.geometryType,hasM:!1,hasZ:!1,timeInfo:this.service.timeInfo}),this.filters[e]=r,[4,this.queryObjectIds({})]);case 1:return i=n.sent(),r.setKnownIds(i),[2,r]}})})},t.prototype._getFilterFlags=function(e){for(var t=0,r=0;r<this.filters.length;r++){var n=this.filters[r];t|=(_.isNone(n)||n.check(e)?1:0)<<r}return t},t.prototype.hasGeometryFilter=function(){return this.filters.some(function(e){return _.isSome(e)&&!!e.geometry})},r([l.property()],t.prototype,"configuration",void 0),r([l.property()],t.prototype,"processor",void 0),r([l.property({constructOnly:!0})],t.prototype,"remoteClient",void 0),r([l.property({constructOnly:!0})],t.prototype,"service",void 0),r([l.property({dependsOn:["tileStore"]})],t.prototype,"spatialReference",null),r([l.property({constructOnly:!0})],t.prototype,"tileInfo",void 0),r([l.property({constructOnly:!0})],t.prototype,"tileStore",void 0),r([l.property()],t.prototype,"filters",void 0),r([l.subclass()],t)}(l.declared(s,u));t.default=y}.apply(null,n))||(e.exports=i)},Dos2:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("qsST")],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=new Float32Array(1),i=new Uint32Array(n.buffer),o=r.getLogger("esri.views.2d.engine.webgl.number");function s(e,t,r){var n=Math.max(Math.min(e,r),t);return n!==e&&o.warn("Value of "+e+" exceeded rendering limitations and was clamped to "+n),n}t.i8=function(e){return s(e,-128,127)},t.i16=function(e){return s(e,-32768,32767)},t.i32=function(e){return s(e,-2147483648,2147483647)},t.u8=function(e){return s(e,0,255)},t.u16=function(e){return s(e,0,65535)},t.u32=function(e){return s(e,0,4294967295)},t.nextHighestPowerOfTwo=function(e){var t=e;t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16;var r=++t>>1;return e-r<t-e?r:t},t.toUint32=function(e){return n[0]=e,i[0]},t.toFloat32=function(e){return i[0]=e,n[0]},t.i1616to32=function(e,t){return 65535&e|t<<16},t.i8888to32=function(e,t,r,n){return 255&e|(255&t)<<8|(255&r)<<16|n<<24},t.i8816to32=function(e,t,r){return 255&e|(255&t)<<8|r<<16},t.numTo32=function(e){return 0|e}}.apply(null,n))||(e.exports=i)},JNkf:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){var r,n,i,o,s,a,u,p,_,l;Object.defineProperty(t,"__esModule",{value:!0}),(r=t.WGLGeometryType||(t.WGLGeometryType={}))[r.FILL=0]="FILL",r[r.LINE=1]="LINE",r[r.MARKER=2]="MARKER",r[r.TEXT=3]="TEXT",r[r.LABEL=4]="LABEL",(n=t.WGLGeometryTransactionStatus||(t.WGLGeometryTransactionStatus={}))[n.SUCCEEDED=0]="SUCCEEDED",n[n.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY",(i=t.WGLDrawPhase||(t.WGLDrawPhase={}))[i.NONE=0]="NONE",i[i.MAP=1]="MAP",i[i.LABEL=2]="LABEL",i[i.LABEL_ALPHA=4]="LABEL_ALPHA",i[i.HITTEST=8]="HITTEST",i[i.HIGHLIGHT=16]="HIGHLIGHT",i[i.CLIP=32]="CLIP",i[i.DEBUG=64]="DEBUG",i[i.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES",(o=t.VVType||(t.VVType={}))[o.SIZE=0]="SIZE",o[o.COLOR=1]="COLOR",o[o.OPACITY=2]="OPACITY",o[o.ROTATION=3]="ROTATION",(s=t.WGLVVFlag||(t.WGLVVFlag={}))[s.NONE=0]="NONE",s[s.OPACITY=1]="OPACITY",s[s.COLOR=2]="COLOR",s[s.ROTATION=4]="ROTATION",s[s.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",s[s.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",s[s.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",s[s.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE",(a=t.WGLVVTarget||(t.WGLVVTarget={}))[a.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",a[a.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",a[a.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",a[a.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE",(u=t.CapType||(t.CapType={}))[u.UNKNOWN=0]="UNKNOWN",u[u.BUTT=1]="BUTT",u[u.ROUND=2]="ROUND",u[u.SQUARE=3]="SQUARE",(p=t.JoinType||(t.JoinType={}))[p.UNKNOWN=0]="UNKNOWN",p[p.MITER=1]="MITER",p[p.BEVEL=2]="BEVEL",p[p.ROUND=3]="ROUND",(_=t.Alignment||(t.Alignment={}))[_.SCREEN=0]="SCREEN",_[_.MAP=1]="MAP",(l=t.MosaicType||(t.MosaicType={}))[l.SPRITE=0]="SPRITE",l[l.GLYPH=1]="GLYPH"}.apply(null,n))||(e.exports=i)},MbkH:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){var r=0;return function(){function e(e){void 0===e&&(e=null),this.uid=r++,e?(this._wkt=void 0!==e.wkt?e.wkt:null,this._wkid=void 0!==e.wkid?e.wkid:-1,this._isInverse=void 0!==e.isInverse&&!0===e.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}return e.fromGE=function(t){var r=new e;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r},Object.defineProperty(e.prototype,"wkt",{get:function(){return this._wkt},set:function(e){this._wkt=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wkid",{get:function(){return this._wkid},set:function(e){this._wkid=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInverse",{get:function(){return this._isInverse},set:function(e){this._isInverse=e,this.uid=r++},enumerable:!0,configurable:!0}),e.prototype.getInverse=function(){var t=new e;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t},e}()}.apply(null,n))||(e.exports=i)},OkCb:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("MbkH")],void 0===(i=function(e,t,r){return function(){function e(e){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(var t=0,n=e.steps;t<n.length;t++){var i=n[t];i instanceof r?this.steps.push(i):this.steps.push(new r({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}}return e.cacheKey=function(e,t){return[void 0!==e.wkid&&null!==e.wkid?e.wkid.toString():"-1",void 0!==e.wkt&&null!==e.wkt?e.wkt.toString():"",void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():""].join(",")},e.fromGE=function(t){for(var n=new e,i="",o=0,s=t.steps;o<s.length;o++){var a=s[o],u=r.fromGE(a);n.steps.push(u),i+=u.uid.toString()+","}return n._cached_projection={},n._gtlistentry=null,n._chain=i,n},e.prototype.getInverse=function(){var t=new e;t.steps=[];for(var r=this.steps.length-1;r>=0;r--){var n=this.steps[r];t.steps.push(n.getInverse())}return t},e.prototype.getGTListEntry=function(){for(var e="",t=0,r=this.steps;t<r.length;t++)e+=r[t].uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=e),this._gtlistentry},e.prototype.assignCachedGe=function(t,r,n){this._cached_projection[e.cacheKey(t,r)]=n},e.prototype.getCachedGeTransformation=function(t,r){for(var n="",i=0,o=this.steps;i<o.length;i++)n+=o[i].uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=n);var s=this._cached_projection[e.cacheKey(t,r)];return void 0===s?null:s},e}()}.apply(null,n))||(e.exports=i)},Q2Em:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("ma1f"),r("qMld"),r("wIC5"),r("nrlZ"),r("vtMp")],void 0===(i=function(e,t,r,n,i,o,s){function a(e,t){var r,n,i;if(!t)return null;if("x"in t){var o={x:0,y:0};return r=e(t.x,t.y,c),o.x=r[0],o.y=r[1],null!=t.z&&(o.z=t.z),null!=t.m&&(o.m=t.m),o}if("xmin"in t){o={xmin:0,ymin:0,xmax:0,ymax:0};return n=e(t.xmin,t.ymin,c),o.xmin=n[0],o.ymin=n[1],i=e(t.xmax,t.ymax,c),o.xmax=i[0],o.ymax=i[1],t.hasZ&&(o.zmin=t.zmin,o.zmax=t.zmax,o.hasZ=!0),t.hasM&&(o.mmin=t.mmin,o.mmax=t.mmax,o.hasM=!0),o}return"rings"in t?{rings:u(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:u(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:p(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:void 0}function u(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n];r.push(p(o,t))}return r}function p(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n],s=t(o[0],o[1],[0,0]);r.push(s),o.length>2&&s.push(o[2]),o.length>3&&s.push(o[3])}return r}function _(e,t){return!(!o.isValid(e)||!o.isValid(t)||o.equals(e,t)||s.canProject(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var l="feature-store:unsupported-query",c=[0,0];t.checkProjectionSupport=function(e,t){if(!t)return n.resolve();if(Array.isArray(e)){for(var o=0,s=e;o<s.length;o++){var a=s[o];if(_(a.geometry&&a.geometry.spatialReference,t))return i.isSupported()?i.load():n.reject(new r(l,"projection not supported",{inSpatialReference:e,outSpatialReference:t}))}return n.resolve()}return _(e,t)?i.isSupported()?i.load():n.reject(new r(l,"projection not supported",{inSpatialReference:e,outSpatialReference:t})):n.resolve()};var h=a.bind(null,s.lngLatToXY),f=a.bind(null,s.xyToLngLat);t.project=function(e,t,r){return r||(r=t,t=e.spatialReference),o.isValid(t)&&o.isValid(r)&&!o.equals(t,r)?s.canProject(t,r)?o.isWebMercator(r)?h(e):f(e):i.projectMany([e],t,r,null,!0)[0]:e};var d=new(function(){function e(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}return e.prototype.push=function(e,t,r){var i=this;e&&e.length&&t&&r&&!o.equals(t,r)||n.resolve(e);var s={geometries:e,inSpatialReference:t,outSpatialReference:r,resolve:null};return this._jobs.push(s),n.create(function(e){s.resolve=e,null===i._timer&&(i._timer=setTimeout(i._process,10))},function(){var e=i._jobs.indexOf(s);e>-1&&i._jobs.splice(e,1)})},e.prototype._process=function(){this._timer=null;var e=this._jobs.shift();if(e){var t=e.geometries,r=e.inSpatialReference,n=e.outSpatialReference;(0,e.resolve)(s.canProject(r,n)?o.isWebMercator(n)?t.map(h):t.map(f):i.projectMany(t,r,n,null,!0)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}},e}());t.projectMany=function(e,t,r){return d.push(e,t,r)}}.apply(null,n))||(e.exports=i)},Z0JH:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("HZ3d"),r("2Atf"),r("Q2wQ"),r("PND3"),r("ma1f"),r("qsST"),r("LxLY"),r("qMld"),r("lRq4"),r("hBh5"),r("Ytki"),r("V1i6"),r("/61J"),r("IpeC")],void 0===(i=function(e,t,r,n,i,o,s,a,u,p,_,l,c,h,f,d){Object.defineProperty(t,"__esModule",{value:!0});var y=a.getLogger("esri.views.2d.layers.features.controllers.FeatureFilter"),E=1,g=2,m=function(){function e(e){var t=this;this._geometryBounds=_.create(),this._idToVisibility=new Map,this.check=function(e){var r=e.objectId,n=t._idToVisibility,i=t._applyFilter(e);return n.set(r,i?E|g:g),!!(n.get(r)&E)},this._serviceInfo=e}return e.prototype.clear=function(){var e=this._resetAllHiddenIds();return this.update(),{show:e,hide:[]}},e.prototype.invalidate=function(){var e=this;this._idToVisibility.forEach(function(t,r){e._idToVisibility.set(r,0)})},e.prototype.setKnownIds=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this._idToVisibility.set(n,E)}},e.prototype.setTrue=function(e){var t=this,r=[],n=[],i=new o.default(e);return this._idToVisibility.forEach(function(e,o){var s=!!(t._idToVisibility.get(o)&E),a=i.has(o);!s&&a?r.push(o):s&&!a&&n.push(o),t._idToVisibility.set(o,a?E|g:0)}),{show:r,hide:n}},e.prototype.createQuery=function(){var e=this,t=e.geometry,r=e.spatialRel,n=e.where,i=e.distance,o=e.units,s=e.timeExtent,a=e.objectIds;return d.fromJSON({geometry:t,spatialRel:r,where:n,distance:i,units:o,timeExtent:s,objectIds:a})},e.prototype.update=function(e){return void 0===e&&(e=null),r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,p.all([this._setGeometryFilter(e),this._setIdFilter(e),this._setAttributeFilter(e),this._setTimeFilter(e)])];case 1:return t.sent(),[2]}})})},e.prototype._setAttributeFilter=function(e){if(!e||!e.where)return this._clause=null,void(this.where=null);var t=c.getWhereClause(e.where);if(t.isStandardized())this._clause=t;else{var r=new s("mapview - bad input","Unable to apply filter's definition expression, as expression is not standardized.",t);y.error(r)}this.where=e.where},e.prototype._setIdFilter=function(e){this._idsToShow=e&&e.objectIds&&new o.default(e.objectIds),this._idsToHide=e&&e.hiddenIds&&new o.default(e.hiddenIds),this.objectIds=e&&e.objectIds},e.prototype._setGeometryFilter=function(e){return r(this,void 0,void 0,function(){var t,r,n;return i(this,function(i){switch(i.label){case 0:return e&&e.geometry?(t=e.geometry,r=e.spatialRel||"esriSpatialRelIntersects",[4,h.getSpatialQueryOperator(r,t,this._serviceInfo)]):(this._spatialQueryOperator=null,this.geometry=null,this.spatialRel=null,[2]);case 1:return n=i.sent(),l.getBoundsXY(this._geometryBounds,t),this._spatialQueryOperator=n,this.geometry=t,this.spatialRel=r,[2]}})})},e.prototype._setTimeFilter=function(e){if(this.timeExtent=this._timeOperator=null,e&&e.timeExtent){if(!this._serviceInfo.timeInfo){var t=new s("feature-layer-view:time-filter-not-available","Unable to apply time filter, as layer doesn't have time metadata.",e.timeExtent);return void y.error(t)}this.timeExtent=e.timeExtent,this._timeOperator=f.getTimeOperator(this._serviceInfo.timeInfo,e.timeExtent)}},e.prototype._applyFilter=function(e){return this._filterByGeometry(e)&&this._filterById(e)&&this._filterByTime(e)&&this._filterByExpression(e)},e.prototype._filterByExpression=function(e){return!this.where||this._clause.testFeature(e.attributes)},e.prototype._filterById=function(e){return(!this._idsToHide||!this._idsToHide.has(e.objectId))&&(!this._idsToShow||this._idsToShow.has(e.objectId))},e.prototype._filterByGeometry=function(e){return!this.geometry||!!this._earlyGeometryReject(e)&&this._spatialQueryOperator(e.geometry)},e.prototype._filterByTime=function(e){return!u.isSome(this._timeOperator)||this._timeOperator(e)},e.prototype._earlyGeometryReject=function(e){return!(!e.geometry||!e.geometry.coords.length)&&(!e.centroid||"esriSpatialRelContains"!==this.spatialRel||_.containsPoint(this._geometryBounds,e.centroid.coords))},e.prototype._resetAllHiddenIds=function(){var e=this,t=[];return this._idToVisibility.forEach(function(r,n){r&E||(e._idToVisibility.set(n,E),t.push(n))}),t},e}();t.default=m}.apply(null,n))||(e.exports=i)},Zp3t:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("H1tY")],void 0===(i=function(e,t,r){function n(e){return null!=e&&"type"in e&&"compressed"===e.type}return function(){function e(t,n,i){this._context=null,this._glName=null,this._id=-1,this._desc=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._boundToUnits=new Set,this._context=t,this._desc={pixelFormat:n.pixelFormat,internalFormat:n.internalFormat,dataType:n.dataType,target:n.target?n.target:3553,samplingMode:n.samplingMode?n.samplingMode:9729,wrapMode:n.wrapMode?n.wrapMode:10497,maxAnisotropy:n.maxAnisotropy,flipped:void 0!==n.flipped&&n.flipped,hasMipmap:void 0!==n.hasMipmap&&n.hasMipmap,unpackAlignment:n.unpackAlignment?n.unpackAlignment:4,width:n.width,height:n.height,preMultiplyAlpha:void 0!==n.preMultiplyAlpha&&n.preMultiplyAlpha,textureCoordinateScaleFactor:n.textureCoordinateScaleFactor||null},this._id=++e._nextId,r("esri-webgl-debug")&&t.instanceCounter.incrementCount(0),this.setData(i)}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;if(this._context){if(this._glName){var t=this._context.gl;this._boundToUnits.forEach(function(t){e._context.bindTexture(null,t)}),t.deleteTexture(this._glName),this._glName=null}r("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(0),this._context=null}},e.prototype.resize=function(e,t){var r=this._desc;r.width===e&&r.height===t||(r.width=e,r.height=t,this.setData(null))},e.prototype.setData=function(t){var r=this._context.gl;this._glName||(this._glName=r.createTexture()),void 0===t&&(t=null),null===t&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var i=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var o=this._desc;e._validateTexture(o),r.pixelStorei(r.UNPACK_ALIGNMENT,o.unpackAlignment),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,o.flipped?1:0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.preMultiplyAlpha?1:0);var s=o.pixelFormat,a=o.internalFormat?o.internalFormat:s;if(t instanceof ImageData||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement)o.width&&o.height,r.texImage2D(r.TEXTURE_2D,0,a,s,o.dataType,t),o.hasMipmap&&this.generateMipmap(),void 0===this._desc.width&&(this._desc.width=t.width),void 0===this._desc.height&&(this._desc.height=t.height);else{null!=o.width&&o.height,r.DEPTH24_STENCIL8&&a===r.DEPTH_STENCIL&&(a=r.DEPTH24_STENCIL8);var u=o.width,p=o.height;if(n(t)){var _=Math.round(Math.log(Math.max(u,p))/Math.LN2)+1;o.hasMipmap=o.hasMipmap&&_===t.levels.length;for(var l=0;;++l){var c=t.levels[Math.min(l,t.levels.length-1)];if(r.compressedTexImage2D(r.TEXTURE_2D,l,a,u,p,0,c),1===u&&1===p||!o.hasMipmap)break;u=Math.max(1,u>>1),p=Math.max(1,p>>1)}}else if(t)r.texImage2D(r.TEXTURE_2D,0,a,u,p,0,s,o.dataType,t),o.hasMipmap&&this.generateMipmap();else for(l=0;r.texImage2D(r.TEXTURE_2D,l,a,u,p,0,s,o.dataType,null),(1!==u||1!==p)&&o.hasMipmap;++l)u=Math.max(1,u>>1),p=Math.max(1,p>>1)}e._applySamplingMode(r,this._desc),e._applyWrapMode(r,this._desc),e._applyAnisotropicFilteringParameters(this._context,this._desc),this._context.bindTexture(i,0)},e.prototype.updateData=function(e,t,r,n,i,o){this._glName;var s=this._context.gl,a=this._desc,u=this._context.getBoundTexture(0);this._context.bindTexture(this,0),t<0||r<0||n>a.width||i>a.height||t+n>a.width||a.height,o instanceof ImageData||o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement?s.texSubImage2D(s.TEXTURE_2D,e,t,r,a.pixelFormat,a.dataType,o):s.texSubImage2D(s.TEXTURE_2D,e,t,r,n,i,a.pixelFormat,a.dataType,o),this._context.bindTexture(u,0)},e.prototype.generateMipmap=function(){var t=this._desc;t.hasMipmap||(t.hasMipmap=!0,e._validateTexture(t)),9729===t.samplingMode?(this._samplingModeDirty=!0,t.samplingMode=9985):9728===t.samplingMode&&(this._samplingModeDirty=!0,t.samplingMode=9984);var r=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var n=this._context.gl;n.generateMipmap(n.TEXTURE_2D),this._context.bindTexture(r,0)},e.prototype.setSamplingMode=function(t){t!==this._desc.samplingMode&&(this._desc.samplingMode=t,e._validateTexture(this._desc),this._samplingModeDirty=!0)},e.prototype.setWrapMode=function(t){t!==this._desc.wrapMode&&(this._desc.wrapMode=t,e._validateTexture(this._desc),this._wrapModeDirty=!0)},e.prototype.applyChanges=function(){var t=this._context.gl,r=this._desc;this._samplingModeDirty&&(e._applySamplingMode(t,r),this._samplingModeDirty=!1),this._wrapModeDirty&&(e._applyWrapMode(t,r),this._wrapModeDirty=!1)},e.prototype.setBoundToUnit=function(e,t){t?this._boundToUnits.add(e):this._boundToUnits.delete(e)},e._isPowerOfTwo=function(e){return 0==(e&e-1)},e._validateTexture=function(t){t.width<0||t.height,e._isPowerOfTwo(t.width)&&e._isPowerOfTwo(t.height)||("number"==typeof t.wrapMode?t.wrapMode:33071===t.wrapMode.s&&t.wrapMode.t,t.hasMipmap)},e._applySamplingMode=function(e,t){var r=t.samplingMode,n=t.samplingMode;9985===r||9987===r?(r=9729,t.hasMipmap||(n=9729)):9984!==r&&9986!==r||(r=9728,t.hasMipmap||(n=9728)),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n)},e._applyWrapMode=function(e,t){"number"==typeof t.wrapMode?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t.wrapMode)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t.wrapMode.s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t.wrapMode.t))},e._applyAnisotropicFilteringParameters=function(e,t){if(null!=t.maxAnisotropy){var r=e.capabilities.textureFilterAnisotropic;if(r){var n=e.gl;n.texParameterf(n.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy)}}},e._nextId=0,e}()}.apply(null,n))||(e.exports=i)},apbF:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("2Atf"),r("B2KM"),r("T8lH"),r("ma1f"),r("qsST"),r("jBNx"),r("u90+"),r("3568"),r("4F/P"),r("JNkf"),r("7AYJ"),r("AzkI"),r("Zp3t")],void 0===(i=function(e,t,r,n,i,o,s,a,u,p,_,l,c,h,f){var d;Object.defineProperty(t,"__esModule",{value:!0});var y=s.getLogger("esri.views.2d.engine.webgl.Utils");function E(e){for(var t={},r=0,n=e;r<n.length;r++){var i=n[r];t[i.name]=i.strideInBytes}return t}t.C_HITTEST_SEARCH_SIZE=4,t.C_VBO_GEOMETRY="geometry",t.C_VBO_PERINSTANCE="per_instance",t.C_VBO_PERINSTANCE_VV="per_instance_vv",t.C_VBO_VISIBILITY="visibility",t.C_VBO_VISIBILITY_RANGE="visibilityRange",t.C_ICON_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,strideInBytes:24,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_ICON_VERTEX_DEF_VV=[{name:t.C_VBO_GEOMETRY,strideInBytes:40,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_FILL_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,strideInBytes:32,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_FILL_VERTEX_DEF_VV=[{name:t.C_VBO_GEOMETRY,strideInBytes:40,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_FILL_VERTEX_DEF_DD=[{name:t.C_VBO_GEOMETRY,strideInBytes:40,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_LINE_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,strideInBytes:32,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_LINE_VERTEX_DEF_VV=[{name:t.C_VBO_GEOMETRY,strideInBytes:44,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_TEXT_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,strideInBytes:24,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_TEXT_VERTEX_DEF_VV=[{name:t.C_VBO_GEOMETRY,strideInBytes:40,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}],t.C_LABEL_VERTEX_DEF=[{name:t.C_VBO_GEOMETRY,strideInBytes:24,divisor:0},{name:t.C_VBO_VISIBILITY,strideInBytes:1,divisor:0},{name:t.C_VBO_VISIBILITY_RANGE,strideInBytes:2,divisor:0}],t.C_ICON_STRIDE_SPEC=E(t.C_ICON_VERTEX_DEF),t.C_ICON_STRIDE_SPEC_VV=E(t.C_ICON_VERTEX_DEF_VV),t.C_FILL_STRIDE_SPEC=E(t.C_FILL_VERTEX_DEF),t.C_FILL_STRIDE_SPEC_VV=E(t.C_FILL_VERTEX_DEF_VV),t.C_FILL_STRIDE_SPEC_DD=E(t.C_FILL_VERTEX_DEF_DD),t.C_LINE_STRIDE_SPEC=E(t.C_LINE_VERTEX_DEF),t.C_LINE_STRIDE_SPEC_VV=E(t.C_LINE_VERTEX_DEF_VV),t.C_TEXT_STRIDE_SPEC=E(t.C_TEXT_VERTEX_DEF),t.C_TEXT_STRIDE_SPEC_VV=E(t.C_TEXT_VERTEX_DEF_VV),t.C_LABEL_STRIDE_SPEC=E(t.C_LABEL_VERTEX_DEF),t.getStrides=function(e,r,n){switch(e){case l.WGLGeometryType.MARKER:return r?t.C_ICON_STRIDE_SPEC_VV:t.C_ICON_STRIDE_SPEC;case l.WGLGeometryType.FILL:return n?t.C_FILL_STRIDE_SPEC_DD:r?t.C_FILL_STRIDE_SPEC_VV:t.C_FILL_STRIDE_SPEC;case l.WGLGeometryType.LINE:return r?t.C_LINE_STRIDE_SPEC_VV:t.C_LINE_STRIDE_SPEC;case l.WGLGeometryType.TEXT:return r?t.C_TEXT_STRIDE_SPEC_VV:t.C_TEXT_STRIDE_SPEC;case l.WGLGeometryType.LABEL:return t.C_LABEL_STRIDE_SPEC}return null};var g=[t.C_VBO_GEOMETRY,t.C_VBO_VISIBILITY],m=[t.C_VBO_GEOMETRY,t.C_VBO_VISIBILITY],T=[t.C_VBO_GEOMETRY,t.C_VBO_VISIBILITY],P=[t.C_VBO_GEOMETRY,t.C_VBO_VISIBILITY],v=[t.C_VBO_GEOMETRY,t.C_VBO_VISIBILITY,t.C_VBO_VISIBILITY_RANGE];function I(e){switch(e){case l.WGLGeometryType.MARKER:return g;case l.WGLGeometryType.FILL:return m;case l.WGLGeometryType.LINE:return T;case l.WGLGeometryType.TEXT:return P;case l.WGLGeometryType.LABEL:return v}return null}function S(e){switch(e%4){case 0:case 2:return 4;case 1:case 3:return 1}}function O(e){switch(e){case"esriSMS":return"simple-marker";case"esriPMS":return"picture-marker";case"esriSLS":return"simple-line";case"esriPLS":return"picture-line";case"esriSFS":return"simple-fill";case"esriPFS":return"picture-fill";case"esriTS":return"text"}return e}function M(e){return"string"==typeof e}t.getNamedBuffers=I,t.strideToPackingFactor=S,t.allocateTypedArrayBuffer=function(e,t){switch(t%4){case 0:case 2:return new Uint32Array(Math.floor(e*t/4));case 1:case 3:return new Uint8Array(e*t)}},t.allocateTypedArrayBufferwithData=function(e,t){switch(t%4){case 0:case 2:return new Uint32Array(e);case 1:case 3:return new Uint8Array(e)}},t.normalizeSymbolType=O,t.isMarkerSymbol=function(e){var t=O(e.type);if(t){switch(t){case"simple-marker":case"picture-marker":case"CIMPointSymbol":return!0}return!1}},t.isFillSymbol=function(e){var t=O(e.type);if(t){switch(t){case"simple-fill":case"picture-fill":case"CIMPolygonSymbol":return!0}return!1}},t.isLineSymbol=function(e){var t=O(e.type);if(t){switch(t){case"simple-line":case"picture-line":case"CIMLineSymbol":return!0}return!1}},t.isPictureSymbol=function(e){var t=O(e.type);if(t){switch(t){case"picture-marker":case"picture-line":case"picture-fill":return!0}return!1}return!1},t.isTextSymbol=function(e){var t=O(e.type);if(t){switch(t){case"text":case"CIMTextSymbol":return!0}return!1}},t.getTextProperties=function(e){return c.TextProperties.pool.acquire(e.color?_.copyAndPremultiply(e.color):[255,255,255,255],e.haloColor?_.copyAndPremultiply(e.haloColor):[255,255,255,255],a.pt2px(e.haloSize),a.pt2px(e.font.size),e.angle*Math.PI/180,e.xoffset/e.font.size,e.yoffset/e.font.size,"left"===e.horizontalAlignment?0:"right"===e.horizontalAlignment?1:.5,"top"===e.verticalAlignment?0:"bottom"===e.verticalAlignment?1:.5)},t.isDefined=function(e){return null!=e},t.isNumber=function(e){return"number"==typeof e},t.isString=M,t.isStringOrNull=function(e){return null==e||M(e)},t.lerp=function(e,t,r){return e+(t-e)*r};var x=function(){function e(){this._arr=[],this._push=this._push.bind(this)}return e.prototype._push=function(e,t){this._arr.push(t)},e.prototype.getKeys=function(e){return this._arr.length=0,e&&e.forEach(this._push),this._arr},e}();t.KeysGetter=x;var N=function(){function e(){this._arr=[],this._push=this._push.bind(this)}return e.prototype._push=function(e,t){this._arr.push(e)},e.prototype.getValues=function(e){return this._arr.length=0,e&&e.forEach(this._push),this._arr},e}();function w(e){var t={};switch(e){case"esriGeometryPoint":return function(e,r,n,i){return u.hydratePoint(r,t,e,n,i)};case"esriGeometryPolygon":return function(e,r,n,i){return u.hydratePolygon(r,t,e,n,i)};case"esriGeometryPolyline":return function(e,r,n,i){return u.hydratePolyline(r,t,e,n,i)};case"esriGeometryMultipoint":return function(e,r,n,i){return u.hydrateMultipoint(r,t,e,n,i)};default:return y.error(new o("mapview-arcade","Unable to handle geometryType: "+e)),function(e,t,r,n){return e}}}t.ValuesGetter=N,t.getCapType=function(e,t){switch(e){case"butt":return l.CapType.BUTT;case"round":return t?l.CapType.SQUARE:l.CapType.ROUND;case"square":return l.CapType.SQUARE;default:return y.error(new o("mapview-invalid-type","Cap type "+e+" is not a valid option. Defaulting to round")),l.CapType.ROUND}},t.getJoinType=function(e){switch(e){case"miter":return l.JoinType.MITER;case"bevel":return l.JoinType.BEVEL;case"round":return l.JoinType.ROUND;default:return y.error(new o("mapview-invalid-type","Join type "+e+" is not a valid option. Defaulting to round")),l.JoinType.ROUND}},t.getVVType=function(e){switch(e){case"opacity":return l.VVType.OPACITY;case"color":return l.VVType.COLOR;case"rotation":return l.VVType.ROTATION;case"size":return l.VVType.SIZE;default:return y.error("Cannot interpret unknown vv: "+e),null}},t.createHydrateFactory=w,t.getTransformParams=function(e){return{transform:e.transform,hasZ:e.hasZ,hasM:e.hasM}},t.createArcadeFunction=function(e,t,r){var o=t.fields,s=t.spatialReference,a=t.hasGeometryExpr,u=t.geometryType,_=p.createFunction(e),l=new i,c=new n({viewingMode:null,scale:null}),h={},f={vars:{$feature:l,$view:null},spatialReference:s},d={fields:o},y=w(u);return function(e,t,n){if(a){var i=t.transform,o=t.hasZ,u=t.hasM,E=y(e.geometry,i,o,u);E.spatialReference=s,l.repurposeFromGraphicLikeObject(E,e.attributes,d)}else l.repurposeFromGraphicLikeObject(e.geometry,e.attributes,d);n?((f.vars.$view=c).attributes.viewingMode=n.viewingMode,c.attributes.scale=n.scale):f.vars.$view=h;var g=p.executeFunction(_,f);return r?r(g):g}},t.copyMeshData=function(e,t,r,n,i,o,s){for(var a in o)for(var u=o[a].stride,p=S(u),_=o[a].data,l=r[a].data,c=u*i.vertexCount/p,h=u*e/p,f=u*i.vertexFrom/p,d=0;d<c;++d)l[d+h]=_[d+f];var y=i.indexCount;for(d=0;d<y;++d)n[d+t]=s[d+i.indexFrom]-i.vertexFrom+e},t.C_VBO_INFO=((d={})[t.C_VBO_GEOMETRY]=35044,d[t.C_VBO_VISIBILITY]=35044,d[t.C_VBO_VISIBILITY_RANGE]=35048,d),t.createGeometryData=function(e,t){for(var r=[],n=0;n<5;++n){for(var i={},o=0,s=I(n);o<s.length;o++){var a=s[o];i[a]={data:t(n,a)}}r.push({data:e(n),buffers:i})}return r},t.resampleHermite=function(e,t,r,n,i,o,s){void 0===s&&(s=!0);for(var a=t/i,u=r/o,p=Math.ceil(a/2),_=Math.ceil(u/2),l=0;l<o;l++)for(var c=0;c<i;c++){for(var h=4*(c+(s?o-l-1:l)*i),f=0,d=0,y=0,E=0,g=0,m=0,T=0,P=(l+.5)*u,v=Math.floor(l*u);v<(l+1)*u;v++)for(var I=Math.abs(P-(v+.5))/_,S=(c+.5)*a,O=I*I,M=Math.floor(c*a);M<(c+1)*a;M++){var x=Math.abs(S-(M+.5))/p,N=Math.sqrt(O+x*x);-1<=N&&N<=1&&0<(f=2*N*N*N-3*N*N+1)&&(T+=f*e[3+(x=4*(M+v*t))],y+=f,e[x+3]<255&&(f=f*e[x+3]/250),E+=f*e[x],g+=f*e[x+1],m+=f*e[x+2],d+=f)}n[h]=E/d,n[h+1]=g/d,n[h+2]=m/d,n[h+3]=T/y}},t.createTextureFromTexelData=function(e,t){var r,n;return n=h.isPowerOfTwo(t.width)&&h.isPowerOfTwo(t.height)?(r=!0,9987):(r=!1,9729),new f(e,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,hasMipmap:r,samplingMode:n,wrapMode:33071,flipped:!0},t)},t.geometryToMappedGeometry=function(e){return{vertexFrom:void 0,vertexTo:void 0,geometry:e}};var C=new Map;t.createProgramDescriptor=function(e,t){if(!C.has(e)){var n=function(e){var t={},n=function(n){var i=e[n],o=0;t[n]=i.map(function(e){var t=r({},e,{normalized:e.normalized||!1,divisor:e.divisor||0,offset:o,stride:0});return o+=e.count*function(e){switch(e){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5126:case 5124:case 5125:return 4}}(e.type),t}),t[n].forEach(function(e){return e.stride=o})};for(var i in e)n(i);return t}(t),i={strides:function(e){var t={};for(var r in e){var n=e[r];t[r]=n.length?n[0].stride:0}return t}(n),bufferLayouts:n,attributes:function(e){var t={};for(var r in e)for(var n=0,i=e[r];n<i.length;n++){var o=i[n];t[o.name]=o.location}return t}(t)};C.set(e,i)}return C.get(e)}}.apply(null,n))||(e.exports=i)},sOkP:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("9opi"),r("qKT0"),r("Gtr7"),r("afW+"),r("Vx27"),r("W9tT"),r("ked+")],void 0===(i=function(e,t,r,n,i,o,s,a,u){function p(e){return e&&"function"==typeof e.then}Object.defineProperty(t,"__esModule",{value:!0});var _=[0,0],l=function(e){function t(t){var r=e.call(this,t)||this;return r._queue=new Map,r._onGoingTile=null,r._onGoingPromise=null,r._isPaused=!1,r._scheduledNextHandle=null,r._timestamp=Date.now(),r.tileInfoView=null,r._next=r._next.bind(r),r._finalize=r._finalize.bind(r),r}return r(t,e),Object.defineProperty(t.prototype,"length",{get:function(){return this._queue.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return this._queue.size>0||null!=this._onGoingPromise},enumerable:!0,configurable:!0}),t.prototype.cancel=function(e){this._onGoingTile&&this._onGoingTile.tileId===e&&(this._onGoingPromise.cancel(),this._onGoingTile=this._onGoingPromise=null),this._queue.delete(e),this._scheduleNext(),this.notifyChange("updating")},t.prototype.clear=function(){this._queue.clear(),this._onGoingPromise&&(this._onGoingPromise.cancel(),this._onGoingTile=this._onGoingPromise=null),this._cancelNext(),this.notifyChange("updating")},t.prototype.has=function(e){return this._queue.has(e)},t.prototype.isOngoing=function(e){return this._onGoingTile&&this._onGoingTile.tileId===e},t.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())},t.prototype.push=function(e,t){this._queue.has(e)||(this._queue.set(e,{tileId:e,key:u.TileKey.pool.acquire(e),timestamp:t||this._timestamp}),this._scheduleNext(),this.notifyChange("updating"))},t.prototype.refresh=function(){this._timestamp=Date.now(),this.reset()},t.prototype.reset=function(){var e=this._onGoingTile;if(e){var t=e.tileId;this.push(t,this._timestamp)}this.notifyChange("updating")},t.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext()),this.notifyChange("updating")},t.prototype._finalize=function(){this._onGoingTile=null,this._onGoingPromise=null,this.notifyChange("updating"),this._scheduleNext()},t.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),this._scheduledNextHandle=null)},t.prototype._scheduleNext=function(){this._isPaused||this._scheduledNextHandle||0===this._queue.size||null!=this._onGoingTile||(this._scheduledNextHandle=o.schedule(this._next))},t.prototype._next=function(){if(null==this._scheduledNextHandle||0===this._queue.size||this._onGoingTile)this._scheduledNextHandle=null;else{this._scheduledNextHandle=null;var e=this._peek(),t=e.tileId,r=e.key;u.TileKey.pool.release(r),this._queue.delete(t),this._onGoingTile=e,this._onGoingPromise=this.process(t,this._timestamp),p(this._onGoingPromise)?this._onGoingPromise.then(this._finalize,this._finalize):this._finalize(),this.notifyChange("updating")}},t.prototype._peek=function(){var e=this;if(!this.state)throw new Error("state not set");var t=this.tileInfoView,r=this.state.center,n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,o=null;return this._queue.forEach(function(s,u){t.getTileCoords(_,s.key);var p=e._timestamp-s.timestamp;if(isNaN(p))(l=a.vec2.distance(_,r))<i&&(i=l,o=s);else if(p===n){var l;(l=a.vec2.distance(_,r))<i&&(i=l,o=s)}else p>n&&(n=p,i=Number.POSITIVE_INFINITY,o=s)}),o},n([s.property({readOnly:!0})],t.prototype,"length",null),n([s.property({constructOnly:!0})],t.prototype,"process",void 0),n([s.property()],t.prototype,"state",void 0),n([s.property({constructOnly:!0})],t.prototype,"tileInfoView",void 0),n([s.property({readOnly:!0})],t.prototype,"updating",null),n([s.subclass()],t)}(s.declared(i));t.default=l}.apply(null,n))||(e.exports=i)},"u90+":function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("Lzvl")],void 0===(i=function(e,t,r){function n(e){return e&&"upperLeft"===e.originPosition}function i(e,t){var r=e.scale,n=e.translate;return Math.round((t-n[0])/r[0])}function o(e,t){var r=e.scale,n=e.translate;return Math.round((n[1]-t)/r[1])}function s(e,t,r){for(var n,s,a,u,p=[],_=0;_<r.length;_++){var l=r[_];_>0?(a=i(e,l[0]),u=o(e,l[1]),a===n&&u===s||(p.push(t(l,a-n,u-s)),n=a,s=u)):(n=i(e,l[0]),s=o(e,l[1]),p.push(t(l,n,s)))}return p.length>0?p:null}function a(e,t,r,n){return s(e,r?n?M:O:n?O:S,t)}function u(e,t,r,n){for(var i=[],o=r?n?M:O:n?O:S,a=0;a<t.length;a++){var u=s(e,o,t[a]);u&&u.length>=3&&i.push(u)}return i.length?i:null}function p(e,t,r,n){for(var i=[],o=r?n?M:O:n?O:S,a=0;a<t.length;a++){var u=s(e,o,t[a]);u&&u.length>=2&&i.push(u)}return i.length?i:null}function _(e,t){var r=e.scale,n=e.translate;return t*r[0]+n[0]}function l(e,t){var r=e.scale;return e.translate[1]-t*r[1]}function c(e,t,r){var n=new Array(r.length);if(!r.length)return n;var i=e.scale,o=i[0],s=i[1],a=_(e,r[0][0]),u=l(e,r[0][1]);n[0]=t(r[0],a,u);for(var p=1;p<r.length;p++){var c=r[p];a+=c[0]*o,u-=c[1]*s,n[p]=t(c,a,u)}return n}function h(e,t,r){for(var n=new Array(r.length),i=0;i<r.length;i++)n[i]=c(e,t,r[i]);return n}function f(e,t,r,n){return c(e,r?n?M:O:n?O:S,t)}function d(e,t,r,n){return h(e,r?n?M:O:n?O:S,t)}function y(e,t,r,n){return h(e,r?n?M:O:n?O:S,t)}function E(e,t,r){for(var n=r[0],i=n[0],o=n[1],s=Math.min(i,t[0]),a=Math.min(o,t[1]),u=Math.max(i,t[2]),p=Math.max(o,t[3]),_=1;_<r.length;_++){var l=r[_],c=l[0],h=l[1];i+=c,o+=h,c<0&&(s=Math.min(s,i)),c>0&&(u=Math.max(u,i)),h<0?a=Math.min(a,o):h>0&&(p=Math.max(p,o))}return e[0]=s,e[1]=a,e[2]=u,e[3]=p,e}function g(e,t){if(!t.length)return null;e[0]=e[1]=Number.POSITIVE_INFINITY,e[2]=e[3]=Number.NEGATIVE_INFINITY;for(var r=0;r<t.length;r++)E(e,e,t[r]);return e}function m(e,t,r,n,s){return t.xmin=i(e,r.xmin),t.ymin=o(e,r.ymin),t.xmax=i(e,r.xmax),t.ymax=o(e,r.ymax),t!==r&&(n&&(t.zmin=r.zmin,t.zmax=r.zmax),s&&(t.mmin=r.mmin,t.mmax=r.mmax)),t}function T(e,t,r,n,i){return t.points=a(e,r.points,n,i),t}function P(e,t,r,n,s){return t.x=i(e,r.x),t.y=o(e,r.y),t!==r&&(n&&(t.z=r.z),s&&(t.m=r.m)),t}function v(e,t,r,n,i){var o=u(e,r.rings,n,i);return o?(t.rings=o,t):null}function I(e,t,r,n,i){var o=p(e,r.paths,n,i);return o?(t.paths=o,t):null}Object.defineProperty(t,"__esModule",{value:!0});var S=function(e,t,r){return[t,r]},O=function(e,t,r){return[t,r,e[2]]},M=function(e,t,r){return[t,r,e[2],e[3]]};t.toQuantizationTransform=function(e){return e?{originPosition:"upperLeft",scale:[e.tolerance,e.tolerance],translate:[e.extent.xmin,e.extent.ymax]}:null},t.equals=function(e,t){return e===t||null==e&&null==t||null!=e&&null!=t&&(n(e)?(r=e.translate[0],i=e.translate[1],o=e.scale[0]):(r=e.extent.xmin,i=e.extent.ymax,o=e.tolerance),n(t)?(s=t.translate[0],a=t.translate[1],u=t.scale[0]):(s=t.extent.xmin,a=t.extent.ymax,u=t.tolerance),r===s&&i===a&&o===u);var r,i,o,s,a,u},t.quantizeX=i,t.quantizeY=o,t.quantizeBounds=function(e,t,r){return t[0]=i(e,r[0]),t[3]=o(e,r[1]),t[2]=i(e,r[2]),t[1]=o(e,r[3]),t},t.quantizePoints=a,t.quantizeRings=u,t.quantizePaths=p,t.hydrateX=_,t.hydrateY=l,t.hydrateCoordsArray=c,t.hydrateCoordsArrayArray=h,t.hydrateBounds=function(e,t,r){return r?(t[0]=_(e,r[0]),t[1]=l(e,r[3]),t[2]=_(e,r[2]),t[3]=l(e,r[1]),t):[_(e,t[0]),l(e,t[3]),_(e,t[2]),l(e,t[1])]},t.hydratePoints=f,t.hydratePaths=d,t.hydrateRings=y,t.getQuantizedBoundsCoordsArray=E,t.getQuantizedBoundsCoordsArrayArray=g,t.getQuantizedBoundsPoints=function(e){var t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return E(t,t,e)},t.getQuantizedBoundsPaths=function(e){return g([0,0,0,0],e)},t.getQuantizedBoundsRings=function(e){return g([0,0,0,0],e)},t.quantizeExtent=m,t.quantizeMultipoint=T,t.quantizePoint=P,t.quantizePolygon=v,t.quantizePolyline=I,t.quantizeGeometry=function(e,t){return e&&t?r.isPoint(t)?P(e,{},t,!1,!1):r.isPolyline(t)?I(e,{},t,!1,!1):r.isPolygon(t)?v(e,{},t,!1,!1):r.isMultipoint(t)?T(e,{},t,!1,!1):r.isExtent(t)?m(e,{},t,!1,!1):null:null},t.hydrateExtent=function(e,t,r,n,i){return t.xmin=_(e,r.xmin),t.ymin=l(e,r.ymin),t.xmax=_(e,r.xmax),t.ymax=l(e,r.ymax),t!==r&&(n&&(t.zmin=r.zmin,t.zmax=r.zmax),i&&(t.mmin=r.mmin,t.mmax=r.mmax)),t},t.hydrateMultipoint=function(e,t,r,n,i){return t.points=f(e,r.points,n,i),t},t.hydratePoint=function(e,t,r,n,i){return t.x=_(e,r.x),t.y=l(e,r.y),t!==r&&(n&&(t.z=r.z),i&&(t.m=r.m)),t},t.hydratePolygon=function(e,t,r,n,i){return t.rings=y(e,r.rings,n,i),t},t.hydratePolyline=function(e,t,r,n,i){return t.paths=d(e,r.paths,n,i),t}}.apply(null,n))||(e.exports=i)},w7fK:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("xhoE"),r("H1tY"),r("qMld")],void 0===(i=function(e,t,n,i,o){function s(e){function r(e,t,r){e[t]=r(e[t])}t._pe=e,c.init(),h.init(),f.init(),d.init(),y.init(),t.PeGCSExtent=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.destroy=function(){t._pe.destroy(this)},r}(t._pe.PeGCSExtent);for(var i=0,o=[t._pe.PeDatum,t._pe.PeGeogcs,t._pe.PeGeogtran,t._pe.PeObject,t._pe.PeParameter,t._pe.PePrimem,t._pe.PeProjcs,t._pe.PeSpheroid,t._pe.PeUnit];i<o.length;i++){r(o[i].prototype,"getName",function(e){return function(){return e.call(this,new Array(c.PE_NAME_MAX))}})}for(var s=0,a=[t._pe.PeGeogtran,t._pe.PeProjcs];s<a.length;s++){r(a[s].prototype,"getParameters",function(e){return function(){for(var r=new Array(c.PE_PARM_MAX),n=e.call(this),i=0;i<r.length;i++){var o=t._pe.getValue(n,"*");r[i]=o?t._pe.wrapPointer(o,t._pe.PeParameter):null,n+=Int32Array.BYTES_PER_ELEMENT}return r}})}r(t._pe.PeHorizon.prototype,"getCoord",function(e){return function(){var t=this.getSize();if(!t)return null;var r=[];return _(r,t,e.call(this)),r}}),r(t._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(e){var r=t._pe._pe_getPeGTlistExtendedGTsSize();return function(){var n=null,i=e.call(this);if(!t._pe.compare(i,t._pe.NULL)){n=[i];var o=this.getSteps();if(o>1)for(var s=t._pe.getPointer(i),a=1;a<o;a++)n.push(t._pe.wrapPointer(s+r*a,t._pe.PeGTlistExtendedGTs))}return n}});var u=t._pe._pe_getPeHorizonSize(),p=function(e){return function(){var r=this._cache;if(r||(r=new Map,this._cache=r),r.has(e))return r.get(e);var n=null,i=e.call(this);if(!t._pe.compare(i,t._pe.NULL)){n=[i];var o=i.getNump();if(o>1)for(var s=t._pe.getPointer(i),a=1;a<o;a++)n.push(t._pe.wrapPointer(s+u*a,t._pe.PeHorizon))}return r.set(e,n),n}};r(t._pe.PeProjcs.prototype,"horizonGcsGenerate",p),r(t._pe.PeProjcs.prototype,"horizonPcsGenerate",p),t._pe.PeObject.prototype.toString=function(e){void 0===e&&(e=c.PE_STR_OPTS_NONE),t._pe.ensureCache.prepare();var r=t._pe.getPointer(this),n=t._pe.ensureInt8(new Array(c.PE_BUFFER_MAX));return t._pe.Pointer_stringify(t._pe._pe_object_to_string_ext(r,e,n))}}function a(e){if(e){var r=t._pe.getClass(e);if(r){var n=t._pe.getCache(r);if(n){var i=t._pe.getPointer(e);i&&delete n[i]}}}}function u(e,r){for(var n=[],i=new Array(r),o=0;o<e;o++)n.push(t._pe.ensureInt8(i));return n}function p(e){var t;return Array.isArray(e[0])?(t=[],e.forEach(function(e){t.push(e[0],e[1])})):t=e,t}function _(e,r,n,i){if(void 0===i&&(i=!1),i)for(var o=0;o<2*r;o++)e[o]=t._pe.getValue(n+o*Float64Array.BYTES_PER_ELEMENT,"double");else{var s=0===e.length;for(o=0;o<r;o++)s&&(e[o]=new Array(2)),e[o][0]=t._pe.getValue(n,"double"),e[o][1]=t._pe.getValue(n+Float64Array.BYTES_PER_ELEMENT,"double"),n+=2*Float64Array.BYTES_PER_ELEMENT}}var l,c,h,f,d,y;Object.defineProperty(t,"__esModule",{value:!0}),t._pe=null,t.isLoaded=function(){return!!t._pe},t.isSupported=function(){return!!i("esri-wasm")},t.load=function(){return l||(l=o.create(function(t,n){Promise.resolve().then(function(){var i=[r("2yfh")];(function(r){r({locateFile:function(t){return e.toUrl("./support/"+t)},onAbort:function(e){n(new Error(e))}}).then(function(e){s(e),t()})}).apply(null,i)}).catch(r.oe)}))},function(e){function r(e,r,n){t._pe.ensureCache.prepare();var i=p(n),o=n===i,s=t._pe.ensureFloat64(i),a=t._pe._pe_geog_to_proj(t._pe.getPointer(e),r,s);return a&&_(n,r,s,o),a}function n(e,t,r){return i(e,t,r,0)}function i(e,r,n,i){t._pe.ensureCache.prepare();var o=p(n),s=n===o,a=t._pe.ensureFloat64(o),u=t._pe._pe_proj_to_geog_center(t._pe.getPointer(e),r,a,i);return u&&_(n,r,a,s),u}e.geogToProj=r,e.projGeog=function(e,t,i,o){switch(o){case c.PE_TRANSFORM_P_TO_G:return n(e,t,i);case c.PE_TRANSFORM_G_TO_P:return r(e,t,i)}return 0},e.projToGeog=n,e.projToGeogCenter=i}(t.PeCSTransformations||(t.PeCSTransformations={})),function(e){e.init=function(){e.PE_BUFFER_MAX=t._pe.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=t._pe.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=t._pe.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=t._pe.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=t._pe.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=t._pe.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=t._pe.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=t._pe.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=t._pe.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=t._pe.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=t._pe.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=t._pe.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=t._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=t._pe.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=t._pe.PeDefs.prototype.PE_TYPE_UNIT,e.PE_STR_OPTS_NONE=t._pe.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=t._pe.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=t._pe.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=t._pe.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=t._pe.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=t._pe.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=t._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=t._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=t._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=t._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=t._pe.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=t._pe.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=t._pe.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=t._pe.PeDefs.prototype.PE_HORIZON_DELTA}}(c=t.PeDefs||(t.PeDefs={})),function(e){function r(e,r){var o=null,s=i[e];if(s||(s={},i[e]=s),s.hasOwnProperty(String(r)))o=s[r];else{var a=t._pe.PeFactory.prototype.factoryByType(e,r);t._pe.compare(a,t._pe.NULL)||(o=a,s[r]=o)}return n(o)}function n(e){if(e){var r=e.getType();switch(r){case c.PE_TYPE_GEOGCS:e=t._pe.castObject(e,t._pe.PeGeogcs);break;case c.PE_TYPE_PROJCS:e=t._pe.castObject(e,t._pe.PeProjcs);break;case c.PE_TYPE_GEOGTRAN:e=t._pe.castObject(e,t._pe.PeGeogtran);break;default:r&c.PE_TYPE_UNIT&&(e=t._pe.castObject(e,t._pe.PeUnit))}}return e}var i={},o={};e.initialize=function(){t._pe.PeFactory.prototype.initialize(null)},e.coordsys=function(e){return r(c.PE_TYPE_COORDSYS,e)},e.factoryByType=r,e.fromString=function(e,r){var i=null,s=o[e];if(s||(s={},o[e]=s),s.hasOwnProperty(r))i=s[r];else{var a=t._pe.PeFactory.prototype.fromString(e,r);t._pe.compare(a,t._pe.NULL)||(i=a,s[r]=i)}return n(i)},e.geogcs=function(e){return r(c.PE_TYPE_GEOGCS,e)},e.geogtran=function(e){return r(c.PE_TYPE_GEOGTRAN,e)},e.getCode=function(e){return t._pe.PeFactory.prototype.getCode(e)},e.projcs=function(e){return r(c.PE_TYPE_PROJCS,e)},e.unit=function(e){return r(c.PE_TYPE_UNIT,e)}}(t.PeFactory||(t.PeFactory={})),t.PeGCSExtent=null,function(e){var r;e.init=function(){e.PE_GTLIST_OPTS_COMMON=t._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,r=t._pe._pe_getPeGTlistExtendedEntrySize()},e.getGTlist=function(e,n,i,o,s,a){var u=null,p=new t._pe.PeInteger(a);try{var _=t._pe.PeGTlistExtended.prototype.getGTlist(e,n,i,o,s,p);if((a=p.val)&&(u=[_],a>1))for(var l=t._pe.getPointer(_),c=1;c<a;c++)u.push(t._pe.wrapPointer(l+r*c,t._pe.PeGTlistExtendedEntry))}finally{t._pe.destroy(p)}return u}}(h=t.PeGTlistExtended||(t.PeGTlistExtended={})),(t.PeGTlistExtendedEntry||(t.PeGTlistExtendedEntry={})).destroy=function(e){if(e&&e.length){for(var r=0,n=e;r<n.length;r++){var i=n[r];a(i),i.getEntries().forEach(function(e){a(e);var t=e.getGeogtran();a(t),t.getParameters().forEach(a),[t.getGeogcs1(),t.getGeogcs2()].forEach(function(e){a(e);var t=e.getDatum();a(t),a(t.getSpheroid()),a(e.getPrimem()),a(e.getUnit())})})}t._pe.PeGTlistExtendedEntry.prototype.Delete(e[0])}},(t.PeGTTransformations||(t.PeGTTransformations={})).geogToGeog=function(e,r,n,i,o){t._pe.ensureCache.prepare();var s=p(n),a=n===s,u=t._pe.ensureFloat64(s),l=0;i&&(l=t._pe.ensureFloat64(i));var c=t._pe._pe_geog_to_geog(t._pe.getPointer(e),r,u,l,o);return c&&_(n,r,u,a),c},function(e){function r(e,r,n,i,o,s){var a,_;switch(t._pe.ensureCache.prepare(),e){case"dd":a=t._pe._pe_geog_to_dd,_=c.PE_DD_MAX;break;case"ddm":a=t._pe._pe_geog_to_ddm,_=c.PE_DDM_MAX;break;case"dms":a=t._pe._pe_geog_to_dms,_=c.PE_DMS_MAX}var l=0;r&&(l=t._pe.getPointer(r));var h=p(i),f=t._pe.ensureFloat64(h),d=u(n,_),y=a(l,n,f,o,t._pe.ensureInt32(d));if(y)for(var E=0;E<n;E++)s[E]=t._pe.Pointer_stringify(d[E]);return y}function n(e,r,n,i,o){var s;switch(t._pe.ensureCache.prepare(),e){case"dd":s=t._pe._pe_dd_to_geog;break;case"ddm":s=t._pe._pe_ddm_to_geog;break;case"dms":s=t._pe._pe_dms_to_geog}var a=0;r&&(a=t._pe.getPointer(r));var u=i.map(function(e){return t._pe.ensureString(e)}),p=t._pe.ensureInt32(u),l=t._pe.ensureFloat64(new Array(2*n)),c=s(a,n,p,l);return c&&_(o,n,l),c}e.geog_to_dms=function(e,t,n,i,o){return r("dms",e,t,n,i,o)},e.dms_to_geog=function(e,t,r,i){return n("dms",e,t,r,i)},e.geog_to_ddm=function(e,t,n,i,o){return r("ddm",e,t,n,i,o)},e.ddm_to_geog=function(e,t,r,i){return n("ddm",e,t,r,i)},e.geog_to_dd=function(e,t,n,i,o){return r("dd",e,t,n,i,o)},e.dd_to_geog=function(e,t,r,i){return n("dd",e,t,r,i)}}(t.PeNotationDms||(t.PeNotationDms={})),function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=t._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=t._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},e.geog_to_mgrs_extended=function(e,r,n,i,o,s,a){t._pe.ensureCache.prepare();var _=0;e&&(_=t._pe.getPointer(e));var l=p(n),h=t._pe.ensureFloat64(l),f=u(r,c.PE_MGRS_MAX),d=t._pe.ensureInt32(f),y=t._pe._pe_geog_to_mgrs_extended(_,r,h,i,o,s,d);if(y)for(var E=0;E<r;E++)a[E]=t._pe.Pointer_stringify(f[E]);return y},e.mgrs_to_geog_extended=function(e,r,n,i,o){t._pe.ensureCache.prepare();var s=0;e&&(s=t._pe.getPointer(e));var a=n.map(function(e){return t._pe.ensureString(e)}),u=t._pe.ensureInt32(a),p=t._pe.ensureFloat64(new Array(2*r)),l=t._pe._pe_mgrs_to_geog_extended(s,r,u,i,p);return l&&_(o,r,p),l}}(f=t.PeNotationMgrs||(t.PeNotationMgrs={})),function(e){e.geog_to_usng=function(e,r,n,i,o,s,a){t._pe.ensureCache.prepare();var _=0;e&&(_=t._pe.getPointer(e));var l=p(n),h=t._pe.ensureFloat64(l),f=u(r,c.PE_MGRS_MAX),d=t._pe.ensureInt32(f),y=t._pe._pe_geog_to_usng(_,r,h,i,o,s,d);if(y)for(var E=0;E<r;E++)a[E]=t._pe.Pointer_stringify(f[E]);return y},e.usng_to_geog=function(e,r,n,i){t._pe.ensureCache.prepare();var o=0;e&&(o=t._pe.getPointer(e));var s=n.map(function(e){return t._pe.ensureString(e)}),a=t._pe.ensureInt32(s),u=t._pe.ensureFloat64(new Array(2*r)),p=t._pe._pe_usng_to_geog(o,r,a,u);return p&&_(i,r,u),p}}(t.PeNotationUsng||(t.PeNotationUsng={})),function(e){e.init=function(){e.PE_UTM_OPTS_NONE=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS},e.geog_to_utm=function(e,r,n,i,o){t._pe.ensureCache.prepare();var s=0;e&&(s=t._pe.getPointer(e));var a=p(n),_=t._pe.ensureFloat64(a),l=u(r,c.PE_UTM_MAX),h=t._pe.ensureInt32(l),f=t._pe._pe_geog_to_utm(s,r,_,i,h);if(f)for(var d=0;d<r;d++)o[d]=t._pe.Pointer_stringify(l[d]);return f},e.utm_to_geog=function(e,r,n,i,o){t._pe.ensureCache.prepare();var s=0;e&&(s=t._pe.getPointer(e));var a=n.map(function(e){return t._pe.ensureString(e)}),u=t._pe.ensureInt32(a),p=t._pe.ensureFloat64(new Array(2*r)),l=t._pe._pe_utm_to_geog(s,r,u,i,p);return l&&_(o,r,p),l}}(d=t.PeNotationUtm||(t.PeNotationUtm={})),function(e){var r=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=t._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=t._pe.PePCSInfo.prototype.PE_POLE_POINT},e.generate=function(n,i){var o,s;return void 0===i&&(i=e.PE_PCSINFO_OPTION_DOMAIN),r.has(n)&&(s=r.get(n))[i]&&(o=s[i]),o||(o=t._pe.PePCSInfo.prototype.generate(n,i),s||(s=[],r.set(n,s)),s[i]=o),o}}(y=t.PePCSInfo||(t.PePCSInfo={})),(t.PeVersion||(t.PeVersion={})).version_string=function(){return t._pe.PeVersion.prototype.version_string()},t._init=s}.apply(null,n))||(e.exports=i)},wIC5:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r("qMld"),r("w7fK"),r("Z4y+"),r("OkCb")],void 0===(i=function(e,t,n,i,o,s){function a(e,t,r,n,i){if(void 0===n&&(n=null),void 0===i&&(i=!1),null===n){var a=s.cacheKey(t,r);void 0!==l[a]?n=l[a]:(null===(n=u(t,r,null))&&(n=new s),l[a]=n)}return p._project(e,t,r instanceof o||!1===i?r:new o(r),n,i)}function u(e,t,r){void 0===r&&(r=null);var n=p._getTransformation(e,t,r);return null!==n?s.fromGE(n):null}Object.defineProperty(t,"__esModule",{value:!0});var p=null;t.isLoaded=function(){return!!p&&i.isLoaded()},t.isSupported=function(){return i.isSupported()};var _=null;t.load=function(){return _||(_=n.create(function(e,t){var n=i.load();r.e(15).then(function(){var o=[r("21p4")];(function(r){p=r,n.then(function(){p._enableProjection(i),e()},function(e){t(e)})}).apply(null,o)}).catch(r.oe)}))},t.project=function(e,t,r){return void 0===r&&(r=null),e instanceof Array?0===e.length?[]:a(e,e[0].spatialReference,t,r):a([e],e.spatialReference,t,r)[0]};var l={};t.projectMany=a,t.getTransformation=u,t.getTransformations=function(e,t,r){void 0===r&&(r=null);var n=p._getTransformationBySuitability(e,t,r);if(null!==n){for(var i=[],o=0,a=n;o<a.length;o++){var u=a[o];i.push(s.fromGE(u))}return i}return[]}}.apply(null,n))||(e.exports=i)}}]);
define(["require","exports","../tsSupport/assignHelper","../Error","../global"],function(e,r,b,c,s){var p;Object.defineProperty(r,"__esModule",{value:!0}),r.execute=function(l,u){void 0===u&&(u={});var i=u.responseType;i?"json"!==i&&"text"!==i&&"blob"!==i&&"array-buffer"!==i&&(i="text"):i="json";var e=u&&u.signal;return delete u.signal,s.invokeStaticMessage("request",{url:l,options:u},{signal:e}).then(function(e){var r,s,t,n,a=e.data;if(a&&!("json"!==i&&"text"!==i&&"blob"!==i||(r=new Blob([a]),"json"!==i&&"text"!==i||(p||(p=new FileReaderSync),s=p.readAsText(r),"json"!==i)))){try{t=JSON.parse(s||null)}catch(e){var o=b({},e,{url:l,requestOptions:u});throw new c("request:server",e.message,o)}if(t.error)throw o=b({},t.error,{url:l,requestOptions:u}),new c("request:server",t.error.message,o)}switch(i){case"json":n=t;break;case"text":n=s;break;case"blob":n=r;break;default:n=a}return{data:n,requestOptions:u,ssl:e.ssl,url:l}})}});